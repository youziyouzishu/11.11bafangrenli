import{d as N,r as h,b as q,o as m,x as A,aR as X,a as i,ae as s,a_ as e,aB as p,c as f,aW as x,y as Z,F as Y,ao as _,aT as L,b0 as K,aO as Q,L as B}from"./@vue-a164be7a.js";import{q as J,o as j,z as c,B as $,X as ee,_ as te}from"./@tencentcloud-7fc831ec.js";import"./adapter-vue-24f22062.js";import ae from"./index-ca5aad75.js";import{d as k}from"./documentLink-a7b030c0.js";import V from"./Icon-2c0593f3.js";import{s as oe}from"./star-light-645157ed.js";import{C as se}from"./constant-bad60a54.js";import{a as t,c as b,i as le}from"./env-a593fd1d.js";import{i as ie}from"./utils-14df48f1.js";import{O as ne}from"./index-0978e08a.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";import"./index-b5b8c0ea.js";import"./index-7909557f.js";const re="/admin/assets/evaluate-43b9a230.svg",ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABMCAYAAADHl1ErAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATvSURBVHgB7ZxhUttGFMffW8mJM8lMnS8FGTPIuUDdnoCcoL1B3V4gQw9QzAVa2gsUTtD0BM0RyAmsGaAq6Qf0hY5rW7vdR6zYGGykXUm7sv2b0QBm7JF+/ktP2qcVwIZqE4b/HF6GH65pod/BMhAs4iIMuwjst9nXUIiDZnP7GCzBKmGX4VVf/vDnXo6Gg3/bkggsgIElULrgviyiUXv6rAuWYI0wuSsuPF4h4huwBCuELUlXgh+GV9+CBVghbFm6EjhADyzAuLAU6Urwz8NwHwxjXFiadCU44Bg/LzMqLEO6bhEg9k2nzKgwFCxz9TOdMmPCzs9lUhA6kBHTKTMmzHHVk2IyZUaEUbooKaCIyZQZEcYcpn3mbiplpV98h2Hoc2B9yAEO/PWu572DEik9YTFnPcgJEykrNWF5piuh7JSVmrA805XAwCn1ory0hBWRrgQGvO15XgAlUFrCikhXAi/xWFZKwopMV4Icxn5ZxjB24QkjWQLdn6Fgnj57cXhx8SHzpVZWckkYSRmNeMd9UtuLx7ztuLgnxO11og8mEHAmh7WjOObvHZf141H83nUhyOM4l1pYv99v1GrPfXk06gjADnPgM/n2fbk05Bo2oCqQTAYByUQBgfxig/F4cJZ2d74j7I4UBJ8x3AOBHdmF8CslRQmMpIwzOeZ0m0wR8zPGasFodBPMykSSVK+/eCNPALtgaheyHiRhb4eDmwO8uLw6kRG1oiNjO4jwFmW3WcCGtERsErcN6YiYEOMj2JAK2Rs9Za1m81ge8DfSHkHKOtr1tnqfTivkkG+PZegRrhOJLPr9znnYRtp9ZmUR9870N9KmzMsiHrw02kh7WBax8FpynaUtkkUsvfheR2nLZBGPjlask7THZBGphnfWQVoaWUTq8bBVlpZWFpFpxHUVpWWRRWQeol4laVllEUpj+qsgTUUWodwEqbI0VVmEVteoitJ0ZBHabbYqSdOVReTSl7z86+/f5YD3N2AzQvyx09zWXsdcOt+IbMVbcFNyESa7KIW36LVB/AJyQFtYv39dlc63Tz1Y0ERbmOsO7E/XhNpz6urroS0MHayMMD6MtddVW5io0O0FCGhemIMsl4NpGTCm/+XmkbDK7JJUKYXQuzNCS1iFKmSCHwSB1vpqCatShUzQrZRawqpUIRN0K6WWsCpVyATdSqklrEoVMsFx9NZZN2GV2yUFiI5OpVQWVnCFDCZLETR0KqWysGIqJEby2z/Y8bbatAjg30EB4tx6XXndlYXlWyExopv6hoObdmvm0VctzzshcZMb/gLICRRYvrB8KuRU1K7n9RZNLqD/MeCvBeenkAOCq6+7sjD9CilOGMRfLhM1C017ae14XZrqpytOp1Iqj+nTI/dUDvqySr2Ty5HuLFqa3xRzOETGaI5B1u2Imtufv0TMvvlKwqhCPqkPr7O8Jy9R89DjGJhgP00eGpJ6e1SnCyrtkhkrZEDzslvediFzs+kzd5pbX8mK+r38k+ZkpjrJUq2USsLSVUikWRNdqnJlTGKfVNRXacWpVkolYfJcacmxa1r5PG8rl6qWhU/iRPwDfBT3IMu3YTGqN6Psy273n3MfJUXFv4wHg+MyphKngQrDWKZcruuPcHdbhay2r1QmnCpXyckzVw9pgimPx6fj0X89W0TNM62oztfSFV1N/Nqy6NmwK83/UkAsIDt3h2wAAAAASUVORK5CYII=",pe=["onClick"],ce=N({__name:"index",props:{starTotal:{type:Number,default:5}},emits:["onDialogPopupShowOrHide"],setup(O,{emit:R}){const I=O,y=R,r=h(),S=h(I.starTotal),n=h(-1),u=h(""),o=h();J.watch(j.CONV,{currentConversation:a=>{o.value=a}});const T=q(()=>u.value.length||n.value>=0),D=()=>{y("onDialogPopupShowOrHide",!0)},W=()=>{z(),y("onDialogPopupShowOrHide",!1)},F=()=>{var a,l;(t||le)&&window.open((l=(a=k)==null?void 0:a.customMessage)==null?void 0:l.url)},P=()=>{var a;(a=r==null?void 0:r.value)==null||a.toggleDialogDisplay(!1)},z=()=>{n.value=-1,u.value=""},G=a=>{n.value===a?n.value=n.value-1:n.value=a},H=()=>{var g,U,C,M,E,w;if(n.value<0&&!u.value.length)return;const a={data:JSON.stringify({businessID:se.EVALUATE,version:1,score:n.value+1,comment:u.value}),description:"对本次的服务评价",extension:"对本次的服务评价"},l={to:((U=(g=o==null?void 0:o.value)==null?void 0:g.groupProfile)==null?void 0:U.groupID)||((M=(C=o==null?void 0:o.value)==null?void 0:C.userProfile)==null?void 0:M.userID),conversationType:(E=o==null?void 0:o.value)==null?void 0:E.type,payload:a,needReadReceipt:ie()},v={conversation:o.value,payload:l.payload,messageType:$.TYPES.MSG_CUSTOM},d={offlinePushInfo:ne.create(v)};ee.sendCustomMessage(l,d),(w=r==null?void 0:r.value)==null||w.toggleDialogDisplay(!1)};return(a,l)=>(m(),A(ae,{ref_key:"container",ref:r,iconFile:e(re),title:"评价",needBottomPopup:!0,iconWidth:e(b)?"26px":"20px",iconHeight:e(b)?"26px":"20px",onOnDialogShow:D,onOnDialogClose:W},{default:X(()=>[i("div",{class:s(["evaluate",!e(t)&&"evaluate-h5"])},[i("div",{class:s(["evaluate-header",!e(t)&&"evaluate-h5-header"])},[i("div",{class:s(["evaluate-header-content",!e(t)&&"evaluate-h5-header-content"])},p(e(c).t("Evaluate.请对本次服务进行评价")),3),e(t)?Z("",!0):(m(),f("div",{key:0,class:s(["evaluate-header-close",!e(t)&&"evaluate-h5-header-close"]),onClick:x(P,["stop"])},p(e(c).t("关闭")),3))],2),i("div",{class:s(["evaluate-content",!e(t)&&"evaluate-h5-content"])},[i("ul",{class:s(["evaluate-content-list",!e(t)&&"evaluate-h5-content-list"])},[(m(!0),f(Y,null,_(e(S),(v,d)=>(m(),f("li",{key:d,class:s(["evaluate-content-list-item",!e(t)&&"evaluate-h5-content-list-item"]),onClick:x(g=>G(d),["stop"])},[d<=e(n)?(m(),A(V,{key:0,file:e(oe),width:e(t)?"20px":"30px",height:e(t)?"20px":"30px"},null,8,["file","width","height"])):(m(),A(V,{key:1,file:e(ue),width:e(t)?"20px":"30px",height:e(t)?"20px":"30px"},null,8,["file","width","height"]))],10,pe))),128))],2),L(i("textarea",{"onUpdate:modelValue":l[0]||(l[0]=v=>K(u)?u.value=v:null),class:s(["evaluate-content-text",!e(t)&&"evaluate-h5-content-text"])},null,2),[[Q,e(u)]]),i("div",{class:s(["evaluate-content-button",!e(t)&&"evaluate-h5-content-button"])},[i("button",{class:s(["btn",e(T)?"btn-valid":"btn-invalid"]),onClick:H},p(e(c).t("Evaluate.提交评价")),3)],2)],2),i("div",{class:s(["evaluate-adv",!e(t)&&"evaluate-h5-adv"])},[B(p(e(c).t("Evaluate.服务评价工具"))+" "+p("("+e(c).t("Evaluate.使用"))+" ",1),i("a",{onClick:l[1]||(l[1]=v=>F(e(k).customMessage))},p(e(c).t(`Evaluate.${e(k).customMessage.label}`)),1),B(" "+p(e(c).t("Evaluate.搭建")+")"),1)],2)],2)]),_:1},8,["iconFile","iconWidth","iconHeight"]))}});const We=te(ce,[["__scopeId","data-v-f4117d54"]]);export{We as default};
