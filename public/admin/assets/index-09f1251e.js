import{q as y,o as I,B as v,X as k,_ as P}from"./@tencentcloud-7fc831ec.js";import"./adapter-vue-24f22062.js";import F from"./index-ca5aad75.js";import{f as C}from"./files-37ebf78f.js";import{a as M,c as s}from"./env-a593fd1d.js";import{i as B}from"./utils-14df48f1.js";import{O}from"./index-0978e08a.js";import{d as T,r as d,o as b,x as D,aR as E,a as _,ae as R,a_ as i}from"./@vue-a164be7a.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";import"./Icon-2c0593f3.js";import"./index-b5b8c0ea.js";import"./index-7909557f.js";import"./constant-bad60a54.js";const W=T({__name:"index",setup(q){const a=d(),o=d();y.watch(I.CONV,{currentConversation:e=>{o.value=e}});const u=()=>{var e,t;s||(e=a==null?void 0:a.value)!=null&&e.click&&((t=a==null?void 0:a.value)==null||t.click())},g=e=>{var l,r,p,n,c,m,f;if(((r=(l=e==null?void 0:e.target)==null?void 0:l.files)==null?void 0:r.length)<=0)return;const t={to:((n=(p=o==null?void 0:o.value)==null?void 0:p.groupProfile)==null?void 0:n.groupID)||((m=(c=o==null?void 0:o.value)==null?void 0:c.userProfile)==null?void 0:m.userID),conversationType:(f=o==null?void 0:o.value)==null?void 0:f.type,payload:{file:e==null?void 0:e.target},needReadReceipt:B()},h={conversation:o.value,payload:t.payload,messageType:v.TYPES.MSG_FILE},x={offlinePushInfo:O.create(h)};k.sendFileMessage(t,x),e.target.value=""};return(e,t)=>(b(),D(F,{iconFile:i(C),title:"文件",iconWidth:i(s)?"32px":"21px",iconHeight:i(s)?"25px":"18px",needDialog:!1,onOnIconClick:u},{default:E(()=>[_("div",{class:R(["file-upload",!i(M)&&"file-upload-h5"])},[_("input",{ref_key:"inputRef",ref:a,title:"文件",type:"file","data-type":"file",accept:"*",onChange:g},null,544)],2)]),_:1},8,["iconFile","iconWidth","iconHeight"]))}});const se=P(W,[["__scopeId","data-v-27751d94"]]);export{se as default};
