import{k as de,x as _e,y as ue,K as me,L as fe,C as ve,A as be,H as ge,R as ye,F as Ce,c as ke,$ as he,a0 as Ve,a1 as we,Y as Ee,G as xe,t as De,v as $e,I as Ie}from"./element-plus-69d92160.js";import{_ as Te}from"./index.vue_vue_type_script_setup_true_lang-3ac3301c.js";import{_ as Fe}from"./index.vue_vue_type_script_setup_true_lang-ff475c87.js";import{d as z,r as U,b5 as Se,b2 as Ue,w as Re,aq as Le,ar as Pe,o as p,c as O,M as t,aR as a,a_ as l,F as Be,ao as qe,x as _,L as i,aT as v,b0 as R,a as E,aB as k,aW as L,aP as x,y as Ne,b7 as Ge}from"./@vue-a164be7a.js";import{u as Me}from"./usePaging-6e60bb31.js";import{u as je}from"./useDictOptions-8702f1a7.js";import{f as W}from"./index-90bac5cf.js";import{d as Y,e as Ae,f as He}from"./e_contract-7b3228bb.js";import"./lodash-f986f62a.js";import{_ as Ke}from"./edit.vue_vue_type_script_setup_true_name_eContractEdit_lang-602deebd.js";import{u as Oe,a as We}from"./vue-router-b1515852.js";import"./lodash-es-fbce1780.js";import"./async-validator-dee29e8b.js";import"./@element-plus-21ebab28.js";import"./dayjs-0ab82212.js";import"./@tencentcloud-7fc831ec.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./normalize-wheel-es-ed76fb12.js";import"./@vueuse-ebd2cc93.js";import"./axios-9669b5e1.js";import"./css-color-function-7acc3e97.js";import"./color-9254db0b.js";import"./clone-db6b0f3b.js";import"./color-convert-946e453a.js";import"./color-name-b7949e8c.js";import"./color-string-6fa48439.js";import"./balanced-match-51764fed.js";import"./ms-f6814399.js";import"./nprogress-e3c843bc.js";import"./vue-clipboard3-b827321c.js";import"./clipboard-e27f968b.js";import"./echarts-d6620a89.js";import"./zrender-9797a04d.js";import"./tslib-54e39b60.js";import"./highlight.js-7476ba27.js";import"./@highlightjs-10fbb12e.js";import"./path-to-regexp-767716ea.js";import"./index-943d816c.js";const Ye={class:"mt-4"},ze={class:"flex mt-4 justify-end"},Je={class:"mt-4"},Qe={class:"flex mt-4 justify-end"},Xe=z({name:"eContractLists"}),Jt=z({...Xe,setup(Ze){const b=U("send_contract"),D=Se(),$=U(!1),P=Oe(),J=We(),c=Ue({template_id:"",user_id:"",to_user_id:"",type:"",send_psn_id:"",send_org_id:"",accept_psn_id:"",accept_org_id:"",name:"",is_send:"",status:"",signFlowId:"",contract_file:"",active_name:"send_contract"}),Q=U([]);b.value=P.query.type??"send_contract",c.active_name=b.value,Re(()=>b.value,(n,o)=>{c.active_name=n,J.push({query:{...P.query,type:c.active_name}})});const X=()=>{},B=n=>{Q.value=n.map(({id:o})=>o)},{dictData:g}=je("sign_status,sign_type"),{pager:d,getLists:h,resetParams:Z,resetPage:ee}=Me({fetchFun:He,params:c}),q=async n=>{var o,C;$.value=!0,await Ge(),(o=D.value)==null||o.open("edit"),(C=D.value)==null||C.setFormData(n)},N=async n=>{await W.confirm("去签署合同？");const o=await Y({id:n});window.open(o.data.url,"_blank")},te=async n=>{await W.confirm("支付宝扫码后查阅合同");const o=await Y({id:n});window.open(o.data.url,"_blank")},ae=async n=>{const o=await Ae({id:n});window.open(o.data.files[0].downloadUrl,"_blank")};h();const I=async n=>{const o=document.createElement("input");o.value=n,document.body.appendChild(o),o.select(),document.execCommand("Copy"),de({type:"success",message:"复制成功"}),o.remove()};return(n,o)=>{const C=_e,V=ue,G=me,oe=fe,u=ve,le=be,M=ge,ne=ye,r=Ce,T=Le("CopyDocument"),F=ke,S=he,se=Ve,ie=we,re=Ee,w=Fe,j=xe,A=Te,H=De,ce=$e,y=Pe("perms"),pe=Ie;return p(),O("div",null,[t(M,{class:"!border-none mb-4",shadow:"never"},{default:a(()=>[t(le,{class:"mb-[-16px]",model:l(c),inline:""},{default:a(()=>[t(V,{label:"参与合同",prop:"to_user_id"},{default:a(()=>[t(C,{class:"w-[200px]",modelValue:l(c).to_user_id,"onUpdate:modelValue":o[0]||(o[0]=e=>l(c).to_user_id=e),clearable:"",placeholder:"请输入参与合同"},null,8,["modelValue"])]),_:1}),t(V,{label:"合同名称",prop:"name"},{default:a(()=>[t(C,{class:"w-[200px]",modelValue:l(c).name,"onUpdate:modelValue":o[1]||(o[1]=e=>l(c).name=e),clearable:"",placeholder:"请输入合同名称"},null,8,["modelValue"])]),_:1}),t(V,{label:"签署状态",prop:"type"},{default:a(()=>[t(oe,{class:"w-[280px]",modelValue:l(c).status,"onUpdate:modelValue":o[2]||(o[2]=e=>l(c).status=e),clearable:"",placeholder:"请选签署状态"},{default:a(()=>[t(G,{label:"全部",value:""}),(p(!0),O(Be,null,qe(l(g).sign_status,(e,s)=>(p(),_(G,{key:s,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(V,null,{default:a(()=>[t(u,{type:"primary",onClick:l(ee)},{default:a(()=>[i("查询")]),_:1},8,["onClick"]),t(u,{onClick:l(Z)},{default:a(()=>[i("重置")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(ne,{type:"error",class:"mb-3",title:"合同发起签署请在项目审核中发起",closable:!1,"show-icon":""}),v((p(),_(M,{class:"!border-none",shadow:"never"},{default:a(()=>[t(ce,{modelValue:l(b),"onUpdate:modelValue":o[5]||(o[5]=e=>R(b)?b.value=e:null),onTabClick:X},{default:a(()=>[t(H,{label:"我发起的合同",name:"send_contract"},{default:a(()=>[E("div",Ye,[t(j,{data:l(d).lists,onSelectionChange:B},{default:a(()=>[t(r,{width:"320",label:"合同 ID",prop:"signFlowId","show-overflow-tooltip":""}),t(r,{label:"合同名称",prop:"name","show-overflow-tooltip":""}),t(r,{label:"参与者名称",prop:"to_user_id"},{default:a(({row:e})=>[t(re,{effect:"light",trigger:"hover",placement:"top",width:"auto"},{default:a(()=>{var s;return[t(se,{title:(s=e.personalVerification)==null?void 0:s.name,column:2,border:""},{default:a(()=>[t(S,{label:"姓名","label-align":"right",align:"center","label-class-name":"my-label","class-name":"my-content"},{default:a(()=>{var m;return[i(k((m=e.personalVerification)==null?void 0:m.psn_name)+" ",1),t(F,{onClick:L(K=>{var f;return I((f=e.personalVerification)==null?void 0:f.psn_name)},["prevent"]),style:{cursor:"pointer"}},{default:a(()=>[t(T)]),_:2},1032,["onClick"])]}),_:2},1024),t(S,{label:"电话","label-align":"right",align:"center"},{default:a(()=>{var m;return[i(k((m=e.personalVerification)==null?void 0:m.psn_mobile),1),t(F,{onClick:L(K=>{var f;return I((f=e.personalVerification)==null?void 0:f.psn_mobile)},["prevent"]),style:{cursor:"pointer"}},{default:a(()=>[t(T)]),_:2},1032,["onClick"])]}),_:2},1024),t(S,{label:"身份证号","label-align":"right",align:"center"},{default:a(()=>{var m;return[i(k((m=e.personalVerification)==null?void 0:m.psn_id_card_num)+" ",1),t(F,{onClick:L(K=>{var f;return I((f=e.personalVerification)==null?void 0:f.psn_id_card_num)},["prevent"]),style:{cursor:"pointer"}},{default:a(()=>[t(T)]),_:2},1032,["onClick"])]}),_:2},1024)]),_:2},1032,["title"])]}),reference:a(()=>[t(ie,null,{default:a(()=>{var s;return[i(k((s=e.personalVerification)==null?void 0:s.psn_name),1)]}),_:2},1024)]),_:2},1024)]),_:1}),t(r,{label:"参与者类型",prop:"type"},{default:a(({row:e})=>[t(w,{options:l(g).sign_type,value:e.type},null,8,["options","value"])]),_:1}),t(r,{label:"状态",prop:"status"},{default:a(({row:e})=>[t(w,{options:l(g).sign_status,value:e.status},null,8,["options","value"])]),_:1}),t(r,{label:"操作",width:"120",fixed:"right"},{default:a(({row:e})=>[v((p(),_(u,{type:"primary",link:"",onClick:s=>q(e)},{default:a(()=>[i(" 编辑 ")]),_:2},1032,["onClick"])),[[y,["e_contract/edit"]]]),v((p(),_(u,{type:"danger",link:"",onClick:s=>N(e.id)},{default:a(()=>[i(" 去签署 ")]),_:2},1032,["onClick"])),[[y,["e_contract/delete"]],[x,e.status==0||e.status==1]])]),_:1})]),_:1},8,["data"])]),E("div",ze,[t(A,{modelValue:l(d),"onUpdate:modelValue":o[3]||(o[3]=e=>R(d)?d.value=e:null),onChange:l(h)},null,8,["modelValue","onChange"])])]),_:1}),t(H,{label:"八方人力平台合作合同",name:"plant_contract"},{default:a(()=>[E("div",Je,[t(j,{data:l(d).lists,onSelectionChange:B},{default:a(()=>[t(r,{width:"320",label:"合同 ID",prop:"signFlowId","show-overflow-tooltip":""}),t(r,{label:"合同名称",prop:"name","show-overflow-tooltip":""}),t(r,{label:"参与者名称",prop:"to_user_id"},{default:a(({row:e})=>[i(k(e.to_user_id==1?"八方平台":e.to_user_id),1)]),_:1}),t(r,{label:"参与者类型",prop:"type"},{default:a(({row:e})=>[t(w,{options:l(g).sign_type,value:e.type},null,8,["options","value"])]),_:1}),t(r,{label:"状态",prop:"status"},{default:a(({row:e})=>[t(w,{options:l(g).sign_status,value:e.status},null,8,["options","value"])]),_:1}),t(r,{label:"操作",width:"200",fixed:"right"},{default:a(({row:e})=>[v((p(),_(u,{type:"primary",link:"",onClick:s=>q(e)},{default:a(()=>[i(" 编辑 ")]),_:2},1032,["onClick"])),[[y,["e_contract/edit"]]]),v((p(),_(u,{type:"danger",link:"",onClick:s=>N(e.id)},{default:a(()=>[i(" 去签署 ")]),_:2},1032,["onClick"])),[[y,["e_contract/delete"]],[x,e.status==0||e.status==1]]),v((p(),_(u,{type:"success",link:"",onClick:s=>te(e.id)},{default:a(()=>[i(" 查看合同 ")]),_:2},1032,["onClick"])),[[y,["e_contract/delete"]],[x,e.status==2]]),v((p(),_(u,{type:"success",link:"",onClick:s=>ae(e.id)},{default:a(()=>[i(" 下载合同 ")]),_:2},1032,["onClick"])),[[y,["e_contract/delete"]],[x,e.status==2]])]),_:1})]),_:1},8,["data"])]),E("div",Qe,[t(A,{modelValue:l(d),"onUpdate:modelValue":o[4]||(o[4]=e=>R(d)?d.value=e:null),onChange:l(h)},null,8,["modelValue","onChange"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[pe,l(d).loading]]),l($)?(p(),_(Ke,{key:0,ref_key:"editRef",ref:D,"dict-data":l(g),onSuccess:l(h),onClose:o[6]||(o[6]=e=>$.value=!1)},null,8,["dict-data","onSuccess"])):Ne("",!0)])}}});export{Jt as default};
