import{y as C,N as B,O as q,x as F,A as I}from"./element-plus-69d92160.js";import{P as j}from"./index-943d816c.js";import{f as w}from"./index-90bac5cf.js";import{d as D,b5 as v,b2 as M,b as P,w as y,o as S,x as U,aR as t,a as A,M as a,a_ as n,L as s,aB as V}from"./@vue-a164be7a.js";const G={class:"pr-8"},H=D({__name:"account-adjust",props:{show:{type:Boolean,required:!0},value:{type:[Number,String],required:!0}},emits:["update:show","confirm"],setup(d,{emit:h}){const u=v(),i=d,c=h,o=M({action:1,num:"",remark:""}),m=v(),f=P(()=>Number(i.value)+Number(o.num)*(o.action==1?1:-1)),k={num:[{required:!0,message:"请输入调整的金额"}]},x=e=>{if(e.includes("-"))return w.msgError("请输入正整数");o.num=e},R=async()=>{var e;await((e=u.value)==null?void 0:e.validate()),c("confirm",o)},E=()=>{var e;c("update:show",!1),(e=u.value)==null||e.resetFields()};return y(()=>i.show,e=>{var r,l;e?(r=m.value)==null||r.open():(l=m.value)==null||l.close()}),y(f,e=>{e<0&&(w.msgError("调整后余额需大于0"),o.num="")}),(e,r)=>{const l=C,_=B,N=q,b=F,g=I;return S(),U(j,{ref_key:"popupRef",ref:m,title:"余额调整",width:"500px",onConfirm:R,async:!0,onClose:E},{default:t(()=>[A("div",G,[a(g,{ref_key:"formRef",ref:u,model:n(o),"label-width":"120px",rules:k},{default:t(()=>[a(l,{label:"当前余额"},{default:t(()=>[s("¥ "+V(d.value),1)]),_:1}),a(l,{label:"余额增减",required:"",prop:"action"},{default:t(()=>[a(N,{modelValue:n(o).action,"onUpdate:modelValue":r[0]||(r[0]=p=>n(o).action=p)},{default:t(()=>[a(_,{label:1},{default:t(()=>[s("增加余额")]),_:1}),a(_,{label:2},{default:t(()=>[s("扣减余额")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(l,{label:"调整余额",prop:"num"},{default:t(()=>[a(b,{"model-value":n(o).num,placeholder:"请输入调整的金额",type:"number",onInput:x},null,8,["model-value"])]),_:1}),a(l,{label:"调整后余额"},{default:t(()=>[s(" ¥ "+V(n(f)),1)]),_:1}),a(l,{label:"备注",prop:"remark"},{default:t(()=>[a(b,{modelValue:n(o).remark,"onUpdate:modelValue":r[1]||(r[1]=p=>n(o).remark=p),type:"textarea",rows:4},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},512)}}});export{H as _};
