import{A as R}from"./element-plus-69d92160.js";import{P as x}from"./index-943d816c.js";import{a as k,b as A,c as C}from"./admin_msg-43fe7573.js";import{t as l}from"./index-90bac5cf.js";import{d as f,b5 as d,r as D,b as E,b2 as p,o as q,c as F,M as u,aR as B,a_ as i}from"./@vue-a164be7a.js";const P={class:"edit-popup"},j=f({name:"adminMsgEdit"}),G=f({...j,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(N,{expose:_,emit:y}){const m=y,n=d(),o=d(),r=D("add"),g=E(()=>r.value=="edit"?"编辑消息中心":"新增消息中心"),s=p({id:""}),h=p({msg_type:[{required:!0,message:"请选择类型",trigger:["blur"]}],title:[{required:!0,message:"请输入标题",trigger:["blur"]}],message:[{required:!0,message:"请输入内容",trigger:["blur"]}]}),c=async t=>{for(const e in s)t[e]!=null&&t[e]!=null&&(s[e]=t[e]);s.review_time=l(s.review_time,"yyyy-mm-dd hh:MM:ss"),s.create_time=l(s.create_time,"yyyy-mm-dd hh:MM:ss")},v=async t=>{const e=await k({id:t.id});c(e)},b=async()=>{var e,a;await((e=n.value)==null?void 0:e.validate());const t={...s};r.value=="edit"?await A(t):await C(t),(a=o.value)==null||a.close(),m("success")},w=(t="add")=>{var e;r.value=t,(e=o.value)==null||e.open()},M=()=>{m("close")};return _({open:w,setFormData:c,getDetail:v}),(t,e)=>{const a=R;return q(),F("div",P,[u(x,{ref_key:"popupRef",ref:o,title:i(g),async:!0,width:"550px",onConfirm:b,onClose:M},{default:B(()=>[u(a,{ref_key:"formRef",ref:n,model:i(s),"label-width":"90px",rules:i(h)},null,8,["model","rules"])]),_:1},8,["title"])])}}});export{G as _};
