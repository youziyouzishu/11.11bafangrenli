import{x as W,y as J,K as Q,L as X,C as Y,A as Z,H as ee,F as te,a7 as oe,a1 as ae,G as le,I as ne}from"./element-plus-69d92160.js";import{_ as se}from"./index.vue_vue_type_script_setup_true_lang-3ac3301c.js";import{j as x,f as ie,b as re}from"./index-90bac5cf.js";import{u as pe}from"./usePaging-6e60bb31.js";import{u as me}from"./useDictOptions-8702f1a7.js";import{_ as ce,a as de,b as _e}from"./edit.vue_vue_type_style_index_0_lang-190e95f2.js";import{d as R,b5 as ue,r as D,b2 as fe,aq as be,ar as ke,o as i,x as p,aR as o,M as e,a_ as a,c as ye,F as he,ao as ge,L as r,aT as u,a as F,aB as w,b0 as je,y as ve,b7 as L}from"./@vue-a164be7a.js";import"./lodash-f986f62a.js";import{P as Ce}from"./auth-a2fa6179.js";import"./lodash-es-fbce1780.js";import"./async-validator-dee29e8b.js";import"./@element-plus-21ebab28.js";import"./dayjs-0ab82212.js";import"./@tencentcloud-7fc831ec.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./normalize-wheel-es-ed76fb12.js";import"./@vueuse-ebd2cc93.js";import"./axios-9669b5e1.js";import"./vue-router-b1515852.js";import"./css-color-function-7acc3e97.js";import"./color-9254db0b.js";import"./clone-db6b0f3b.js";import"./color-convert-946e453a.js";import"./color-name-b7949e8c.js";import"./color-string-6fa48439.js";import"./balanced-match-51764fed.js";import"./ms-f6814399.js";import"./nprogress-e3c843bc.js";import"./vue-clipboard3-b827321c.js";import"./clipboard-e27f968b.js";import"./echarts-d6620a89.js";import"./zrender-9797a04d.js";import"./tslib-54e39b60.js";import"./highlight.js-7476ba27.js";import"./@highlightjs-10fbb12e.js";import"./path-to-regexp-767716ea.js";import"./index.vue_vue_type_style_index_0_lang-b9a3a5be.js";import"./@wangeditor-6af644b9.js";import"./index-4f4d97b3.js";import"./index-8d613ba7.js";import"./index-943d816c.js";import"./index-e65fd93b.js";import"./index.vue_vue_type_script_setup_true_lang-6fb43bf5.js";import"./vue3-video-play-2f8ccca9.js";import"./vuedraggable-93e8938c.js";import"./sortablejs-745ca832.js";import"./index-46e95ab2.js";import"./element-china-area-data-0d190cbe.js";const xe={class:"mt-4"},we={class:"flex mt-4 justify-end"},Ve=R({name:"projectTasksLists"}),Rt=R({...Ve,setup(Ee){const f=ue(),b=D(!1),c=fe({project_name:"",task_description:""}),v=D([]),S=l=>{v.value=l.map(({id:n})=>n)},$=l=>{l.includes("unlimited")&&l.length>1?c.project_name.value=["unlimited"]:(l.length===0||!l.includes("unlimited"))&&(l=l)},{dictData:V}=me("education,experience,welfare"),{pager:d,getLists:k,resetParams:B,resetPage:q}=pe({fetchFun:_e,params:c}),U=async()=>{var l;b.value=!0,await L(),(l=f.value)==null||l.open("add")},N=async l=>{var n,y;b.value=!0,await L(),(n=f.value)==null||n.open("edit"),(y=f.value)==null||y.setFormData(l)},E=async l=>{await ie.confirm("确定要关闭招聘项目？"),await de({id:l}),k()},I=(l,n)=>l.is_show!==1;return k(),(l,n)=>{const y=W,h=J,P=Q,A=X,m=Y,K=Z,z=ee,g=re,s=te,C=be("router-link"),G=oe,T=ae,H=le,M=se,j=ke("perms"),O=ne;return i(),p(Ce,null,{default:o(()=>[e(z,{class:"!border-none mb-4",shadow:"never"},{default:o(()=>[e(K,{class:"mb-[-16px]",model:a(c),inline:""},{default:o(()=>[e(h,{label:"项目名称",prop:"project_name"},{default:o(()=>[e(y,{class:"w-[280px]",modelValue:a(c).project_name,"onUpdate:modelValue":n[0]||(n[0]=t=>a(c).project_name=t),clearable:"",placeholder:"请输入项目名称"},null,8,["modelValue"])]),_:1}),e(h,{label:"福利",prop:"msg_type"},{default:o(()=>[e(A,{multiple:"","collapse-tags":"","multiple-limit":5,class:"w-[280px]",modelValue:a(c).project_name,"onUpdate:modelValue":n[1]||(n[1]=t=>a(c).project_name=t),clearable:"",placeholder:"请选择类型",onChange:$},{default:o(()=>[e(P,{label:"不限",value:"unlimited"}),(i(!0),ye(he,null,ge(a(V).welfare,(t,_)=>(i(),p(P,{key:_,label:t.name,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(h,null,{default:o(()=>[e(m,{type:"primary",onClick:a(q)},{default:o(()=>[r("查询")]),_:1},8,["onClick"]),e(m,{onClick:a(B)},{default:o(()=>[r("重置")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),u((i(),p(z,{class:"!border-none",shadow:"never"},{default:o(()=>[u((i(),p(m,{type:"primary",onClick:U},{icon:o(()=>[e(g,{name:"el-icon-Plus"})]),default:o(()=>[r(" 发布 ")]),_:1})),[[j,["project_tasks/add"]]]),u((i(),p(m,{disabled:!a(v).length,onClick:n[2]||(n[2]=t=>E(a(v)))},{default:o(()=>[r(" 关闭 ")]),_:1},8,["disabled"])),[[j,["project_tasks/close"]]]),F("div",xe,[e(H,{data:a(d).lists,onSelectionChange:S},{default:o(()=>[e(s,{type:"selection",width:"55",selectable:I}),e(s,{label:"项目名称",prop:"project_name","show-overflow-tooltip":""}),e(s,{label:"招聘成本",prop:"salary_range"},{default:o(({row:t})=>[e(m,{type:"text"},{default:o(()=>[e(C,{to:{path:a(x)("project_tasks_audit/index"),query:{project_id:t.id,type:"2",project_name:t.project_name}}},{default:o(()=>[r(w(t.recruitment_settlement_value)+"元 ",1)]),_:2},1032,["to"]),e(g,{size:20,name:"local-icon-kezizhongxin"})]),_:2},1024)]),_:1}),e(s,{label:"驻场成本",prop:"site_settlement_value"},{default:o(({row:t})=>[e(m,{type:"text"},{default:o(()=>[e(C,{to:{path:a(x)("project_tasks_audit/index"),query:{project_id:t.id,type:"3",project_name:t.project_name}}},{default:o(()=>[r(w(t.site_settlement_value)+"元 ",1)]),_:2},1032,["to"]),e(g,{size:20,name:"local-icon-kezizhongxin"})]),_:2},1024)]),_:1}),e(s,{label:"薪资范围",prop:"salary_range"},{default:o(({row:t})=>[e(m,{type:"text"},{default:o(()=>[e(C,{to:{path:a(x)("project_tasks_audit/index"),query:{project_id:t.id,type:"1",project_name:t.project_name}}},{default:o(()=>[r(w(t.is_salary==2?t.salary_range+" ~ "+t.salary_range_end+" K / 月":"面议"),1)]),_:2},1032,["to"]),e(g,{size:20,name:"local-icon-kezizhongxin"})]),_:2},1024)]),_:1}),e(s,{label:"发布人",prop:"nickname","show-overflow-tooltip":""}),e(s,{label:"阅读数",prop:"click_actual","show-overflow-tooltip":""}),e(s,{label:"发布日期",prop:"recruitment_start_time",width:"205","show-overflow-tooltip":""}),e(s,{label:"综合评分",prop:"project_score"},{default:o(({row:t})=>[e(h,{label:"",prop:"score",style:{"margin-top":"17px"}},{default:o(()=>[e(G,{modelValue:t.project_score,"onUpdate:modelValue":_=>t.project_score=_,max:5,disabled:!0},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:1}),e(s,{label:"状态",prop:"is_show",width:"105","show-overflow-tooltip":""},{default:o(({row:t})=>[t.is_show==0?(i(),p(T,{key:0,type:"success"},{default:o(()=>[r("已发布")]),_:1})):(i(),p(T,{key:1,type:"danger"},{default:o(()=>[r("已关闭")]),_:1}))]),_:1}),e(s,{label:"操作",width:"120",fixed:"right"},{default:o(({row:t})=>[u((i(),p(m,{disabled:t.is_show==1,type:"primary",link:"",onClick:_=>N(t)},{default:o(()=>[r(" 编辑 ")]),_:2},1032,["disabled","onClick"])),[[j,["project_tasks/edit"]]]),u((i(),p(m,{disabled:t.is_show==1,type:"danger",link:"",onClick:_=>E(t.id)},{default:o(()=>[r(" 关闭 ")]),_:2},1032,["disabled","onClick"])),[[j,["project_tasks/close"]]])]),_:1})]),_:1},8,["data"])]),F("div",we,[e(M,{modelValue:a(d),"onUpdate:modelValue":n[3]||(n[3]=t=>je(d)?d.value=t:null),onChange:a(k)},null,8,["modelValue","onChange"])])]),_:1})),[[O,a(d).loading]]),a(b)?(i(),p(ce,{key:0,ref_key:"editRef",ref:f,"dict-data":a(V),onSuccess:a(k),onClose:n[4]||(n[4]=t=>b.value=!1)},null,8,["dict-data","onSuccess"])):ve("",!0)]),_:1})}}});export{Rt as default};
