import"./adapter-vue-24f22062.js";import{q as a,o as s,I as N,i as E,_ as U}from"./@tencentcloud-7fc831ec.js";import _ from"./index-a93d99ed.js";import{S as A,s as P}from"./index-02a532b6.js";import H from"./index-a6352ef7.js";import q from"./index-fc18fb49.js";import{s as F}from"./search-type-list-f8ecda48.js";import{c as t,a as o}from"./env-a593fd1d.js";import"./type-b7afadd9.js";import{d as O,r as m,b as $,aZ as z,a$ as G,a_ as r,o as i,c as T,ae as l,a as W,M as p,x as M,y as u,aR as f}from"./@vue-a164be7a.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";import"./Icon-2c0593f3.js";import"./search-aefae6e3.js";import"./input-close-0334b363.js";import"./dayjs-0ab82212.js";import"./index-7552e016.js";import"./date-picker-panel-c0a79893.js";import"./date-table-8e59b520.js";import"./down-icon-f2c30b56.js";import"./close-dark-98fe05f7.js";import"./index-33a5e791.js";import"./message-abstract-text-a56998d2.js";import"./index-7909557f.js";import"./constant-bad60a54.js";import"./message-abstract-file-c22ad605.js";import"./message-abstract-custom-c473a1e7.js";import"./type-check-5e73d261.js";import"./star-light-645157ed.js";import"./message-abstract-image-ba75a391.js";import"./message-abstract-video-da9ef47d.js";import"./video-play-6934d780.js";import"./index-cfdb213d.js";import"./index-e4ac2ab7.js";import"./index-adb923fe.js";import"./index-5a1654d8.js";import"./index-bd812f53.js";import"./right-icon-89a49395.js";import"./enableSampleTaskStatus-a12ec87d.js";const Z=O({__name:"index",props:{searchType:{default:()=>t?"conversation":"global"}},setup(V){const c=V,y=m(),d=m(""),h=m(!1),n=m(t),B=$(()=>!o&&(c.searchType==="global"&&h.value||c.searchType==="conversation"&&n.value)),C=e=>{a.update(s.SEARCH,"currentSearchInputValue",{value:"",searchType:e}),a.update(s.SEARCH,"currentSearchMessageType",{value:F[e],searchType:e}),a.update(s.SEARCH,"currentSearchMessageTime",{value:P,searchType:e})};function g(e){!t&&d.value!==e&&I(),d.value=e}function b(e){var S,R,w,k;(e==null?void 0:e.searchType)===c.searchType&&(h.value=e==null?void 0:e.isSearching,(e==null?void 0:e.searchType)==="global"&&y.value&&o&&e.isSearching&&N.listen({domRefs:y.value,handler:D}),(e==null?void 0:e.searchType)==="global"&&t&&(e.isSearching?(R=(S=E)==null?void 0:S.hideTabBar())==null||R.catch(()=>{}):(k=(w=E)==null?void 0:w.showTabBar())==null||k.catch(()=>{})))}function v(e){n.value=!!e,n.value&&C(c.searchType)}z(()=>{["global","conversation"].forEach(e=>{C(e)}),a.watch(s.CONV,{currentConversationID:g}),a.watch(s.SEARCH,{currentSearchingStatus:b,isShowInConversationSearch:v})}),G(()=>{a.unwatch(s.CONV,{currentConversationID:g}),a.unwatch(s.SEARCH,{currentSearchingStatus:b,isShowInConversationSearch:v})});function D(){a.update(s.SEARCH,"currentSearchingStatus",{isSearching:!1,searchType:c.searchType})}function I(){a.update(s.SEARCH,"isShowInConversationSearch",!1)}return(e,S)=>e.searchType==="global"||(e.searchType==="conversation"||!e.searchType&&r(t))&&r(n)?(i(),T("div",{key:0,class:l(["tui-search",!r(o)&&"tui-search-h5",`tui-search-main-${e.searchType?e.searchType:"conversation"}`,r(B)&&"tui-search-h5-full-screen"])},[e.searchType==="global"?(i(),T("div",{key:0,ref_key:"globalSearchRef",ref:y,class:l(["tui-search-global",!r(o)&&"tui-search-h5-global"])},[W("div",{class:l(["tui-search-global-header",!r(o)&&"tui-search-h5-global-header"])},[p(_,{class:"search-input",searchType:e.searchType},null,8,["searchType"]),r(o)||!r(h)?(i(),M(q,{key:0,class:"search-more",searchType:e.searchType},null,8,["searchType"])):u("",!0)],2),r(h)?(i(),M(A,{key:0,class:"search-container",popupPosition:"bottom",searchType:e.searchType},{result:f(()=>[p(H,{class:"search-result",searchType:e.searchType},null,8,["searchType"])]),_:1},8,["searchType"])):u("",!0)],2)):e.searchType==="conversation"&&r(n)||r(t)?(i(),T("div",{key:1,class:l(["tui-search-conversation",!r(o)&&"tui-search-h5-conversation"])},[p(A,{class:"search-container",popupPosition:"aside",searchType:e.searchType?e.searchType:"conversation",onCloseInConversationSearch:I},{input:f(()=>[p(_,{searchType:e.searchType?e.searchType:"conversation"},null,8,["searchType"])]),result:f(()=>[p(H,{class:"search-result",searchType:e.searchType?e.searchType:"conversation"},null,8,["searchType"])]),_:1},8,["searchType"])],2)):u("",!0)],2)):u("",!0)}});const Oe=U(Z,[["__scopeId","data-v-dc381e86"]]);export{Oe as default};
