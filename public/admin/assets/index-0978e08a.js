var S=Object.defineProperty;var h=(i,t,n)=>t in i?S(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n;var c=(i,t,n)=>(h(i,typeof t!="symbol"?t+"":t,n),n);import{B as e,z as T,q as O,o as u}from"./@tencentcloud-7fc831ec.js";import{t as E}from"./index-7909557f.js";const g={androidInfo:{sound:"private_ring.mp3",XiaoMiChannelID:"high_custom_1",OPPOChannelID:"tuikit"},apnsInfo:{sound:"01.caf",image:"https://web.sdk.qcloud.com/im/demo/latest/faviconnew.png"}},d={title:"call",description:"you have a call",androidSound:"private_ring",androidOPPOChannelID:"tuikit",iOSSound:"01.caf"},M={[e.TYPES.MSG_TEXT]:"[文本]",[e.TYPES.MSG_FACE]:"[动画表情]",[e.TYPES.MSG_IMAGE]:"[图片]",[e.TYPES.MSG_FILE]:"[文件]",[e.TYPES.MSG_AUDIO]:"[语音]",[e.TYPES.MSG_VIDEO]:"[视频]",[e.TYPES.MSG_LOCATION]:"[地理位置]",[e.TYPES.MSG_MERGER]:"[聊天记录]",[e.TYPES.MSG_CUSTOM]:"[自定义消息]"};var o=(i=>(i.CHAT="chat",i.CALL="call",i))(o||{}),a;let C=(a=class{constructor(){c(this,"name","OfflinePushInfoManager");c(this,"offlinePushInfo",{});this.offlinePushInfo={[o.CHAT]:g,[o.CALL]:d}}static getInstance(){return a.instance||(a.instance=new a),a.instance}getOfflinePushInfo(t){return Object.values(o).includes(t)?this.offlinePushInfo[t]:(console.error(`${this.name} getOfflinePushInfo scene: ${t} is invalid`),null)}genTitle(t,n){let s=t==null?void 0:t.getShowName();return t.type===e.TYPES.CONV_C2C&&(s=(n==null?void 0:n.nick)||(n==null?void 0:n.userID)),s}genDesc(t,n){let s="";return t===e.TYPES.MSG_TEXT&&(s=E(n.text)),t===e.TYPES.MSG_CUSTOM&&(s=n.description),s||T.t(`TUIChat.${M[t]}`)}create(t){var f;const{conversation:n,messageType:s="",payload:r={}}=t||{},l=O.getData(u.USER,"userProfile"),P={sender:n.type===e.TYPES.CONV_GROUP?(f=n.groupProfile)==null?void 0:f.groupID:l==null?void 0:l.userID,nickName:l==null?void 0:l.nick,chatType:n.type===e.TYPES.CONV_GROUP?2:1,version:1,action:1};return{title:this.genTitle(n,l),description:this.genDesc(s,r),extension:JSON.stringify({entity:P}),...this.offlinePushInfo[o.CHAT]}}},c(a,"instance",null),a);const G=C.getInstance();export{G as O,o as P};
