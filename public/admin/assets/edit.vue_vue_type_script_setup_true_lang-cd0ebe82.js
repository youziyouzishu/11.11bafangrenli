import{N,y as F,x as S,O as T,C as M,P as G,A as H}from"./element-plus-69d92160.js";import{s as K,g as L}from"./pay-271a73fa.js";import{P as O}from"./index-943d816c.js";import{d as j,b5 as b,b as z,b2 as J,aq as Q,ar as W,o as _,c as y,M as o,aR as n,a_ as a,a as i,F as k,L as c,aB as X,aT as Y,x as Z,y as h}from"./@vue-a164be7a.js";const $={class:"edit-popup"},ee=i("span",{class:"form-tips"},"建议尺寸：200*200px",-1),le=i("div",{class:"form-tips"},"暂时只支持V3版本",-1),oe=i("div",{class:"form-tips"}," 暂时只支持普通商户类型，服务商户类型模式暂不支持 ",-1),ae={class:"flex-1"},te=i("div",{class:"form-tips"},"微信支付商户号（MCHID）",-1),ie=i("span",{class:"form-tips"},"微信支付商户API密钥（paySignKey）",-1),ne=i("span",{class:"form-tips"}," 微信支付证书（apiclient_cert.pem），前往微信商家平台生成并黏贴至此处 ",-1),se=i("span",{class:"form-tips"}," 微信支付证书密钥（apiclient_key.pem），前往微信商家平台生成并黏贴至此处 ",-1),de={class:"mr-[20px]"},pe=i("span",{class:"form-tips"}," 支付授权目录仅用于参考，复制后前往微信商家平台填写 ",-1),re=i("div",{class:"form-tips"},"暂时仅支持支付宝普通模式",-1),me=i("div",{class:"form-tips"}," 暂时只支持普通商户类型，服务商户类型模式暂不支持 ",-1),_e={class:"flex-1"},ce=i("span",{class:"form-tips"}," 支付宝应用APP_ID ",-1),ue={class:"flex-1"},fe=i("span",{class:"form-tips"},"支付宝应用私钥（private_key） ",-1),ye={class:"flex-1"},ge=i("span",{class:"form-tips"},"支付宝公钥（ali_public_key） ",-1),Ve=i("div",{class:"form-tips"},"默认为0， 数值越大越排前",-1),we=j({__name:"edit",emits:["success","close"],setup(ve,{expose:x,emit:w}){const g=w,V=b(),u=b(),f=z(()=>{switch(l.pay_way){case 1:return"余额支付";case 2:return"微信支付";case 3:return"支付宝支付"}}),l=J({id:"",pay_way:0,name:"",icon:"",sort:0,remark:"",domain:"",config:{interface_version:"",merchant_type:"",mch_id:"",pay_sign_key:"",apiclient_cert:"",apiclient_key:"",mode:"",app_id:"",private_key:"",ali_public_key:""}}),U={name:[{required:!0,message:"请输入显示名称"}],"config.mch_id":[{required:!0,message:"请输入微信支付商户号"}],"config.pay_sign_key":[{required:!0,message:"请输入微信支付商户API密钥"}],"config.apiclient_cert":[{required:!0,message:"请输入微信支付证书"}],"config.apiclient_key":[{required:!0,message:"请输入微信支付证书密钥"}],"config.app_id":[{required:!0,message:"请输入支付宝应用ID"}],"config.private_key":[{required:!0,message:"请输入支付宝应用私钥"}],"config.ali_public_key":[{required:!0,message:"请输入支付宝公钥"}]},I=async()=>{var d,e;await((d=V.value)==null?void 0:d.validate()),await K(l),(e=u.value)==null||e.close(),g("success")},C=()=>{var d;(d=u.value)==null||d.open()},v=d=>{for(const e in l)d[e]!=null&&d[e]!=null&&(l[e]=d[e])},D=async d=>{const e=await L({id:d.id});v(e)},P=()=>{g("close")};return x({open:C,setFormData:v,getDetail:D}),(d,e)=>{const r=N,s=F,p=S,q=Q("material-picker"),m=T,R=M,E=G,A=H,B=W("copy");return _(),y("div",$,[o(O,{ref_key:"popupRef",ref:u,title:a(f),async:!0,width:"550px",onConfirm:I,onClose:P},{default:n(()=>[o(A,{ref_key:"formRef",ref:V,model:a(l),"label-width":"84px",rules:U},{default:n(()=>[o(s,{label:"支付方式"},{default:n(()=>[o(r,{label:a(f),"model-value":a(f)},null,8,["label","model-value"])]),_:1}),o(s,{label:"显示名称",prop:"name"},{default:n(()=>[o(p,{modelValue:a(l).name,"onUpdate:modelValue":e[0]||(e[0]=t=>a(l).name=t),placeholder:"请输入显示名称"},null,8,["modelValue"])]),_:1}),o(s,{label:"显示图标",prop:"image"},{default:n(()=>[i("div",null,[o(q,{limit:1,disabled:!1,modelValue:a(l).icon,"onUpdate:modelValue":e[1]||(e[1]=t=>a(l).icon=t)},null,8,["modelValue"]),ee])]),_:1}),a(l).pay_way==2?(_(),y(k,{key:0},[o(s,{prop:"config.interface_version",label:"微信支付接口版本"},{default:n(()=>[i("div",null,[o(m,{modelValue:a(l).config.interface_version,"onUpdate:modelValue":e[2]||(e[2]=t=>a(l).config.interface_version=t)},{default:n(()=>[o(r,{label:"v3"})]),_:1},8,["modelValue"]),le])]),_:1}),o(s,{label:"商户类型",prop:"config.merchant_type"},{default:n(()=>[i("div",null,[o(m,{modelValue:a(l).config.merchant_type,"onUpdate:modelValue":e[3]||(e[3]=t=>a(l).config.merchant_type=t)},{default:n(()=>[o(r,{label:"ordinary_merchant"},{default:n(()=>[c("普通商户")]),_:1})]),_:1},8,["modelValue"]),oe])]),_:1}),o(s,{label:"微信支付商户号",prop:"config.mch_id"},{default:n(()=>[i("div",ae,[o(p,{modelValue:a(l).config.mch_id,"onUpdate:modelValue":e[4]||(e[4]=t=>a(l).config.mch_id=t),placeholder:"请输入微信支付商户号"},null,8,["modelValue"]),te])]),_:1}),o(s,{label:"商户API密钥",prop:"config.pay_sign_key"},{default:n(()=>[o(p,{modelValue:a(l).config.pay_sign_key,"onUpdate:modelValue":e[5]||(e[5]=t=>a(l).config.pay_sign_key=t),placeholder:"请输入微信支付商户API密钥"},null,8,["modelValue"]),ie]),_:1}),o(s,{label:"微信支付证书",prop:"config.apiclient_cert"},{default:n(()=>[o(p,{type:"textarea",rows:"3",modelValue:a(l).config.apiclient_cert,"onUpdate:modelValue":e[6]||(e[6]=t=>a(l).config.apiclient_cert=t),placeholder:"请输入微信支付证书"},null,8,["modelValue"]),ne]),_:1}),o(s,{label:"微信支付证书密钥",prop:"config.apiclient_key"},{default:n(()=>[o(p,{type:"textarea",rows:"3",modelValue:a(l).config.apiclient_key,"onUpdate:modelValue":e[7]||(e[7]=t=>a(l).config.apiclient_key=t),placeholder:"请输入微信支付证书密钥"},null,8,["modelValue"]),se]),_:1}),o(s,{label:"支付授权目录"},{default:n(()=>[i("div",null,[i("div",null,[i("span",de,X(a(l).domain),1),Y((_(),Z(R,{link:"",type:"primary"},{default:n(()=>[c(" 复制 ")]),_:1})),[[B,a(l).domain]])]),pe])]),_:1})],64)):h("",!0),a(l).pay_way==3?(_(),y(k,{key:1},[o(s,{label:"模式",prop:"config.mode"},{default:n(()=>[i("div",null,[o(m,{modelValue:a(l).config.mode,"onUpdate:modelValue":e[8]||(e[8]=t=>a(l).config.mode=t)},{default:n(()=>[o(r,{label:"normal_mode"},{default:n(()=>[c("普通模式")]),_:1})]),_:1},8,["modelValue"]),re])]),_:1}),o(s,{label:"商户类型",prop:"config.merchant_type"},{default:n(()=>[i("div",null,[o(m,{modelValue:a(l).config.merchant_type,"onUpdate:modelValue":e[9]||(e[9]=t=>a(l).config.merchant_type=t)},{default:n(()=>[o(r,{label:"ordinary_merchant"},{default:n(()=>[c("普通商户")]),_:1})]),_:1},8,["modelValue"]),me])]),_:1}),o(s,{label:"应用ID",prop:"config.app_id"},{default:n(()=>[i("div",_e,[o(p,{modelValue:a(l).config.app_id,"onUpdate:modelValue":e[10]||(e[10]=t=>a(l).config.app_id=t),placeholder:"请输入支付宝应用ID"},null,8,["modelValue"]),ce])]),_:1}),o(s,{label:"应用私钥",prop:"config.private_key"},{default:n(()=>[i("div",ue,[o(p,{type:"textarea",rows:"3",modelValue:a(l).config.private_key,"onUpdate:modelValue":e[11]||(e[11]=t=>a(l).config.private_key=t),placeholder:"请输入支付宝应用私钥"},null,8,["modelValue"]),fe])]),_:1}),o(s,{label:"支付宝公钥",prop:"config.ali_public_key"},{default:n(()=>[i("div",ye,[o(p,{type:"textarea",rows:"3",modelValue:a(l).config.ali_public_key,"onUpdate:modelValue":e[12]||(e[12]=t=>a(l).config.ali_public_key=t),placeholder:"请输入支付宝公钥"},null,8,["modelValue"]),ge])]),_:1})],64)):h("",!0),o(s,{label:"排序",prop:"sort"},{default:n(()=>[i("div",null,[o(E,{modelValue:a(l).sort,"onUpdate:modelValue":e[13]||(e[13]=t=>a(l).sort=t),min:0,max:9999},null,8,["modelValue"]),Ve])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{we as _};
