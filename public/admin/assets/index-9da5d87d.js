import{q as v,o as x,i as g,B as I,X as S,_ as B}from"./@tencentcloud-7fc831ec.js";import"./adapter-vue-24f22062.js";import{c as n,a as T,e as J}from"./env-a593fd1d.js";import O from"./index-ca5aad75.js";import{c as F}from"./camera-uni-de12e41a.js";import{i as P}from"./utils-14df48f1.js";import{O as z}from"./index-0978e08a.js";import{d as G,r as R,b as _,o as y,x as q,aR as M,a_ as s,c as N,ae as Y,a as w,y as C}from"./@vue-a164be7a.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";import"./Icon-2c0593f3.js";import"./index-b5b8c0ea.js";import"./index-7909557f.js";import"./constant-bad60a54.js";const H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAqCAYAAAD1T9h6AAAAAXNSR0IArs4c6QAABLlJREFUaEPlmVtsFFUYx893ZpfeaRNjK7ZJLexuu7NFSmeXNgG1Gn0ooQajpdjiBR9MJFxsvRSxbVb0xRiFUKOJLxrBW5aERIhGCbItUMDtFKTt2psiRiNYH7iVXnbn+8xsO9tl09JtdyuzcV5mds+Zc37/7zYz5wALOQoLS7JGyP8sQ1bKGGQRoTG0/XZdA3AfY3SJcXYqEQyfdHWdvqSxgHZRYHNU+JFeIsKU2wUaybwAfMjA4d2ebs9BtX9AgArvU5SmSAbQSx+jIOxURUAgbBTlK83ynEMvY8ZmY2Zit9ftvq4HYLGsLNX394iNMd8WRMoPWB74UKIgVIHJJtWTQk+of6rwC5OkjbL8kU8P4OEMkvS88eqw/HFQhAD7wWSVDhBRzriABZv7vadO6xFeYzKLpSWIY++PewH+AJPV3qZVm4S7Fj6ol7CZzohqOI1evHp0Iox8sKSg2KN1/qWnw6Fn62tsocz/TwGVlZXCT94LNYj+RwAgl4gucG44vEzM/czlcinz7cWoPKDCn+08/wEyLA4H5Yx3FC3N2zTfIqISYLGteFpR/Fums7IgGJr7un/8dD69EJUAk7V4LxErCFQBzj9MT1r05ZXhv9YT4gvjlYH1DPzc8ZRuBZhFqRWRklTAjJTsB2T54A1Jqki+PPRny8TDcLjfK9+vWwFx74G4z4H/ogoREeTb7CsBgHq6PG3qOTQko0pidaD5fA6o8BbR3oBEj6pzCRxq+7zy8ZgKmK8EHYd37EDCtdocBoG/2NvdfkL3AlR4s016jZA9psFygK/7vO1vxTyEYu2BcXh7PSE9ro0NjB/asH7Nm06nE8PnizoHYi0g9KNqIu6/qV5X8cZU8Gq7rgSYbfZXUcHKkLD5tqaqwjkdvK4ELBEdLzNUqibh+Xc1VWuabgWvGwEmcUUdof/JYMxz/v1yW15TJG+yMQshkyhVAmOrgbHf05JYsyzL/0SSHyabvZYUrNb6ChwOL7MtbowEPiYeUFcHrg3LDQrS6qAFAS4KxpStvedaz99KhNnq2IakbJgMG+FIdlZKg9vt9kciPmoBRUVlGddHh94hUorCJwQO1xYwXuf1es5OBWMWpa2IFHzV5sB/yM5KfX028FEJKCgqvcc/6t9NhNlBC3JwM8ZKtFdsAD7GjdDUd85zJFSERbRvVhCfmbyPH83OTN0xW/g5C7DYHA4kfJuQ0iYgCAzCnoEuzz7LUqkAFbabkO7Q2rjAd/V3t3+h/rZYHZsUUjZOJiy05GSmbZ8L/JwEWKzSWmRsOxEJ6gCcwwgJvGGg0xP4iFGP/OUr71ZGR/cQYm4QVOCfM6QRInouBL41JzOtfq7wsxYQnnQAbJAboK6vU+4Jj3NJejj9yo3L7xHhvVPlAAA7lp5sr4926TLiMmoRpVUK0q6QeO9NTUiuPXPm2OB0FaO8vDxh4LfBnUj40E19BDiRkSi9Ei38rDwQKgA4tNyZvrjx5EnX8Ezlzul08n2uQ9u0Wq9WG2NhXqPX5Rqb6d5I2iP2QCABRWmVeq5eV9E20yM+fHKr9b5FfgMl9Xce/zUSsEj73CQg7hd34395Pd43OOJ+i0lNnLje5NMyP663WTUR8bjR/S+/EAdi6i5GNAAAAABJRU5ErkJggg==",K="/admin/assets/image-uni-3e951cbb.png",j=G({__name:"index",props:{imageSourceType:{type:String,default:"album"}},setup(h){const r=h,m=R(),o=R(),p={web_album:{icon:H,title:"图片"},uni_album:{icon:K,title:"图片"},uni_camera:{icon:F,title:"拍照"}};v.watch(x.CONV,{currentConversation:e=>{o.value=e}});const d=_(()=>n?r.imageSourceType==="camera"?p.uni_camera:p.uni_album:p.web_album),E=()=>{var e,a,i,c;n?J&&((e=g)!=null&&e.chooseMedia)?(a=g)==null||a.chooseMedia({count:1,mediaType:["image"],sizeType:["original","compressed"],sourceType:[r.imageSourceType],success:function(t){l(t)}}):(i=g)==null||i.chooseImage({count:1,sourceType:[r.imageSourceType],success:function(t){l(t)}}):(c=m.value)!=null&&c.click&&m.value.click()},U=e=>{var a,i;((i=(a=e==null?void 0:e.target)==null?void 0:a.files)==null?void 0:i.length)<=0||(l(e==null?void 0:e.target),e.target.value="")},l=e=>{var t,u,A,f,b;if(!e)return;const a={to:((u=(t=o==null?void 0:o.value)==null?void 0:t.groupProfile)==null?void 0:u.groupID)||((f=(A=o==null?void 0:o.value)==null?void 0:A.userProfile)==null?void 0:f.userID),conversationType:(b=o==null?void 0:o.value)==null?void 0:b.type,payload:{file:e},needReadReceipt:P()},i={conversation:o.value,payload:a.payload,messageType:I.TYPES.MSG_IMAGE},c={offlinePushInfo:z.create(i)};S.sendImageMessage(a,c)};return(e,a)=>(y(),q(O,{iconFile:s(d).icon,title:s(d).title,iconWidth:s(n)?"32px":"21px",iconHeight:s(n)?"25px":"18px",needDialog:!1,onOnIconClick:E},{default:M(()=>[s(n)?C("",!0):(y(),N("div",{key:0,class:Y(["image-upload",!s(T)&&"image-upload-h5"])},[w("input",{ref_key:"inputRef",ref:m,title:"图片",type:"file","data-type":"image",accept:"image/gif,image/jpeg,image/jpg,image/png,image/bmp,image/webp",onChange:U},null,544)],2))]),_:1},8,["iconFile","title","iconWidth","iconHeight"]))}});const ue=B(j,[["__scopeId","data-v-6a05d4d0"]]);export{ue as default};
