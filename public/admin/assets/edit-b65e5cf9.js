import{S as N,H as F,y as S,N as T,O as L,x as U,A as H,C as M,I as O}from"./element-plus-69d92160.js";import{_ as $}from"./index-581f66c5.js";import{d as j,f as z}from"./index-90bac5cf.js";import{n as A,s as G}from"./message-d791673f.js";import{l as P}from"./lodash-f986f62a.js";import{u as J,a as K}from"./vue-router-b1515852.js";import{d as w,r as Q,b2 as W,b5 as X,o as p,c as u,M as e,aR as t,aT as Y,a_ as a,x as Z,L as m,aB as d,a as l,F as ee,ao as te}from"./@vue-a164be7a.js";import"./lodash-es-fbce1780.js";import"./async-validator-dee29e8b.js";import"./@element-plus-21ebab28.js";import"./dayjs-0ab82212.js";import"./@tencentcloud-7fc831ec.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./normalize-wheel-es-ed76fb12.js";import"./@vueuse-ebd2cc93.js";import"./axios-9669b5e1.js";import"./css-color-function-7acc3e97.js";import"./color-9254db0b.js";import"./clone-db6b0f3b.js";import"./color-convert-946e453a.js";import"./color-name-b7949e8c.js";import"./color-string-6fa48439.js";import"./balanced-match-51764fed.js";import"./ms-f6814399.js";import"./nprogress-e3c843bc.js";import"./vue-clipboard3-b827321c.js";import"./clipboard-e27f968b.js";import"./echarts-d6620a89.js";import"./zrender-9797a04d.js";import"./tslib-54e39b60.js";import"./highlight.js-7476ba27.js";import"./@highlightjs-10fbb12e.js";import"./path-to-regexp-767716ea.js";const oe=l("div",{class:"font-medium mb-7"},"通知名称",-1),se=l("div",{class:"font-medium mb-7"},"短信通知",-1),ae={class:"w-80"},ne={class:"flex-1"},ie={class:"w-full max-w-[320px]"},re={class:"form-tips"},me=w({name:"noticeEdit"}),tt=w({...me,setup(le){const f=J(),y=K(),c=Q(!1),o=W({id:"",scene_name:"",type:"",scene_desc:"",sms_notice:{status:0,template_id:"",content:"",tips:[]},oa_notice:{},mnp_notice:{},system_notice:{}}),x={"sms_notice.template_id":[{required:!0,message:"请输入模板ID",trigger:"blur"}],"sms_notice.content":[{required:!0,message:"请输入短信内容",trigger:"blur"}]},{removeTab:E}=j(),b=X(),V=async()=>{c.value=!0;const i=await A({id:f.query.id});Object.keys(i).forEach(s=>{o[s]=i[s]}),c.value=!1},h=async()=>{var s;await((s=b.value)==null?void 0:s.validate());const i={id:o.id,template:P.pick(o,["sms_notice","oa_notice","mnp_notice","system_notice"])};await G(i),z.msgSuccess("操作成功"),E(),y.back()};return f.query.id&&V(),(i,s)=>{const k=N,_=F,r=S,v=T,R=L,g=U,D=H,B=M,C=$,I=O;return p(),u("div",null,[e(_,{class:"!border-none",shadow:"never"},{default:t(()=>[e(k,{content:"编辑通知设置",onBack:s[0]||(s[0]=n=>i.$router.back())})]),_:1}),Y((p(),Z(D,{ref_key:"formRef",ref:b,model:a(o),"label-width":"120px",rules:x},{default:t(()=>[e(_,{class:"!border-none mt-4",shadow:"never"},{default:t(()=>[oe,e(r,{label:"通知名称"},{default:t(()=>[m(d(a(o).scene_name),1)]),_:1}),e(r,{label:"通知类型"},{default:t(()=>[m(d(a(o).type),1)]),_:1}),e(r,{label:"通知业务"},{default:t(()=>[m(d(a(o).scene_desc),1)]),_:1})]),_:1}),e(_,{class:"!border-none mt-4",shadow:"never"},{default:t(()=>[se,e(r,{label:"开启状态",prop:"sms_notice.status",required:""},{default:t(()=>[e(R,{modelValue:a(o).sms_notice.status,"onUpdate:modelValue":s[1]||(s[1]=n=>a(o).sms_notice.status=n)},{default:t(()=>[e(v,{label:"0"},{default:t(()=>[m("关闭")]),_:1}),e(v,{label:"1"},{default:t(()=>[m("开启")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"模板ID",prop:"sms_notice.template_id"},{default:t(()=>[l("div",ae,[e(g,{modelValue:a(o).sms_notice.template_id,"onUpdate:modelValue":s[2]||(s[2]=n=>a(o).sms_notice.template_id=n),placeholder:"请输入模板ID"},null,8,["modelValue"])])]),_:1}),e(r,{label:"短信内容",prop:"sms_notice.content"},{default:t(()=>[l("div",ne,[l("div",ie,[e(g,{type:"textarea",autosize:{minRows:6,maxRows:6},modelValue:a(o).sms_notice.content,"onUpdate:modelValue":s[3]||(s[3]=n=>a(o).sms_notice.content=n)},null,8,["modelValue"])]),l("div",re,[(p(!0),u(ee,null,te(a(o).sms_notice.tips,(n,q)=>(p(),u("div",{key:q},d(n),1))),128))])])]),_:1})]),_:1})]),_:1},8,["model"])),[[I,a(c)]]),e(C,null,{default:t(()=>[e(B,{type:"primary",onClick:h},{default:t(()=>[m("保存")]),_:1})]),_:1})])}}});export{tt as default};
