import{x as B,y as F,a7 as U,A}from"./element-plus-69d92160.js";import{P as I}from"./index-943d816c.js";import{r as p,s as w}from"./index-90bac5cf.js";import{d as R,b5 as g,r as L,b as M,b2 as y,o as N,c as P,M as a,aR as i,a_ as t,L as d,aB as _}from"./@vue-a164be7a.js";import"./lodash-f986f62a.js";function Y(o){return p.get({url:"/review_table/lists",params:o})}function S(o){return p.post({url:"/review_table/add",params:o})}function O(o){return p.post({url:"/review_table/edit",params:o})}function Z(o){return p.post({url:"/review_table/delete",params:o})}function z(o){return p.get({url:"/review_table/detail",params:o})}const G={class:"edit-popup"},H=R({name:"reviewTableEdit"}),$=R({...H,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(o,{expose:V,emit:x}){const f=x,b=g(),c=g(),m=L("add"),T=M(()=>m.value=="edit"?"编辑评价":"新增评价"),r=y({id:"",project_id:"",project_name:"",reviewer_id:"",reviewer_name:"",reviewer_type:"",target_type:"",target_id:"",target_name:"",score:"",review_content:""}),j=y({project_name:[{required:!0,message:"请输入项目名称",trigger:["blur"]}],reviewer_id:[{required:!0,message:"请输入评价人",trigger:["blur"]}],reviewer_type:[{required:!0,message:"请输入评价类型",trigger:["blur"]}],target_type:[{required:!0,message:"请输入目标类型",trigger:["blur"]}],target_id:[{required:!0,message:"请输入被评价人",trigger:["blur"]}],score:[{required:!0,message:"请输入评分",trigger:["blur"]}]}),v=async l=>{for(const e in r)l[e]!=null&&l[e]!=null&&(r[e]=l[e])},q=async l=>{const e=await z({id:l.id});v(e)},D=async()=>{var e,n;await((e=b.value)==null?void 0:e.validate());const l={...r};m.value=="edit"?await O(l):await S(l),(n=c.value)==null||n.close(),f("success")},E=(l="add")=>{var e;m.value=l,(e=c.value)==null||e.open()},C=()=>{f("close")};return V({open:E,setFormData:v,getDetail:q}),(l,e)=>{const n=B,s=F,k=U,h=A;return N(),P("div",G,[a(I,{ref_key:"popupRef",ref:c,title:t(T),async:!0,width:"550px",onConfirm:D,onClose:C},{default:i(()=>[a(h,{ref_key:"formRef",ref:b,model:t(r),"label-width":"90px",rules:t(j)},{default:i(()=>[a(s,{label:"项目名称",prop:"project_name"},{default:i(()=>[a(n,{modelValue:t(r).project_name,"onUpdate:modelValue":e[0]||(e[0]=u=>t(r).project_name=u),clearable:"",placeholder:"",disabled:!0},null,8,["modelValue"])]),_:1}),a(s,{label:"评价人",prop:"reviewer_name"},{default:i(()=>[d(_(t(r).reviewer_name),1)]),_:1}),a(s,{label:"评价类型",prop:"reviewer_type"},{default:i(()=>[d(_(t(w)[t(r).reviewer_type]),1)]),_:1}),a(s,{label:"被评价人",prop:"target_id"},{default:i(()=>[d(_(t(r).target_name),1)]),_:1}),a(s,{label:"目标类型",prop:"target_type"},{default:i(()=>[d(_(t(w)[t(r).target_type]),1)]),_:1}),a(s,{label:"评分",prop:"score"},{default:i(()=>[a(k,{modelValue:t(r).score,"onUpdate:modelValue":e[1]||(e[1]=u=>t(r).score=u),max:5},null,8,["modelValue"])]),_:1}),a(s,{label:"评价内容",prop:"review_content"},{default:i(()=>[a(n,{type:"textarea",modelValue:t(r).review_content,"onUpdate:modelValue":e[2]||(e[2]=u=>t(r).review_content=u),clearable:"",placeholder:"请输入评价内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{$ as _,Z as a,Y as b};
