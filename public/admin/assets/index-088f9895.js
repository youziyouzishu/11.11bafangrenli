import{q as R,o as U,i as d,B as k,X as V,_}from"./@tencentcloud-7fc831ec.js";import"./adapter-vue-24f22062.js";import{a as D,c as r,e as S}from"./env-a593fd1d.js";import G from"./index-ca5aad75.js";import{c as O}from"./camera-uni-de12e41a.js";import{i as X}from"./utils-14df48f1.js";import{O as b}from"./index-0978e08a.js";import{d as w,r as g,o as C,x as J,aR as W,a as h,ae as B,a_ as l}from"./@vue-a164be7a.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";import"./Icon-2c0593f3.js";import"./index-b5b8c0ea.js";import"./index-7909557f.js";import"./constant-bad60a54.js";const P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAqCAYAAAD1T9h6AAAAAXNSR0IArs4c6QAAAqlJREFUaEPtmUFoE0EUhufNNBpRWi9tPAhWm9RmU7S6Dekxolc1gqDgxV48tHoS7E0WwWPwoCcp1KAWC0KlHnI0WJGGsj1Ik9ZUbxWsB8HQ0nQ3mSebZsMaKrRmN9mR5LRkZ2f/771/3j5mgFh+/f0RXwGLNwknQ4SAD5F7rPebdQ1AdUJwjVAy54W2Z4uL6TVTC5gXfaHwxSLHu4j8YLOE7ua9AHSjjUJ8OTP/1hhfBjDE66XS/d1M4JYxHsYeGBBQtk2pNGVGnlL4TIjnsafLm8mmUutuECxFo4f0H4UQIfodzvFkOfJAN7yMXQN/SB7DEl41/jTEtx+Qh1X1qe4G4bUaZPmWJ7+pTlQhGLwGf1CeRsSj2wD7bq9k59JuFG9qCkhDEc61J9tZgFXwBwc/mtVm/5H2c26xzd+CaNhp63v+XcVGOvT0nZ03B39dXgi7OfqmNqvmFkAzMtbKQDOibn1nKwM7ZaA3KMc4IVcYgfcnujtfJJPJLacy5UgGApI8yzl6K/X5GwUez2UXZp2AcATAOmm11WX0A2Es/uVTetVOkIYBVLKhAfKE/7gvYZetHAcASqaRk5jZrtttK8cBjJZEOh0OaRq/h4iS1T5gg60aAmCIVhSFvnw1EyOUjnDOO6prA6hGCU7kltTxf1kbDQMwxQ0MRA+va/mRWlsxgIe5JfXNXiEaDiDLFzp+bf4crQWgDB6tZNRJ1wIYFpqcmrmMQEdrLWRUphvXL40risJdCRA6E5G2CsUxIRex8GX0j7IJVAMgCf+xTnE+ZEK2EoHgYIpXdvUAqHjNXO+p8Hks8mFAkurp7npuV9+zU4Vy5Duw11JYz/gWQD3Rs+PZVgbsiGI9c/xfGRB+c1f87XXRDziEP2IyqoHQh3xmORP6mNWEEPGg+zdk8RZTNE1sngAAAABJRU5ErkJggg==",v="/admin/assets/video-uni-0b4d3e53.png",M=w({__name:"index",props:{videoSourceType:{type:String,default:"album"}},setup(I){const c=I,t=g(),o=g();R.watch(U.CONV,{currentConversation:e=>{o.value=e}});const x=()=>{if(r)switch(c.videoSourceType){case"album":return v;case"camera":return O;default:return v}else return P},E=()=>r&&c.videoSourceType==="camera"?"录制":"视频",y=()=>{var e,a,i,p,n;r?S&&((e=d)!=null&&e.chooseMedia)?(a=d)==null||a.chooseMedia({mediaType:["video"],count:1,sourceType:[c.videoSourceType],maxDuration:60,success:function(s){m(s)}}):(i=d)==null||i.chooseVideo({count:1,sourceType:[c.videoSourceType],compressed:!1,success:function(s){m(s)}}):(p=t==null?void 0:t.value)!=null&&p.click&&((n=t==null?void 0:t.value)==null||n.click())},T=e=>{var a,i;((i=(a=e==null?void 0:e.target)==null?void 0:a.files)==null?void 0:i.length)<=0||(m(e==null?void 0:e.target),e.target.value="")},m=e=>{var n,s,u,f,A;if(!e)return;const a={to:((s=(n=o==null?void 0:o.value)==null?void 0:n.groupProfile)==null?void 0:s.groupID)||((f=(u=o==null?void 0:o.value)==null?void 0:u.userProfile)==null?void 0:f.userID),conversationType:(A=o==null?void 0:o.value)==null?void 0:A.type,payload:{file:e},needReadReceipt:X()},i={conversation:o.value,payload:a.payload,messageType:k.TYPES.MSG_VIDEO},p={offlinePushInfo:b.create(i)};V.sendVideoMessage(a,p)};return(e,a)=>(C(),J(G,{iconFile:x(),title:E(),needDialog:!1,iconWidth:l(r)?"32px":"21px",iconHeight:l(r)?c.videoSourceType==="album"?"20px":"25px":"18px",onOnIconClick:y},{default:W(()=>[h("div",{class:B(["video-upload",!l(D)&&"video-upload-h5"])},[h("input",{ref_key:"inputRef",ref:t,title:"视频",type:"file","data-type":"video",accept:"video/*",onChange:T},null,544)],2)]),_:1},8,["iconFile","title","iconWidth","iconHeight"]))}});const de=_(M,[["__scopeId","data-v-780eba2c"]]);export{de as default};
