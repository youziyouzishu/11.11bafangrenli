import{d as A,b2 as H,b6 as N,b as d,o as i,x as C,aR as Y,a as s,ae as z,a_ as o,M as g,aB as p,c as n,F,ao as q,aT as G,aO as U,y as v}from"./@vue-a164be7a.js";import{z as a,B as h,q as Z,o as j,Z as D,_ as J}from"./@tencentcloud-7fc831ec.js";import"./adapter-vue-24f22062.js";import{d as K}from"./documentLink-a7b030c0.js";import{a as u}from"./env-a593fd1d.js";import y from"./Icon-2c0593f3.js";import{b as Q}from"./back-16f17fde.js";import{c as W}from"./icon-close-7ee462f2.js";import{e as S}from"./right-icon-89a49395.js";import{g as x,f as R,G as w}from"./index-904d7f29.js";import X from"./index-1dfefc7d.js";import{T as O}from"./index-cfdb213d.js";import ee from"./index-6b0c1d9b.js";import{T as oe}from"./server-fb151bb0.js";import{T as P}from"./index-e4ac2ab7.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";import"./selected-a3efc726.js";const te={class:"group-box"},se={class:"group-box-header"},re={class:"group-box-header-title"},ie={key:0,class:"group-list"},ae={class:"group-list-item"},le={class:"group-list-item-label"},pe={class:"group-list-item-label"},ne=["onUpdate:modelValue","placeholder"],ue=["onClick"],ce={class:"content"},de={class:"group-list-introduction"},ge={class:"group-list-item"},fe={class:"group-list-item-label"},me={class:"content"},_e={key:0,class:"group-h5-list-item-introduction"},Ce={class:"introduction-name"},he={class:"introduction-detail"},ye=["href"],Ie={key:1,class:"group-list group-list-edit"},Te=["placeholder"],be={class:"group-profile-footer"},ke=["disabled"],Ee=A({__name:"index",setup(Ge){const f=oe.getInstance(),I=f.constants,e=H({profile:{groupID:"",name:"",type:x[0].type,avatar:x[0].icon,introduction:"",notification:"",memberList:[],isSupportTopic:!1},groupConfig:{title:"",value:"",key:"",type:"",placeholder:""},isEdit:!1});N(()=>{const t=f.getOnCallParams(I.TUIGroup.SERVICE.METHOD.CREATE_GROUP);e.profile.memberList=t.memberList,e.groupConfig.title=t.title});const c=d(()=>R(e.profile.type)),M=d(()=>{let t="添加群聊";return e.isEdit&&(t=e.groupConfig.title),a.t(`TUIGroup.${t}`)}),V=d(()=>{const t={name:a.t("TUIGroup.群名称"),key:"name",placeholder:a.t("TUIGroup.请输入群名称")},r={name:`${a.t("TUIGroup.群ID")}(${a.t("TUIGroup.选填")})`,key:"groupID",placeholder:a.t("TUIGroup.请输入群ID")};return e.profile.type===h.TYPES.GRP_COMMUNITY?[t]:[t,r]}),$=d(()=>e.profile.name===""&&!e.isEdit),T=t=>{e.profile.type!==t&&(e.profile.type=t,e.profile.avatar=R(t).icon,e.isEdit&&(e.groupConfig.value=t))},B=async t=>{try{t.memberList=t.memberList.map(_=>({userID:_.userID})),t.type===h.TYPES.GRP_COMMUNITY&&delete t.groupID;const r=await D.createGroup(t),{type:l}=r.data.group;l===h.TYPES.GRP_AVCHATROOM&&await D.joinGroup({groupID:r.data.group.groupID,applyMessage:""}),k(r.data.group),O({message:a.t("TUIGroup.群组创建成功"),type:P.SUCCESS})}catch(r){O({message:r.message,type:P.ERROR})}},L=()=>{const{profile:t}=e;if(e.isEdit)return e.profile[e.groupConfig.key]=e.groupConfig.value,e.isEdit=!e.isEdit;B(t)},m=()=>{if(e.isEdit)return e.isEdit=!e.isEdit;k(null)},b=t=>{switch(e.isEdit=!e.isEdit,e.groupConfig.key=t,e.groupConfig.value=e.profile[t],t){case"name":e.groupConfig.title="设置群名称",e.groupConfig.placeholder="请输入群名称",e.groupConfig.type="input";break;case"groupID":e.groupConfig.title="设置群ID",e.groupConfig.placeholder="请输入群ID",e.groupConfig.type="input";break;case"type":e.groupConfig.title="选择群类型",e.groupConfig.type="select";break}},k=t=>{Z.update(j.GRP,"isShowCreateComponent",!1);const r=f.getOnCallCallback(I.TUIGroup.SERVICE.METHOD.CREATE_GROUP);r&&r(t)};return(t,r)=>(i(),C(X,{show:!0,isH5:!o(u),isHeaderShow:!1,isFooterShow:!1,background:!1,"onUpdate:show":m},{default:Y(()=>[s("div",{class:z(["group",[o(u)?"":"group-h5"]])},[s("div",te,[s("header",se,[g(y,{file:o(u)?o(W):o(Q),class:"icon-close",size:"16px",onOnClick:m},null,8,["file"]),s("h1",re,p(o(M)),1)]),o(e).isEdit?(i(),n("div",Ie,[o(e).groupConfig.type==="input"?G((i(),n("input",{key:0,"onUpdate:modelValue":r[1]||(r[1]=l=>o(e).groupConfig.value=l),class:"group-name-input",type:"text",placeholder:o(a).t(`TUIGroup.${o(e).groupConfig.placeholder}`)},null,8,Te)),[[U,o(e).groupConfig.value]]):(i(),C(w,{key:1,class:"group-introduction-list",groupType:o(e).groupConfig.value,onSelectType:T},null,8,["groupType"]))])):(i(),n("ul",ie,[s("li",ae,[s("label",le,p(o(a).t("TUIGroup.群头像")),1),g(ee,{url:o(e).profile.avatar},null,8,["url"])]),s("ul",null,[(i(!0),n(F,null,q(o(V),(l,_)=>(i(),n("li",{key:_,class:"group-list-item"},[s("label",pe,p(l.name),1),o(u)?G((i(),n("input",{key:0,"onUpdate:modelValue":E=>o(e).profile[l.key]=E,type:"text",placeholder:l.placeholder},null,8,ne)),[[U,o(e).profile[l.key]]]):(i(),n("span",{key:1,class:"group-h5-list-item-content",onClick:E=>b(l.key)},[s("p",ce,p(o(e).profile[l.key]),1),g(y,{file:o(S)},null,8,["file"])],8,ue))]))),128)),s("li",de,[s("div",ge,[s("label",fe,p(o(a).t("TUIGroup.群类型")),1),o(u)?(i(),C(w,{key:0,groupType:o(e).profile.type,onSelectType:T},null,8,["groupType"])):(i(),n("span",{key:1,class:"group-h5-list-item-content",onClick:r[0]||(r[0]=l=>b("type"))},[s("p",me,p(o(c).label),1),g(y,{file:o(S)},null,8,["file"])]))]),o(u)?v("",!0):(i(),n("article",_e,[s("label",Ce,p(o(c).label)+"：",1),s("span",he,p(o(c).detail),1),s("a",{href:o(K).product.url,target:"view_window"},p(o(a).t(`TUIGroup.${o(c).src}`)),9,ye)]))])])])),s("footer",be,[o(u)&&!o(e).isEdit?(i(),n("button",{key:0,class:"btn-default",onClick:m},p(o(a).t("TUIGroup.取消")),1)):v("",!0),s("button",{class:"btn-submit",disabled:o($),onClick:L},p(o(a).t("TUIGroup.确认")),9,ke)])])],2)]),_:1},8,["isH5"]))}});const Xe=J(Ee,[["__scopeId","data-v-199d17bd"]]);export{Xe as default};
