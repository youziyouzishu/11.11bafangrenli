import{d as P,ba as x,b as r,o as l,c,x as b,a_ as e,y as u,a as i,ae as n,M as p,aW as A,aB as k,F as L,ap as y}from"./@vue-a164be7a.js";import"./adapter-vue-24f22062.js";import{B as O,z as v,_ as N}from"./@tencentcloud-7fc831ec.js";import V from"./Icon-2c0593f3.js";import z from"./index-63059e66.js";import F from"./index-7077c717.js";import $ from"./index-6b0c1d9b.js";import j from"./index-e69feb26.js";import Y from"./index-1a28bf3f.js";import q from"./index-c630b3a2.js";import{s as K}from"./utils-14df48f1.js";import{a as Q}from"./env-a593fd1d.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";import"./config-58aee8b5.js";import"./index-cfdb213d.js";import"./index-e4ac2ab7.js";import"./index-7909557f.js";import"./constant-bad60a54.js";import"./translation-content-19d02e38.js";import"./convert-content-ac4eeb47.js";const W="/admin/assets/loading-2a143778.png",X={class:"message-bubble-content"},H={key:0,class:"message-body-nick-name"},J={class:"content-main"},Z={key:0,class:"content-has-risk-tips"},ee={key:0,class:"audio-unplay-mark"},se={class:"message-bubble-extra-content"},te="https://web.sdk.qcloud.com/component/TUIKit/assets/has_risk_default.png",ae=P({__name:"message-bubble",props:{messageItem:{default:()=>({})},content:{default:()=>({})},classNameList:{default:()=>[]},blinkMessageIDList:{default:()=>[]},isMultipleSelectMode:{type:Boolean,default:!1},isAudioPlayed:{type:Boolean,default:!1},multipleSelectedMessageIDList:{default:()=>[]}},emits:["resendMessage","blinkMessage","setReadReceiptPanelVisible","changeSelectMessageIDList","scrollTo"],setup(S,{emit:I}){const d=I,m=S,a=O.TYPES,h=[a.MSG_LOCATION,a.MSG_TEXT,a.MSG_CUSTOM,a.MSG_MERGER,a.MSG_FACE],{blinkMessageIDList:g,messageItem:s}=x(m),M=r(()=>m.multipleSelectedMessageIDList.includes(s.value.ID)),C=r(()=>s.value.flow==="in"&&s.value.status==="success"&&s.value.type===a.MSG_AUDIO&&!m.isAudioPlayed),R=r(()=>["message-bubble",M.value?"multiple-selected":"",...m.classNameList]),T=r(()=>{var t;return(t=s.value)==null?void 0:t.reactionList.some(o=>o.totalUserCount!==0)}),f=r(()=>!T.value&&[a.MSG_IMAGE,a.MSG_VIDEO,a.MSG_MERGER].includes(s.value.type)),w=r(()=>{let t=v.t("TUIChat.涉及敏感内容")+", ";return s.value.flow==="out"?t+=v.t("TUIChat.发送失败"):t+=v.t(s.value.type===a.MSG_AUDIO?"TUIChat.无法收听":"TUIChat.无法查看"),t}),_=r(()=>{var t,o;return(t=s.value)!=null&&t.ID?(o=g==null?void 0:g.value)==null?void 0:o.includes(s.value.ID):!1});function G(t){d("changeSelectMessageIDList",{type:t?"add":"remove",messageID:s.value.ID})}function E(){var t;(t=s.value)!=null&&t.hasRiskContent||d("resendMessage")}function D(t){d("blinkMessage",t)}function U(t){d("scrollTo",t)}function B(){d("setReadReceiptPanelVisible",!0,s.value)}return(t,o)=>(l(),c("div",{class:n(e(R))},[m.isMultipleSelectMode?(l(),b(q,{key:0,class:"multiple-select-radio",isSelected:e(M),onOnChange:G},null,8,["isSelected"])):u("",!0),i("div",{class:n({"control-reverse":e(s).flow==="out"})},[i("div",X,[i("div",{class:n(["message-bubble-main-content",[e(s).flow==="in"?"":"reverse"]])},[p($,{useSkeletonAnimation:"",url:e(s).avatar||""},null,8,["url"]),i("main",{class:"message-body",onClick:o[1]||(o[1]=A(()=>{},["stop"]))},[e(s).flow==="in"&&e(s).conversationType==="GROUP"?(l(),c("div",H,k(m.content.showName),1)):u("",!0),i("div",{class:n(["message-body-main",e(s).flow==="out"&&"message-body-main-reverse"])},[i("div",{class:n(["blink","message-body-content",e(s).flow==="out"?"content-out":"content-in",e(s).hasRiskContent&&"content-has-risk",e(f)?"content-no-padding":"",e(f)&&e(_)?"blink-shadow":"",!e(f)&&e(_)?"blink-content":""])},[i("div",J,[(e(s).type===e(a).MSG_IMAGE||e(s).type===e(a).MSG_VIDEO)&&e(s).hasRiskContent?(l(),c("img",{key:0,class:n(["message-risk-replace",!e(Q)&&"message-risk-replace-h5"]),src:te},null,2)):(l(),c(L,{key:1},[y(t.$slots,"messageElement",{},void 0,!0),y(t.$slots,"TUIEmojiPlugin",{},void 0,!0)],64))]),e(s).hasRiskContent?(l(),c("div",Z,k(e(w)),1)):u("",!0)],2),e(C)?(l(),c("div",ee)):u("",!0),e(s).status==="fail"||e(s).hasRiskContent?(l(),c("div",{key:1,class:"message-label fail",onClick:o[0]||(o[0]=oe=>E())}," ! ")):u("",!0),e(s).status==="unSend"&&h.includes(e(s).type)?(l(),b(V,{key:2,class:"message-label loading-circle",file:e(W),width:"15px",height:"15px"},null,8,["file"])):u("",!0),p(z,{class:"message-label align-self-bottom",message:e(K)(e(s)),onOpenReadUserPanel:B},null,8,["message"])],2)])],2),i("div",se,[p(j,{class:n(e(s).flow==="out"?"reverse":"flex-row"),message:e(s)},null,8,["class","message"]),p(Y,{class:n(e(s).flow==="out"?"reverse":"flex-row"),message:e(s)},null,8,["class","message"]),p(F,{class:n(e(s).flow==="out"?"reverse":"flex-row"),message:e(s),onBlinkMessage:D,onScrollTo:U},null,8,["class","message"])])])],2)],2))}});const xe=N(ae,[["__scopeId","data-v-4ac626e6"]]);export{xe as default};
