import{k as e,a3 as a,o as s,c as t,w as r,f as l,h as c,p as o,q as h,F as u,j as n,v as i,i as d,t as p,l as _,a7 as m,m as f,s as g,aq as x,aM as y,Z as k,_ as v,R as w,d as j,e as b}from"./index-40b5c4cd.js";import{_ as C}from"./u-search.31866623.js";import{_ as V}from"./project-card.2a03c56a.js";import{_ as I}from"./z-paging.5998ab2b.js";import{_ as z}from"./_plugin-vue_export-helper.1b428a4d.js";import{a as S}from"./shop.03c31f7b.js";import{g as U}from"./tasks.322bc1ff.js";import"./u-icon.4067ae16.js";import"./u-avatar.c40c0a13.js";import"./icon_visit.713e13e8.js";const q=z(e({__name:"suggest",props:{hot_search:{default:()=>({data:[],status:0})},his_search:{default:()=>[]}},emits:["search","clear"],setup(e,{emit:_}){const m=e,f=a((()=>m.hot_search.data.filter((e=>e.name)))),g=e=>{_("search",e)};return(a,m)=>{const x=d;return s(),t(x,{class:"suggest bg-white"},{default:r((()=>[e.his_search.length?(s(),t(x,{key:0,class:"history"},{default:r((()=>[l(x,{class:"flex justify-between px-[24rpx] pb-[6rpx] pt-[26rpx]"},{default:r((()=>[l(x,{class:"text-lg font-medium"},{default:r((()=>[c("历史搜索")])),_:1}),l(x,{class:"text-xs text-muted",onClick:m[0]||(m[0]=()=>_("clear"))},{default:r((()=>[c("清空")])),_:1})])),_:1}),l(x,{class:"w-full px-[24rpx]"},{default:r((()=>[(s(!0),o(u,null,h(e.his_search,((e,a)=>(s(),t(x,{key:a,class:"keyword truncate",onClick:a=>g(e)},{default:r((()=>[c(p(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):n("",!0),1==e.hot_search.status&&i(f).length?(s(),t(x,{key:1,class:"hot"},{default:r((()=>[l(x,{class:"font-medium pl-[24rpx] pt-[26rpx] pb-[6rpx] text-lg"},{default:r((()=>[c("热门搜索")])),_:1}),l(x,{class:"w-full px-[24rpx]"},{default:r((()=>[(s(!0),o(u,null,h(i(f),((e,a)=>(s(),t(x,{key:a,class:"keyword truncate max-w-full",onClick:a=>g(e.name)},{default:r((()=>[c(p(e.name),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):n("",!0),1==e.hot_search.status&&i(f).length&&e.his_search.length?(s(),t(x,{key:2,class:"mx-[24rpx] my-[40rpx] border-b border-solid border-0 border-light"})):n("",!0)])),_:1})}}}),[["__scopeId","data-v-4d27995b"]]),Q=z(e({__name:"search",setup(e){const{dictData:a}=_("education,experience,welfare"),c=m({hot_search:{data:[],status:1},his_search:[],result:[],searching:!1}),n=f(""),p=g(),z=e=>{n.value=e,n.value&&(c.his_search.includes(n.value)||(c.his_search.unshift(n.value),x.set(y,c.his_search))),p.value.reload(),c.searching=!0},Q=async()=>{(await w({title:"温馨提示",content:"是否清空历史记录？"})).confirm&&(x.set(y,""),c.his_search=[])},D=async(e,a)=>{try{const{lists:s}=await U({keyword:n.value,page_no:e,page_size:a});p.value.complete(s)}catch(s){console.log("报错=>",s),p.value.complete(!1)}};return(async()=>{try{c.hot_search=await S()}catch(e){console.log("获取热门搜索失败=>",e)}})(),c.his_search=x.get(y)||[],(e,_)=>{const m=j(b("u-search"),C),f=d,g=j(b("project-card"),V),x=j(b("z-paging"),I);return s(),t(f,{class:"search"},{default:r((()=>[l(f,{class:"px-[24rpx] py-[14rpx] bg-white"},{default:r((()=>[l(m,{modelValue:n.value,"onUpdate:modelValue":_[0]||(_[0]=e=>n.value=e),placeholder:"请输入关键词搜索",height:"72",onSearch:z,onCustom:z,onClear:_[1]||(_[1]=e=>c.searching=!1)},null,8,["modelValue"])])),_:1}),l(f,{class:"search-content"},{default:r((()=>[k(l(q,{onSearch:z,onClear:Q,hot_search:c.hot_search,his_search:c.his_search},null,8,["hot_search","his_search"]),[[v,!c.searching]]),k(l(f,{class:"search-content-s pt-[20rpx]"},{default:r((()=>[l(x,{ref_key:"paging",ref:p,modelValue:c.result,"onUpdate:modelValue":_[2]||(_[2]=e=>c.result=e),onQuery:D,fixed:!1,height:"100%"},{default:r((()=>[(s(!0),o(u,null,h(c.result,((e,r)=>(s(),t(g,{key:r,item:e,tag:i(a),newsId:e.id},null,8,["item","tag","newsId"])))),128))])),_:1},8,["modelValue"])])),_:1},512),[[v,c.searching]])])),_:1})])),_:1})}}}),[["__scopeId","data-v-1972d8c8"]]);export{Q as default};
