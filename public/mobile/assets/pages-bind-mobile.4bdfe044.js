import{k as e,s as o,m as a,x as t,a7 as l,o as s,c as r,w as u,f as i,h as d,t as m,an as n,ao as c,aI as f,b as p,d as b,e as _,i as x}from"./index-40b5c4cd.js";import{a as h,_ as v}from"./u-form-item.8f125d67.js";import{_ as j}from"./u-verification-code.c21d5ee3.js";import{_ as g}from"./u-form.5fab2264.js";import{_ as k}from"./u-button.d0ae8aa1.js";import{_ as w}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.4067ae16.js";import"./emitter.1571a5d9.js";const y=w(e({__name:"mobile",setup(e){const w=o(),y=a(""),V=t(),B=e=>{y.value=e},C=l({type:"bind",mobile:"",code:""}),$=async()=>{var e,o;if(!C.mobile)return uni.$u.toast("请输入手机号码");(null==(e=w.value)?void 0:e.canGetCode)&&(await n({scene:c.BIND_MOBILE,mobile:C.mobile}),uni.$u.toast("发送成功"),null==(o=w.value)||o.start())},I=async()=>C.mobile?C.code?(await f(C,{token:V.temToken}),uni.$u.toast("绑定成功"),V.login(V.temToken),void setTimeout((()=>{p()}),1500)):uni.$u.toast("请输入验证码"):uni.$u.toast("请输入手机号码");return(e,o)=>{const a=b(_("u-input"),h),t=b(_("u-form-item"),v),l=b(_("u-verification-code"),j),n=x,c=b(_("u-form"),g),f=b(_("u-button"),k);return s(),r(n,{class:"bg-white min-h-full flex flex-col items-center px-[40rpx] pt-[40rpx] box-border"},{default:u((()=>[i(n,{class:"w-full"},{default:u((()=>[i(c,{borderBottom:"","label-width":150},{default:u((()=>[i(t,{label:"手机号",borderBottom:""},{default:u((()=>[i(a,{class:"flex-1",modelValue:C.mobile,"onUpdate:modelValue":o[0]||(o[0]=e=>C.mobile=e),border:!1,placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1}),i(t,{label:"验证码",borderBottom:""},{default:u((()=>[i(a,{class:"flex-1",modelValue:C.code,"onUpdate:modelValue":o[1]||(o[1]=e=>C.code=e),placeholder:"请输入验证码",border:!1},null,8,["modelValue"]),i(n,{class:"border-l border-solid border-0 border-light pl-3 text-muted leading-4 ml-3 w-[180rpx]",onClick:$},{default:u((()=>[i(l,{ref_key:"uCodeRef",ref:w,seconds:60,onChange:B,"change-text":"x秒"},null,512),d(" "+m(y.value),1)])),_:1})])),_:1})])),_:1}),i(n,{class:"mt-[40rpx]"},{default:u((()=>[i(f,{type:"primary",shape:"circle",onClick:I},{default:u((()=>[d(" 确定 ")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-d5af61d4"]]);export{y as default};
