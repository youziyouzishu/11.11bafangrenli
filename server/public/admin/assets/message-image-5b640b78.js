import{d as _,r as f,aZ as I,w,o as v,c as x,a as y,ae as S,a_ as k,aW as z}from"./@vue-a164be7a.js";import"./adapter-vue-24f22062.js";import{_ as B}from"./@tencentcloud-7fc831ec.js";import{a as g}from"./env-a593fd1d.js";import{h as C}from"./utils-14df48f1.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";const M=["src","width","height"],W=_({__name:"message-image",props:{content:{default:()=>({})},messageItem:{default:()=>({})}},emits:["previewImage"],setup(h,{emit:l}){const u=l,e=h,a=f();I(()=>{var t,s,i;(((t=e.messageItem)==null?void 0:t.status)==="success"||((s=e.messageItem)==null?void 0:s.status)==="fail"||((i=e.messageItem)==null?void 0:i.progress)===1)&&o()}),w(()=>e.content.height,(t,s)=>{t>s&&o()});function o(){var r,c,p;const{width:t=0,height:s=0}=e.content;if(t===0||s===0)return;const i=((r=document.getElementById("app"))==null?void 0:r.clientWidth)||0,m=g?300:Math.min(i-180,300),n=C(t,s,m,m);(c=a==null?void 0:a.value)!=null&&c.style&&(a.value.style.width=`${n.width}px`),(p=a==null?void 0:a.value)!=null&&p.style&&(a.value.style.height=`${n.height}px`)}function d(){var t,s;(((t=e.messageItem)==null?void 0:t.status)==="success"||((s=e.messageItem)==null?void 0:s.progress)===1)&&u("previewImage",e.messageItem)}return(t,s)=>(v(),x("div",{ref_key:"skeletonDomRef",ref:a,class:"image-container",onClick:z(d,["self"])},[y("img",{class:S(["message-image",!k(g)&&"message-image-h5"]),src:e.content.url,width:e.content.width,height:e.content.height},null,10,M)],512))}});const O=B(W,[["__scopeId","data-v-8ce4664c"]]);export{O as default};
