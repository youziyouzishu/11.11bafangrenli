import{d as g,r as n,aZ as y,a$ as h,b6 as E,o as A,c as k,a as u,ae as m,a_ as a,M as x,aB as w,ag as I,aW as b}from"./@vue-a164be7a.js";import"./adapter-vue-24f22062.js";import B from"./Icon-2c0593f3.js";import{d as C}from"./env-a593fd1d.js";import{_ as M}from"./@tencentcloud-7fc831ec.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";const L="/admin/assets/msg-audio-ac2cd1c9.svg",P={class:"audio-icon-container"},R=["src"],N=g({__name:"message-audio",props:{content:{type:Object,default:()=>({})},messageItem:{type:Object,default:()=>({})}},emits:["setAudioPlayed"],setup(p,{emit:f}){const v=f,r=p,o=n(),s=n(),t=n(),e=n();y(()=>{e.value&&(e.value.addEventListener("ended",l),e.value.addEventListener("pause",d))}),h(()=>{e.value&&(e.value.removeEventListener("ended",l),e.value.removeEventListener("pause",d))}),E(()=>{s.value=r.messageItem,o.value=r.content});function _(){if(s.value.hasRiskContent||!e.value)return;if(!e.value.paused){e.value.pause(),e.value.currentTime=0,t.value=!1;return}const c=document.getElementsByTagName("audio");Array.from(c).forEach(i=>{i.paused||(i.pause(),i.currentTime=0)}),e.value.play(),t.value=!0,s.value.flow==="in"&&v("setAudioPlayed",s.value.ID)}function l(){t.value=!1}function d(){t.value=!1}return(c,i)=>(A(),k("div",{class:m(["message-audio",[a(C)&&"message-audio-h5",a(s).flow==="out"&&"reserve",a(s).hasRiskContent&&"disable"]]),onClick:b(_,["stop"])},[u("div",P,[u("div",{class:m({mask:!0,play:a(t)})},null,2),x(B,{class:"icon",width:"16px",height:"20px",file:a(L)},null,8,["file"])]),u("span",{class:"time",style:I({width:`${a(o).second*10+20}px`})},w(a(o).second||1)+' " ',5),u("audio",{ref_key:"audioRef",ref:e,src:a(o).url},null,8,R)],2))}});const K=M(N,[["__scopeId","data-v-0da62af2"]]);export{K as default};
