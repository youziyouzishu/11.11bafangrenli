import{x as K,y as P,C as R,A as B,F,G as U,I as D}from"./element-plus-69d92160.js";import{d as I,b5 as L,b2 as N,r as S,w as z,o as b,c as h,M as e,aR as l,ap as M,a_ as a,aU as g,L as C,aT as $,a as j,b0 as A}from"./@vue-a164be7a.js";import{P as G}from"./index-943d816c.js";import{_ as q}from"./index.vue_vue_type_script_setup_true_lang-3ac3301c.js";import{u as H}from"./usePaging-6e60bb31.js";import{f as J,h as O}from"./code-5683a015.js";import{f as Q}from"./index-90bac5cf.js";const W={class:"data-table"},X={class:"m-4"},Y={class:"flex justify-end mt-4"},me=I({__name:"data-table",emits:["success"],setup(Z,{emit:v}){const w=v,c=L(),n=N({name:"",comment:""}),{pager:s,getLists:_,resetParams:y,resetPage:d}=H({fetchFun:O,params:n,size:10}),u=S([]),V=t=>{u.value=t.map(({name:o,comment:i})=>({name:o,comment:i}))},k=async()=>{var t;if(!u.value.length)return Q.msgError("请选择数据表");await J({table:u.value}),(t=c.value)==null||t.close(),w("success")};return z(()=>{var t;return(t=c.value)==null?void 0:t.visible},t=>{t&&_()}),(t,o)=>{const i=K,p=P,f=R,x=B,r=F,E=U,T=D;return b(),h("div",W,[e(G,{ref_key:"popupRef",ref:c,clickModalClose:!1,title:"选择表",width:"900px",async:!0,onConfirm:k},{trigger:l(()=>[M(t.$slots,"default")]),default:l(()=>[e(x,{class:"ls-form",model:a(n),inline:""},{default:l(()=>[e(p,{label:"表名称"},{default:l(()=>[e(i,{class:"w-[280px]",modelValue:a(n).name,"onUpdate:modelValue":o[0]||(o[0]=m=>a(n).name=m),clearable:"",onKeyup:g(a(d),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(p,{label:"表描述"},{default:l(()=>[e(i,{class:"w-[280px]",modelValue:a(n).comment,"onUpdate:modelValue":o[1]||(o[1]=m=>a(n).comment=m),clearable:"",onKeyup:g(a(d),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(p,null,{default:l(()=>[e(f,{type:"primary",onClick:a(d)},{default:l(()=>[C("查询")]),_:1},8,["onClick"]),e(f,{onClick:a(y)},{default:l(()=>[C("重置")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),$((b(),h("div",X,[e(E,{height:"400",size:"large",data:a(s).lists,onSelectionChange:V},{default:l(()=>[e(r,{type:"selection",width:"55"}),e(r,{label:"表名称",prop:"name","min-width":"150"}),e(r,{label:"表描述",prop:"comment","min-width":"160"}),e(r,{label:"创建时间",prop:"create_time","min-width":"180"})]),_:1},8,["data"])])),[[T,a(s).loading]]),j("div",Y,[e(q,{modelValue:a(s),"onUpdate:modelValue":o[2]||(o[2]=m=>A(s)?s.value=m:null),onChange:a(_)},null,8,["modelValue","onChange"])])]),_:3},512)])}}});export{me as _};
