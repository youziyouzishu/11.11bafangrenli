import{c as jt,g as zn}from"./@tencentcloud-7fc831ec.js";import{r as Kn,a as qn}from"./trtc-sdk-v5-5ba82a9e.js";var ze={exports:{}},_o;function Jn(){return _o||(_o=1,function(Xn,Co){(function(s,Ke){Ke(Co,Kn(),qn)})(jt,function(s,Ke,Ut){function yo(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var f=yo(Ke),qe=function(r,o){return qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},qe(r,o)},V=function(){return V=Object.assign||function(r){for(var o,e=1,t=arguments.length;e<t;e++)for(var i in o=arguments[e])Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i]);return r},V.apply(this,arguments)};function R(r,o,e,t){return new(e||(e=Promise))(function(i,n){function a(l){try{u(t.next(l))}catch(d){n(d)}}function c(l){try{u(t.throw(l))}catch(d){n(d)}}function u(l){var d;l.done?i(l.value):(d=l.value,d instanceof e?d:new e(function(T){T(d)})).then(a,c)}u((t=t.apply(r,o||[])).next())})}function g(r,o){var e,t,i,n,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function c(u){return function(l){return function(d){if(e)throw new TypeError("Generator is already executing.");for(;n&&(n=0,d[0]&&(a=0)),a;)try{if(e=1,t&&(i=2&d[0]?t.return:d[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,d[1])).done)return i;switch(t=0,i&&(d=[2&d[0],i.value]),d[0]){case 0:case 1:i=d;break;case 4:return a.label++,{value:d[1],done:!1};case 5:a.label++,t=d[1],d=[0];continue;case 7:d=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||d[0]!==6&&d[0]!==2)){a=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){a.label=d[1];break}if(d[0]===6&&a.label<i[1]){a.label=i[1],i=d;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(d);break}i[2]&&a.ops.pop(),a.trys.pop();continue}d=o.call(r,a)}catch(T){d=[6,T],t=0}finally{e=i=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([u,l])}}}function me(r,o,e){if(e||arguments.length===2)for(var t,i=0,n=o.length;i<n;i++)!t&&i in o||(t||(t=Array.prototype.slice.call(o,0,i)),t[i]=o[i]);return r.concat(t||Array.prototype.slice.call(o))}var Je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof jt<"u"?jt:typeof self<"u"?self:{};function $e(r,o){return r(o={exports:{}},o.exports),o.exports}var S,ie,_e,ne,Ce,W,ye,ae,So=$e(function(r){var o=Object.prototype.hasOwnProperty,e="~";function t(){}function i(u,l,d){this.fn=u,this.context=l,this.once=d||!1}function n(u,l,d,T,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,T||u,h),_=e?e+l:l;return u._events[_]?u._events[_].fn?u._events[_]=[u._events[_],p]:u._events[_].push(p):(u._events[_]=p,u._eventsCount++),u}function a(u,l){--u._eventsCount==0?u._events=new t:delete u._events[l]}function c(){this._events=new t,this._eventsCount=0}Object.create&&(t.prototype=Object.create(null),new t().__proto__||(e=!1)),c.prototype.eventNames=function(){var u,l,d=[];if(this._eventsCount===0)return d;for(l in u=this._events)o.call(u,l)&&d.push(e?l.slice(1):l);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},c.prototype.listeners=function(u){var l=e?e+u:u,d=this._events[l];if(!d)return[];if(d.fn)return[d.fn];for(var T=0,h=d.length,p=new Array(h);T<h;T++)p[T]=d[T].fn;return p},c.prototype.listenerCount=function(u){var l=e?e+u:u,d=this._events[l];return d?d.fn?1:d.length:0},c.prototype.emit=function(u,l,d,T,h,p){var _=e?e+u:u;if(!this._events[_])return!1;var b,v,C=this._events[_],A=arguments.length;if(C.fn){switch(C.once&&this.removeListener(u,C.fn,void 0,!0),A){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,l),!0;case 3:return C.fn.call(C.context,l,d),!0;case 4:return C.fn.call(C.context,l,d,T),!0;case 5:return C.fn.call(C.context,l,d,T,h),!0;case 6:return C.fn.call(C.context,l,d,T,h,p),!0}for(v=1,b=new Array(A-1);v<A;v++)b[v-1]=arguments[v];C.fn.apply(C.context,b)}else{var Q,oe=C.length;for(v=0;v<oe;v++)switch(C[v].once&&this.removeListener(u,C[v].fn,void 0,!0),A){case 1:C[v].fn.call(C[v].context);break;case 2:C[v].fn.call(C[v].context,l);break;case 3:C[v].fn.call(C[v].context,l,d);break;case 4:C[v].fn.call(C[v].context,l,d,T);break;default:if(!b)for(Q=1,b=new Array(A-1);Q<A;Q++)b[Q-1]=arguments[Q];C[v].fn.apply(C[v].context,b)}}return!0},c.prototype.on=function(u,l,d){return n(this,u,l,d,!1)},c.prototype.once=function(u,l,d){return n(this,u,l,d,!0)},c.prototype.removeListener=function(u,l,d,T){var h=e?e+u:u;if(!this._events[h])return this;if(!l)return a(this,h),this;var p=this._events[h];if(p.fn)p.fn!==l||T&&!p.once||d&&p.context!==d||a(this,h);else{for(var _=0,b=[],v=p.length;_<v;_++)(p[_].fn!==l||T&&!p[_].once||d&&p[_].context!==d)&&b.push(p[_]);b.length?this._events[h]=b.length===1?b[0]:b:a(this,h)}return this},c.prototype.removeAllListeners=function(u){var l;return u?(l=e?e+u:u,this._events[l]&&a(this,l)):(this._events=new t,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,r.exports=c});s.TRTCVideoResolution=void 0,(S=s.TRTCVideoResolution||(s.TRTCVideoResolution={}))[S.TRTCVideoResolution_120_120=1]="TRTCVideoResolution_120_120",S[S.TRTCVideoResolution_160_160=3]="TRTCVideoResolution_160_160",S[S.TRTCVideoResolution_270_270=5]="TRTCVideoResolution_270_270",S[S.TRTCVideoResolution_480_480=7]="TRTCVideoResolution_480_480",S[S.TRTCVideoResolution_160_120=50]="TRTCVideoResolution_160_120",S[S.TRTCVideoResolution_240_180=52]="TRTCVideoResolution_240_180",S[S.TRTCVideoResolution_280_210=54]="TRTCVideoResolution_280_210",S[S.TRTCVideoResolution_320_240=56]="TRTCVideoResolution_320_240",S[S.TRTCVideoResolution_400_300=58]="TRTCVideoResolution_400_300",S[S.TRTCVideoResolution_480_360=60]="TRTCVideoResolution_480_360",S[S.TRTCVideoResolution_640_480=62]="TRTCVideoResolution_640_480",S[S.TRTCVideoResolution_960_720=64]="TRTCVideoResolution_960_720",S[S.TRTCVideoResolution_160_90=100]="TRTCVideoResolution_160_90",S[S.TRTCVideoResolution_256_144=102]="TRTCVideoResolution_256_144",S[S.TRTCVideoResolution_320_180=104]="TRTCVideoResolution_320_180",S[S.TRTCVideoResolution_480_270=106]="TRTCVideoResolution_480_270",S[S.TRTCVideoResolution_640_360=108]="TRTCVideoResolution_640_360",S[S.TRTCVideoResolution_960_540=110]="TRTCVideoResolution_960_540",S[S.TRTCVideoResolution_1280_720=112]="TRTCVideoResolution_1280_720",S[S.TRTCVideoResolution_1920_1080=114]="TRTCVideoResolution_1920_1080",s.TRTCVideoStreamType=void 0,(ie=s.TRTCVideoStreamType||(s.TRTCVideoStreamType={}))[ie.TRTCVideoStreamTypeBig=0]="TRTCVideoStreamTypeBig",ie[ie.TRTCVideoStreamTypeSmall=1]="TRTCVideoStreamTypeSmall",ie[ie.TRTCVideoStreamTypeSub=2]="TRTCVideoStreamTypeSub",s.TRTCVideoFillMode=void 0,(_e=s.TRTCVideoFillMode||(s.TRTCVideoFillMode={}))[_e.TRTCVideoFillMode_Fill=0]="TRTCVideoFillMode_Fill",_e[_e.TRTCVideoFillMode_Fit=1]="TRTCVideoFillMode_Fit",s.TRTCVideoMirrorType=void 0,(ne=s.TRTCVideoMirrorType||(s.TRTCVideoMirrorType={}))[ne.TRTCVideoMirrorType_Auto=0]="TRTCVideoMirrorType_Auto",ne[ne.TRTCVideoMirrorType_Enable=1]="TRTCVideoMirrorType_Enable",ne[ne.TRTCVideoMirrorType_Disable=2]="TRTCVideoMirrorType_Disable",s.TRTCBeautyStyle=void 0,(Ce=s.TRTCBeautyStyle||(s.TRTCBeautyStyle={}))[Ce.TRTCBeautyStyleSmooth=0]="TRTCBeautyStyleSmooth",Ce[Ce.TRTCBeautyStyleNature=1]="TRTCBeautyStyleNature",s.TRTCAppScene=void 0,(W=s.TRTCAppScene||(s.TRTCAppScene={}))[W.TRTCAppSceneVideoCall=0]="TRTCAppSceneVideoCall",W[W.TRTCAppSceneLIVE=1]="TRTCAppSceneLIVE",W[W.TRTCAppSceneAudioCall=2]="TRTCAppSceneAudioCall",W[W.TRTCAppSceneVoiceChatRoom=3]="TRTCAppSceneVoiceChatRoom",s.TRTCRoleType=void 0,(ye=s.TRTCRoleType||(s.TRTCRoleType={}))[ye.TRTCRoleAnchor=20]="TRTCRoleAnchor",ye[ye.TRTCRoleAudience=21]="TRTCRoleAudience",s.TRTCAudioQuality=void 0,(ae=s.TRTCAudioQuality||(s.TRTCAudioQuality={}))[ae.TRTCAudioQualitySpeech=1]="TRTCAudioQualitySpeech",ae[ae.TRTCAudioQualityDefault=2]="TRTCAudioQualityDefault",ae[ae.TRTCAudioQualityMusic=3]="TRTCAudioQualityMusic";var se,G,ue=function(r,o,e,t,i){r===void 0&&(r=""),o===void 0&&(o=""),e===void 0&&(e=""),t===void 0&&(t=""),i===void 0&&(i=""),this.deviceId=r,this.deviceName=o,this.kind=e,this.label=t,this.groupId=i};s.TRTCDeviceState=void 0,(se=s.TRTCDeviceState||(s.TRTCDeviceState={}))[se.TRTCDeviceStateAdd=0]="TRTCDeviceStateAdd",se[se.TRTCDeviceStateRemove=1]="TRTCDeviceStateRemove",se[se.TRTCDeviceStateActive=2]="TRTCDeviceStateActive",s.TRTCDeviceType=void 0,(G=s.TRTCDeviceType||(s.TRTCDeviceType={}))[G.TRTCDeviceTypeUnknow=-1]="TRTCDeviceTypeUnknow",G[G.TRTCDeviceTypeMic=0]="TRTCDeviceTypeMic",G[G.TRTCDeviceTypeSpeaker=1]="TRTCDeviceTypeSpeaker",G[G.TRTCDeviceTypeCamera=2]="TRTCDeviceTypeCamera";var H,bo=function(r,o,e,t,i,n,a,c,u,l,d){r===void 0&&(r=0),o===void 0&&(o=""),e===void 0&&(e=""),t===void 0&&(t=0),i===void 0&&(i=""),n===void 0&&(n=s.TRTCRoleType.TRTCRoleAnchor),a===void 0&&(a=null),u===void 0&&(u=null),l===void 0&&(l=null),d===void 0&&(d=30),this.sdkAppId=r,this.userId=o,this.userSig=e,this.roomId=t,this.strRoomId=i,this.role=n,this.privateMapKey=a,this.streamId=u,this.userDefineRecordId=l,this.frameWorkType=d},Vo=function(r,o,e,t){r===void 0&&(r=s.TRTCVideoResolution.TRTCVideoResolution_640_360),o===void 0&&(o=s.TRTCVideoResolutionMode.TRTCVideoResolutionModeLandscape),e===void 0&&(e=15),t===void 0&&(t=550),this.videoResolution=r,this.resMode=o,this.videoFps=e,this.videoBitrate=t};s.TRTCVideoRotation=void 0,(H=s.TRTCVideoRotation||(s.TRTCVideoRotation={}))[H.TRTCVideoRotation0=0]="TRTCVideoRotation0",H[H.TRTCVideoRotation90=1]="TRTCVideoRotation90",H[H.TRTCVideoRotation180=2]="TRTCVideoRotation180",H[H.TRTCVideoRotation270=3]="TRTCVideoRotation270";var O,wo=function(r,o,e){r===void 0&&(r=s.TRTCVideoRotation.TRTCVideoRotation0),o===void 0&&(o=s.TRTCVideoFillMode.TRTCVideoFillMode_Fit),e===void 0&&(e=s.TRTCVideoMirrorType.TRTCVideoMirrorType_Disable),this.rotation=r,this.fillMode=o,this.mirrorType=e};s.TRTCQuality=void 0,(O=s.TRTCQuality||(s.TRTCQuality={}))[O.TRTCQuality_Unknown=0]="TRTCQuality_Unknown",O[O.TRTCQuality_Excellent=1]="TRTCQuality_Excellent",O[O.TRTCQuality_Good=2]="TRTCQuality_Good",O[O.TRTCQuality_Poor=3]="TRTCQuality_Poor",O[O.TRTCQuality_Bad=4]="TRTCQuality_Bad",O[O.TRTCQuality_Vbad=5]="TRTCQuality_Vbad",O[O.TRTCQuality_Down=6]="TRTCQuality_Down";var Se,be,Ve,Xe=function(r,o){r===void 0&&(r=""),o===void 0&&(o=s.TRTCQuality.TRTCQuality_Unknown),this.userId=r,this.quality=o},Eo=function(r,o){r===void 0&&(r=""),o===void 0&&(o=0),this.userId=r,this.volume=o},Ao=function(r,o,e){r===void 0&&(r=0),o===void 0&&(o=0),e===void 0&&(e=null),this.appId=r,this.bizId=o,this.url=e},Ze=function(r,o,e,t,i,n,a){r===void 0&&(r=0),o===void 0&&(o=0),e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),a===void 0&&(a=s.TRTCVideoStreamType.TRTCVideoStreamTypeBig),this.width=r,this.height=o,this.frameRate=e,this.videoBitrate=t,this.audioBitrate=n,this.streamType=a},et=function(r,o,e,t,i,n,a,c,u,l,d,T,h,p){r===void 0&&(r=""),e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),c===void 0&&(c=0),p===void 0&&(p=s.TRTCVideoStreamType.TRTCVideoStreamTypeBig),this.userId=r,this.width=e,this.height=t,this.frameRate=i,this.videoBitrate=n,this.audioBitrate=c,this.streamType=p},Wt=function(r,o,e,t,i,n,a,c,u,l,d){r===void 0&&(r=0),o===void 0&&(o=0),i===void 0&&(i=0),n===void 0&&(n=0),a===void 0&&(a=0),c===void 0&&(c=[]),u===void 0&&(u=0),l===void 0&&(l=[]),d===void 0&&(d=0),this.upLoss=r,this.downLoss=o,this.rtt=i,this.receivedBytes=n,this.sentBytes=a,this.localStatisticsArray=c,this.localStatisticsArraySize=u,this.remoteStatisticsArray=l,this.remoteStatisticsArraySize=d};s.TRTCVideoResolutionMode=void 0,(Se=s.TRTCVideoResolutionMode||(s.TRTCVideoResolutionMode={}))[Se.TRTCVideoResolutionModeLandscape=0]="TRTCVideoResolutionModeLandscape",Se[Se.TRTCVideoResolutionModePortrait=1]="TRTCVideoResolutionModePortrait",s.TRTCVideoQosPreference=void 0,(be=s.TRTCVideoQosPreference||(s.TRTCVideoQosPreference={}))[be.TRTCVideoQosPreferenceSmooth=1]="TRTCVideoQosPreferenceSmooth",be[be.TRTCVideoQosPreferenceClear=2]="TRTCVideoQosPreferenceClear",s.TRTCQosControlMode=void 0,(Ve=s.TRTCQosControlMode||(s.TRTCQosControlMode={}))[Ve.TRTCQosControlModeClient=0]="TRTCQosControlModeClient",Ve[Ve.TRTCQosControlModeServer=1]="TRTCQosControlModeServer";var k,Y,Mo=function(r,o){r===void 0&&(r=s.TRTCVideoQosPreference.TRTCVideoQosPreferenceClear),o===void 0&&(o=s.TRTCQosControlMode.TRTCQosControlModeServer),this.preference=r,this.controlMode=o},tt=function(r,o,e,t){r===void 0&&(r=new ArrayBuffer(0)),o===void 0&&(o=0),e===void 0&&(e=0),t===void 0&&(t=0),this.buffer=r,this.length=o,this.width=e,this.height=t};s.TRTCLogLevel=void 0,(k=s.TRTCLogLevel||(s.TRTCLogLevel={}))[k.TRTCLogLevelVerbose=0]="TRTCLogLevelVerbose",k[k.TRTCLogLevelDebug=1]="TRTCLogLevelDebug",k[k.TRTCLogLevelInfo=2]="TRTCLogLevelInfo",k[k.TRTCLogLevelWarn=3]="TRTCLogLevelWarn",k[k.TRTCLogLevelError=4]="TRTCLogLevelError",k[k.TRTCLogLevelFatal=5]="TRTCLogLevelFatal",k[k.TRTCLogLevelNone=6]="TRTCLogLevelNone",s.TRTCScreenCaptureSourceType=void 0,(Y=s.TRTCScreenCaptureSourceType||(s.TRTCScreenCaptureSourceType={}))[Y.TRTCScreenCaptureSourceTypeUnknown=-1]="TRTCScreenCaptureSourceTypeUnknown",Y[Y.TRTCScreenCaptureSourceTypeWindow=0]="TRTCScreenCaptureSourceTypeWindow",Y[Y.TRTCScreenCaptureSourceTypeScreen=1]="TRTCScreenCaptureSourceTypeScreen",Y[Y.TRTCScreenCaptureSourceTypeCustom=2]="TRTCScreenCaptureSourceTypeCustom";var M,Io=function(r,o,e,t,i,n){r===void 0&&(r=s.TRTCScreenCaptureSourceType.TRTCScreenCaptureSourceTypeUnknown),o===void 0&&(o=""),e===void 0&&(e=""),t===void 0&&(t=new tt),i===void 0&&(i=new tt),n===void 0&&(n=!1),this.type=r,this.sourceId=o,this.sourceName=e,this.thumbBGRA=t,this.iconBGRA=i,this.isMinimizeWindow=n},Po=function(r,o,e,t){r===void 0&&(r=0),o===void 0&&(o=0),e===void 0&&(e=0),t===void 0&&(t=0),this.left=r,this.top=o,this.right=e,this.bottom=t},Lo=function(r,o,e,t,i,n,a,c,u,l,d,T,h,p,_){r===void 0&&(r=s.TRTCTranscodingConfigMode.TRTCTranscodingConfigMode_Unknown),o===void 0&&(o=0),e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),a===void 0&&(a=15),c===void 0&&(c=2),u===void 0&&(u=0),l===void 0&&(l=""),d===void 0&&(d=64),T===void 0&&(T=48e3),h===void 0&&(h=1),p===void 0&&(p=[]),_===void 0&&(_=""),this.mode=r,this.appId=o,this.bizId=e,this.videoWidth=t,this.videoHeight=i,this.videoBitrate=n,this.videoFramerate=a,this.videoGOP=c,this.backgroundColor=u,this.backgroundImage=l,this.audioSampleRate=d,this.audioBitrate=T,this.audioChannels=h,this.mixUsersArray=p,this.mixUsersArraySize=p.length,this.streamId=_};s.TRTCTranscodingConfigMode=void 0,(M=s.TRTCTranscodingConfigMode||(s.TRTCTranscodingConfigMode={}))[M.TRTCTranscodingConfigMode_Unknown=0]="TRTCTranscodingConfigMode_Unknown",M[M.TRTCTranscodingConfigMode_Manual=1]="TRTCTranscodingConfigMode_Manual",M[M.TRTCTranscodingConfigMode_Template_PureAudio=2]="TRTCTranscodingConfigMode_Template_PureAudio",M[M.TRTCTranscodingConfigMode_Template_PresetLayout=3]="TRTCTranscodingConfigMode_Template_PresetLayout",M[M.TRTCTranscodingConfigMode_Template_ScreenSharing=4]="TRTCTranscodingConfigMode_Template_ScreenSharing",M[M.TRTC_TranscodingConfigMode_Unknown=5]="TRTC_TranscodingConfigMode_Unknown",M[M.TRTC_TranscodingConfigMode_Manual=6]="TRTC_TranscodingConfigMode_Manual",M[M.TRTC_TranscodingConfigMode_Template_PureAudio=7]="TRTC_TranscodingConfigMode_Template_PureAudio",M[M.TRTC_TranscodingConfigMode_Template_PresetLayout=8]="TRTC_TranscodingConfigMode_Template_PresetLayout",M[M.TRTC_TranscodingConfigMode_Template_ScreenSharing=9]="TRTC_TranscodingConfigMode_Template_ScreenSharing";var z,Do=function(r,o,e,t,i,n,a,c){r===void 0&&(r=""),o===void 0&&(o=""),e===void 0&&(e=null),t===void 0&&(t=0),i===void 0&&(i=!1),n===void 0&&(n=s.TRTCVideoStreamType.TRTCVideoStreamTypeBig),a===void 0&&(a=s.TRTCMixInputType.TRTCMixInputTypeUndefined),c===void 0&&(c=0),this.userId=r,this.roomId=o,this.rect=e,this.zOrder=t,this.pureAudio=i,this.streamType=n,this.inputType=a,this.renderMode=c};s.TRTCMixInputType=void 0,(z=s.TRTCMixInputType||(s.TRTCMixInputType={}))[z.TRTCMixInputTypeUndefined=0]="TRTCMixInputTypeUndefined",z[z.TRTCMixInputTypeAudioVideo=1]="TRTCMixInputTypeAudioVideo",z[z.TRTCMixInputTypePureVideo=2]="TRTCMixInputTypePureVideo",z[z.TRTCMixInputTypePureAudio=3]="TRTCMixInputTypePureAudio";var Gt,Ht="onError",Oo="onWarning",Yt="rtc",zt="live",K="VirtualBackground",Kt="blur",qt="image",rt={20:"anchor",21:"audience"},ko={0:Yt,1:zt,2:Yt,3:zt};(function(r){r[r.ActiveExitRoom=0]="ActiveExitRoom",r[r.KickedExitRoom=1]="KickedExitRoom"})(Gt||(Gt={}));var xo="enum";function Jt(){return Math.floor(performance.now())}var P=function(r){return r===void 0},we=function(r){return typeof r=="number"},ee=function(r){return typeof r=="boolean"},q,Ee,Ae=function(r){return r&&r.Math===Math&&r},E=Ae(typeof globalThis=="object"&&globalThis)||Ae(typeof window=="object"&&window)||Ae(typeof self=="object"&&self)||Ae(typeof Je=="object"&&Je)||function(){return this}()||Je||Function("return this")(),I=function(r){try{return!!r()}catch{return!0}},F=!I(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),ot=!I(function(){var r=(function(){}).bind();return typeof r!="function"||r.hasOwnProperty("prototype")}),Me=Function.prototype.call,x=ot?Me.bind(Me):function(){return Me.apply(Me,arguments)},$t={}.propertyIsEnumerable,Xt=Object.getOwnPropertyDescriptor,Fo={f:Xt&&!$t.call({1:2},1)?function(r){var o=Xt(this,r);return!!o&&o.enumerable}:$t},it=function(r,o){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:o}},Zt=Function.prototype,nt=Zt.call,Bo=ot&&Zt.bind.bind(nt,nt),w=ot?Bo:function(r){return function(){return nt.apply(r,arguments)}},Qo=w({}.toString),No=w("".slice),J=function(r){return No(Qo(r),8,-1)},at=Object,jo=w("".split),Uo=I(function(){return!at("z").propertyIsEnumerable(0)})?function(r){return J(r)==="String"?jo(r,""):at(r)}:at,st=function(r){return r==null},Wo=TypeError,de=function(r){if(st(r))throw Wo("Can't call method on "+r);return r},Ie=function(r){return Uo(de(r))},ut=typeof document=="object"&&document.all,Pe={all:ut,IS_HTMLDDA:ut===void 0&&ut!==void 0},Go=Pe.all,L=Pe.IS_HTMLDDA?function(r){return typeof r=="function"||r===Go}:function(r){return typeof r=="function"},Ho=Pe.all,B=Pe.IS_HTMLDDA?function(r){return typeof r=="object"?r!==null:L(r)||r===Ho}:function(r){return typeof r=="object"?r!==null:L(r)},Le=function(r,o){return arguments.length<2?(e=E[r],L(e)?e:void 0):E[r]&&E[r][o];var e},Yo=w({}.isPrototypeOf),ct=typeof navigator<"u"&&String(navigator.userAgent)||"",er=E.process,tr=E.Deno,rr=er&&er.versions||tr&&tr.version,or=rr&&rr.v8;or&&(Ee=(q=or.split("."))[0]>0&&q[0]<4?1:+(q[0]+q[1])),!Ee&&ct&&(!(q=ct.match(/Edge\/(\d+)/))||q[1]>=74)&&(q=ct.match(/Chrome\/(\d+)/))&&(Ee=+q[1]);var De=Ee,zo=E.String,ir=!!Object.getOwnPropertySymbols&&!I(function(){var r=Symbol("symbol detection");return!zo(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&De&&De<41}),nr=ir&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Ko=Object,lt=nr?function(r){return typeof r=="symbol"}:function(r){var o=Le("Symbol");return L(o)&&Yo(o.prototype,Ko(r))},qo=String,Jo=TypeError,$o=function(r){if(L(r))return r;throw Jo(function(o){try{return qo(o)}catch{return"Object"}}(r)+" is not a function")},ar=function(r,o){var e=r[o];return st(e)?void 0:$o(e)},Xo=TypeError,Zo=Object.defineProperty,dt=function(r,o){try{Zo(E,r,{value:o,configurable:!0,writable:!0})}catch{E[r]=o}return o},sr="__core-js_shared__",$=E[sr]||dt(sr,{}),Tt=$e(function(r){(r.exports=function(o,e){return $[o]||($[o]=e!==void 0?e:{})})("versions",[]).push({version:"3.32.1",mode:"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.1/LICENSE",source:"https://github.com/zloirock/core-js"})}),ei=Object,ur=function(r){return ei(de(r))},ti=w({}.hasOwnProperty),D=Object.hasOwn||function(r,o){return ti(ur(r),o)},ri=0,oi=Math.random(),ii=w(1 .toString),cr=function(r){return"Symbol("+(r===void 0?"":r)+")_"+ii(++ri+oi,36)},ce=E.Symbol,ht=Tt("wks"),ni=nr?ce.for||ce:ce&&ce.withoutSetter||cr,X=function(r){return D(ht,r)||(ht[r]=ir&&D(ce,r)?ce[r]:ni("Symbol."+r)),ht[r]},ai=TypeError,si=X("toPrimitive"),ui=function(r,o){if(!B(r)||lt(r))return r;var e,t=ar(r,si);if(t){if(o===void 0&&(o="default"),e=x(t,r,o),!B(e)||lt(e))return e;throw ai("Can't convert object to primitive value")}return o===void 0&&(o="number"),function(i,n){var a,c;if(n==="string"&&L(a=i.toString)&&!B(c=x(a,i))||L(a=i.valueOf)&&!B(c=x(a,i))||n!=="string"&&L(a=i.toString)&&!B(c=x(a,i)))return c;throw Xo("Can't convert object to primitive value")}(r,o)},Oe=function(r){var o=ui(r,"string");return lt(o)?o:o+""},pt=E.document,ci=B(pt)&&B(pt.createElement),lr=function(r){return ci?pt.createElement(r):{}},dr=!F&&!I(function(){return Object.defineProperty(lr("div"),"a",{get:function(){return 7}}).a!==7}),Tr=Object.getOwnPropertyDescriptor,hr={f:F?Tr:function(r,o){if(r=Ie(r),o=Oe(o),dr)try{return Tr(r,o)}catch{}if(D(r,o))return it(!x(Fo.f,r,o),r[o])}},pr=F&&I(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),li=String,di=TypeError,N=function(r){if(B(r))return r;throw di(li(r)+" is not an object")},Ti=TypeError,ft=Object.defineProperty,hi=Object.getOwnPropertyDescriptor,vt="enumerable",Rt="configurable",gt="writable",Te={f:F?pr?function(r,o,e){if(N(r),o=Oe(o),N(e),typeof r=="function"&&o==="prototype"&&"value"in e&&gt in e&&!e[gt]){var t=hi(r,o);t&&t[gt]&&(r[o]=e.value,e={configurable:Rt in e?e[Rt]:t[Rt],enumerable:vt in e?e[vt]:t[vt],writable:!1})}return ft(r,o,e)}:ft:function(r,o,e){if(N(r),o=Oe(o),N(e),dr)try{return ft(r,o,e)}catch{}if("get"in e||"set"in e)throw Ti("Accessors not supported");return"value"in e&&(r[o]=e.value),r}},mt=F?function(r,o,e){return Te.f(r,o,it(1,e))}:function(r,o,e){return r[o]=e,r},fr=Function.prototype,pi=F&&Object.getOwnPropertyDescriptor,_t=D(fr,"name"),fi={EXISTS:_t,PROPER:_t&&(function(){}).name==="something",CONFIGURABLE:_t&&(!F||F&&pi(fr,"name").configurable)},vi=w(Function.toString);L($.inspectSource)||($.inspectSource=function(r){return vi(r)});var ke,he,xe,vr=$.inspectSource,Rr=E.WeakMap,Ri=L(Rr)&&/native code/.test(String(Rr)),gr=Tt("keys"),mr=function(r){return gr[r]||(gr[r]=cr(r))},Ct={},_r="Object already initialized",yt=E.TypeError,gi=E.WeakMap;if(Ri||$.state){var j=$.state||($.state=new gi);j.get=j.get,j.has=j.has,j.set=j.set,ke=function(r,o){if(j.has(r))throw yt(_r);return o.facade=r,j.set(r,o),o},he=function(r){return j.get(r)||{}},xe=function(r){return j.has(r)}}else{var le=mr("state");Ct[le]=!0,ke=function(r,o){if(D(r,le))throw yt(_r);return o.facade=r,mt(r,le,o),o},he=function(r){return D(r,le)?r[le]:{}},xe=function(r){return D(r,le)}}var St={set:ke,get:he,has:xe,enforce:function(r){return xe(r)?he(r):ke(r,{})},getterFor:function(r){return function(o){var e;if(!B(o)||(e=he(o)).type!==r)throw yt("Incompatible receiver, "+r+" required");return e}}},mi=$e(function(r){var o=fi.CONFIGURABLE,e=St.enforce,t=St.get,i=String,n=Object.defineProperty,a=w("".slice),c=w("".replace),u=w([].join),l=F&&!I(function(){return n(function(){},"length",{value:8}).length!==8}),d=String(String).split("String"),T=r.exports=function(h,p,_){a(i(p),0,7)==="Symbol("&&(p="["+c(i(p),/^Symbol\(([^)]*)\)/,"$1")+"]"),_&&_.getter&&(p="get "+p),_&&_.setter&&(p="set "+p),(!D(h,"name")||o&&h.name!==p)&&(F?n(h,"name",{value:p,configurable:!0}):h.name=p),l&&_&&D(_,"arity")&&h.length!==_.arity&&n(h,"length",{value:_.arity});try{_&&D(_,"constructor")&&_.constructor?F&&n(h,"prototype",{writable:!1}):h.prototype&&(h.prototype=void 0)}catch{}var b=e(h);return D(b,"source")||(b.source=u(d,typeof p=="string"?p:"")),h};Function.prototype.toString=T(function(){return L(this)&&t(this).source||vr(this)},"toString")}),bt=function(r,o,e,t){t||(t={});var i=t.enumerable,n=t.name!==void 0?t.name:o;if(L(e)&&mi(e,n,t),t.global)i?r[o]=e:dt(o,e);else{try{t.unsafe?r[o]&&(i=!0):delete r[o]}catch{}i?r[o]=e:Te.f(r,o,{value:e,enumerable:!1,configurable:!t.nonConfigurable,writable:!t.nonWritable})}return r},_i=Math.ceil,Ci=Math.floor,yi=Math.trunc||function(r){var o=+r;return(o>0?Ci:_i)(o)},Vt=function(r){var o=+r;return o!=o||o===0?0:yi(o)},Si=Math.max,bi=Math.min,Vi=Math.min,Cr=function(r){return r>0?Vi(Vt(r),9007199254740991):0},yr=function(r){return Cr(r.length)},Sr=function(r){return function(o,e,t){var i,n=Ie(o),a=yr(n),c=function(u,l){var d=Vt(u);return d<0?Si(d+l,0):bi(d,l)}(t,a);if(r&&e!=e){for(;a>c;)if((i=n[c++])!=i)return!0}else for(;a>c;c++)if((r||c in n)&&n[c]===e)return r||c||0;return!r&&-1}},wi={includes:Sr(!0),indexOf:Sr(!1)}.indexOf,br=w([].push),Vr=function(r,o){var e,t=Ie(r),i=0,n=[];for(e in t)!D(Ct,e)&&D(t,e)&&br(n,e);for(;o.length>i;)D(t,e=o[i++])&&(~wi(n,e)||br(n,e));return n},Fe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ei=Fe.concat("length","prototype"),Ai={f:Object.getOwnPropertyNames||function(r){return Vr(r,Ei)}},Mi={f:Object.getOwnPropertySymbols},Ii=w([].concat),Pi=Le("Reflect","ownKeys")||function(r){var o=Ai.f(N(r)),e=Mi.f;return e?Ii(o,e(r)):o},Li=function(r,o,e){for(var t=Pi(o),i=Te.f,n=hr.f,a=0;a<t.length;a++){var c=t[a];D(r,c)||e&&D(e,c)||i(r,c,n(o,c))}},Di=/#|\.prototype\./,pe=function(r,o){var e=ki[Oi(r)];return e===Fi||e!==xi&&(L(o)?I(o):!!o)},Oi=pe.normalize=function(r){return String(r).replace(Di,".").toLowerCase()},ki=pe.data={},xi=pe.NATIVE="N",Fi=pe.POLYFILL="P",Bi=pe,Qi=hr.f,wt=function(r,o){var e,t,i,n,a,c=r.target,u=r.global,l=r.stat;if(e=u?E:l?E[c]||dt(c,{}):(E[c]||{}).prototype)for(t in o){if(n=o[t],i=r.dontCallGetSet?(a=Qi(e,t))&&a.value:e[t],!Bi(u?t:c+(l?".":"#")+t,r.forced)&&i!==void 0){if(typeof n==typeof i)continue;Li(n,i)}(r.sham||i&&i.sham)&&mt(n,"sham",!0),bt(e,t,n,r)}},wr={};wr[X("toStringTag")]="z";var Be,Ni=String(wr)==="[object z]",ji=X("toStringTag"),Ui=Object,Wi=J(function(){return arguments}())==="Arguments",Er=Ni?J:function(r){var o,e,t;return r===void 0?"Undefined":r===null?"Null":typeof(e=function(i,n){try{return i[n]}catch{}}(o=Ui(r),ji))=="string"?e:Wi?J(o):(t=J(o))==="Object"&&L(o.callee)?"Arguments":t},Gi=String,te=function(r){if(Er(r)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Gi(r)},Hi=function(){var r=N(this),o="";return r.hasIndices&&(o+="d"),r.global&&(o+="g"),r.ignoreCase&&(o+="i"),r.multiline&&(o+="m"),r.dotAll&&(o+="s"),r.unicode&&(o+="u"),r.unicodeSets&&(o+="v"),r.sticky&&(o+="y"),o},Et=E.RegExp,At=I(function(){var r=Et("a","y");return r.lastIndex=2,r.exec("abcd")!==null}),Yi=At||I(function(){return!Et("a","y").sticky}),zi={BROKEN_CARET:At||I(function(){var r=Et("^r","gy");return r.lastIndex=2,r.exec("str")!==null}),MISSED_STICKY:Yi,UNSUPPORTED_Y:At},Ki=Object.keys||function(r){return Vr(r,Fe)},qi=F&&!pr?Object.defineProperties:function(r,o){N(r);for(var e,t=Ie(o),i=Ki(o),n=i.length,a=0;n>a;)Te.f(r,e=i[a++],t[e]);return r},Ji={f:qi},$i=Le("document","documentElement"),Mt="prototype",It="script",Ar=mr("IE_PROTO"),Pt=function(){},Mr=function(r){return"<"+It+">"+r+"</"+It+">"},Ir=function(r){r.write(Mr("")),r.close();var o=r.parentWindow.Object;return r=null,o},Qe=function(){try{Be=new ActiveXObject("htmlfile")}catch{}var r,o,e;Qe=typeof document<"u"?document.domain&&Be?Ir(Be):(o=lr("iframe"),e="java"+It+":",o.style.display="none",$i.appendChild(o),o.src=String(e),(r=o.contentWindow.document).open(),r.write(Mr("document.F=Object")),r.close(),r.F):Ir(Be);for(var t=Fe.length;t--;)delete Qe[Mt][Fe[t]];return Qe()};Ct[Ar]=!0;var Pr,Lt,Xi=Object.create||function(r,o){var e;return r!==null?(Pt[Mt]=N(r),e=new Pt,Pt[Mt]=null,e[Ar]=r):e=Qe(),o===void 0?e:Ji.f(e,o)},Zi=E.RegExp,en=I(function(){var r=Zi(".","s");return!(r.dotAll&&r.exec(`
`)&&r.flags==="s")}),tn=E.RegExp,rn=I(function(){var r=tn("(?<a>b)","g");return r.exec("b").groups.a!=="b"||"b".replace(r,"$<a>c")!=="bc"}),on=St.get,nn=Tt("native-string-replace",String.prototype.replace),Ne=RegExp.prototype.exec,Dt=Ne,an=w("".charAt),sn=w("".indexOf),un=w("".replace),Ot=w("".slice),kt=(Lt=/b*/g,x(Ne,Pr=/a/,"a"),x(Ne,Lt,"a"),Pr.lastIndex!==0||Lt.lastIndex!==0),Lr=zi.BROKEN_CARET,xt=/()??/.exec("")[1]!==void 0;(kt||xt||Lr||en||rn)&&(Dt=function(r){var o,e,t,i,n,a,c,u=this,l=on(u),d=te(r),T=l.raw;if(T)return T.lastIndex=u.lastIndex,o=x(Dt,T,d),u.lastIndex=T.lastIndex,o;var h=l.groups,p=Lr&&u.sticky,_=x(Hi,u),b=u.source,v=0,C=d;if(p&&(_=un(_,"y",""),sn(_,"g")===-1&&(_+="g"),C=Ot(d,u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&an(d,u.lastIndex-1)!==`
`)&&(b="(?: "+b+")",C=" "+C,v++),e=new RegExp("^(?:"+b+")",_)),xt&&(e=new RegExp("^"+b+"$(?!\\s)",_)),kt&&(t=u.lastIndex),i=x(Ne,p?e:u,C),p?i?(i.input=Ot(i.input,v),i[0]=Ot(i[0],v),i.index=u.lastIndex,u.lastIndex+=i[0].length):u.lastIndex=0:kt&&i&&(u.lastIndex=u.global?i.index+i[0].length:t),xt&&i&&i.length>1&&x(nn,i[0],e,function(){for(n=1;n<arguments.length-2;n++)arguments[n]===void 0&&(i[n]=void 0)}),i&&h)for(i.groups=a=Xi(null),n=0;n<h.length;n++)a[(c=h[n])[0]]=i[c[1]];return i});var je=Dt;wt({target:"RegExp",proto:!0,forced:/./.exec!==je},{exec:je});var Ue=`	
\v\f\r                　\u2028\u2029\uFEFF`,Dr=w("".replace),cn=RegExp("^["+Ue+"]+"),ln=RegExp("(^|[^"+Ue+"])["+Ue+"]+$"),Ft=function(r){return function(o){var e=te(de(o));return 1&r&&(e=Dr(e,cn,"")),2&r&&(e=Dr(e,ln,"$1")),e}},dn={start:Ft(1),end:Ft(2),trim:Ft(3)}.trim,Tn=w("".charAt),We=E.parseFloat,Or=E.Symbol,kr=Or&&Or.iterator,xr=1/We(Ue+"-0")!=-1/0||kr&&!I(function(){We(Object(kr))})?function(r){var o=dn(te(r)),e=We(o);return e===0&&Tn(o,0)==="-"?-0:e}:We;wt({global:!0,forced:parseFloat!==xr},{parseFloat:xr});var Fr=function(r){if(J(r)==="Function")return w(r)},hn=X("species"),Bt=RegExp.prototype,pn=w("".charAt),Br=w("".charCodeAt),fn=w("".slice),Qr=function(r){return function(o,e){var t,i,n=te(de(o)),a=Vt(e),c=n.length;return a<0||a>=c?r?"":void 0:(t=Br(n,a))<55296||t>56319||a+1===c||(i=Br(n,a+1))<56320||i>57343?r?pn(n,a):t:r?fn(n,a,a+2):i-56320+(t-55296<<10)+65536}},vn={codeAt:Qr(!1),charAt:Qr(!0)}.charAt,Rn=function(r,o,e){return o+(e?vn(r,o).length:1)},gn=TypeError,Nr=function(r,o){var e=r.exec;if(L(e)){var t=x(e,r,o);return t!==null&&N(t),t}if(J(r)==="RegExp")return x(je,r,o);throw gn("RegExp#exec called on incompatible receiver")};(function(r,o,e,t){var i=X(r),n=!I(function(){var l={};return l[i]=function(){return 7},""[r](l)!==7}),a=n&&!I(function(){var l=!1,d=/a/;return r==="split"&&((d={}).constructor={},d.constructor[hn]=function(){return d},d.flags="",d[i]=/./[i]),d.exec=function(){return l=!0,null},d[i](""),!l});if(!n||!a||e){var c=Fr(/./[i]),u=o(i,""[r],function(l,d,T,h,p){var _=Fr(l),b=d.exec;return b===je||b===Bt.exec?n&&!p?{done:!0,value:c(d,T,h)}:{done:!0,value:_(T,d,h)}:{done:!1}});bt(String.prototype,r,u[0]),bt(Bt,i,u[1])}t&&mt(Bt[i],"sham",!0)})("match",function(r,o,e){return[function(t){var i=de(this),n=st(t)?void 0:ar(t,r);return n?x(n,t,i):new RegExp(t)[r](te(i))},function(t){var i=N(this),n=te(t),a=e(o,i,n);if(a.done)return a.value;if(!i.global)return Nr(i,n);var c=i.unicode;i.lastIndex=0;for(var u,l=[],d=0;(u=Nr(i,n))!==null;){var T=te(u[0]);l[d]=T,T===""&&(i.lastIndex=Rn(n,Cr(i.lastIndex),c)),d++}return d===0?null:l}]});var Qt=Array.isArray||function(r){return J(r)==="Array"},mn=TypeError,jr=function(r){if(r>9007199254740991)throw mn("Maximum allowed index exceeded");return r},Ur=function(r,o,e){var t=Oe(o);t in r?Te.f(r,t,it(0,e)):r[t]=e},Wr=function(){},_n=[],Gr=Le("Reflect","construct"),Nt=/^\s*(?:class|function)\b/,Cn=w(Nt.exec),yn=!Nt.exec(Wr),fe=function(r){if(!L(r))return!1;try{return Gr(Wr,_n,r),!0}catch{return!1}},Hr=function(r){if(!L(r))return!1;switch(Er(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return yn||!!Cn(Nt,vr(r))}catch{return!0}};Hr.sham=!0;var Yr,Sn=!Gr||I(function(){var r;return fe(fe.call)||!fe(Object)||!fe(function(){r=!0})||r})?Hr:fe,bn=X("species"),zr=Array,Vn=function(r,o){return new(function(e){var t;return Qt(e)&&(t=e.constructor,(Sn(t)&&(t===zr||Qt(t.prototype))||B(t)&&(t=t[bn])===null)&&(t=void 0)),t===void 0?zr:t}(r))(o===0?0:o)},wn=X("species"),Kr=X("isConcatSpreadable"),En=De>=51||!I(function(){var r=[];return r[Kr]=!1,r.concat()[0]!==r}),An=function(r){if(!B(r))return!1;var o=r[Kr];return o!==void 0?!!o:Qt(r)};wt({target:"Array",proto:!0,arity:1,forced:!(En&&(Yr="concat",De>=51||!I(function(){var r=[];return(r.constructor={})[wn]=function(){return{foo:1}},r[Yr](Boolean).foo!==1})))},{concat:function(r){var o,e,t,i,n,a=ur(this),c=Vn(a,0),u=0;for(o=-1,t=arguments.length;o<t;o++)if(An(n=o===-1?a:arguments[o]))for(i=yr(n),jr(u+i),e=0;e<i;e++,u++)e in n&&Ur(c,u,n[e]);else jr(u+1),Ur(c,u++,n);return c.length=u,c}});var m=window.navigator&&window.navigator.userAgent||"",qr=/AppleWebKit\/([\d.]+)/i.exec(m);qr&&parseFloat(qr.pop());var Jr=/iPad/i.test(m),Mn=/iPhone/i.test(m)&&!Jr,In=/iPod/i.test(m),Pn=Mn||Jr||In,Ln=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i.test(m);Pn&&function(){var r=m.match(/OS (\d+)_/i);r&&r[1]&&r[1]}();var Dn=/Android/i.test(m);Dn&&function(){var r=m.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!r)return null;var o=r[1]&&parseFloat(r[1]),e=r[2]&&parseFloat(r[2]);o&&e&&parseFloat("".concat(r[1],".").concat(r[2]))}(),/Firefox/i.test(m)&&function(){var r=m.match(/Firefox\/(\d+)/);r&&r[1]&&parseFloat(r[1])}();var $r=/Edge\//i.test(m);$r&&function(){var r=m.match(/Edge\/(\d+)/i);r&&r[1]&&r[1]}();var Xr=/Edg\//i.test(m);Xr&&function(){var r=m.match(/Edg\/(\d+)/);r&&r[1]&&parseFloat(r[1])}();var Zr=/SogouMobileBrowser\//i.test(m);Zr&&function(){var r=m.match(/SogouMobileBrowser\/(\d+)/);r&&r[1]&&parseFloat(r[1])}();var eo=/MetaSr\s/i.test(m);eo&&function(){var r=m.match(/MetaSr(\s\d+(\.\d+)+)/);r&&r[1]&&parseFloat(r[1])}();var re=/TBS\/\d+/i.test(m);re&&function(){var r=m.match(/TBS\/(\d+)/i);r&&r[1]&&r[1]}();var to=/XWEB\/\d+/i.test(m);to&&function(){var r=m.match(/XWEB\/(\d+)/i);r&&r[1]&&r[1]}(),/MSIE\/\d+/i.test(m)&&function(){var r=/MSIE\s(\d+)\.\d/.exec(m);r&&parseFloat(r[1])}(),/(micromessenger|webbrowser)/i.test(m)&&function(){var r=m.match(/MicroMessenger\/(\d+)/i);r&&r[1]&&r[1]}();var ro=!re&&/MQQBrowser\/\d+/i.test(m)&&/COVC\/\d+/i.test(m),oo=!re&&/MQQBrowser\/\d+/i.test(m)&&!/COVC\/\d+/i.test(m);(oo||ro)&&function(){var r=m.match(/ MQQBrowser\/([\d.]+)/);r&&r[1]&&r[1]}();var io=!re&&/ QQBrowser\/\d+/i.test(m);io&&function(){var r=m.match(/ QQBrowser\/([\d.]+)/);r&&r[1]&&r[1]}();var no=!re&&/QQBrowserLite\/\d+/i.test(m);no&&function(){var r=m.match(/QQBrowserLite\/([\d.]+)/);r&&r[1]&&r[1]}();var ao=!re&&/MQBHD\/\d+/i.test(m);ao&&function(){var r=m.match(/MQBHD\/([\d.]+)/);r&&r[1]&&r[1]}();var so=/MiuiBrowser/i.test(m);so&&function(){var r=m.match(/MiuiBrowser\/([\d.]+)/);r&&r[1]&&r[1]}();var uo=/HuaweiBrowser/i.test(m);uo&&function(){var r=m.match(/HuaweiBrowser\/([\d.]+)/);r&&r[1]&&r[1]}();var co=/SamsungBrowser/i.test(m);co&&function(){var r=m.match(/SamsungBrowser\/([\d.]+)/);r&&r[1]&&r[1]}();var lo=/HeyTapBrowser/i.test(m);lo&&function(){var r=m.match(/HeyTapBrowser\/([\d.]+)/);r&&r[1]&&r[1]}();var To=/VivoBrowser/i.test(m);To&&function(){var r=m.match(/VivoBrowser\/([\d.]+)/);r&&r[1]&&r[1]}();var ho,Ge,ve,On=/Chrome/i.test(m),po=!$r&&!eo&&!Zr&&!re&&!to&&!Xr&&!io&&!so&&!uo&&!co&&!lo&&!To&&/Chrome/i.test(m);po&&function(){var r=m.match(/Chrome\/(\d+)/);r&&r[1]&&parseFloat(r[1])}(),po&&function(){var r=m.match(/Chrome\/([\d.]+)/);r&&r[1]&&r[1]}(),!On&&!oo&&!ro&&!no&&!ao&&/Safari/i.test(m)&&function(){var r=m.match(/Version\/([\d.]+)/);r&&r[1]&&r[1]}(),function(r){r.LIVE="live",r.RTC="rtc"}(ho||(ho={})),function(r){r.CONTAIN="contain",r.COVER="cover",r.FILL="fill"}(Ge||(Ge={})),function(r){r[r.exitRoom=0]="exitRoom",r[r.banned=1]="banned",r[r.roomDisband=2]="roomDisband"}(ve||(ve={}));var kn=-1301,xn=-1314,Fn=-1315,Bn=-1316,Qn=-1302,Nn=-1317,jn=-1318,Un=-1319,Wn=-70252,fo={code:-1001,message:"参数错误, 请检查参数格式、是否非空等"},Re={code:-1005,message:"not supported"},vo="2.6.0",Gn=function(){function r(o,e){if(this.logRegion="tc",this.loggerManager=o,e){var t=e.sdkAppId,i=e.userId,n=e.seq;this.seq=n,o&&(this.logger=o.createLogger({id:"".concat(this.logRegion).concat(n),userId:i,sdkAppId:t}))}else this.logger=o;this.logger||(this.logger={debug:function(a){console.debug(a)},info:function(a){console.info(a)},warn:function(a){console.warn(a)},error:function(a){console.error(a)}})}return r.prototype.getLogMessage=function(o){var e=this;return o.map(function(t){return e.getStringifyMessage(t)}).join(" ")},r.prototype.getStringifyMessage=function(o){var e=this;if(typeof o!="object")return o;if(o instanceof HTMLElement)return"".concat(o.tagName.toLocaleLowerCase(),"#").concat(o.id);if(o instanceof Array){var t=[];return Object.keys(o).forEach(function(n){return t[n]=e.getStringifyMessage(o[n])}),JSON.stringify(t)}if(o instanceof Object){var i={};return Object.keys(o).forEach(function(n){return i[n]=e.getStringifyMessage(o[n])}),JSON.stringify(i)}return o},r.prototype.update=function(o){var e=o.userId,t=o.sdkAppId;this.loggerManager&&this.loggerManager.createLogger&&(this.logger=this.loggerManager.createLogger({id:"".concat(this.logRegion).concat(this.seq),userId:e,sdkAppId:t}))},r.prototype.debug=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];var t=this.getLogMessage(o);this.logger.debug(t)},r.prototype.info=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];var t=this.getLogMessage(o);this.logger&&this.logger.info&&this.logger.info(t)},r.prototype.warn=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];var t=this.getLogMessage(o);this.logger&&this.logger.warn&&this.logger.warn(t)},r.prototype.error=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];var t=this.getLogMessage(o);this.logger&&this.logger.error&&this.logger.error(t)},r}(),Ro=f.default._loggerManager;Ro.info("TRTCCloud Version: ".concat(vo));var go,mo,He,y="trtcCloud",Hn=1;navigator&&navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",(go=function(){Ye.size!==0&&Array.from(Ye.values()).forEach(function(r){r.fn()})},mo=30,function(){for(var r=this,o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];He>0&&clearTimeout(He),He=window.setTimeout(function(){go.apply(r,o),He=-1},mo)}));var Ye=new Map,Yn=function(r){function o(e){e===void 0&&(e={});var t=r.call(this)||this;t._version="",t._frameWorkType=30,t._component=0,t._language=0,t._networkProxy={},t._localView=null,t._autoRecvAudio=!0,t._autoRecvVideo=!0,t._localTestView=null,t._isVideoPublish=!0,t._localRenderParams={rotation:s.TRTCVideoRotation.TRTCVideoRotation0,fillMode:s.TRTCVideoFillMode.TRTCVideoFillMode_Fill,mirrorType:s.TRTCVideoMirrorType.TRTCVideoMirrorType_Auto},t._videoProfile={},t._videoPlayOption={},t._isAudioPublish=!0,t._audioProfile=f.default.TYPE.AUDIO_PROFILE_STANDARD,t._captureVolume=100,t._isSharingScreen=!1,t._remoteStreamConfig=new Map,t._remoteStreamMap=new Map,t._cameraList=[],t._microphoneList=[],t._speakerList=[],t._currentCamera={},t._currentMicrophone={},t._currentSpeaker={},t._currentCameraId="",t._currentMicrophoneId="",t._currentSpeakerId="",t._screenShareParams={option:{}},t._isMobile=Ln,t._isFrontCamera=!0,t._smallStreamVideoProfile=void 0,t._qosPreference=void 0,t._defaultVideoProfile={width:640,height:480,frameRate:15,bitrate:900},t._defaultScreenProfile={width:1920,height:1080,frameRate:15,bitrate:1500},t._defaultSmallVideoProfile={width:160,height:120,frameRate:15,bitrate:200},t._isVirtualBackground=!1,t._isTestVirtualBackground=!1,t._version=vo;var i=e.frameWorkType,n=i===void 0?30:i,a=e.component,c=a===void 0?0:a,u=e.language,l=u===void 0?0:u;return t._frameWorkType=n,t._component=c,t._language=l,t._trtc=f.default.create(),t._testTrtc=f.default.create(),t._log=f.default._loggerManager,t.logger=new Gn(Ro,{seq:Hn++}),t._echoCancellation=void 0,t._noiseSuppression=void 0,t._autoGainControl=void 0,t._addTRTCEvents(),t.handleDeviceChange=t.handleDeviceChange.bind(t),Ye.set(t,{fn:t.handleDeviceChange,self:t}),t}return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}qe(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}(o,r),o.getTRTCShareInstance=function(e){return o.shareInstance||(o.shareInstance=new o(e)),o.shareInstance},o.setLogLevel=function(e,t){var i,n=((i={})[s.TRTCLogLevel.TRTCLogLevelVerbose]=0,i[s.TRTCLogLevel.TRTCLogLevelDebug]=1,i[s.TRTCLogLevel.TRTCLogLevelInfo]=2,i[s.TRTCLogLevel.TRTCLogLevelWarn]=3,i[s.TRTCLogLevel.TRTCLogLevelError]=4,i[s.TRTCLogLevel.TRTCLogLevelFatal]=4,i[s.TRTCLogLevel.TRTCLogLevelNone]=5,i),a=n[e];P(a)&&(a=n[s.TRTCLogLevel.TRTCLogLevelInfo]);var c=!ee(t)||t;f.default.setLogLevel(a,c)},o.destroyTRTCShareInstance=function(){o.shareInstance&&(o.shareInstance._destroy(),o.shareInstance=null),Array.from(o.subCloudMap.keys()).forEach(function(e){return e._destroy()})},o.prototype.createSubCloud=function(){if(this!==o.shareInstance)return null;var e=new o;return o.subCloudMap.set(e,e),e},o.prototype.destroy=function(){this!==o.shareInstance?(o.subCloudMap.get(this)&&o.subCloudMap.delete(this),this._destroy()):o.destroyTRTCShareInstance()},o.prototype._destroy=function(){Ye.delete(this),this.removeAllListeners(),this._trtc.off("*"),this._trtc.destroy(),this._trtc=null,this._testTrtc.off("*"),this._testTrtc.destroy(),this._testTrtc=null},o.prototype.getSDKVersion=function(){return this._version||""},o.prototype.enterRoom=function(e,t){return R(this,void 0,Promise,function(){var i,n,a,c,u,l,d,T,h,p,_,b,v,C,A,Q,oe;return g(this,function(U){switch(U.label){case 0:if(i=e.sdkAppId,n=e.userId,a=e.userSig,c=e.roomId,u=e.strRoomId,l=e.role,d=e.privateMapKey,T=e.businessInfo,h=e.enableAutoPlayDialog,p=e.proxy,_=e.streamId,b=e.userDefineRecordId,this.logger.update({sdkAppId:i,userId:n}),this.logger.info("".concat(y,".enterRoom with params: "),e,t),p&&(this._networkProxy=p),!(i&&n&&a))return[3,5];U.label=1;case 1:return U.trys.push([1,3,,4]),v={sdkAppId:i,userId:n,userSig:a,roomId:c,strRoomId:u,role:rt[l],scene:ko[t],autoReceiveAudio:this._autoRecvAudio,autoReceiveVideo:this._autoRecvVideo,frameWorkType:this._frameWorkType,component:this._component,language:this._language},v=d?V(V({},v),{privateMapKey:d}):v,v=T?V(V({},v),{businessInfo:T}):v,C=h||this._enableAutoPlayDialog,v=ee(C)?V(V({},v),{enableAutoPlayDialog:C}):v,v=this._networkProxy?V(V({},v),{proxy:this._networkProxy}):v,v=_?V(V({},v),{streamId:_}):v,v=b?V(V({},v),{userDefineRecordId:b}):v,A=Jt(),[4,this._trtc.enterRoom(v)];case 2:return U.sent(),Q=Jt()-A,this.emit("onEnterRoom",Q),[3,4];case 3:return oe=U.sent(),this.emit("onEnterRoom",-1),this._callFunctionErrorManage(oe,"enterRoom"),[3,4];case 4:return[3,6];case 5:this._emitError(fo),U.label=6;case 6:return[2]}})})},o.prototype.exitRoom=function(){return R(this,void 0,Promise,function(){var e;return g(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),this.logger.info("".concat(y,".exitRoom")),this._isSharingScreen?[4,this.stopScreenShare()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.resetTRTCCloud(),[4,this._trtc.exitRoom()];case 3:return t.sent(),this.emit("onExitRoom",ve.exitRoom),[3,5];case 4:return e=t.sent(),this._callFunctionErrorManage(e,"exitRoom"),[3,5];case 5:return[2]}})})},o.prototype.switchRole=function(e){return R(this,void 0,void 0,function(){var t;return g(this,function(i){switch(i.label){case 0:this.logger.info("".concat(y,".switchRole with param: "),e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._trtc.switchRole(rt[e])];case 2:return i.sent(),this.emit("onSwitchRole",0,"switch role success, role = ".concat(e,", ").concat(rt[e])),[3,4];case 3:return t=i.sent(),this.emit("onSwitchRole",t==null?void 0:t.getCode(),t.message),[3,4];case 4:return[2]}})})},o.prototype.setDefaultStreamRecvMode=function(e,t){return R(this,void 0,void 0,function(){return g(this,function(i){return this.logger.info("".concat(y,".setDefaultStreamRecvMode with param: "),{autoRecvAudio:e,autoRecvVideo:t}),ee(e)&&(this._autoRecvAudio=e),ee(t)&&(this._autoRecvVideo=t),[2]})})},o.prototype.resetTRTCCloud=function(){this._setIsAudioPublish(!0),this._echoCancellation=void 0,this._noiseSuppression=void 0,this._autoGainControl=void 0,this._isVirtualBackground=!1,this._isTestVirtualBackground=!1},o.prototype._updateLocalVideo=function(){return R(this,void 0,void 0,function(){var e;return g(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._trtc.updateLocalVideo(this._generateLocalVideoData())];case 1:return t.sent(),[3,3];case 2:if((e=t.sent()).code===f.default.ERROR_CODE.OPERATION_ABORT)return[2];throw e;case 3:return[2]}})})},o.prototype._updateLocalTestVideo=function(){return R(this,void 0,void 0,function(){var e;return g(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._testTrtc.updateLocalVideo(this._generateLocalTestVideoData())];case 1:return t.sent(),[3,3];case 2:if((e=t.sent()).code===f.default.ERROR_CODE.OPERATION_ABORT)return[2];throw e;case 3:return[2]}})})},o.prototype._updateLocalScreen=function(){return R(this,void 0,void 0,function(){var e;return g(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._trtc.updateScreenShare(this._getScreenShareParams())];case 1:return t.sent(),[3,3];case 2:if((e=t.sent()).code===f.default.ERROR_CODE.OPERATION_ABORT)return[2];throw e;case 3:return[2]}})})},o.prototype._updateRemoteVideo=function(e,t){return R(this,void 0,void 0,function(){var i;return g(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._trtc.updateRemoteVideo(this._generateRemoteVideoData(e,t))];case 1:return n.sent(),[3,3];case 2:if((i=n.sent()).code===f.default.ERROR_CODE.OPERATION_ABORT)return[2];throw i;case 3:return[2]}})})},o.prototype.startLocalPreview=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return R(this,void 0,Promise,function(){var i,n,a,c,u,l,d,T;return g(this,function(h){switch(h.label){case 0:this.logger.info("".concat(y,".startLocalPreview with params: "),e),me([],e,!0).length===1?n=me([],e,!0)[0]:me([],e,!0).length===2&&(T=me([],e,!0),i=T[0],n=T[1]),P(i)||(this._setIsMobile(!0),this._setIsFrontCamera(i)),this._setLocalView(n),h.label=1;case 1:h.trys.push([1,8,,9]),h.label=2;case 2:return h.trys.push([2,4,,7]),[4,this._trtc.startLocalVideo(this._generateLocalVideoData())];case 3:return h.sent(),[3,7];case 4:return(a=h.sent()).code!==f.default.ERROR_CODE.OPERATION_ABORT?[3,6]:[4,this._updateLocalVideo()];case 5:return h.sent(),[2];case 6:throw a;case 7:return this.emit("onCameraDidReady"),c=this._getVideoProfile(),u=c.width,l=c.height,this.emit("onFirstVideoFrame","",s.TRTCVideoStreamType.TRTCVideoStreamTypeBig,u,l),[3,9];case 8:return d=h.sent(),this._callFunctionErrorManage(d,"startLocalPreview"),[3,9];case 9:return[2]}})})},o.prototype.updateLocalView=function(e){return R(this,void 0,void 0,function(){return g(this,function(t){switch(t.label){case 0:return this.logger.info("".concat(y,".updateLocalView with param: "),e),this._setLocalView(e),[4,this._updateLocalVideo()];case 1:return t.sent(),[2]}})})},o.prototype.stopLocalPreview=function(){return R(this,void 0,void 0,function(){var e;return g(this,function(t){switch(t.label){case 0:this.logger.info("".concat(y,".stopLocalPreview")),t.label=1;case 1:return t.trys.push([1,3,,4]),this._setLocalView(null),[4,this._trtc.stopLocalVideo()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),console.warn("".concat(y," stopLocalPreview error: ").concat(e)),this._callFunctionErrorManage(e,"stopLocalPreview"),[3,4];case 4:return[2]}})})},o.prototype.muteLocalVideo=function(e){return e===void 0&&(e=!1),R(this,void 0,void 0,function(){var t;return g(this,function(i){switch(i.label){case 0:this.logger.info("".concat(y,".muteLocalVideo with params: "),e),i.label=1;case 1:return i.trys.push([1,3,,4]),this._setIsVideoPublish(!e),[4,this._updateLocalVideo()];case 2:return i.sent(),[3,4];case 3:return t=i.sent(),this._callFunctionErrorManage(t,"muteLocalVideo"),[3,4];case 4:return[2]}})})},o.prototype.startRemoteView=function(e,t,i){return R(this,void 0,void 0,function(){var n,a;return g(this,function(c){switch(c.label){case 0:this.logger.info("".concat(y,".startRemoteView with params: "),e,t,i),c.label=1;case 1:if(c.trys.push([1,8,,9]),this._setRemoteStreamConfig(e,i,{view:t,small:i===s.TRTCVideoStreamType.TRTCVideoStreamTypeSmall}),!this._remoteStreamMap.get("".concat(e,"_").concat(this._getTRTCStreamType(i))))return[2];c.label=2;case 2:return c.trys.push([2,4,,7]),[4,this._trtc.startRemoteVideo(this._generateRemoteVideoData(e,i))];case 3:return c.sent(),[3,7];case 4:return(n=c.sent()).code!==f.default.ERROR_CODE.OPERATION_ABORT?[3,6]:[4,this._updateRemoteVideo(e,i)];case 5:return c.sent(),[2];case 6:throw n;case 7:return this.emit("onFirstVideoFrame",e,i,0,0),[3,9];case 8:return a=c.sent(),this._callFunctionErrorManage(a,"startRemoteView"),[3,9];case 9:return[2]}})})},o.prototype.updateRemoteView=function(e,t,i){return R(this,void 0,void 0,function(){return g(this,function(n){switch(n.label){case 0:return this.logger.info("".concat(y,".updateRemoteView with params: "),e,t,i),this._setRemoteStreamConfig(e,i,{view:t}),this._remoteStreamMap.get("".concat(e,"_").concat(this._getTRTCStreamType(i)))?[4,this._updateRemoteVideo(e,i)]:[2];case 1:return n.sent(),[2]}})})},o.prototype.stopRemoteView=function(e,t){return R(this,void 0,void 0,function(){var i;return g(this,function(n){switch(n.label){case 0:this.logger.info("".concat(y,".stopRemoteView with params: "),e,t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._trtc.stopRemoteVideo({userId:e,streamType:this._getTRTCStreamType(t)})];case 2:return n.sent(),[3,4];case 3:return i=n.sent(),this._callFunctionErrorManage(i,"stopRemoteView"),[3,4];case 4:return[2]}})})},o.prototype.stopAllRemoteView=function(){return R(this,void 0,void 0,function(){var e;return g(this,function(t){switch(t.label){case 0:this.logger.info("".concat(y,".stopAllRemoteView")),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._trtc.stopRemoteVideo({userId:"*"})];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),this._callFunctionErrorManage(e,"stopAllRemoteView"),[3,4];case 4:return[2]}})})},o.prototype.setVideoEncoderParam=function(e){return R(this,void 0,void 0,function(){var t,i;return g(this,function(n){switch(n.label){case 0:this.logger.info("".concat(y,".setVideoEncoderParam with params: "),e),n.label=1;case 1:return n.trys.push([1,4,,5]),t=this._getTRTCVideoProfile(s.TRTCVideoStreamType.TRTCVideoStreamTypeBig,e),this._setVideoProfile(t),[4,this._updateLocalVideo()];case 2:return n.sent(),[4,this._updateLocalTestVideo()];case 3:return n.sent(),[3,5];case 4:return i=n.sent(),this._callFunctionErrorManage(i,"setVideoEncoderParam"),[3,5];case 5:return[2]}})})},o.prototype.setNetworkQosParam=function(e){return R(this,void 0,void 0,function(){var t,i,n=this;return g(this,function(a){return this.logger.info("".concat(y,".setNetworkQosParam with params: "),e),t=e.preference,i=this._getTRTCQosPreference(t),this._setQosPreference(i),this._setScreenShareParams({qosPreference:i}),[2,new Promise(function(c,u){Promise.all([n._updateLocalVideo(),n._updateLocalScreen()]).then(function(){c(!0)}).catch(function(l){n._callFunctionErrorManage(l,"setNetworkQosParam"),u(l)})})]})})},o.prototype.setLocalRenderParams=function(e){return R(this,void 0,void 0,function(){var t,i;return g(this,function(n){switch(n.label){case 0:this.logger.info("".concat(y,".setLocalRenderParams with params: "),e),Object.assign(this._localRenderParams,e),n.label=1;case 1:return n.trys.push([1,4,,5]),t={},e.mirrorType&&(t.mirror=this._getTRTCMirror(e.mirrorType)),e.fillMode&&(t.fillMode=this._getTRTCFillMode(e.fillMode)),this._setVideoPlayOption(t),[4,this._updateLocalVideo()];case 2:return n.sent(),[4,this._updateLocalTestVideo()];case 3:return n.sent(),[3,5];case 4:return i=n.sent(),this._callFunctionErrorManage(i,"setLocalRenderParams"),[3,5];case 5:return[2]}})})},o.prototype.setRemoteRenderParams=function(e,t,i){return R(this,void 0,void 0,function(){var n;return g(this,function(a){switch(a.label){case 0:this.logger.info("".concat(y,".setRemoteRenderParams with params: "),e,t,i),a.label=1;case 1:return a.trys.push([1,3,,4]),this._setRemoteStreamConfig(e,t,i),[4,this._updateRemoteVideo(e,t)];case 2:return a.sent(),[3,4];case 3:return n=a.sent(),this._callFunctionErrorManage(n,"setRemoteRenderParams"),[3,4];case 4:return[2]}})})},o.prototype._updateLocalAudio=function(){return R(this,void 0,void 0,function(){var e;return g(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._trtc.updateLocalAudio(this._generateLocalAudioData())];case 1:return t.sent(),[3,3];case 2:if((e=t.sent()).code===f.default.ERROR_CODE.OPERATION_ABORT)return[2];throw e;case 3:return[2]}})})},o.prototype._updateLocalTestAudio=function(){return R(this,void 0,void 0,function(){var e;return g(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._testTrtc.updateLocalAudio(this._generateLocalTestAudioData())];case 1:return t.sent(),[3,3];case 2:if((e=t.sent()).code===f.default.ERROR_CODE.OPERATION_ABORT)return[2];throw e;case 3:return[2]}})})},o.prototype.startLocalAudio=function(e){return e===void 0&&(e=s.TRTCAudioQuality.TRTCAudioQualityDefault),R(this,void 0,void 0,function(){var t,i,n;return g(this,function(a){switch(a.label){case 0:e===s.TRTCAudioQuality.TRTCAudioQualitySpeech?this.logger.warn("Web trtcCloud not support audioQuality of TRTCAudioQualitySpeech, and will use TRTCAudioQualityDefault"):this.logger.info("".concat(y,".startLocalAudio with params: "),e),t=this._getTRTCAudioQuality(e),a.label=1;case 1:a.trys.push([1,8,,9]),this._setAudioProfile(t),a.label=2;case 2:return a.trys.push([2,4,,7]),[4,this._trtc.startLocalAudio(this._generateLocalAudioData())];case 3:return a.sent(),[3,7];case 4:return(i=a.sent()).code!==f.default.ERROR_CODE.OPERATION_ABORT?[3,6]:[4,this._updateLocalAudio()];case 5:return a.sent(),[2];case 6:throw i;case 7:return this.emit("onMicDidReady"),[3,9];case 8:return n=a.sent(),console.warn("".concat(y," startLocalAudio error: ").concat(n)),this._callFunctionErrorManage(n,"startLocalAudio"),[3,9];case 9:return[2]}})})},o.prototype.stopLocalAudio=function(){return R(this,void 0,void 0,function(){var e;return g(this,function(t){switch(t.label){case 0:this.logger.info("".concat(y,".stopLocalAudio")),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._trtc.stopLocalAudio()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),this._callFunctionErrorManage(e,"stopLocalAudio"),[3,4];case 4:return[2]}})})},o.prototype.muteLocalAudio=function(e){return e===void 0&&(e=!1),R(this,void 0,void 0,function(){var t;return g(this,function(i){switch(i.label){case 0:this.logger.info("".concat(y,".muteLocalAudio with params: "),e),i.label=1;case 1:return i.trys.push([1,3,,4]),this._setIsAudioPublish(!e),[4,this._updateLocalAudio()];case 2:return i.sent(),[3,4];case 3:return t=i.sent(),this._callFunctionErrorManage(t,"muteLocalAudio"),[3,4];case 4:return[2]}})})},o.prototype.setAudioCaptureVolume=function(e){return R(this,void 0,void 0,function(){var t;return g(this,function(i){switch(i.label){case 0:this.logger.info("".concat(y,".setAudioCaptureVolume with params: "),e),i.label=1;case 1:return i.trys.push([1,3,,4]),this._setCaptureVolume(e),[4,this._updateLocalAudio()];case 2:return i.sent(),[3,4];case 3:return t=i.sent(),this._callFunctionErrorManage(t,"setAudioCaptureVolume"),[3,4];case 4:return[2]}})})},o.prototype.muteRemoteAudio=function(e,t){return t===void 0&&(t=!1),R(this,void 0,void 0,function(){var i;return g(this,function(n){switch(n.label){case 0:this.logger.info("".concat(y,".muteRemoteAudio with params: "),e,t),n.label=1;case 1:return n.trys.push([1,3,,4]),e?[4,this._trtc.muteRemoteAudio(e,t)]:(this._emitError(fo),[2]);case 2:return n.sent(),[3,4];case 3:return i=n.sent(),this._callFunctionErrorManage(i,"muteRemoteAudio"),[3,4];case 4:return[2]}})})},o.prototype.muteAllRemoteAudio=function(e){this.logger.info("".concat(y,".muteAllRemoteAudio with params: "),e);try{this._trtc.muteRemoteAudio("*",e)}catch(t){this._callFunctionErrorManage(t,"muteAllRemoteAudio")}},o.prototype.setRemoteAudioVolume=function(e,t){this.logger.info("".concat(y,".setRemoteAudioVolume with params: "),e,t);try{this._trtc.setRemoteAudioVolume(e,t)}catch(i){this._callFunctionErrorManage(i,"setRemoteAudioVolume")}},o.prototype.enableAudioVolumeEvaluation=function(e){this.logger.info("".concat(y,".enableAudioVolumeEvaluation with params: "),e);try{this._trtc.enableAudioVolumeEvaluation(e)}catch(t){this._callFunctionErrorManage(t,"enableAudioVolumeEvaluation")}},o.prototype.enableSmallVideoStream=function(e,t){return R(this,void 0,Promise,function(){var i;return g(this,function(n){switch(n.label){case 0:return this.logger.info("".concat(y,".enableSmallVideoStream with params: "),e,t),e?(i=this._getTRTCVideoProfile(s.TRTCVideoStreamType.TRTCVideoStreamTypeSmall,t),this._setSmallStreamVideoProfile(i)):this._setSmallStreamVideoProfile(void 0),[4,this._updateLocalVideo()];case 1:return n.sent(),[2]}})})},o.prototype.snapshotVideo=function(e,t){var i="";return i=e===""&&t===s.TRTCVideoStreamType.TRTCVideoStreamTypeBig?this._trtc.getVideoSnapshot():e===""&&t===s.TRTCVideoStreamType.TRTCVideoStreamTypeSub?this._trtc.getVideoSnapshot({streamType:this._getTRTCStreamType(t)}):this._trtc.getVideoSnapshot({userId:e,streamType:this._getTRTCStreamType(t)}),this.emit("onSnapshotComplete",e,t,i),i},o.prototype.startScreenShare=function(e,t,i){return R(this,void 0,void 0,function(){var n,a,c,u,l,d,T,h;return g(this,function(p){switch(p.label){case 0:this.logger.info("".concat(y,".startScreenShare with params: "),e,t,i),p.label=1;case 1:return p.trys.push([1,3,,4]),a=(n=i||{}).screenAudio,c=a!==void 0&&a,u=n.videoTrack,l=this._getTRTCVideoProfile(s.TRTCVideoStreamType.TRTCVideoStreamTypeSub,i),this._setScreenShareParams({view:e,profile:l,systemAudio:c,videoTrack:u}),[4,this._trtc.startScreenShare(this._getScreenShareParams())];case 2:return p.sent(),this._isSharingScreen=!0,d=l.width,T=l.height,this.emit("onFirstVideoFrame","",s.TRTCVideoStreamType.TRTCVideoStreamTypeSub,d,T),[3,4];case 3:if((h=p.sent()).code===f.default.ERROR_CODE.OPERATION_ABORT)return[2];throw console.error("Start share screen error:",h,h.code,h.name,h.message),h;case 4:return[2]}})})},o.prototype.setSubStreamEncoderParam=function(e){return R(this,void 0,void 0,function(){var t,i;return g(this,function(n){switch(n.label){case 0:this.logger.info("".concat(y,".setSubStreamEncoderParam with params: "),e),t=this._getTRTCVideoProfile(s.TRTCVideoStreamType.TRTCVideoStreamTypeSub,e),this._setScreenShareParams({profile:t}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._updateLocalScreen()];case 2:return n.sent(),[3,4];case 3:return i=n.sent(),this._callFunctionErrorManage(i,"setSubStreamEncoderParam"),[3,4];case 4:return[2]}})})},o.prototype.stopScreenShare=function(){return R(this,void 0,Promise,function(){var e;return g(this,function(t){switch(t.label){case 0:this.logger.info("".concat(y,".stopScreenShare")),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._trtc.stopScreenShare()];case 2:return t.sent(),this._isSharingScreen=!1,this.emit("onScreenCaptureStopped",0),[3,4];case 3:return e=t.sent(),this._callFunctionErrorManage(e,"stopScreenShare"),[3,4];case 4:return[2]}})})},o.prototype.startScreenCapture=function(){this._emitError(Re)},o.prototype.pauseScreenCapture=function(){this._emitError(Re)},o.prototype.resumeScreenCapture=function(){this._emitError(Re)},o.prototype.getScreenCaptureSources=function(){this._emitError(Re)},o.prototype.selectScreenCaptureTarget=function(){this._emitError(Re)},o.prototype.getCameraDevicesList=function(){return R(this,void 0,Promise,function(){var e,t,i;return g(this,function(n){switch(n.label){case 0:this.logger.info("".concat(y,".getCameraDevicesList")),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,f.default.getCameraList()];case 2:return e=n.sent(),t=e.map(function(a){return V(V({},a),{deviceName:a.label})}),this._cameraList=e,JSON.stringify(this._currentCamera)==="{}"&&(this._currentCamera=this.getDefaultDeviceInfo(e),this._currentCameraId=this._currentCamera.deviceId),[2,Promise.resolve(t)];case 3:return i=n.sent(),this._callFunctionErrorManage(i,"getCameraDevicesList"),[2,Promise.resolve([])];case 4:return[2]}})})},o.prototype.setCurrentCameraDevice=function(e){var t;return R(this,void 0,Promise,function(){var i;return g(this,function(n){switch(n.label){case 0:this.logger.info("".concat(y,".setCurrentCameraDevice with params: "),{cameraId:e}),n.label=1;case 1:return n.trys.push([1,4,,5]),e?(this._currentCameraId=e,[4,this._updateLocalVideo()]):[2,!1];case 2:return n.sent(),[4,this._updateLocalTestVideo()];case 3:return n.sent(),this._currentCamera=this._cameraList.find(function(a){return a.deviceId===e})||{},[3,5];case 4:throw i=n.sent(),this._currentCameraId=(t=this._currentCamera)===null||t===void 0?void 0:t.cameraId,this._callFunctionErrorManage(i,"setCurrentCameraDevice"),i;case 5:return[2]}})})},o.prototype.getCurrentCameraDevice=function(){this.logger.info("".concat(y,".getCurrentCameraDevice"));var e=this._currentCamera,t=e.deviceId,i=e.label,n=e.kind,a=e.groupId;return new ue(t,i,n,i,a)},o.prototype.isFrontCamera=function(){return this._getIsFrontCamera()},o.prototype.switchCamera=function(e){return R(this,void 0,void 0,function(){var t;return g(this,function(i){switch(i.label){case 0:return this.logger.info("".concat(y,".switchCamera with params: "),e),this._setIsFrontCamera(e),(t=this._getVideoPlayOption()).mirror=this._getTRTCMirror(this._localRenderParams.mirrorType),this._setVideoPlayOption(t),[4,this._updateLocalVideo()];case 1:return i.sent(),[2]}})})},o.prototype._onVirtualBackgroundError=function(e){this._emitWarning(e)},o.prototype.setVirtualBackground=function(e){return R(this,void 0,void 0,function(){var t,i,n,a,c;return g(this,function(u){switch(u.label){case 0:return u.trys.push([0,10,,11]),t=e.enable,i=e.type,n=e.blurLevel,a=e.imagePath,t?this._isVirtualBackground?i!==Kt?[3,2]:[4,this._trtc.updatePlugin(K,{type:i,blurLevel:n})]:[3,5]:[3,8];case 1:u.sent(),u.label=2;case 2:return i!==qt?[3,4]:[4,this._trtc.updatePlugin(K,{type:i,src:a})];case 3:u.sent(),u.label=4;case 4:return[3,7];case 5:return[4,this._trtc.startPlugin(K,V(V({},e),{src:a,onError:this._onVirtualBackgroundError}))];case 6:u.sent(),this._isVirtualBackground=!0,u.label=7;case 7:return[3,9];case 8:this._trtc.stopPlugin(K),this._isVirtualBackground=!1,u.label=9;case 9:return[3,11];case 10:throw c=u.sent(),this.logger.error("".concat(y,".setVirtualBackground fail: "),c),c;case 11:return[2]}})})},o.prototype.setTestVirtualBackground=function(e){return R(this,void 0,void 0,function(){var t,i,n,a,c;return g(this,function(u){switch(u.label){case 0:return u.trys.push([0,10,,11]),t=e.enable,i=e.type,n=e.blurLevel,a=e.imagePath,t?this._isTestVirtualBackground?i!==Kt?[3,2]:[4,this._testTrtc.updatePlugin(K,{type:i,blurLevel:n})]:[3,5]:[3,8];case 1:u.sent(),u.label=2;case 2:return i!==qt?[3,4]:[4,this._testTrtc.updatePlugin(K,{type:i,src:a})];case 3:u.sent(),u.label=4;case 4:return[3,7];case 5:return[4,this._testTrtc.startPlugin(K,V(V({},e),{src:a,onError:this._onVirtualBackgroundError}))];case 6:u.sent(),this._isTestVirtualBackground=!0,u.label=7;case 7:return[3,9];case 8:this._testTrtc.stopPlugin(K),this._isTestVirtualBackground=!1,u.label=9;case 9:return[3,11];case 10:throw c=u.sent(),this.logger.error("".concat(y,".setTestVirtualBackground fail: "),c),c;case 11:return[2]}})})},o.prototype.useVirtualBackground=function(e){return R(this,void 0,void 0,function(){return g(this,function(t){switch(t.label){case 0:return this._trtc?[4,this._trtc.use({plugin:Ut.VirtualBackground,assetsPath:e})]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._testTrtc?[4,this._testTrtc.use({plugin:Ut.VirtualBackground,assetsPath:e})]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}})})},o.prototype.getMicDevicesList=function(){return R(this,void 0,Promise,function(){var e,t,i;return g(this,function(n){switch(n.label){case 0:this.logger.info("".concat(y,".getMicDevicesList")),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,f.default.getMicrophoneList()];case 2:return e=n.sent(),t=e.map(function(a){return V(V({},a),{deviceName:a.label})}),this._microphoneList=e,JSON.stringify(this._currentMicrophone)==="{}"&&(this._currentMicrophone=this.getDefaultDeviceInfo(e),this._currentMicrophoneId=this._currentMicrophone.deviceId),[2,Promise.resolve(t)];case 3:return i=n.sent(),this._callFunctionErrorManage(i,"getMicDevicesList"),[2,Promise.resolve([])];case 4:return[2]}})})},o.prototype.setCurrentMicDevice=function(e){var t;return R(this,void 0,Promise,function(){var i;return g(this,function(n){switch(n.label){case 0:this.logger.info("".concat(y,".setCurrentMicDevice with params: "),{micId:e}),n.label=1;case 1:return n.trys.push([1,4,,5]),e?(this._setCurrentMicrophoneId(e),[4,this._updateLocalAudio()]):[2,!1];case 2:return n.sent(),[4,this._updateLocalTestAudio()];case 3:return n.sent(),this._currentMicrophone=this._microphoneList.find(function(a){return a.deviceId===e})||{},[3,5];case 4:throw i=n.sent(),this._setCurrentMicrophoneId((t=this._currentMicrophone)===null||t===void 0?void 0:t.deviceId),this._callFunctionErrorManage(i,"setCurrentMicDevice"),i;case 5:return[2]}})})},o.prototype.getCurrentMicDevice=function(){this.logger.info("".concat(y,".getCurrentMicDevice"));var e=this._currentMicrophone,t=e.deviceId,i=e.label,n=e.kind,a=e.groupId;return new ue(t,i,n,i,a)},o.prototype.getSpeakerDevicesList=function(){return R(this,void 0,Promise,function(){var e,t,i;return g(this,function(n){switch(n.label){case 0:this.logger.info("".concat(y,".getSpeakerDevicesList")),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,f.default.getSpeakerList()];case 2:return e=n.sent(),t=e.map(function(a){return V(V({},a),{deviceName:a.label})}),this._speakerList=e,JSON.stringify(this._currentSpeaker)==="{}"&&(this._currentSpeaker=this.getDefaultDeviceInfo(e),this._currentSpeakerId=this._currentSpeaker.deviceId),[2,Promise.resolve(t)];case 3:return i=n.sent(),this._callFunctionErrorManage(i,"getSpeakerDevicesList"),[2,Promise.resolve([])];case 4:return[2]}})})},o.prototype.setCurrentSpeakerDevice=function(e){return R(this,void 0,Promise,function(){var t;return g(this,function(i){switch(i.label){case 0:this.logger.info("".concat(y,".setCurrentSpeakerDevice with params: "),{speakerId:e}),i.label=1;case 1:return i.trys.push([1,3,,4]),e?[4,f.default.setCurrentSpeaker(e)]:[2,!1];case 2:return i.sent(),this._setCurrentSpeakerId(e),this._currentSpeaker=this._speakerList.find(function(n){return n.deviceId===e})||{},[3,4];case 3:throw t=i.sent(),this._callFunctionErrorManage(t,"setCurrentSpeakerDevice"),t;case 4:return[2]}})})},o.prototype.getCurrentSpeakerDevice=function(){this.logger.info("".concat(y,".getCurrentSpeakerDevice"));var e=this._currentSpeaker,t=e.deviceId,i=e.label,n=e.kind,a=e.groupId;return new ue(t,i,n,i,a)},o.prototype.startCameraDeviceTest=function(e){return R(this,void 0,void 0,function(){var t;return g(this,function(i){switch(i.label){case 0:if(this.logger.info("".concat(y,".startCameraDeviceTest with params: "),e),!e)return[2];this._setLocalTestView(e),i.label=1;case 1:return i.trys.push([1,3,,6]),[4,this._testTrtc.startLocalVideo(this._generateLocalTestVideoData())];case 2:return i.sent(),[3,6];case 3:return(t=i.sent()).code!==f.default.ERROR_CODE.OPERATION_ABORT?[3,5]:[4,this._updateLocalTestVideo()];case 4:return i.sent(),[2];case 5:throw this._callFunctionErrorManage(t,"startCameraDeviceTest"),t;case 6:return[2]}})})},o.prototype.stopCameraDeviceTest=function(){return R(this,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return this.logger.info("".concat(y,".stopCameraDeviceTest")),this._setLocalTestView(null),[4,this._testTrtc.stopLocalVideo()];case 1:return e.sent(),[2]}})})},o.prototype.startMicDeviceTest=function(e){return R(this,void 0,void 0,function(){var t,i=this;return g(this,function(n){switch(n.label){case 0:this.logger.info("".concat(y,".startMicDeviceTest with params: "),e),n.label=1;case 1:return n.trys.push([1,3,,6]),[4,this._testTrtc.startLocalAudio(this._generateLocalTestAudioData())];case 2:return n.sent(),[3,6];case 3:return(t=n.sent()).code!==f.default.ERROR_CODE.OPERATION_ABORT?[3,5]:[4,this._updateLocalTestAudio()];case 4:return n.sent(),[2];case 5:throw this._callFunctionErrorManage(t,"startMicDeviceTest"),t;case 6:return this._testTrtc.on(f.default.EVENT.AUDIO_VOLUME,function(a){a==null||a.result.forEach(function(c){var u=c.userId,l=c.volume;u===""&&i.emit("onTestMicVolume",l)})}),[4,this._testTrtc.enableAudioVolumeEvaluation(e)];case 7:return n.sent(),[2]}})})},o.prototype.stopMicDeviceTest=function(){return R(this,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return this.logger.info("".concat(y,".stopMicDeviceTest")),[4,this._testTrtc.stopLocalAudio()];case 1:return e.sent(),[2]}})})},o.prototype.callExperimentalAPI=function(e){return R(this,void 0,void 0,function(){var t,i,n;return g(this,function(a){switch(a.label){case 0:if(this.logger.info("".concat(y,".callExperimentalAPI"),e),t=function(c){if(typeof c!="string")return c;var u;try{var l=JSON.parse(c);u=typeof l=="object"&&l?l:c}catch{u=c}return u}(e),t===e)return[2];if(i=t.api,n=t.params,!i||!n)return[2];a.label=1;case 1:switch(a.trys.push([1,16,,17]),i){case"setFramework":return[3,2];case"enableAudioAEC":return[3,3];case"enableAudioANS":return[3,4];case"enableAudioAGC":return[3,5];case"KeyMetricsStats":return[3,6];case"setNetworkProxy":return[3,7];case"enableVirtualBackground":return[3,8];case"enableTestVirtualBackground":return[3,10];case"setVideoEncodeParamEx":return[3,12];case"enableAutoPlayDialog":return[3,13]}return[3,14];case 2:return this._handleSetFrameWork(n),[3,15];case 3:return this._echoCancellation=!!n.enable,[3,15];case 4:return this._noiseSuppression=!!n.enable,[3,15];case 5:return this._autoGainControl=!!n.enable,[3,15];case 6:return this._handleKeyMetricsStats(n),[3,15];case 7:return this._networkProxy=n,[3,15];case 8:return[4,this.setVirtualBackground(n)];case 9:return a.sent(),[3,15];case 10:return[4,this.setTestVirtualBackground(n)];case 11:return a.sent(),[3,15];case 12:return this._setVideoEncodeParamEx(n),[3,15];case 13:return this._enableAutoPlayDialog=!!n.enable,[3,15];case 14:return[3,15];case 15:return[3,17];case 16:throw a.sent();case 17:return[2]}})})},o.prototype._handleSetFrameWork=function(e){var t=e.frameWork,i=e.component,n=e.language;we(t)&&(this._frameWorkType=t),we(i)&&(this._component=i),we(n)&&(this._language=n)},o.prototype._handleKeyMetricsStats=function(e){var t=e.key,i=e.opt,n=e.value,a=e.version,c=i===xo;f.default._addKVStat({option:{type:i,key:t,value:n,version:a,useUV:c,base:100}})},o.prototype._setVideoEncodeParamEx=function(e){return R(this,void 0,void 0,function(){return g(this,function(t){switch(t.label){case 0:switch(e.streamType){case s.TRTCVideoStreamType.TRTCVideoStreamTypeBig:return[3,1];case s.TRTCVideoStreamType.TRTCVideoStreamTypeSub:return[3,3]}return[3,5];case 1:return[4,this.setVideoEncoderParam(e)];case 2:case 4:return t.sent(),[3,6];case 3:return[4,this.setSubStreamEncoderParam(e)];case 5:return[3,6];case 6:return[2]}})})},o.prototype._emitError=function(e){e&&this.emit&&this.emit(Ht,e.code,e.message)},o.prototype._emitWarning=function(e){this.emit&&this.emit(Oo,e)},o.prototype._transformTRTCServerError=function(e){return e.extraCode===-8?Wn:String(e.extraCode).indexOf("70")===0?0-e.extraCode:void 0},o.prototype._transformTRTCDeviceError=function(e,t){var i=["startLocalPreview","updateLocalView","muteLocalVideo","setVideoEncoderParam","setCurrentCameraDevice","switchCamera","setLocalRenderParams","enableSmallVideoStream","startCameraDeviceTest"].includes(t),n=["startLocalAudio","muteLocalAudio","setAudioCaptureVolume","setCurrentMicDevice","startMicDeviceTest"].includes(t);switch(e.extraCode){case 5301:case 5305:case 5306:case 5307:case 5308:case 5309:if(i)return kn;if(n)return Qn;break;case 5302:if(i)return xn;if(n)return Nn;break;case 5303:if(i)return Bn;if(n)return Un;break;case 5304:if(i)return Fn;if(n)return jn}},o.prototype._transformTRTCErrorCode=function(e,t){var i=e==null?void 0:e.code;if(e&&e.code)switch(e.code){case f.default.ERROR_CODE.DEVICE_ERROR:i=this._transformTRTCDeviceError(e,t);break;case f.default.ERROR_CODE.SERVER_ERROR:i=this._transformTRTCServerError(e)}return i},o.prototype._callFunctionErrorManage=function(e,t){if(!e||e.code!==f.default.ERROR_CODE.OPERATION_ABORT){this.logger.warn("(".concat(t,") failed - ").concat(e.code," - ").concat(e.message));var i=this._transformTRTCErrorCode(e,t);this.emit(Ht,i,e.message)}},o.prototype._getTRTCResolution=function(e){var t=(s.TRTCVideoResolution[e]||"").split("_");return{width:+(t.length>1&&t[1]),height:+(t.length>2&&t[2])}},o.prototype._getTRTCVideoProfile=function(e,t){t===void 0&&(t={});var i=t.videoWidth,n=t.videoHeight,a=t.videoResolution,c=t.videoFps,u=t.videoBitrate,l=t.resMode,d=t.resolutionMode,T={};switch(e){case s.TRTCVideoStreamType.TRTCVideoStreamTypeSub:T=this._defaultScreenProfile;break;case s.TRTCVideoStreamType.TRTCVideoStreamTypeSmall:T=this._defaultSmallVideoProfile;break;case s.TRTCVideoStreamType.TRTCVideoStreamTypeBig:default:T=this._defaultVideoProfile}if(P(a))P(i)||(T.width=i),P(n)||(T.height=n);else{var h=this._getTRTCResolution(a);T.width=h.width,T.height=h.height}if(!P(l)&&l===s.TRTCVideoResolutionMode.TRTCVideoResolutionModePortrait||!P(d)&&d===s.TRTCVideoResolutionMode.TRTCVideoResolutionModePortrait){var p=T.height,_=T.width;T.width=p,T.height=_}return c&&(T.frameRate=c),u&&(T.bitrate=u),T},o.prototype._getTRTCStreamType=function(e){var t;return((t={})[s.TRTCVideoStreamType.TRTCVideoStreamTypeBig]=f.default.TYPE.STREAM_TYPE_MAIN,t[s.TRTCVideoStreamType.TRTCVideoStreamTypeSmall]=f.default.TYPE.STREAM_TYPE_MAIN,t[s.TRTCVideoStreamType.TRTCVideoStreamTypeSub]=f.default.TYPE.STREAM_TYPE_SUB,t)[e]},o.prototype._getTRTCFillMode=function(e){var t;return((t={})[s.TRTCVideoFillMode.TRTCVideoFillMode_Fill]=Ge.COVER,t[s.TRTCVideoFillMode.TRTCVideoFillMode_Fit]=Ge.CONTAIN,t)[e]},o.prototype._getTRTCMirror=function(e){var t;return e===s.TRTCVideoMirrorType.TRTCVideoMirrorType_Auto?!this._getIsMobile()||this._getIsFrontCamera():((t={})[s.TRTCVideoMirrorType.TRTCVideoMirrorType_Enable]=!0,t[s.TRTCVideoMirrorType.TRTCVideoMirrorType_Disable]=!1,t)[e]},o.prototype._getTRTCQosPreference=function(e){var t;return((t={})[s.TRTCVideoQosPreference.TRTCVideoQosPreferenceSmooth]=f.default.TYPE.QOS_PREFERENCE_SMOOTH,t[s.TRTCVideoQosPreference.TRTCVideoQosPreferenceClear]=f.default.TYPE.QOS_PREFERENCE_CLEAR,t)[e]},o.prototype._getTRTCAudioQuality=function(e){var t;return((t={})[s.TRTCAudioQuality.TRTCAudioQualitySpeech]=f.default.TYPE.AUDIO_PROFILE_STANDARD,t[s.TRTCAudioQuality.TRTCAudioQualityDefault]=f.default.TYPE.AUDIO_PROFILE_STANDARD,t[s.TRTCAudioQuality.TRTCAudioQualityMusic]=f.default.TYPE.AUDIO_PROFILE_HIGH_STEREO,t)[e]},o.prototype._getTRTCCloudDeviceType=function(e){return{camera:s.TRTCDeviceType.TRTCDeviceTypeCamera,microphone:s.TRTCDeviceType.TRTCDeviceTypeMic,speaker:s.TRTCDeviceType.TRTCDeviceTypeSpeaker}[e]},o.prototype._getTRTCCloudDeviceState=function(e){return{add:s.TRTCDeviceState.TRTCDeviceStateAdd,remove:s.TRTCDeviceState.TRTCDeviceStateRemove,active:s.TRTCDeviceState.TRTCDeviceStateActive}[e]},o.prototype._getTRTCCloudQuality=function(e){return[s.TRTCQuality.TRTCQuality_Unknown,s.TRTCQuality.TRTCQuality_Excellent,s.TRTCQuality.TRTCQuality_Good,s.TRTCQuality.TRTCQuality_Poor,s.TRTCQuality.TRTCQuality_Bad,s.TRTCQuality.TRTCQuality_Vbad,s.TRTCQuality.TRTCQuality_Down][e]},o.prototype._generateLocalVideoData=function(){var e={view:this._getLocalView(),publish:this._getIsVideoPublish(),option:V({profile:this._getVideoProfile(),small:this._getSmallStreamVideoProfile()||!1},this._getVideoPlayOption())};return this._getIsMobile()?e&&Object.assign(e.option,{useFrontCamera:this._getIsFrontCamera()}):e&&Object.assign(e.option,{cameraId:this._getCurrentCameraId()}),this._getQosPreference()&&e&&Object.assign(e.option,{qosPreference:this._getQosPreference()}),e},o.prototype._generateLocalTestVideoData=function(){return{view:this._getLocalTestView(),publish:!1,option:V({cameraId:this._getCurrentCameraId(),profile:this._getVideoProfile()},this._getVideoPlayOption())}},o.prototype._generateLocalAudioData=function(){var e={publish:this._getIsAudioPublish(),option:{microphoneId:this._getCurrentMicrophoneId(),profile:this._getAudioProfile(),captureVolume:this._getCaptureVolume()}};return ee(this._echoCancellation)&&(e.option.echoCancellation=this._echoCancellation),ee(this._autoGainControl)&&(e.option.autoGainControl=this._autoGainControl),ee(this._noiseSuppression)&&(e.option.noiseSuppression=this._noiseSuppression),e},o.prototype._generateLocalTestAudioData=function(){return{publish:!1,option:{microphoneId:this._getCurrentMicrophoneId(),profile:this._getAudioProfile()}}},o.prototype._generateRemoteVideoData=function(e,t){return this._remoteStreamConfig.get("".concat(e,"_").concat(this._getTRTCStreamType(t)))},o.prototype._addTRTCEvents=function(){var e=this;this._trtc.on(f.default.EVENT.ERROR,function(t){t&&e.emit("onError",t.code,t.message)}),this._trtc.on(f.default.EVENT.REMOTE_USER_ENTER,function(t){t!=null&&t.userId&&e.emit("onRemoteUserEnterRoom",t.userId)}),this._trtc.on(f.default.EVENT.REMOTE_USER_EXIT,function(t){t!=null&&t.userId&&e.emit("onRemoteUserLeaveRoom",t.userId)}),this._trtc.on(f.default.EVENT.REMOTE_AUDIO_AVAILABLE,function(t){t!=null&&t.userId&&e.emit("onUserAudioAvailable",t.userId,!0)}),this._trtc.on(f.default.EVENT.REMOTE_AUDIO_UNAVAILABLE,function(t){t!=null&&t.userId&&e.emit("onUserAudioAvailable",t.userId,!1)}),this._trtc.on(f.default.EVENT.REMOTE_VIDEO_AVAILABLE,function(t){e._emitVideoAvailable(t,!0)}),this._trtc.on(f.default.EVENT.REMOTE_VIDEO_UNAVAILABLE,function(t){e._emitVideoAvailable(t,!1)}),this._trtc.on(f.default.EVENT.AUDIO_VOLUME,function(t){t!=null&&t.result&&e.emit("onUserVoiceVolume",t==null?void 0:t.result,((t==null?void 0:t.result)||[]).length)}),this._trtc.on(f.default.EVENT.KICKED_OUT,function(t){var i={banned:ve.banned,room_disband:ve.roomDisband};we(i[t.reason])&&e.emit("onExitRoom",i[t.reason])}),this._trtc.on(f.default.EVENT.NETWORK_QUALITY,function(t){var i=t.uplinkNetworkQuality,n=t.downlinkNetworkQuality,a=t.downlinkInfo,c=new Xe("",e._getTRTCCloudQuality(i)),u=[];a.length>0&&(u=a.map(function(l){return new Xe(l.userId,e._getTRTCCloudQuality(n))})),e.emit("onNetworkQuality",c,u)}),this._trtc.on(f.default.EVENT.AUTOPLAY_FAILED,function(t){e.emit("onAutoPlayFailed",t)}),this._trtc.on(f.default.EVENT.STATISTICS,function(t){var i,n=t.rtt,a=t.upLoss,c=t.downLoss,u=t.bytesSent,l=t.bytesReceived,d=t.localStatistics,T=t.remoteStatistics,h={big:s.TRTCVideoStreamType.TRTCVideoStreamTypeBig,small:s.TRTCVideoStreamType.TRTCVideoStreamTypeSmall,sub:s.TRTCVideoStreamType.TRTCVideoStreamTypeSub},p=((i=d.video)===null||i===void 0?void 0:i.length)>0?d.video.map(function(C){var A=new Ze;return A.width=C.width,A.height=C.height,A.frameRate=C.frameRate,A.videoBitrate=C.bitrate,A.audioBitrate=d.audio.bitrate||0,A.streamType=h[C.videoType],A}):[];if(p.length===0&&d.audio.bitrate>0){var _=new Ze;_.audioBitrate=d.audio.bitrate||0,p.push(_)}var b=[];T.forEach(function(C){var A=[],Q=C.userId,oe=C.audio.bitrate;if(C.video&&C.video.forEach(function(ge){var Z=new et;Z.userId=Q,Z.width=ge.width,Z.height=ge.height,Z.frameRate=ge.frameRate,Z.videoBitrate=ge.bitrate,Z.audioBitrate=oe||0,Z.streamType=h[ge.videoType],A.push(Z)}),A.length===0){var U=new et;U.userId=Q,U.audioBitrate=oe||0,A.push(U)}b.push.apply(b,A)});var v=new Wt;v.upLoss=a,v.downLoss=c,v.rtt=n,v.sentBytes=u,v.receivedBytes=l,v.localStatisticsArray=p,v.localStatisticsArraySize=p.length,v.remoteStatisticsArray=b,v.remoteStatisticsArraySize=b.length,e.emit("onStatistics",v)}),this._trtc.on(f.default.EVENT.SCREEN_SHARE_STOPPED,function(){e.emit("onScreenCaptureStopped",0),e._isSharingScreen=!1}),this._trtc.on(f.default.EVENT.PUBLISH_STATE_CHANGED,function(t){var i=t.mediaType;t.state==="started"&&(i==="audio"?e.emit("onSendFirstLocalAudioFrame"):i==="video"?e.emit("onSendFirstLocalVideoFrame",s.TRTCVideoStreamType.TRTCVideoStreamTypeBig):i==="screen"&&e.emit("onSendFirstLocalVideoFrame",s.TRTCVideoStreamType.TRTCVideoStreamTypeSub))}),this._trtc.on(f.default.EVENT.DEVICE_CHANGED,function(t){var i=t.type,n=t.device,a=t.action,c=n.deviceId;if(a==="active"){switch(i){case"camera":e._currentCameraId=c,e._currentCamera=n;break;case"microphone":e._currentMicrophoneId=c,e._currentMicrophone=n;break;case"speaker":e._currentSpeakerId=c,e._currentSpeaker=n}e.emitOnDeviceChange(c,e._getTRTCCloudDeviceType(i),e._getTRTCCloudDeviceState(a))}})},o.prototype._removeTRTCEvents=function(){this._trtc.off("*")},o.prototype._emitVideoAvailable=function(e,t){var i=e.userId,n=e.streamType;t?this._remoteStreamMap.set("".concat(i,"_").concat(n),!0):this._remoteStreamMap.delete("".concat(i,"_").concat(n)),n===f.default.TYPE.STREAM_TYPE_SUB?i&&this.emit("onUserSubStreamAvailable",i,t):i&&this.emit("onUserVideoAvailable",i,t)},o.prototype._setLocalView=function(e){this._localView=e},o.prototype._getLocalView=function(){return this._localView},o.prototype._setIsMobile=function(e){this._isMobile=e},o.prototype._getIsMobile=function(){return this._isMobile},o.prototype._setIsFrontCamera=function(e){this._isFrontCamera=e},o.prototype._getIsFrontCamera=function(){return this._isFrontCamera},o.prototype._getSmallStreamVideoProfile=function(){return this._smallStreamVideoProfile},o.prototype._setSmallStreamVideoProfile=function(e){this._smallStreamVideoProfile=e},o.prototype._setIsVideoPublish=function(e){this._isVideoPublish=e},o.prototype._getIsVideoPublish=function(){return this._isVideoPublish},o.prototype._setVideoProfile=function(e){this._videoProfile=e},o.prototype._getVideoProfile=function(){return this._videoProfile},o.prototype._setVideoPlayOption=function(e){this._videoPlayOption=e},o.prototype._getVideoPlayOption=function(){return this._videoPlayOption},o.prototype._setQosPreference=function(e){this._qosPreference=e},o.prototype._getQosPreference=function(){return this._qosPreference},o.prototype._setLocalTestView=function(e){this._localTestView=e},o.prototype._getLocalTestView=function(){return this._localTestView},o.prototype._setScreenShareParams=function(e){var t=e.view,i=e.systemAudio,n=e.fillMode,a=e.profile,c=e.videoTrack,u=e.qosPreference;P(t)||(this._screenShareParams.view=t),P(i)||(this._screenShareParams.option.systemAudio=i),P(n)||(this._screenShareParams.option.fillMode=n),P(a)||(this._screenShareParams.option.profile=a),P(c)||(this._screenShareParams.option.videoTrack=c),P(u)||(this._screenShareParams.option.qosPreference=u)},o.prototype._getScreenShareParams=function(){return this._screenShareParams},o.prototype._setIsAudioPublish=function(e){this._isAudioPublish=e},o.prototype._getIsAudioPublish=function(){return this._isAudioPublish},o.prototype._setAudioProfile=function(e){this._audioProfile=e},o.prototype._getAudioProfile=function(){return this._audioProfile},o.prototype._getCaptureVolume=function(){return this._captureVolume},o.prototype._setCaptureVolume=function(e){this._captureVolume=e},o.prototype._setCurrentCameraId=function(e){this._currentCameraId=e},o.prototype._getCurrentCameraId=function(){return this._currentCameraId},o.prototype._setCurrentMicrophoneId=function(e){this._currentMicrophoneId=e},o.prototype._getCurrentMicrophoneId=function(){return this._currentMicrophoneId},o.prototype._setCurrentSpeakerId=function(e){this._currentSpeakerId=e},o.prototype._getCurrentSpeakerId=function(){return this._currentSpeakerId},o.prototype._setRemoteStreamConfig=function(e,t,i){var n=this._remoteStreamConfig.get("".concat(e,"_").concat(this._getTRTCStreamType(t)));n||(n={userId:e,streamType:this._getTRTCStreamType(t),option:{mirror:this._getTRTCMirror(s.TRTCVideoMirrorType.TRTCVideoMirrorType_Disable),fillMode:this._getTRTCFillMode(s.TRTCVideoFillMode.TRTCVideoFillMode_Fit)}});var a=i.view,c=i.mirrorType,u=i.fillMode,l=i.small;P(a)||(n.view=a),P(c)||(n.option.mirror=this._getTRTCMirror(c)),P(u)||(n.option.fillMode=this._getTRTCFillMode(u)),P(l)||(n.option.small=l),this._remoteStreamConfig.set("".concat(e,"_").concat(this._getTRTCStreamType(t)),n)},o.prototype.handleDeviceChange=function(){return R(this,void 0,void 0,function(){var e=this;return g(this,function(t){return f.default.getCameraList().then(function(i){return R(e,void 0,void 0,function(){return g(this,function(n){switch(n.label){case 0:return this._cameraList.length===i.length?[2]:[4,this.deviceChangeManage(this._cameraList,i,s.TRTCDeviceType.TRTCDeviceTypeCamera)];case 1:return n.sent(),this._cameraList=i,[2]}})})}),f.default.getMicrophoneList().then(function(i){return R(e,void 0,void 0,function(){return g(this,function(n){switch(n.label){case 0:return[4,this.deviceChangeManage(this._microphoneList,i,s.TRTCDeviceType.TRTCDeviceTypeMic)];case 1:return n.sent(),this._microphoneList=i,[2]}})})}),f.default.getSpeakerList().then(function(i){return R(e,void 0,void 0,function(){return g(this,function(n){switch(n.label){case 0:return[4,this.deviceChangeManage(this._speakerList,i,s.TRTCDeviceType.TRTCDeviceTypeSpeaker)];case 1:return n.sent(),this._speakerList=i,[2]}})})}),[2]})})},o.prototype.isSameDevice=function(e,t){var i=e&&e.deviceId&&e.groupId&&e.label,n=t&&t.deviceId&&t.groupId&&t.label;return!(!i||!n)&&e.deviceId===t.deviceId&&e.groupId===t.groupId&&e.label===t.label},o.prototype.deviceChangeManage=function(e,t,i){return R(this,void 0,void 0,function(){var n,a,c,u,l;return g(this,function(d){switch(d.label){case 0:return n=void 0,e.length!==t.length&&(a=(t||[]).map(function(T){return T.deviceId}),c=new ue,e.length>t.length?(c=e.filter(function(T){return!a.includes(T.deviceId)})[0]||{},n=s.TRTCDeviceState.TRTCDeviceStateRemove):(a=(e||[]).map(function(T){return T.deviceId}),c=t.filter(function(T){return!a.includes(T.deviceId)})[0]||{},n=s.TRTCDeviceState.TRTCDeviceStateAdd),u=c.deviceId,this.emitOnDeviceChange(u,i,n)),l=this.getDefaultDeviceInfo(t),i!==s.TRTCDeviceType.TRTCDeviceTypeCamera||n!==s.TRTCDeviceState.TRTCDeviceStateRemove?[3,3]:this.isSameDevice(this._currentCamera,l)?[2]:l.deviceId?[4,this.autoChangeDevice(i,l)]:[3,2];case 1:d.sent(),d.label=2;case 2:d.label=3;case 3:return i!==s.TRTCDeviceType.TRTCDeviceTypeMic?[3,6]:this.isSameDevice(this._currentMicrophone,l)?[2]:l.deviceId?[4,this.autoChangeDevice(i,l)]:[3,5];case 4:d.sent(),d.label=5;case 5:d.label=6;case 6:return i!==s.TRTCDeviceType.TRTCDeviceTypeSpeaker?[3,9]:this.isSameDevice(this._currentSpeaker,l)?[2]:l.deviceId?[4,this.autoChangeDevice(i,l)]:[3,8];case 7:d.sent(),d.label=8;case 8:d.label=9;case 9:return[2]}})})},o.prototype.getDefaultDeviceInfo=function(e){var t=new ue;if(e.length===0)return t;var i=e.filter(function(n){return n.deviceId==="default"});return t=i.length>0?i[0]:e[0]},o.prototype.autoChangeDevice=function(e,t){return R(this,void 0,void 0,function(){var i,n,a,c,u;return g(this,function(l){switch(l.label){case 0:if(i=t.deviceId,e!==s.TRTCDeviceType.TRTCDeviceTypeCamera)return[3,8];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this._trtc.updateLocalVideo({option:{cameraId:i}})];case 2:return l.sent(),[3,4];case 3:return n=l.sent(),console.log("error",JSON.stringify(n)),n.code,f.default.ERROR_CODE.OPERATION_ABORT,[3,4];case 4:return l.trys.push([4,6,,7]),[4,this._testTrtc.updateLocalVideo({option:{cameraId:i}})];case 5:return l.sent(),[3,7];case 6:return a=l.sent(),console.log("testTRTC error",JSON.stringify(a)),a.code,f.default.ERROR_CODE.OPERATION_ABORT,[3,7];case 7:this._currentCameraId=i,this._currentCamera=t,this.emitOnDeviceChange(i,e,s.TRTCDeviceState.TRTCDeviceStateActive),l.label=8;case 8:if(e!==s.TRTCDeviceType.TRTCDeviceTypeMic)return[3,16];l.label=9;case 9:return l.trys.push([9,11,,12]),[4,this._trtc.updateLocalAudio({option:{microphoneId:i}})];case 10:return l.sent(),[3,12];case 11:return c=l.sent(),console.log("error",JSON.stringify(c)),c.code,f.default.ERROR_CODE.OPERATION_ABORT,[3,12];case 12:return l.trys.push([12,14,,15]),[4,this._testTrtc.updateLocalAudio({option:{microphoneId:i}})];case 13:return l.sent(),[3,15];case 14:return u=l.sent(),console.log("testTRTC error",JSON.stringify(u)),u.code,f.default.ERROR_CODE.OPERATION_ABORT,[3,15];case 15:this._currentMicrophoneId=i,this._currentMicrophone=t,this.emitOnDeviceChange(i,e,s.TRTCDeviceState.TRTCDeviceStateActive),l.label=16;case 16:return e!==s.TRTCDeviceType.TRTCDeviceTypeSpeaker?[3,18]:[4,f.default.setCurrentSpeaker(i)];case 17:l.sent(),this._currentSpeakerId=i,this._currentSpeaker=t,this.emitOnDeviceChange(i,e,s.TRTCDeviceState.TRTCDeviceStateActive),l.label=18;case 18:return[2]}})})},o.prototype.emitOnDeviceChange=function(e,t,i){this.emit("onDeviceChange",e,t,i)},o.shareInstance=null,o.subCloudMap=new Map,o}(So);s.Rect=Po,s.TRTCDeviceInfo=ue,s.TRTCImageBuffer=tt,s.TRTCLocalStatistics=Ze,s.TRTCMixUser=Do,s.TRTCNetworkQosParam=Mo,s.TRTCParams=bo,s.TRTCPublishCDNParam=Ao,s.TRTCQualityInfo=Xe,s.TRTCRemoteStatistics=et,s.TRTCRenderParams=wo,s.TRTCScreenCaptureSourceInfo=Io,s.TRTCStatistics=Wt,s.TRTCTranscodingConfig=Lo,s.TRTCVideoEncParam=Vo,s.TRTCVolumeInfo=Eo,s.default=Yn,Object.defineProperty(s,"__esModule",{value:!0})})}(ze,ze.exports)),ze.exports}var $n=Jn();const ta=zn($n);export{ta as I,Jn as r,$n as t};
