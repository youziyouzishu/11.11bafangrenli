import{N as F,O as S,y as K,_ as j,x as z,a2 as H,P as J,A as Q}from"./element-plus-69d92160.js";import{a as W,b as X,c as Y,d as Z}from"./menu-18b4c21e.js";import{n as $,M as r,o as ee,p as le}from"./index-90bac5cf.js";import{P as oe}from"./index-943d816c.js";import{d as ae,b5 as E,r as v,b as te,b2 as se,aq as de,o as i,c as ne,M as a,aR as t,a_ as e,L as m,x as c,y as _,a as d}from"./@vue-a164be7a.js";const re={class:"edit-popup"},ue={class:"flex-1"},pe=d("div",{class:"form-tips"}," 访问的路由地址，如：`user`，如外网地址需内链访问则以`http(s)://`开头 ",-1),ie={class:"flex-1"},me=d("div",{class:"form-tips"}," 访问的组件路径，如：`user/setting`，默认在`views`目录下 ",-1),ce={class:"flex-1"},_e=d("div",{class:"form-tips"}," 访问详情页面，编辑页面时，菜单高亮显示，如`/consumer/lists` ",-1),fe={class:"flex-1"},be=d("div",{class:"form-tips"}," 将作为server端API验权使用，如`auth.admin/user`，请谨慎修改 ",-1),Ve={class:"flex-1"},ye=d("div",{class:"form-tips"},' 访问路由的默认传递参数，如：`{"id": 1, "name": "admin"}`或`id=1&name=admin` ',-1),ve=d("div",{class:"form-tips"},"选择缓存则会被`keep-alive`缓存",-1),Ue=d("div",{class:"form-tips"}," 选择隐藏则路由将不会出现在侧边栏，但仍然可以访问 ",-1),he=d("div",{class:"form-tips"},"选择停用则路由将不会出现在侧边栏，也不能被访问",-1),Te=d("div",{class:"form-tips"},"数值越大越排前",-1),Ce=ae({__name:"edit",emits:["success","close"],setup(ge,{expose:x,emit:w}){const U=w,h=E(),V=E(),y=v("add"),N=te(()=>y.value=="edit"?"编辑菜单":"新增菜单"),T=v($()),C=(n,l)=>{const u=n?T.value.filter(f=>f.toLowerCase().includes(n.toLowerCase())):T.value;l(u.map(f=>({value:f})))},o=se({id:"",pid:0,type:r.CATALOGUE,icon:"",name:"",sort:0,paths:"",perms:"",component:"",selected:"",params:"",is_cache:0,is_show:1,is_disable:0}),O={pid:[{required:!0,message:"请选择父级菜单",trigger:["blur","change"]}],name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],paths:[{required:!0,message:"请输入路由地址",trigger:"blur"}],component:[{required:!0,message:"请输入组件地址",trigger:"blur"}]},g=v([]),A=async()=>{const n=await W({page_type:0}),l={id:0,name:"顶级",children:[]};l.children=ee(le(n.lists).filter(u=>u.type!=r.BUTTON)),g.value.push(l)},B=async()=>{var n,l;await((n=h.value)==null?void 0:n.validate()),y.value=="edit"?await X(o):await Y(o),(l=V.value)==null||l.close(),U("success")},M=(n="add")=>{var l;y.value=n,(l=V.value)==null||l.open()},k=n=>{for(const l in o)n[l]!=null&&n[l]!=null&&(o[l]=n[l])},q=async n=>{const l=await Z({id:n.id});k(l)},R=()=>{U("close")};return A(),x({open:M,setFormData:k,getDetail:q}),(n,l)=>{const u=F,f=S,p=K,L=j,b=z,D=de("icon-picker"),G=H,I=J,P=Q;return i(),ne("div",re,[a(oe,{ref_key:"popupRef",ref:V,title:e(N),async:!0,width:"550px",onConfirm:B,onClose:R},{default:t(()=>[a(P,{ref_key:"formRef",ref:h,model:e(o),"label-width":"80px",rules:O},{default:t(()=>[a(p,{label:"菜单类型",prop:"type",required:""},{default:t(()=>[a(f,{modelValue:e(o).type,"onUpdate:modelValue":l[0]||(l[0]=s=>e(o).type=s)},{default:t(()=>[a(u,{label:e(r).CATALOGUE},{default:t(()=>[m("目录")]),_:1},8,["label"]),a(u,{label:e(r).MENU},{default:t(()=>[m("菜单")]),_:1},8,["label"]),a(u,{label:e(r).BUTTON},{default:t(()=>[m("按钮")]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"父级菜单",prop:"pid"},{default:t(()=>[a(L,{class:"flex-1",modelValue:e(o).pid,"onUpdate:modelValue":l[1]||(l[1]=s=>e(o).pid=s),data:e(g),clearable:"","node-key":"id",props:{label:"name"},"default-expand-all":!0,placeholder:"请选择父级菜单","check-strictly":""},null,8,["modelValue","data"])]),_:1}),a(p,{label:"菜单名称",prop:"name"},{default:t(()=>[a(b,{modelValue:e(o).name,"onUpdate:modelValue":l[2]||(l[2]=s=>e(o).name=s),placeholder:"请输入菜单名称",clearable:""},null,8,["modelValue"])]),_:1}),e(o).type!=e(r).BUTTON?(i(),c(p,{key:0,label:"菜单图标",prop:"icon"},{default:t(()=>[a(D,{class:"flex-1",modelValue:e(o).icon,"onUpdate:modelValue":l[3]||(l[3]=s=>e(o).icon=s)},null,8,["modelValue"])]),_:1})):_("",!0),e(o).type!=e(r).BUTTON?(i(),c(p,{key:1,label:"路由路径",prop:"paths"},{default:t(()=>[d("div",ue,[a(b,{modelValue:e(o).paths,"onUpdate:modelValue":l[4]||(l[4]=s=>e(o).paths=s),placeholder:"请输入路由路径",clearable:""},null,8,["modelValue"]),pe])]),_:1})):_("",!0),e(o).type==e(r).MENU?(i(),c(p,{key:2,label:"组件路径",prop:"component"},{default:t(()=>[d("div",ie,[a(G,{class:"w-full",modelValue:e(o).component,"onUpdate:modelValue":l[5]||(l[5]=s=>e(o).component=s),"fetch-suggestions":C,clearable:"",placeholder:"请输入组件路径"},null,8,["modelValue"]),me])]),_:1})):_("",!0),e(o).type==e(r).MENU?(i(),c(p,{key:3,label:"选中菜单",prop:"selected"},{default:t(()=>[d("div",ce,[a(b,{modelValue:e(o).selected,"onUpdate:modelValue":l[6]||(l[6]=s=>e(o).selected=s),placeholder:"请输入路由路径",clearable:""},null,8,["modelValue"]),_e])]),_:1})):_("",!0),e(o).type!=e(r).CATALOGUE?(i(),c(p,{key:4,label:"权限字符",prop:"perms"},{default:t(()=>[d("div",fe,[a(b,{modelValue:e(o).perms,"onUpdate:modelValue":l[7]||(l[7]=s=>e(o).perms=s),placeholder:"请输入权限字符",clearable:""},null,8,["modelValue"]),be])]),_:1})):_("",!0),e(o).type==e(r).MENU?(i(),c(p,{key:5,label:"路由参数",prop:"params"},{default:t(()=>[d("div",null,[d("div",Ve,[a(b,{modelValue:e(o).params,"onUpdate:modelValue":l[8]||(l[8]=s=>e(o).params=s),placeholder:"请输入路由参数",clearable:""},null,8,["modelValue"])]),ye])]),_:1})):_("",!0),e(o).type==e(r).MENU?(i(),c(p,{key:6,label:"是否缓存",prop:"is_cache",required:""},{default:t(()=>[d("div",null,[a(f,{modelValue:e(o).is_cache,"onUpdate:modelValue":l[9]||(l[9]=s=>e(o).is_cache=s)},{default:t(()=>[a(u,{label:1},{default:t(()=>[m("缓存")]),_:1}),a(u,{label:0},{default:t(()=>[m("不缓存")]),_:1})]),_:1},8,["modelValue"]),ve])]),_:1})):_("",!0),e(o).type!=e(r).BUTTON?(i(),c(p,{key:7,label:"是否显示",prop:"is_show",required:""},{default:t(()=>[d("div",null,[a(f,{modelValue:e(o).is_show,"onUpdate:modelValue":l[10]||(l[10]=s=>e(o).is_show=s)},{default:t(()=>[a(u,{label:1},{default:t(()=>[m("显示")]),_:1}),a(u,{label:0},{default:t(()=>[m("隐藏")]),_:1})]),_:1},8,["modelValue"]),Ue])]),_:1})):_("",!0),e(o).type!=e(r).BUTTON?(i(),c(p,{key:8,label:"菜单状态",prop:"is_disable",required:""},{default:t(()=>[d("div",null,[a(f,{modelValue:e(o).is_disable,"onUpdate:modelValue":l[11]||(l[11]=s=>e(o).is_disable=s)},{default:t(()=>[a(u,{label:0},{default:t(()=>[m("正常")]),_:1}),a(u,{label:1},{default:t(()=>[m("停用")]),_:1})]),_:1},8,["modelValue"]),he])]),_:1})):_("",!0),a(p,{label:"菜单排序",prop:"sort"},{default:t(()=>[d("div",null,[a(I,{modelValue:e(o).sort,"onUpdate:modelValue":l[12]||(l[12]=s=>e(o).sort=s),min:0,max:9999},null,8,["modelValue"]),Te])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{Ce as _};
