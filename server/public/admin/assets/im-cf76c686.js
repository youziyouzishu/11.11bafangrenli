var wc=Object.defineProperty;var kc=(e,s,t)=>s in e?wc(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var Ue=(e,s,t)=>(kc(e,typeof s!="symbol"?s+"":s,t),t);import{d as ne,r as w,aZ as Ne,a$ as at,o as v,c as b,a_ as o,ae as P,M as K,y as H,a as T,aB as D,F as ve,ao as Te,aW as Oe,ak as nn,aj as an,ba as Ea,ag as jt,w as Ze,ap as nt,x as oe,aR as Pe,b6 as et,b as re,aT as ut,aP as Jt,L as Gn,b7 as wt,bg as In,aU as sn,b0 as Bt,aO as Ot,b9 as Ec,b3 as Mc,b1 as xc,b2 as Wr,aq as Uc}from"./@vue-a164be7a.js";import{i as F,I as pe,a as ie,b as ft,c as zn,h as Kr,d as uo,e as $e,T as Se,f as we,t as Ac,s as Zr,g as as,j as Rc,k as qr,B as Jr,l as ho,r as Js,m as Dc,P as Ra}from"./Profile-05fe601a.js";import{R as ze,B as Z,i as fe,r as _e,z as A,O as Xr,q as j,o as V,_ as ae,Z as Je,W as on,X as it,E as va,P as Qr,h as Xt,d as el,f as Pc,e as Oc,w as Lc,T as ni,I as Vn,J as Yt,j as $c,C as Nc,Q as zt,l as Gc}from"./@tencentcloud-7fc831ec.js";import{l as tl}from"./lodash-f986f62a.js";import{I as ai,E as Bc,D as Hc,P as Fc,T as jc,a as Yc,M as zc}from"./@tiptap-57ba56f9.js";import{g as ds,d as st,l as Vc,i as Wc,f as Kc}from"./dayjs-0ab82212.js";import Zc from"./NavBar-5ab23ed4.js";import qc from"./ChatDefaultContent-df2d9bd2.js";import"./About-f35869e5.js";import"./logo-88bc9f68.js";import"./adapter-vue-24f22062.js";import"./Icon-2c0593f3.js";import"./env-a593fd1d.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";import"./back-16f17fde.js";import"./link-e8efd864.js";import"./axios-9669b5e1.js";import"./qs-0338244a.js";import"./side-channel-446b4ca0.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-5b0d6c22.js";import"./EditProfile-564f59a5.js";import"./index-cfdb213d.js";import"./index-e4ac2ab7.js";import"./EditProfilePopup.vue_vue_type_script_setup_true_lang-e0802343.js";import"./index-b5b8c0ea.js";import"./index-7552e016.js";import"./date-picker-panel-c0a79893.js";import"./date-table-8e59b520.js";import"./index-6b0c1d9b.js";import"./right-icon-89a49395.js";import"./enableSampleTaskStatus-a12ec87d.js";import"./prosemirror-state-c6000de8.js";import"./prosemirror-model-4222e734.js";import"./orderedmap-1b52af60.js";import"./prosemirror-transform-8a42477f.js";import"./prosemirror-view-88df7d8c.js";import"./prosemirror-keymap-55db6e93.js";import"./w3c-keyname-a25e4cc1.js";import"./prosemirror-commands-6d2c6479.js";import"./prosemirror-schema-list-d5a5352e.js";var bn=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Qt=[],Ut=[],Jc=typeof Uint8Array<"u"?Uint8Array:Array,Bo=!1;function sl(){Bo=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,t=e.length;s<t;++s)Qt[s]=e[s],Ut[e.charCodeAt(s)]=s;Ut["-".charCodeAt(0)]=62,Ut["_".charCodeAt(0)]=63}function Xc(e,s,t){for(var n,a,i=[],u=s;u<t;u+=3)n=(e[u]<<16)+(e[u+1]<<8)+e[u+2],i.push(Qt[(a=n)>>18&63]+Qt[a>>12&63]+Qt[a>>6&63]+Qt[63&a]);return i.join("")}function oi(e){var s;Bo||sl();for(var t=e.length,n=t%3,a="",i=[],u=0,c=t-n;u<c;u+=16383)i.push(Xc(e,u,u+16383>c?c:u+16383));return n===1?(s=e[t-1],a+=Qt[s>>2],a+=Qt[s<<4&63],a+="=="):n===2&&(s=(e[t-2]<<8)+e[t-1],a+=Qt[s>>10],a+=Qt[s>>4&63],a+=Qt[s<<2&63],a+="="),i.push(a),i.join("")}function Xn(e,s,t,n,a){var i,u,c=8*a-n-1,l=(1<<c)-1,r=l>>1,d=-7,p=t?a-1:0,f=t?-1:1,h=e[s+p];for(p+=f,i=h&(1<<-d)-1,h>>=-d,d+=c;d>0;i=256*i+e[s+p],p+=f,d-=8);for(u=i&(1<<-d)-1,i>>=-d,d+=n;d>0;u=256*u+e[s+p],p+=f,d-=8);if(i===0)i=1-r;else{if(i===l)return u?NaN:1/0*(h?-1:1);u+=Math.pow(2,n),i-=r}return(h?-1:1)*u*Math.pow(2,i-n)}function nl(e,s,t,n,a,i){var u,c,l,r=8*i-a-1,d=(1<<r)-1,p=d>>1,f=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,g=n?1:-1,_=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(c=isNaN(s)?1:0,u=d):(u=Math.floor(Math.log(s)/Math.LN2),s*(l=Math.pow(2,-u))<1&&(u--,l*=2),(s+=u+p>=1?f/l:f*Math.pow(2,1-p))*l>=2&&(u++,l/=2),u+p>=d?(c=0,u=d):u+p>=1?(c=(s*l-1)*Math.pow(2,a),u+=p):(c=s*Math.pow(2,p-1)*Math.pow(2,a),u=0));a>=8;e[t+h]=255&c,h+=g,c/=256,a-=8);for(u=u<<a|c,r+=a;r>0;e[t+h]=255&u,h+=g,u/=256,r-=8);e[t+h-g]|=128*_}var Qc={}.toString,al=Array.isArray||function(e){return Qc.call(e)=="[object Array]"};function po(){return X.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function hs(e,s){if(po()<s)throw new RangeError("Invalid typed array length");return X.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(s)).__proto__=X.prototype:(e===null&&(e=new X(s)),e.length=s),e}function X(e,s,t){if(!(X.TYPED_ARRAY_SUPPORT||this instanceof X))return new X(e,s,t);if(typeof e=="number"){if(typeof s=="string")throw new Error("If encoding is specified then the first argument must be a string");return fo(this,e)}return ol(this,e,s,t)}function ol(e,s,t,n){if(typeof s=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&s instanceof ArrayBuffer?function(a,i,u,c){if(i.byteLength,u<0||i.byteLength<u)throw new RangeError("'offset' is out of bounds");if(i.byteLength<u+(c||0))throw new RangeError("'length' is out of bounds");return i=u===void 0&&c===void 0?new Uint8Array(i):c===void 0?new Uint8Array(i,u):new Uint8Array(i,u,c),X.TYPED_ARRAY_SUPPORT?(a=i).__proto__=X.prototype:a=Da(a,i),a}(e,s,t,n):typeof s=="string"?function(a,i,u){if(typeof u=="string"&&u!==""||(u="utf8"),!X.isEncoding(u))throw new TypeError('"encoding" must be a valid string encoding');var c=0|rl(i,u),l=(a=hs(a,c)).write(i,u);return l!==c&&(a=a.slice(0,l)),a}(e,s,t):function(a,i){if(es(i)){var u=0|Ho(i.length);return(a=hs(a,u)).length===0||i.copy(a,0,0,u),a}if(i){if(typeof ArrayBuffer<"u"&&i.buffer instanceof ArrayBuffer||"length"in i)return typeof i.length!="number"||(c=i.length)!=c?hs(a,0):Da(a,i);if(i.type==="Buffer"&&al(i.data))return Da(a,i.data)}var c;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,s)}function il(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function fo(e,s){if(il(s),e=hs(e,s<0?0:0|Ho(s)),!X.TYPED_ARRAY_SUPPORT)for(var t=0;t<s;++t)e[t]=0;return e}function Da(e,s){var t=s.length<0?0:0|Ho(s.length);e=hs(e,t);for(var n=0;n<t;n+=1)e[n]=255&s[n];return e}function Ho(e){if(e>=po())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+po().toString(16)+" bytes");return 0|e}function es(e){return!(e==null||!e._isBuffer)}function rl(e,s){if(es(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var t=e.length;if(t===0)return 0;for(var n=!1;;)switch(s){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return ma(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return dl(e).length;default:if(n)return ma(e).length;s=(""+s).toLowerCase(),n=!0}}function eu(e,s,t){var n=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0)<=(s>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return cu(this,s,t);case"utf8":case"utf-8":return cl(this,s,t);case"ascii":return ru(this,s,t);case"latin1":case"binary":return lu(this,s,t);case"base64":return iu(this,s,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return uu(this,s,t);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function Ps(e,s,t){var n=e[s];e[s]=e[t],e[t]=n}function ii(e,s,t,n,a){if(e.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=a?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if(a)return-1;t=e.length-1}else if(t<0){if(!a)return-1;t=0}if(typeof s=="string"&&(s=X.from(s,n)),es(s))return s.length===0?-1:ri(e,s,t,n,a);if(typeof s=="number")return s&=255,X.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?a?Uint8Array.prototype.indexOf.call(e,s,t):Uint8Array.prototype.lastIndexOf.call(e,s,t):ri(e,[s],t,n,a);throw new TypeError("val must be string, number or Buffer")}function ri(e,s,t,n,a){var i,u=1,c=e.length,l=s.length;if(n!==void 0&&((n=String(n).toLowerCase())==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||s.length<2)return-1;u=2,c/=2,l/=2,t/=2}function r(h,g){return u===1?h[g]:h.readUInt16BE(g*u)}if(a){var d=-1;for(i=t;i<c;i++)if(r(e,i)===r(s,d===-1?0:i-d)){if(d===-1&&(d=i),i-d+1===l)return d*u}else d!==-1&&(i-=i-d),d=-1}else for(t+l>c&&(t=c-l),i=t;i>=0;i--){for(var p=!0,f=0;f<l;f++)if(r(e,i+f)!==r(s,f)){p=!1;break}if(p)return i}return-1}function tu(e,s,t,n){t=Number(t)||0;var a=e.length-t;n?(n=Number(n))>a&&(n=a):n=a;var i=s.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var u=0;u<n;++u){var c=parseInt(s.substr(2*u,2),16);if(isNaN(c))return u;e[t+u]=c}return u}function su(e,s,t,n){return Ma(ma(s,e.length-t),e,t,n)}function ll(e,s,t,n){return Ma(function(a){for(var i=[],u=0;u<a.length;++u)i.push(255&a.charCodeAt(u));return i}(s),e,t,n)}function nu(e,s,t,n){return ll(e,s,t,n)}function au(e,s,t,n){return Ma(dl(s),e,t,n)}function ou(e,s,t,n){return Ma(function(a,i){for(var u,c,l,r=[],d=0;d<a.length&&!((i-=2)<0);++d)u=a.charCodeAt(d),c=u>>8,l=u%256,r.push(l),r.push(c);return r}(s,e.length-t),e,t,n)}function iu(e,s,t){return s===0&&t===e.length?oi(e):oi(e.slice(s,t))}function cl(e,s,t){t=Math.min(e.length,t);for(var n=[],a=s;a<t;){var i,u,c,l,r=e[a],d=null,p=r>239?4:r>223?3:r>191?2:1;if(a+p<=t)switch(p){case 1:r<128&&(d=r);break;case 2:(192&(i=e[a+1]))==128&&(l=(31&r)<<6|63&i)>127&&(d=l);break;case 3:i=e[a+1],u=e[a+2],(192&i)==128&&(192&u)==128&&(l=(15&r)<<12|(63&i)<<6|63&u)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:i=e[a+1],u=e[a+2],c=e[a+3],(192&i)==128&&(192&u)==128&&(192&c)==128&&(l=(15&r)<<18|(63&i)<<12|(63&u)<<6|63&c)>65535&&l<1114112&&(d=l)}d===null?(d=65533,p=1):d>65535&&(d-=65536,n.push(d>>>10&1023|55296),d=56320|1023&d),n.push(d),a+=p}return function(f){var h=f.length;if(h<=li)return String.fromCharCode.apply(String,f);for(var g="",_=0;_<h;)g+=String.fromCharCode.apply(String,f.slice(_,_+=li));return g}(n)}X.TYPED_ARRAY_SUPPORT=bn.TYPED_ARRAY_SUPPORT===void 0||bn.TYPED_ARRAY_SUPPORT,X.poolSize=8192,X._augment=function(e){return e.__proto__=X.prototype,e},X.from=function(e,s,t){return ol(null,e,s,t)},X.TYPED_ARRAY_SUPPORT&&(X.prototype.__proto__=Uint8Array.prototype,X.__proto__=Uint8Array),X.alloc=function(e,s,t){return function(n,a,i,u){return il(a),a<=0?hs(n,a):i!==void 0?typeof u=="string"?hs(n,a).fill(i,u):hs(n,a).fill(i):hs(n,a)}(null,e,s,t)},X.allocUnsafe=function(e){return fo(null,e)},X.allocUnsafeSlow=function(e){return fo(null,e)},X.isBuffer=xa,X.compare=function(e,s){if(!es(e)||!es(s))throw new TypeError("Arguments must be Buffers");if(e===s)return 0;for(var t=e.length,n=s.length,a=0,i=Math.min(t,n);a<i;++a)if(e[a]!==s[a]){t=e[a],n=s[a];break}return t<n?-1:n<t?1:0},X.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},X.concat=function(e,s){if(!al(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return X.alloc(0);var t;if(s===void 0)for(s=0,t=0;t<e.length;++t)s+=e[t].length;var n=X.allocUnsafe(s),a=0;for(t=0;t<e.length;++t){var i=e[t];if(!es(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,a),a+=i.length}return n},X.byteLength=rl,X.prototype._isBuffer=!0,X.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var s=0;s<e;s+=2)Ps(this,s,s+1);return this},X.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var s=0;s<e;s+=4)Ps(this,s,s+3),Ps(this,s+1,s+2);return this},X.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var s=0;s<e;s+=8)Ps(this,s,s+7),Ps(this,s+1,s+6),Ps(this,s+2,s+5),Ps(this,s+3,s+4);return this},X.prototype.toString=function(){var e=0|this.length;return e===0?"":arguments.length===0?cl(this,0,e):eu.apply(this,arguments)},X.prototype.equals=function(e){if(!es(e))throw new TypeError("Argument must be a Buffer");return this===e||X.compare(this,e)===0},X.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},X.prototype.compare=function(e,s,t,n,a){if(!es(e))throw new TypeError("Argument must be a Buffer");if(s===void 0&&(s=0),t===void 0&&(t=e?e.length:0),n===void 0&&(n=0),a===void 0&&(a=this.length),s<0||t>e.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&s>=t)return 0;if(n>=a)return-1;if(s>=t)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(n>>>=0),u=(t>>>=0)-(s>>>=0),c=Math.min(i,u),l=this.slice(n,a),r=e.slice(s,t),d=0;d<c;++d)if(l[d]!==r[d]){i=l[d],u=r[d];break}return i<u?-1:u<i?1:0},X.prototype.includes=function(e,s,t){return this.indexOf(e,s,t)!==-1},X.prototype.indexOf=function(e,s,t){return ii(this,e,s,t,!0)},X.prototype.lastIndexOf=function(e,s,t){return ii(this,e,s,t,!1)},X.prototype.write=function(e,s,t,n){if(s===void 0)n="utf8",t=this.length,s=0;else if(t===void 0&&typeof s=="string")n=s,t=this.length,s=0;else{if(!isFinite(s))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");s|=0,isFinite(t)?(t|=0,n===void 0&&(n="utf8")):(n=t,t=void 0)}var a=this.length-s;if((t===void 0||t>a)&&(t=a),e.length>0&&(t<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return tu(this,e,s,t);case"utf8":case"utf-8":return su(this,e,s,t);case"ascii":return ll(this,e,s,t);case"latin1":case"binary":return nu(this,e,s,t);case"base64":return au(this,e,s,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ou(this,e,s,t);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},X.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var li=4096;function ru(e,s,t){var n="";t=Math.min(e.length,t);for(var a=s;a<t;++a)n+=String.fromCharCode(127&e[a]);return n}function lu(e,s,t){var n="";t=Math.min(e.length,t);for(var a=s;a<t;++a)n+=String.fromCharCode(e[a]);return n}function cu(e,s,t){var n=e.length;(!s||s<0)&&(s=0),(!t||t<0||t>n)&&(t=n);for(var a="",i=s;i<t;++i)a+=hu(e[i]);return a}function uu(e,s,t){for(var n=e.slice(s,t),a="",i=0;i<n.length;i+=2)a+=String.fromCharCode(n[i]+256*n[i+1]);return a}function dt(e,s,t){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+s>t)throw new RangeError("Trying to access beyond buffer length")}function Tt(e,s,t,n,a,i){if(!es(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>a||s<i)throw new RangeError('"value" argument is out of bounds');if(t+n>e.length)throw new RangeError("Index out of range")}function Qn(e,s,t,n){s<0&&(s=65535+s+1);for(var a=0,i=Math.min(e.length-t,2);a<i;++a)e[t+a]=(s&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function ea(e,s,t,n){s<0&&(s=4294967295+s+1);for(var a=0,i=Math.min(e.length-t,4);a<i;++a)e[t+a]=s>>>8*(n?a:3-a)&255}function ul(e,s,t,n,a,i){if(t+n>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function ci(e,s,t,n,a){return a||ul(e,0,t,4),nl(e,s,t,n,23,4),t+4}function ui(e,s,t,n,a){return a||ul(e,0,t,8),nl(e,s,t,n,52,8),t+8}X.prototype.slice=function(e,s){var t,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(s=s===void 0?n:~~s)<0?(s+=n)<0&&(s=0):s>n&&(s=n),s<e&&(s=e),X.TYPED_ARRAY_SUPPORT)(t=this.subarray(e,s)).__proto__=X.prototype;else{var a=s-e;t=new X(a,void 0);for(var i=0;i<a;++i)t[i]=this[i+e]}return t},X.prototype.readUIntLE=function(e,s,t){e|=0,s|=0,t||dt(e,s,this.length);for(var n=this[e],a=1,i=0;++i<s&&(a*=256);)n+=this[e+i]*a;return n},X.prototype.readUIntBE=function(e,s,t){e|=0,s|=0,t||dt(e,s,this.length);for(var n=this[e+--s],a=1;s>0&&(a*=256);)n+=this[e+--s]*a;return n},X.prototype.readUInt8=function(e,s){return s||dt(e,1,this.length),this[e]},X.prototype.readUInt16LE=function(e,s){return s||dt(e,2,this.length),this[e]|this[e+1]<<8},X.prototype.readUInt16BE=function(e,s){return s||dt(e,2,this.length),this[e]<<8|this[e+1]},X.prototype.readUInt32LE=function(e,s){return s||dt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},X.prototype.readUInt32BE=function(e,s){return s||dt(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},X.prototype.readIntLE=function(e,s,t){e|=0,s|=0,t||dt(e,s,this.length);for(var n=this[e],a=1,i=0;++i<s&&(a*=256);)n+=this[e+i]*a;return n>=(a*=128)&&(n-=Math.pow(2,8*s)),n},X.prototype.readIntBE=function(e,s,t){e|=0,s|=0,t||dt(e,s,this.length);for(var n=s,a=1,i=this[e+--n];n>0&&(a*=256);)i+=this[e+--n]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*s)),i},X.prototype.readInt8=function(e,s){return s||dt(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},X.prototype.readInt16LE=function(e,s){s||dt(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},X.prototype.readInt16BE=function(e,s){s||dt(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},X.prototype.readInt32LE=function(e,s){return s||dt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},X.prototype.readInt32BE=function(e,s){return s||dt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},X.prototype.readFloatLE=function(e,s){return s||dt(e,4,this.length),Xn(this,e,!0,23,4)},X.prototype.readFloatBE=function(e,s){return s||dt(e,4,this.length),Xn(this,e,!1,23,4)},X.prototype.readDoubleLE=function(e,s){return s||dt(e,8,this.length),Xn(this,e,!0,52,8)},X.prototype.readDoubleBE=function(e,s){return s||dt(e,8,this.length),Xn(this,e,!1,52,8)},X.prototype.writeUIntLE=function(e,s,t,n){e=+e,s|=0,t|=0,n||Tt(this,e,s,t,Math.pow(2,8*t)-1,0);var a=1,i=0;for(this[s]=255&e;++i<t&&(a*=256);)this[s+i]=e/a&255;return s+t},X.prototype.writeUIntBE=function(e,s,t,n){e=+e,s|=0,t|=0,n||Tt(this,e,s,t,Math.pow(2,8*t)-1,0);var a=t-1,i=1;for(this[s+a]=255&e;--a>=0&&(i*=256);)this[s+a]=e/i&255;return s+t},X.prototype.writeUInt8=function(e,s,t){return e=+e,s|=0,t||Tt(this,e,s,1,255,0),X.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[s]=255&e,s+1},X.prototype.writeUInt16LE=function(e,s,t){return e=+e,s|=0,t||Tt(this,e,s,2,65535,0),X.TYPED_ARRAY_SUPPORT?(this[s]=255&e,this[s+1]=e>>>8):Qn(this,e,s,!0),s+2},X.prototype.writeUInt16BE=function(e,s,t){return e=+e,s|=0,t||Tt(this,e,s,2,65535,0),X.TYPED_ARRAY_SUPPORT?(this[s]=e>>>8,this[s+1]=255&e):Qn(this,e,s,!1),s+2},X.prototype.writeUInt32LE=function(e,s,t){return e=+e,s|=0,t||Tt(this,e,s,4,4294967295,0),X.TYPED_ARRAY_SUPPORT?(this[s+3]=e>>>24,this[s+2]=e>>>16,this[s+1]=e>>>8,this[s]=255&e):ea(this,e,s,!0),s+4},X.prototype.writeUInt32BE=function(e,s,t){return e=+e,s|=0,t||Tt(this,e,s,4,4294967295,0),X.TYPED_ARRAY_SUPPORT?(this[s]=e>>>24,this[s+1]=e>>>16,this[s+2]=e>>>8,this[s+3]=255&e):ea(this,e,s,!1),s+4},X.prototype.writeIntLE=function(e,s,t,n){if(e=+e,s|=0,!n){var a=Math.pow(2,8*t-1);Tt(this,e,s,t,a-1,-a)}var i=0,u=1,c=0;for(this[s]=255&e;++i<t&&(u*=256);)e<0&&c===0&&this[s+i-1]!==0&&(c=1),this[s+i]=(e/u>>0)-c&255;return s+t},X.prototype.writeIntBE=function(e,s,t,n){if(e=+e,s|=0,!n){var a=Math.pow(2,8*t-1);Tt(this,e,s,t,a-1,-a)}var i=t-1,u=1,c=0;for(this[s+i]=255&e;--i>=0&&(u*=256);)e<0&&c===0&&this[s+i+1]!==0&&(c=1),this[s+i]=(e/u>>0)-c&255;return s+t},X.prototype.writeInt8=function(e,s,t){return e=+e,s|=0,t||Tt(this,e,s,1,127,-128),X.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[s]=255&e,s+1},X.prototype.writeInt16LE=function(e,s,t){return e=+e,s|=0,t||Tt(this,e,s,2,32767,-32768),X.TYPED_ARRAY_SUPPORT?(this[s]=255&e,this[s+1]=e>>>8):Qn(this,e,s,!0),s+2},X.prototype.writeInt16BE=function(e,s,t){return e=+e,s|=0,t||Tt(this,e,s,2,32767,-32768),X.TYPED_ARRAY_SUPPORT?(this[s]=e>>>8,this[s+1]=255&e):Qn(this,e,s,!1),s+2},X.prototype.writeInt32LE=function(e,s,t){return e=+e,s|=0,t||Tt(this,e,s,4,2147483647,-2147483648),X.TYPED_ARRAY_SUPPORT?(this[s]=255&e,this[s+1]=e>>>8,this[s+2]=e>>>16,this[s+3]=e>>>24):ea(this,e,s,!0),s+4},X.prototype.writeInt32BE=function(e,s,t){return e=+e,s|=0,t||Tt(this,e,s,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),X.TYPED_ARRAY_SUPPORT?(this[s]=e>>>24,this[s+1]=e>>>16,this[s+2]=e>>>8,this[s+3]=255&e):ea(this,e,s,!1),s+4},X.prototype.writeFloatLE=function(e,s,t){return ci(this,e,s,!0,t)},X.prototype.writeFloatBE=function(e,s,t){return ci(this,e,s,!1,t)},X.prototype.writeDoubleLE=function(e,s,t){return ui(this,e,s,!0,t)},X.prototype.writeDoubleBE=function(e,s,t){return ui(this,e,s,!1,t)},X.prototype.copy=function(e,s,t,n){if(t||(t=0),n||n===0||(n=this.length),s>=e.length&&(s=e.length),s||(s=0),n>0&&n<t&&(n=t),n===t||e.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-s<n-t&&(n=e.length-s+t);var a,i=n-t;if(this===e&&t<s&&s<n)for(a=i-1;a>=0;--a)e[a+s]=this[a+t];else if(i<1e3||!X.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+s]=this[a+t];else Uint8Array.prototype.set.call(e,this.subarray(t,t+i),s);return i},X.prototype.fill=function(e,s,t,n){if(typeof e=="string"){if(typeof s=="string"?(n=s,s=0,t=this.length):typeof t=="string"&&(n=t,t=this.length),e.length===1){var a=e.charCodeAt(0);a<256&&(e=a)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!X.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof e=="number"&&(e&=255);if(s<0||this.length<s||this.length<t)throw new RangeError("Out of range index");if(t<=s)return this;var i;if(s>>>=0,t=t===void 0?this.length:t>>>0,e||(e=0),typeof e=="number")for(i=s;i<t;++i)this[i]=e;else{var u=es(e)?e:ma(new X(e,n).toString()),c=u.length;for(i=0;i<t-s;++i)this[i+s]=u[i%c]}return this};var du=/[^+\/0-9A-Za-z-_]/g;function hu(e){return e<16?"0"+e.toString(16):e.toString(16)}function ma(e,s){var t;s=s||1/0;for(var n=e.length,a=null,i=[],u=0;u<n;++u){if((t=e.charCodeAt(u))>55295&&t<57344){if(!a){if(t>56319){(s-=3)>-1&&i.push(239,191,189);continue}if(u+1===n){(s-=3)>-1&&i.push(239,191,189);continue}a=t;continue}if(t<56320){(s-=3)>-1&&i.push(239,191,189),a=t;continue}t=65536+(a-55296<<10|t-56320)}else a&&(s-=3)>-1&&i.push(239,191,189);if(a=null,t<128){if((s-=1)<0)break;i.push(t)}else if(t<2048){if((s-=2)<0)break;i.push(t>>6|192,63&t|128)}else if(t<65536){if((s-=3)<0)break;i.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((s-=4)<0)break;i.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return i}function dl(e){return function(s){var t,n,a,i,u,c;Bo||sl();var l=s.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");u=s[l-2]==="="?2:s[l-1]==="="?1:0,c=new Jc(3*l/4-u),a=u>0?l-4:l;var r=0;for(t=0,n=0;t<a;t+=4,n+=3)i=Ut[s.charCodeAt(t)]<<18|Ut[s.charCodeAt(t+1)]<<12|Ut[s.charCodeAt(t+2)]<<6|Ut[s.charCodeAt(t+3)],c[r++]=i>>16&255,c[r++]=i>>8&255,c[r++]=255&i;return u===2?(i=Ut[s.charCodeAt(t)]<<2|Ut[s.charCodeAt(t+1)]>>4,c[r++]=255&i):u===1&&(i=Ut[s.charCodeAt(t)]<<10|Ut[s.charCodeAt(t+1)]<<4|Ut[s.charCodeAt(t+2)]>>2,c[r++]=i>>8&255,c[r++]=255&i),c}(function(s){if((s=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(s).replace(du,"")).length<2)return"";for(;s.length%4!=0;)s+="=";return s}(e))}function Ma(e,s,t,n){for(var a=0;a<n&&!(a+t>=s.length||a>=e.length);++a)s[a+t]=e[a];return a}function xa(e){return e!=null&&(!!e._isBuffer||di(e)||function(s){return typeof s.readFloatLE=="function"&&typeof s.slice=="function"&&di(s.slice(0,0))}(e))}function di(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Ge(e,s){return e(s={exports:{}},s.exports),s.exports}var Fe=Ge(function(e,s){var t;e.exports=(t=t||function(n,a){var i=Object.create||function(){function m(){}return function(y){var I;return m.prototype=y,I=new m,m.prototype=null,I}}(),u={},c=u.lib={},l=c.Base={extend:function(m){var y=i(this);return m&&y.mixIn(m),y.hasOwnProperty("init")&&this.init!==y.init||(y.init=function(){y.$super.init.apply(this,arguments)}),y.init.prototype=y,y.$super=this,y},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var y in m)m.hasOwnProperty(y)&&(this[y]=m[y]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}},r=c.WordArray=l.extend({init:function(m,y){m=this.words=m||[],this.sigBytes=y??4*m.length},toString:function(m){return(m||p).stringify(this)},concat:function(m){var y=this.words,I=m.words,S=this.sigBytes,C=m.sigBytes;if(this.clamp(),S%4)for(var R=0;R<C;R++){var k=I[R>>>2]>>>24-R%4*8&255;y[S+R>>>2]|=k<<24-(S+R)%4*8}else for(var R=0;R<C;R+=4)y[S+R>>>2]=I[R>>>2];return this.sigBytes+=C,this},clamp:function(){var m=this.words,y=this.sigBytes;m[y>>>2]&=4294967295<<32-y%4*8,m.length=n.ceil(y/4)},clone:function(){var m=l.clone.call(this);return m.words=this.words.slice(0),m},random:function(m){for(var y,I=[],S=function(x){var x=x,M=987654321,G=4294967295;return function(){var E=((M=36969*(65535&M)+(M>>16)&G)<<16)+(x=18e3*(65535&x)+(x>>16)&G)&G;return E/=4294967296,(E+=.5)*(n.random()>.5?1:-1)}},C=0;C<m;C+=4){var R=S(4294967296*(y||n.random()));y=987654071*R(),I.push(4294967296*R()|0)}return new r.init(I,m)}}),d=u.enc={},p=d.Hex={stringify:function(m){for(var y=m.words,I=m.sigBytes,S=[],C=0;C<I;C++){var R=y[C>>>2]>>>24-C%4*8&255;S.push((R>>>4).toString(16)),S.push((15&R).toString(16))}return S.join("")},parse:function(m){for(var y=m.length,I=[],S=0;S<y;S+=2)I[S>>>3]|=parseInt(m.substr(S,2),16)<<24-S%8*4;return new r.init(I,y/2)}},f=d.Latin1={stringify:function(m){for(var y=m.words,I=m.sigBytes,S=[],C=0;C<I;C++){var R=y[C>>>2]>>>24-C%4*8&255;S.push(String.fromCharCode(R))}return S.join("")},parse:function(m){for(var y=m.length,I=[],S=0;S<y;S++)I[S>>>2]|=(255&m.charCodeAt(S))<<24-S%4*8;return new r.init(I,y)}},h=d.Utf8={stringify:function(m){try{return decodeURIComponent(escape(f.stringify(m)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(m){return f.parse(unescape(encodeURIComponent(m)))}},g=c.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(m){typeof m=="string"&&(m=h.parse(m)),this._data.concat(m),this._nDataBytes+=m.sigBytes},_process:function(m){var y=this._data,I=y.words,S=y.sigBytes,C=this.blockSize,R=4*C,k=S/R,x=(k=m?n.ceil(k):n.max((0|k)-this._minBufferSize,0))*C,M=n.min(4*x,S);if(x){for(var G=0;G<x;G+=C)this._doProcessBlock(I,G);var E=I.splice(0,x);y.sigBytes-=M}return new r.init(E,M)},clone:function(){var m=l.clone.call(this);return m._data=this._data.clone(),m},_minBufferSize:0}),_=(c.Hasher=g.extend({cfg:l.extend(),init:function(m){this.cfg=this.cfg.extend(m),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(m){return this._append(m),this._process(),this},finalize:function(m){m&&this._append(m);var y=this._doFinalize();return y},blockSize:16,_createHelper:function(m){return function(y,I){return new m.init(I).finalize(y)}},_createHmacHelper:function(m){return function(y,I){return new _.HMAC.init(m,I).finalize(y)}}}),u.algo={});return u}(Math),t)});Ge(function(e,s){var t,n,a,i,u,c;e.exports=(a=(n=t=Fe).lib,i=a.Base,u=a.WordArray,(c=n.x64={}).Word=i.extend({init:function(l,r){this.high=l,this.low=r}}),c.WordArray=i.extend({init:function(l,r){l=this.words=l||[],this.sigBytes=r??8*l.length},toX32:function(){for(var l=this.words,r=l.length,d=[],p=0;p<r;p++){var f=l[p];d.push(f.high),d.push(f.low)}return u.create(d,this.sigBytes)},clone:function(){for(var l=i.clone.call(this),r=l.words=this.words.slice(0),d=r.length,p=0;p<d;p++)r[p]=r[p].clone();return l}}),t)}),Ge(function(e,s){var t;e.exports=(t=Fe,function(){if(typeof ArrayBuffer=="function"){var n=t.lib.WordArray,a=n.init;(n.init=function(i){if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),(i instanceof Int8Array||typeof Uint8ClampedArray<"u"&&i instanceof Uint8ClampedArray||i instanceof Int16Array||i instanceof Uint16Array||i instanceof Int32Array||i instanceof Uint32Array||i instanceof Float32Array||i instanceof Float64Array)&&(i=new Uint8Array(i.buffer,i.byteOffset,i.byteLength)),i instanceof Uint8Array){for(var u=i.byteLength,c=[],l=0;l<u;l++)c[l>>>2]|=i[l]<<24-l%4*8;a.call(this,c,u)}else a.apply(this,arguments)}).prototype=n}}(),t.lib.WordArray)}),Ge(function(e,s){var t;e.exports=(t=Fe,function(){var n=t,a=n.lib.WordArray,i=n.enc;function u(c){return c<<8&4278255360|c>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(c){for(var l=c.words,r=c.sigBytes,d=[],p=0;p<r;p+=2){var f=l[p>>>2]>>>16-p%4*8&65535;d.push(String.fromCharCode(f))}return d.join("")},parse:function(c){for(var l=c.length,r=[],d=0;d<l;d++)r[d>>>1]|=c.charCodeAt(d)<<16-d%2*16;return a.create(r,2*l)}},i.Utf16LE={stringify:function(c){for(var l=c.words,r=c.sigBytes,d=[],p=0;p<r;p+=2){var f=u(l[p>>>2]>>>16-p%4*8&65535);d.push(String.fromCharCode(f))}return d.join("")},parse:function(c){for(var l=c.length,r=[],d=0;d<l;d++)r[d>>>1]|=u(c.charCodeAt(d)<<16-d%2*16);return a.create(r,2*l)}}}(),t.enc.Utf16)}),Ge(function(e,s){var t,n,a;e.exports=(a=(n=t=Fe).lib.WordArray,n.enc.Base64={stringify:function(i){var u=i.words,c=i.sigBytes,l=this._map;i.clamp();for(var r=[],d=0;d<c;d+=3)for(var p=(u[d>>>2]>>>24-d%4*8&255)<<16|(u[d+1>>>2]>>>24-(d+1)%4*8&255)<<8|u[d+2>>>2]>>>24-(d+2)%4*8&255,f=0;f<4&&d+.75*f<c;f++)r.push(l.charAt(p>>>6*(3-f)&63));var h=l.charAt(64);if(h)for(;r.length%4;)r.push(h);return r.join("")},parse:function(i){var u=i.length,c=this._map,l=this._reverseMap;if(!l){l=this._reverseMap=[];for(var r=0;r<c.length;r++)l[c.charCodeAt(r)]=r}var d=c.charAt(64);if(d){var p=i.indexOf(d);p!==-1&&(u=p)}return function(f,h,g){for(var _=[],m=0,y=0;y<h;y++)if(y%4){var I=g[f.charCodeAt(y-1)]<<y%4*2,S=g[f.charCodeAt(y)]>>>6-y%4*2;_[m>>>2]|=(I|S)<<24-m%4*8,m++}return a.create(_,m)}(i,u,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},t.enc.Base64)}),Ge(function(e,s){var t;e.exports=(t=Fe,function(n){var a=t,i=a.lib,u=i.WordArray,c=i.Hasher,l=a.algo,r=[];(function(){for(var _=0;_<64;_++)r[_]=4294967296*n.abs(n.sin(_+1))|0})();var d=l.MD5=c.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(_,m){for(var y=0;y<16;y++){var I=m+y,S=_[I];_[I]=16711935&(S<<8|S>>>24)|4278255360&(S<<24|S>>>8)}var C=this._hash.words,R=_[m+0],k=_[m+1],x=_[m+2],M=_[m+3],G=_[m+4],E=_[m+5],O=_[m+6],U=_[m+7],N=_[m+8],W=_[m+9],J=_[m+10],le=_[m+11],ce=_[m+12],ue=_[m+13],me=_[m+14],ke=_[m+15],B=C[0],$=C[1],L=C[2],Y=C[3];B=p(B,$,L,Y,R,7,r[0]),Y=p(Y,B,$,L,k,12,r[1]),L=p(L,Y,B,$,x,17,r[2]),$=p($,L,Y,B,M,22,r[3]),B=p(B,$,L,Y,G,7,r[4]),Y=p(Y,B,$,L,E,12,r[5]),L=p(L,Y,B,$,O,17,r[6]),$=p($,L,Y,B,U,22,r[7]),B=p(B,$,L,Y,N,7,r[8]),Y=p(Y,B,$,L,W,12,r[9]),L=p(L,Y,B,$,J,17,r[10]),$=p($,L,Y,B,le,22,r[11]),B=p(B,$,L,Y,ce,7,r[12]),Y=p(Y,B,$,L,ue,12,r[13]),L=p(L,Y,B,$,me,17,r[14]),B=f(B,$=p($,L,Y,B,ke,22,r[15]),L,Y,k,5,r[16]),Y=f(Y,B,$,L,O,9,r[17]),L=f(L,Y,B,$,le,14,r[18]),$=f($,L,Y,B,R,20,r[19]),B=f(B,$,L,Y,E,5,r[20]),Y=f(Y,B,$,L,J,9,r[21]),L=f(L,Y,B,$,ke,14,r[22]),$=f($,L,Y,B,G,20,r[23]),B=f(B,$,L,Y,W,5,r[24]),Y=f(Y,B,$,L,me,9,r[25]),L=f(L,Y,B,$,M,14,r[26]),$=f($,L,Y,B,N,20,r[27]),B=f(B,$,L,Y,ue,5,r[28]),Y=f(Y,B,$,L,x,9,r[29]),L=f(L,Y,B,$,U,14,r[30]),B=h(B,$=f($,L,Y,B,ce,20,r[31]),L,Y,E,4,r[32]),Y=h(Y,B,$,L,N,11,r[33]),L=h(L,Y,B,$,le,16,r[34]),$=h($,L,Y,B,me,23,r[35]),B=h(B,$,L,Y,k,4,r[36]),Y=h(Y,B,$,L,G,11,r[37]),L=h(L,Y,B,$,U,16,r[38]),$=h($,L,Y,B,J,23,r[39]),B=h(B,$,L,Y,ue,4,r[40]),Y=h(Y,B,$,L,R,11,r[41]),L=h(L,Y,B,$,M,16,r[42]),$=h($,L,Y,B,O,23,r[43]),B=h(B,$,L,Y,W,4,r[44]),Y=h(Y,B,$,L,ce,11,r[45]),L=h(L,Y,B,$,ke,16,r[46]),B=g(B,$=h($,L,Y,B,x,23,r[47]),L,Y,R,6,r[48]),Y=g(Y,B,$,L,U,10,r[49]),L=g(L,Y,B,$,me,15,r[50]),$=g($,L,Y,B,E,21,r[51]),B=g(B,$,L,Y,ce,6,r[52]),Y=g(Y,B,$,L,M,10,r[53]),L=g(L,Y,B,$,J,15,r[54]),$=g($,L,Y,B,k,21,r[55]),B=g(B,$,L,Y,N,6,r[56]),Y=g(Y,B,$,L,ke,10,r[57]),L=g(L,Y,B,$,O,15,r[58]),$=g($,L,Y,B,ue,21,r[59]),B=g(B,$,L,Y,G,6,r[60]),Y=g(Y,B,$,L,le,10,r[61]),L=g(L,Y,B,$,x,15,r[62]),$=g($,L,Y,B,W,21,r[63]),C[0]=C[0]+B|0,C[1]=C[1]+$|0,C[2]=C[2]+L|0,C[3]=C[3]+Y|0},_doFinalize:function(){var _=this._data,m=_.words,y=8*this._nDataBytes,I=8*_.sigBytes;m[I>>>5]|=128<<24-I%32;var S=n.floor(y/4294967296),C=y;m[15+(I+64>>>9<<4)]=16711935&(S<<8|S>>>24)|4278255360&(S<<24|S>>>8),m[14+(I+64>>>9<<4)]=16711935&(C<<8|C>>>24)|4278255360&(C<<24|C>>>8),_.sigBytes=4*(m.length+1),this._process();for(var R=this._hash,k=R.words,x=0;x<4;x++){var M=k[x];k[x]=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8)}return R},clone:function(){var _=c.clone.call(this);return _._hash=this._hash.clone(),_}});function p(_,m,y,I,S,C,R){var k=_+(m&y|~m&I)+S+R;return(k<<C|k>>>32-C)+m}function f(_,m,y,I,S,C,R){var k=_+(m&I|y&~I)+S+R;return(k<<C|k>>>32-C)+m}function h(_,m,y,I,S,C,R){var k=_+(m^y^I)+S+R;return(k<<C|k>>>32-C)+m}function g(_,m,y,I,S,C,R){var k=_+(y^(m|~I))+S+R;return(k<<C|k>>>32-C)+m}a.MD5=c._createHelper(d),a.HmacMD5=c._createHmacHelper(d)}(Math),t.MD5)}),Ge(function(e,s){var t,n,a,i,u,c,l,r;e.exports=(a=(n=t=Fe).lib,i=a.WordArray,u=a.Hasher,c=n.algo,l=[],r=c.SHA1=u.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(d,p){for(var f=this._hash.words,h=f[0],g=f[1],_=f[2],m=f[3],y=f[4],I=0;I<80;I++){if(I<16)l[I]=0|d[p+I];else{var S=l[I-3]^l[I-8]^l[I-14]^l[I-16];l[I]=S<<1|S>>>31}var C=(h<<5|h>>>27)+y+l[I];C+=I<20?1518500249+(g&_|~g&m):I<40?1859775393+(g^_^m):I<60?(g&_|g&m|_&m)-1894007588:(g^_^m)-899497514,y=m,m=_,_=g<<30|g>>>2,g=h,h=C}f[0]=f[0]+h|0,f[1]=f[1]+g|0,f[2]=f[2]+_|0,f[3]=f[3]+m|0,f[4]=f[4]+y|0},_doFinalize:function(){var d=this._data,p=d.words,f=8*this._nDataBytes,h=8*d.sigBytes;return p[h>>>5]|=128<<24-h%32,p[14+(h+64>>>9<<4)]=Math.floor(f/4294967296),p[15+(h+64>>>9<<4)]=f,d.sigBytes=4*p.length,this._process(),this._hash},clone:function(){var d=u.clone.call(this);return d._hash=this._hash.clone(),d}}),n.SHA1=u._createHelper(r),n.HmacSHA1=u._createHmacHelper(r),t.SHA1)}),Ge(function(e,s){var t;e.exports=(t=Fe,function(n){var a=t,i=a.lib,u=i.WordArray,c=i.Hasher,l=a.algo,r=[],d=[];(function(){function h(y){for(var I=n.sqrt(y),S=2;S<=I;S++)if(!(y%S))return!1;return!0}function g(y){return 4294967296*(y-(0|y))|0}for(var _=2,m=0;m<64;)h(_)&&(m<8&&(r[m]=g(n.pow(_,.5))),d[m]=g(n.pow(_,1/3)),m++),_++})();var p=[],f=l.SHA256=c.extend({_doReset:function(){this._hash=new u.init(r.slice(0))},_doProcessBlock:function(h,g){for(var _=this._hash.words,m=_[0],y=_[1],I=_[2],S=_[3],C=_[4],R=_[5],k=_[6],x=_[7],M=0;M<64;M++){if(M<16)p[M]=0|h[g+M];else{var G=p[M-15],E=(G<<25|G>>>7)^(G<<14|G>>>18)^G>>>3,O=p[M-2],U=(O<<15|O>>>17)^(O<<13|O>>>19)^O>>>10;p[M]=E+p[M-7]+U+p[M-16]}var N=m&y^m&I^y&I,W=(m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22),J=x+((C<<26|C>>>6)^(C<<21|C>>>11)^(C<<7|C>>>25))+(C&R^~C&k)+d[M]+p[M];x=k,k=R,R=C,C=S+J|0,S=I,I=y,y=m,m=J+(W+N)|0}_[0]=_[0]+m|0,_[1]=_[1]+y|0,_[2]=_[2]+I|0,_[3]=_[3]+S|0,_[4]=_[4]+C|0,_[5]=_[5]+R|0,_[6]=_[6]+k|0,_[7]=_[7]+x|0},_doFinalize:function(){var h=this._data,g=h.words,_=8*this._nDataBytes,m=8*h.sigBytes;return g[m>>>5]|=128<<24-m%32,g[14+(m+64>>>9<<4)]=n.floor(_/4294967296),g[15+(m+64>>>9<<4)]=_,h.sigBytes=4*g.length,this._process(),this._hash},clone:function(){var h=c.clone.call(this);return h._hash=this._hash.clone(),h}});a.SHA256=c._createHelper(f),a.HmacSHA256=c._createHmacHelper(f)}(Math),t.SHA256)}),Ge(function(e,s){var t,n,a,i,u,c;e.exports=(a=(n=t=Fe).lib.WordArray,i=n.algo,u=i.SHA256,c=i.SHA224=u.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=u._doFinalize.call(this);return l.sigBytes-=4,l}}),n.SHA224=u._createHelper(c),n.HmacSHA224=u._createHmacHelper(c),t.SHA224)}),Ge(function(e,s){var t;e.exports=(t=Fe,function(){var n=t,a=n.lib.Hasher,i=n.x64,u=i.Word,c=i.WordArray,l=n.algo;function r(){return u.create.apply(u,arguments)}var d=[r(1116352408,3609767458),r(1899447441,602891725),r(3049323471,3964484399),r(3921009573,2173295548),r(961987163,4081628472),r(1508970993,3053834265),r(2453635748,2937671579),r(2870763221,3664609560),r(3624381080,2734883394),r(310598401,1164996542),r(607225278,1323610764),r(1426881987,3590304994),r(1925078388,4068182383),r(2162078206,991336113),r(2614888103,633803317),r(3248222580,3479774868),r(3835390401,2666613458),r(4022224774,944711139),r(264347078,2341262773),r(604807628,2007800933),r(770255983,1495990901),r(1249150122,1856431235),r(1555081692,3175218132),r(1996064986,2198950837),r(2554220882,3999719339),r(2821834349,766784016),r(2952996808,2566594879),r(3210313671,3203337956),r(3336571891,1034457026),r(3584528711,2466948901),r(113926993,3758326383),r(338241895,168717936),r(666307205,1188179964),r(773529912,1546045734),r(1294757372,1522805485),r(1396182291,2643833823),r(1695183700,2343527390),r(1986661051,1014477480),r(2177026350,1206759142),r(2456956037,344077627),r(2730485921,1290863460),r(2820302411,3158454273),r(3259730800,3505952657),r(3345764771,106217008),r(3516065817,3606008344),r(3600352804,1432725776),r(4094571909,1467031594),r(275423344,851169720),r(430227734,3100823752),r(506948616,1363258195),r(659060556,3750685593),r(883997877,3785050280),r(958139571,3318307427),r(1322822218,3812723403),r(1537002063,2003034995),r(1747873779,3602036899),r(1955562222,1575990012),r(2024104815,1125592928),r(2227730452,2716904306),r(2361852424,442776044),r(2428436474,593698344),r(2756734187,3733110249),r(3204031479,2999351573),r(3329325298,3815920427),r(3391569614,3928383900),r(3515267271,566280711),r(3940187606,3454069534),r(4118630271,4000239992),r(116418474,1914138554),r(174292421,2731055270),r(289380356,3203993006),r(460393269,320620315),r(685471733,587496836),r(852142971,1086792851),r(1017036298,365543100),r(1126000580,2618297676),r(1288033470,3409855158),r(1501505948,4234509866),r(1607167915,987167468),r(1816402316,1246189591)],p=[];(function(){for(var h=0;h<80;h++)p[h]=r()})();var f=l.SHA512=a.extend({_doReset:function(){this._hash=new c.init([new u.init(1779033703,4089235720),new u.init(3144134277,2227873595),new u.init(1013904242,4271175723),new u.init(2773480762,1595750129),new u.init(1359893119,2917565137),new u.init(2600822924,725511199),new u.init(528734635,4215389547),new u.init(1541459225,327033209)])},_doProcessBlock:function(h,g){for(var _=this._hash.words,m=_[0],y=_[1],I=_[2],S=_[3],C=_[4],R=_[5],k=_[6],x=_[7],M=m.high,G=m.low,E=y.high,O=y.low,U=I.high,N=I.low,W=S.high,J=S.low,le=C.high,ce=C.low,ue=R.high,me=R.low,ke=k.high,B=k.low,$=x.high,L=x.low,Y=M,Ce=G,Ae=E,Le=O,We=U,qe=N,It=W,z=J,q=le,he=ce,ye=ue,Ee=me,xe=ke,Ie=B,te=$,Q=L,ee=0;ee<80;ee++){var Me=p[ee];if(ee<16)var Re=Me.high=0|h[g+2*ee],Qe=Me.low=0|h[g+2*ee+1];else{var rt=p[ee-15],Ke=rt.high,bt=rt.low,cn=(Ke>>>1|bt<<31)^(Ke>>>8|bt<<24)^Ke>>>7,_s=(bt>>>1|Ke<<31)^(bt>>>8|Ke<<24)^(bt>>>7|Ke<<25),Ds=p[ee-2],Lt=Ds.high,Vt=Ds.low,de=(Lt>>>19|Vt<<13)^(Lt<<3|Vt>>>29)^Lt>>>6,be=(Vt>>>19|Lt<<13)^(Vt<<3|Lt>>>29)^(Vt>>>6|Lt<<26),se=p[ee-7],De=se.high,He=se.low,gt=p[ee-16],$t=gt.high,kt=gt.low;Re=(Re=(Re=cn+De+((Qe=_s+He)>>>0<_s>>>0?1:0))+de+((Qe+=be)>>>0<be>>>0?1:0))+$t+((Qe+=kt)>>>0<kt>>>0?1:0),Me.high=Re,Me.low=Qe}var mt,ot=q&ye^~q&xe,vs=he&Ee^~he&Ie,yc=Y&Ae^Y&We^Ae&We,Ic=Ce&Le^Ce&qe^Le&qe,bc=(Y>>>28|Ce<<4)^(Y<<30|Ce>>>2)^(Y<<25|Ce>>>7),Qo=(Ce>>>28|Y<<4)^(Ce<<30|Y>>>2)^(Ce<<25|Y>>>7),Tc=(q>>>14|he<<18)^(q>>>18|he<<14)^(q<<23|he>>>9),Cc=(he>>>14|q<<18)^(he>>>18|q<<14)^(he<<23|q>>>9),ei=d[ee],Sc=ei.high,ti=ei.low,kn=te+Tc+((mt=Q+Cc)>>>0<Q>>>0?1:0),si=Qo+Ic;te=xe,Q=Ie,xe=ye,Ie=Ee,ye=q,Ee=he,q=It+(kn=(kn=(kn=kn+ot+((mt+=vs)>>>0<vs>>>0?1:0))+Sc+((mt+=ti)>>>0<ti>>>0?1:0))+Re+((mt+=Qe)>>>0<Qe>>>0?1:0))+((he=z+mt|0)>>>0<z>>>0?1:0)|0,It=We,z=qe,We=Ae,qe=Le,Ae=Y,Le=Ce,Y=kn+(bc+yc+(si>>>0<Qo>>>0?1:0))+((Ce=mt+si|0)>>>0<mt>>>0?1:0)|0}G=m.low=G+Ce,m.high=M+Y+(G>>>0<Ce>>>0?1:0),O=y.low=O+Le,y.high=E+Ae+(O>>>0<Le>>>0?1:0),N=I.low=N+qe,I.high=U+We+(N>>>0<qe>>>0?1:0),J=S.low=J+z,S.high=W+It+(J>>>0<z>>>0?1:0),ce=C.low=ce+he,C.high=le+q+(ce>>>0<he>>>0?1:0),me=R.low=me+Ee,R.high=ue+ye+(me>>>0<Ee>>>0?1:0),B=k.low=B+Ie,k.high=ke+xe+(B>>>0<Ie>>>0?1:0),L=x.low=L+Q,x.high=$+te+(L>>>0<Q>>>0?1:0)},_doFinalize:function(){var h=this._data,g=h.words,_=8*this._nDataBytes,m=8*h.sigBytes;return g[m>>>5]|=128<<24-m%32,g[30+(m+128>>>10<<5)]=Math.floor(_/4294967296),g[31+(m+128>>>10<<5)]=_,h.sigBytes=4*g.length,this._process(),this._hash.toX32()},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h},blockSize:32});n.SHA512=a._createHelper(f),n.HmacSHA512=a._createHmacHelper(f)}(),t.SHA512)}),Ge(function(e,s){var t,n,a,i,u,c,l,r;e.exports=(a=(n=t=Fe).x64,i=a.Word,u=a.WordArray,c=n.algo,l=c.SHA512,r=c.SHA384=l.extend({_doReset:function(){this._hash=new u.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var d=l._doFinalize.call(this);return d.sigBytes-=16,d}}),n.SHA384=l._createHelper(r),n.HmacSHA384=l._createHmacHelper(r),t.SHA384)}),Ge(function(e,s){var t;e.exports=(t=Fe,function(n){var a=t,i=a.lib,u=i.WordArray,c=i.Hasher,l=a.x64.Word,r=a.algo,d=[],p=[],f=[];(function(){for(var _=1,m=0,y=0;y<24;y++){d[_+5*m]=(y+1)*(y+2)/2%64;var I=(2*_+3*m)%5;_=m%5,m=I}for(_=0;_<5;_++)for(m=0;m<5;m++)p[_+5*m]=m+(2*_+3*m)%5*5;for(var S=1,C=0;C<24;C++){for(var R=0,k=0,x=0;x<7;x++){if(1&S){var M=(1<<x)-1;M<32?k^=1<<M:R^=1<<M-32}128&S?S=S<<1^113:S<<=1}f[C]=l.create(R,k)}})();var h=[];(function(){for(var _=0;_<25;_++)h[_]=l.create()})();var g=r.SHA3=c.extend({cfg:c.cfg.extend({outputLength:512}),_doReset:function(){for(var _=this._state=[],m=0;m<25;m++)_[m]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(_,m){for(var y=this._state,I=this.blockSize/2,S=0;S<I;S++){var C=_[m+2*S],R=_[m+2*S+1];C=16711935&(C<<8|C>>>24)|4278255360&(C<<24|C>>>8),R=16711935&(R<<8|R>>>24)|4278255360&(R<<24|R>>>8),(L=y[S]).high^=R,L.low^=C}for(var k=0;k<24;k++){for(var x=0;x<5;x++){for(var M=0,G=0,E=0;E<5;E++)M^=(L=y[x+5*E]).high,G^=L.low;var O=h[x];O.high=M,O.low=G}for(x=0;x<5;x++){var U=h[(x+4)%5],N=h[(x+1)%5],W=N.high,J=N.low;for(M=U.high^(W<<1|J>>>31),G=U.low^(J<<1|W>>>31),E=0;E<5;E++)(L=y[x+5*E]).high^=M,L.low^=G}for(var le=1;le<25;le++){var ce=(L=y[le]).high,ue=L.low,me=d[le];me<32?(M=ce<<me|ue>>>32-me,G=ue<<me|ce>>>32-me):(M=ue<<me-32|ce>>>64-me,G=ce<<me-32|ue>>>64-me);var ke=h[p[le]];ke.high=M,ke.low=G}var B=h[0],$=y[0];for(B.high=$.high,B.low=$.low,x=0;x<5;x++)for(E=0;E<5;E++){var L=y[le=x+5*E],Y=h[le],Ce=h[(x+1)%5+5*E],Ae=h[(x+2)%5+5*E];L.high=Y.high^~Ce.high&Ae.high,L.low=Y.low^~Ce.low&Ae.low}L=y[0];var Le=f[k];L.high^=Le.high,L.low^=Le.low}},_doFinalize:function(){var _=this._data,m=_.words,y=(this._nDataBytes,8*_.sigBytes),I=32*this.blockSize;m[y>>>5]|=1<<24-y%32,m[(n.ceil((y+1)/I)*I>>>5)-1]|=128,_.sigBytes=4*m.length,this._process();for(var S=this._state,C=this.cfg.outputLength/8,R=C/8,k=[],x=0;x<R;x++){var M=S[x],G=M.high,E=M.low;G=16711935&(G<<8|G>>>24)|4278255360&(G<<24|G>>>8),E=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8),k.push(E),k.push(G)}return new u.init(k,C)},clone:function(){for(var _=c.clone.call(this),m=_._state=this._state.slice(0),y=0;y<25;y++)m[y]=m[y].clone();return _}});a.SHA3=c._createHelper(g),a.HmacSHA3=c._createHmacHelper(g)}(Math),t.SHA3)}),Ge(function(e,s){var t;e.exports=(t=Fe,function(n){var a=t,i=a.lib,u=i.WordArray,c=i.Hasher,l=a.algo,r=u.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),d=u.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),p=u.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=u.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=u.create([0,1518500249,1859775393,2400959708,2840853838]),g=u.create([1352829926,1548603684,1836072691,2053994217,0]),_=l.RIPEMD160=c.extend({_doReset:function(){this._hash=u.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(k,x){for(var M=0;M<16;M++){var G=x+M,E=k[G];k[G]=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8)}var O,U,N,W,J,le,ce,ue,me,ke,B,$=this._hash.words,L=h.words,Y=g.words,Ce=r.words,Ae=d.words,Le=p.words,We=f.words;for(le=O=$[0],ce=U=$[1],ue=N=$[2],me=W=$[3],ke=J=$[4],M=0;M<80;M+=1)B=O+k[x+Ce[M]]|0,B+=M<16?m(U,N,W)+L[0]:M<32?y(U,N,W)+L[1]:M<48?I(U,N,W)+L[2]:M<64?S(U,N,W)+L[3]:C(U,N,W)+L[4],B=(B=R(B|=0,Le[M]))+J|0,O=J,J=W,W=R(N,10),N=U,U=B,B=le+k[x+Ae[M]]|0,B+=M<16?C(ce,ue,me)+Y[0]:M<32?S(ce,ue,me)+Y[1]:M<48?I(ce,ue,me)+Y[2]:M<64?y(ce,ue,me)+Y[3]:m(ce,ue,me)+Y[4],B=(B=R(B|=0,We[M]))+ke|0,le=ke,ke=me,me=R(ue,10),ue=ce,ce=B;B=$[1]+N+me|0,$[1]=$[2]+W+ke|0,$[2]=$[3]+J+le|0,$[3]=$[4]+O+ce|0,$[4]=$[0]+U+ue|0,$[0]=B},_doFinalize:function(){var k=this._data,x=k.words,M=8*this._nDataBytes,G=8*k.sigBytes;x[G>>>5]|=128<<24-G%32,x[14+(G+64>>>9<<4)]=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8),k.sigBytes=4*(x.length+1),this._process();for(var E=this._hash,O=E.words,U=0;U<5;U++){var N=O[U];O[U]=16711935&(N<<8|N>>>24)|4278255360&(N<<24|N>>>8)}return E},clone:function(){var k=c.clone.call(this);return k._hash=this._hash.clone(),k}});function m(k,x,M){return k^x^M}function y(k,x,M){return k&x|~k&M}function I(k,x,M){return(k|~x)^M}function S(k,x,M){return k&M|x&~M}function C(k,x,M){return k^(x|~M)}function R(k,x){return k<<x|k>>>32-x}a.RIPEMD160=c._createHelper(_),a.HmacRIPEMD160=c._createHmacHelper(_)}(),t.RIPEMD160)}),Ge(function(e,s){var t,n,a,i,u,c;e.exports=(n=(t=Fe).lib,a=n.Base,i=t.enc,u=i.Utf8,c=t.algo,void(c.HMAC=a.extend({init:function(l,r){l=this._hasher=new l.init,typeof r=="string"&&(r=u.parse(r));var d=l.blockSize,p=4*d;r.sigBytes>p&&(r=l.finalize(r)),r.clamp();for(var f=this._oKey=r.clone(),h=this._iKey=r.clone(),g=f.words,_=h.words,m=0;m<d;m++)g[m]^=1549556828,_[m]^=909522486;f.sigBytes=h.sigBytes=p,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var r=this._hasher,d=r.finalize(l);r.reset();var p=r.finalize(this._oKey.clone().concat(d));return p}})))}),Ge(function(e,s){var t,n,a,i,u,c,l,r,d;e.exports=(a=(n=t=Fe).lib,i=a.Base,u=a.WordArray,c=n.algo,l=c.SHA1,r=c.HMAC,d=c.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:l,iterations:1}),init:function(p){this.cfg=this.cfg.extend(p)},compute:function(p,f){for(var h=this.cfg,g=r.create(h.hasher,p),_=u.create(),m=u.create([1]),y=_.words,I=m.words,S=h.keySize,C=h.iterations;y.length<S;){var R=g.update(f).finalize(m);g.reset();for(var k=R.words,x=k.length,M=R,G=1;G<C;G++){M=g.finalize(M),g.reset();for(var E=M.words,O=0;O<x;O++)k[O]^=E[O]}_.concat(R),I[0]++}return _.sigBytes=4*S,_}}),n.PBKDF2=function(p,f,h){return d.create(h).compute(p,f)},t.PBKDF2)}),Ge(function(e,s){var t,n,a,i,u,c,l,r;e.exports=(a=(n=t=Fe).lib,i=a.Base,u=a.WordArray,c=n.algo,l=c.MD5,r=c.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:l,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,p){for(var f=this.cfg,h=f.hasher.create(),g=u.create(),_=g.words,m=f.keySize,y=f.iterations;_.length<m;){I&&h.update(I);var I=h.update(d).finalize(p);h.reset();for(var S=1;S<y;S++)I=h.finalize(I),h.reset();g.concat(I)}return g.sigBytes=4*m,g}}),n.EvpKDF=function(d,p,f){return r.create(f).compute(d,p)},t.EvpKDF)}),Ge(function(e,s){var t,n,a,i,u,c,l,r,d,p,f,h,g,_,m,y,I,S,C,R,k,x,M,G;e.exports=void((t=Fe).lib.Cipher||(a=t,i=a.lib,u=i.Base,c=i.WordArray,l=i.BufferedBlockAlgorithm,r=a.enc,r.Utf8,d=r.Base64,p=a.algo,f=p.EvpKDF,h=i.Cipher=l.extend({cfg:u.extend(),createEncryptor:function(E,O){return this.create(this._ENC_XFORM_MODE,E,O)},createDecryptor:function(E,O){return this.create(this._DEC_XFORM_MODE,E,O)},init:function(E,O,U){this.cfg=this.cfg.extend(U),this._xformMode=E,this._key=O,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(E){return this._append(E),this._process()},finalize:function(E){E&&this._append(E);var O=this._doFinalize();return O},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function E(O){return typeof O=="string"?G:k}return function(O){return{encrypt:function(U,N,W){return E(N).encrypt(O,U,N,W)},decrypt:function(U,N,W){return E(N).decrypt(O,U,N,W)}}}}()}),i.StreamCipher=h.extend({_doFinalize:function(){var E=this._process(!0);return E},blockSize:1}),g=a.mode={},_=i.BlockCipherMode=u.extend({createEncryptor:function(E,O){return this.Encryptor.create(E,O)},createDecryptor:function(E,O){return this.Decryptor.create(E,O)},init:function(E,O){this._cipher=E,this._iv=O}}),m=g.CBC=function(){var E=_.extend();function O(U,N,W){var J=this._iv;if(J){var le=J;this._iv=n}else var le=this._prevBlock;for(var ce=0;ce<W;ce++)U[N+ce]^=le[ce]}return E.Encryptor=E.extend({processBlock:function(U,N){var W=this._cipher,J=W.blockSize;O.call(this,U,N,J),W.encryptBlock(U,N),this._prevBlock=U.slice(N,N+J)}}),E.Decryptor=E.extend({processBlock:function(U,N){var W=this._cipher,J=W.blockSize,le=U.slice(N,N+J);W.decryptBlock(U,N),O.call(this,U,N,J),this._prevBlock=le}}),E}(),y=a.pad={},I=y.Pkcs7={pad:function(E,O){for(var U=4*O,N=U-E.sigBytes%U,W=N<<24|N<<16|N<<8|N,J=[],le=0;le<N;le+=4)J.push(W);var ce=c.create(J,N);E.concat(ce)},unpad:function(E){var O=255&E.words[E.sigBytes-1>>>2];E.sigBytes-=O}},i.BlockCipher=h.extend({cfg:h.cfg.extend({mode:m,padding:I}),reset:function(){h.reset.call(this);var E=this.cfg,O=E.iv,U=E.mode;if(this._xformMode==this._ENC_XFORM_MODE)var N=U.createEncryptor;else{var N=U.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==N?this._mode.init(this,O&&O.words):(this._mode=N.call(U,this,O&&O.words),this._mode.__creator=N)},_doProcessBlock:function(E,O){this._mode.processBlock(E,O)},_doFinalize:function(){var E=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){E.pad(this._data,this.blockSize);var O=this._process(!0)}else{var O=this._process(!0);E.unpad(O)}return O},blockSize:4}),S=i.CipherParams=u.extend({init:function(E){this.mixIn(E)},toString:function(E){return(E||this.formatter).stringify(this)}}),C=a.format={},R=C.OpenSSL={stringify:function(E){var O=E.ciphertext,U=E.salt;if(U)var N=c.create([1398893684,1701076831]).concat(U).concat(O);else var N=O;return N.toString(d)},parse:function(E){var O=d.parse(E),U=O.words;if(U[0]==1398893684&&U[1]==1701076831){var N=c.create(U.slice(2,4));U.splice(0,4),O.sigBytes-=16}return S.create({ciphertext:O,salt:N})}},k=i.SerializableCipher=u.extend({cfg:u.extend({format:R}),encrypt:function(E,O,U,N){N=this.cfg.extend(N);var W=E.createEncryptor(U,N),J=W.finalize(O),le=W.cfg;return S.create({ciphertext:J,key:U,iv:le.iv,algorithm:E,mode:le.mode,padding:le.padding,blockSize:E.blockSize,formatter:N.format})},decrypt:function(E,O,U,N){N=this.cfg.extend(N),O=this._parse(O,N.format);var W=E.createDecryptor(U,N).finalize(O.ciphertext);return W},_parse:function(E,O){return typeof E=="string"?O.parse(E,this):E}}),x=a.kdf={},M=x.OpenSSL={execute:function(E,O,U,N){N||(N=c.random(8));var W=f.create({keySize:O+U}).compute(E,N),J=c.create(W.words.slice(O),4*U);return W.sigBytes=4*O,S.create({key:W,iv:J,salt:N})}},G=i.PasswordBasedCipher=k.extend({cfg:k.cfg.extend({kdf:M}),encrypt:function(E,O,U,N){var W=(N=this.cfg.extend(N)).kdf.execute(U,E.keySize,E.ivSize);N.iv=W.iv;var J=k.encrypt.call(this,E,O,W.key,N);return J.mixIn(W),J},decrypt:function(E,O,U,N){N=this.cfg.extend(N),O=this._parse(O,N.format);var W=N.kdf.execute(U,E.keySize,E.ivSize,O.salt);N.iv=W.iv;var J=k.decrypt.call(this,E,O,W.key,N);return J}})))}),Ge(function(e,s){var t;e.exports=((t=Fe).mode.CFB=function(){var n=t.lib.BlockCipherMode.extend();function a(i,u,c,l){var r=this._iv;if(r){var d=r.slice(0);this._iv=void 0}else d=this._prevBlock;l.encryptBlock(d,0);for(var p=0;p<c;p++)i[u+p]^=d[p]}return n.Encryptor=n.extend({processBlock:function(i,u){var c=this._cipher,l=c.blockSize;a.call(this,i,u,l,c),this._prevBlock=i.slice(u,u+l)}}),n.Decryptor=n.extend({processBlock:function(i,u){var c=this._cipher,l=c.blockSize,r=i.slice(u,u+l);a.call(this,i,u,l,c),this._prevBlock=r}}),n}(),t.mode.CFB)}),Ge(function(e,s){var t,n,a;e.exports=((t=Fe).mode.CTR=(n=t.lib.BlockCipherMode.extend(),a=n.Encryptor=n.extend({processBlock:function(i,u){var c=this._cipher,l=c.blockSize,r=this._iv,d=this._counter;r&&(d=this._counter=r.slice(0),this._iv=void 0);var p=d.slice(0);c.encryptBlock(p,0),d[l-1]=d[l-1]+1|0;for(var f=0;f<l;f++)i[u+f]^=p[f]}}),n.Decryptor=a,n),t.mode.CTR)}),Ge(function(e,s){var t;e.exports=((t=Fe).mode.CTRGladman=function(){var n=t.lib.BlockCipherMode.extend();function a(u){if((u>>24&255)==255){var c=u>>16&255,l=u>>8&255,r=255&u;c===255?(c=0,l===255?(l=0,r===255?r=0:++r):++l):++c,u=0,u+=c<<16,u+=l<<8,u+=r}else u+=1<<24;return u}var i=n.Encryptor=n.extend({processBlock:function(u,c){var l=this._cipher,r=l.blockSize,d=this._iv,p=this._counter;d&&(p=this._counter=d.slice(0),this._iv=void 0),function(g){(g[0]=a(g[0]))===0&&(g[1]=a(g[1]))}(p);var f=p.slice(0);l.encryptBlock(f,0);for(var h=0;h<r;h++)u[c+h]^=f[h]}});return n.Decryptor=i,n}(),t.mode.CTRGladman)}),Ge(function(e,s){var t,n,a;e.exports=((t=Fe).mode.OFB=(n=t.lib.BlockCipherMode.extend(),a=n.Encryptor=n.extend({processBlock:function(i,u){var c=this._cipher,l=c.blockSize,r=this._iv,d=this._keystream;r&&(d=this._keystream=r.slice(0),this._iv=void 0),c.encryptBlock(d,0);for(var p=0;p<l;p++)i[u+p]^=d[p]}}),n.Decryptor=a,n),t.mode.OFB)}),Ge(function(e,s){var t,n;e.exports=((t=Fe).mode.ECB=((n=t.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(a,i){this._cipher.encryptBlock(a,i)}}),n.Decryptor=n.extend({processBlock:function(a,i){this._cipher.decryptBlock(a,i)}}),n),t.mode.ECB)}),Ge(function(e,s){var t;e.exports=((t=Fe).pad.AnsiX923={pad:function(n,a){var i=n.sigBytes,u=4*a,c=u-i%u,l=i+c-1;n.clamp(),n.words[l>>>2]|=c<<24-l%4*8,n.sigBytes+=c},unpad:function(n){var a=255&n.words[n.sigBytes-1>>>2];n.sigBytes-=a}},t.pad.Ansix923)}),Ge(function(e,s){var t;e.exports=((t=Fe).pad.Iso10126={pad:function(n,a){var i=4*a,u=i-n.sigBytes%i;n.concat(t.lib.WordArray.random(u-1)).concat(t.lib.WordArray.create([u<<24],1))},unpad:function(n){var a=255&n.words[n.sigBytes-1>>>2];n.sigBytes-=a}},t.pad.Iso10126)}),Ge(function(e,s){var t;e.exports=((t=Fe).pad.Iso97971={pad:function(n,a){n.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(n,a)},unpad:function(n){t.pad.ZeroPadding.unpad(n),n.sigBytes--}},t.pad.Iso97971)}),Ge(function(e,s){var t;e.exports=((t=Fe).pad.ZeroPadding={pad:function(n,a){var i=4*a;n.clamp(),n.sigBytes+=i-(n.sigBytes%i||i)},unpad:function(n){for(var a=n.words,i=n.sigBytes-1;!(a[i>>>2]>>>24-i%4*8&255);)i--;n.sigBytes=i+1}},t.pad.ZeroPadding)}),Ge(function(e,s){var t;e.exports=((t=Fe).pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding)}),Ge(function(e,s){var t,n,a,i;e.exports=(a=(n=t=Fe).lib.CipherParams,i=n.enc.Hex,n.format.Hex={stringify:function(u){return u.ciphertext.toString(i)},parse:function(u){var c=i.parse(u);return a.create({ciphertext:c})}},t.format.Hex)}),Ge(function(e,s){var t;e.exports=(t=Fe,function(){var n=t,a=n.lib.BlockCipher,i=n.algo,u=[],c=[],l=[],r=[],d=[],p=[],f=[],h=[],g=[],_=[];(function(){for(var I=[],S=0;S<256;S++)I[S]=S<128?S<<1:S<<1^283;var C=0,R=0;for(S=0;S<256;S++){var k=R^R<<1^R<<2^R<<3^R<<4;k=k>>>8^255&k^99,u[C]=k,c[k]=C;var x=I[C],M=I[x],G=I[M],E=257*I[k]^16843008*k;l[C]=E<<24|E>>>8,r[C]=E<<16|E>>>16,d[C]=E<<8|E>>>24,p[C]=E,E=16843009*G^65537*M^257*x^16843008*C,f[k]=E<<24|E>>>8,h[k]=E<<16|E>>>16,g[k]=E<<8|E>>>24,_[k]=E,C?(C=x^I[I[I[G^x]]],R^=I[I[R]]):C=R=1}})();var m=[0,1,2,4,8,16,32,64,128,27,54],y=i.AES=a.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var I=this._keyPriorReset=this._key,S=I.words,C=I.sigBytes/4,R=4*((this._nRounds=C+6)+1),k=this._keySchedule=[],x=0;x<R;x++)if(x<C)k[x]=S[x];else{var M=k[x-1];x%C?C>6&&x%C==4&&(M=u[M>>>24]<<24|u[M>>>16&255]<<16|u[M>>>8&255]<<8|u[255&M]):(M=u[(M=M<<8|M>>>24)>>>24]<<24|u[M>>>16&255]<<16|u[M>>>8&255]<<8|u[255&M],M^=m[x/C|0]<<24),k[x]=k[x-C]^M}for(var G=this._invKeySchedule=[],E=0;E<R;E++)x=R-E,M=E%4?k[x]:k[x-4],G[E]=E<4||x<=4?M:f[u[M>>>24]]^h[u[M>>>16&255]]^g[u[M>>>8&255]]^_[u[255&M]]}},encryptBlock:function(I,S){this._doCryptBlock(I,S,this._keySchedule,l,r,d,p,u)},decryptBlock:function(I,S){var C=I[S+1];I[S+1]=I[S+3],I[S+3]=C,this._doCryptBlock(I,S,this._invKeySchedule,f,h,g,_,c),C=I[S+1],I[S+1]=I[S+3],I[S+3]=C},_doCryptBlock:function(I,S,C,R,k,x,M,G){for(var E=this._nRounds,O=I[S]^C[0],U=I[S+1]^C[1],N=I[S+2]^C[2],W=I[S+3]^C[3],J=4,le=1;le<E;le++){var ce=R[O>>>24]^k[U>>>16&255]^x[N>>>8&255]^M[255&W]^C[J++],ue=R[U>>>24]^k[N>>>16&255]^x[W>>>8&255]^M[255&O]^C[J++],me=R[N>>>24]^k[W>>>16&255]^x[O>>>8&255]^M[255&U]^C[J++],ke=R[W>>>24]^k[O>>>16&255]^x[U>>>8&255]^M[255&N]^C[J++];O=ce,U=ue,N=me,W=ke}ce=(G[O>>>24]<<24|G[U>>>16&255]<<16|G[N>>>8&255]<<8|G[255&W])^C[J++],ue=(G[U>>>24]<<24|G[N>>>16&255]<<16|G[W>>>8&255]<<8|G[255&O])^C[J++],me=(G[N>>>24]<<24|G[W>>>16&255]<<16|G[O>>>8&255]<<8|G[255&U])^C[J++],ke=(G[W>>>24]<<24|G[O>>>16&255]<<16|G[U>>>8&255]<<8|G[255&N])^C[J++],I[S]=ce,I[S+1]=ue,I[S+2]=me,I[S+3]=ke},keySize:8});n.AES=a._createHelper(y)}(),t.AES)}),Ge(function(e,s){var t;e.exports=(t=Fe,function(){var n=t,a=n.lib,i=a.WordArray,u=a.BlockCipher,c=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],r=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],d=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],p=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=c.DES=u.extend({_doReset:function(){for(var y=this._key.words,I=[],S=0;S<56;S++){var C=l[S]-1;I[S]=y[C>>>5]>>>31-C%32&1}for(var R=this._subKeys=[],k=0;k<16;k++){var x=R[k]=[],M=d[k];for(S=0;S<24;S++)x[S/6|0]|=I[(r[S]-1+M)%28]<<31-S%6,x[4+(S/6|0)]|=I[28+(r[S+24]-1+M)%28]<<31-S%6;for(x[0]=x[0]<<1|x[0]>>>31,S=1;S<7;S++)x[S]=x[S]>>>4*(S-1)+3;x[7]=x[7]<<5|x[7]>>>27}var G=this._invSubKeys=[];for(S=0;S<16;S++)G[S]=R[15-S]},encryptBlock:function(y,I){this._doCryptBlock(y,I,this._subKeys)},decryptBlock:function(y,I){this._doCryptBlock(y,I,this._invSubKeys)},_doCryptBlock:function(y,I,S){this._lBlock=y[I],this._rBlock=y[I+1],g.call(this,4,252645135),g.call(this,16,65535),_.call(this,2,858993459),_.call(this,8,16711935),g.call(this,1,1431655765);for(var C=0;C<16;C++){for(var R=S[C],k=this._lBlock,x=this._rBlock,M=0,G=0;G<8;G++)M|=p[G][((x^R[G])&f[G])>>>0];this._lBlock=x,this._rBlock=k^M}var E=this._lBlock;this._lBlock=this._rBlock,this._rBlock=E,g.call(this,1,1431655765),_.call(this,8,16711935),_.call(this,2,858993459),g.call(this,16,65535),g.call(this,4,252645135),y[I]=this._lBlock,y[I+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function g(y,I){var S=(this._lBlock>>>y^this._rBlock)&I;this._rBlock^=S,this._lBlock^=S<<y}function _(y,I){var S=(this._rBlock>>>y^this._lBlock)&I;this._lBlock^=S,this._rBlock^=S<<y}n.DES=u._createHelper(h);var m=c.TripleDES=u.extend({_doReset:function(){var y=this._key.words;this._des1=h.createEncryptor(i.create(y.slice(0,2))),this._des2=h.createEncryptor(i.create(y.slice(2,4))),this._des3=h.createEncryptor(i.create(y.slice(4,6)))},encryptBlock:function(y,I){this._des1.encryptBlock(y,I),this._des2.decryptBlock(y,I),this._des3.encryptBlock(y,I)},decryptBlock:function(y,I){this._des3.decryptBlock(y,I),this._des2.encryptBlock(y,I),this._des1.decryptBlock(y,I)},keySize:6,ivSize:2,blockSize:2});n.TripleDES=u._createHelper(m)}(),t.TripleDES)}),Ge(function(e,s){var t;e.exports=(t=Fe,function(){var n=t,a=n.lib.StreamCipher,i=n.algo,u=i.RC4=a.extend({_doReset:function(){for(var r=this._key,d=r.words,p=r.sigBytes,f=this._S=[],h=0;h<256;h++)f[h]=h;h=0;for(var g=0;h<256;h++){var _=h%p,m=d[_>>>2]>>>24-_%4*8&255;g=(g+f[h]+m)%256;var y=f[h];f[h]=f[g],f[g]=y}this._i=this._j=0},_doProcessBlock:function(r,d){r[d]^=c.call(this)},keySize:8,ivSize:0});function c(){for(var r=this._S,d=this._i,p=this._j,f=0,h=0;h<4;h++){p=(p+r[d=(d+1)%256])%256;var g=r[d];r[d]=r[p],r[p]=g,f|=r[(r[d]+r[p])%256]<<24-8*h}return this._i=d,this._j=p,f}n.RC4=a._createHelper(u);var l=i.RC4Drop=u.extend({cfg:u.cfg.extend({drop:192}),_doReset:function(){u._doReset.call(this);for(var r=this.cfg.drop;r>0;r--)c.call(this)}});n.RC4Drop=a._createHelper(l)}(),t.RC4)}),Ge(function(e,s){var t;e.exports=(t=Fe,function(){var n=t,a=n.lib.StreamCipher,i=n.algo,u=[],c=[],l=[],r=i.Rabbit=a.extend({_doReset:function(){for(var p=this._key.words,f=this.cfg.iv,h=0;h<4;h++)p[h]=16711935&(p[h]<<8|p[h]>>>24)|4278255360&(p[h]<<24|p[h]>>>8);var g=this._X=[p[0],p[3]<<16|p[2]>>>16,p[1],p[0]<<16|p[3]>>>16,p[2],p[1]<<16|p[0]>>>16,p[3],p[2]<<16|p[1]>>>16],_=this._C=[p[2]<<16|p[2]>>>16,4294901760&p[0]|65535&p[1],p[3]<<16|p[3]>>>16,4294901760&p[1]|65535&p[2],p[0]<<16|p[0]>>>16,4294901760&p[2]|65535&p[3],p[1]<<16|p[1]>>>16,4294901760&p[3]|65535&p[0]];for(this._b=0,h=0;h<4;h++)d.call(this);for(h=0;h<8;h++)_[h]^=g[h+4&7];if(f){var m=f.words,y=m[0],I=m[1],S=16711935&(y<<8|y>>>24)|4278255360&(y<<24|y>>>8),C=16711935&(I<<8|I>>>24)|4278255360&(I<<24|I>>>8),R=S>>>16|4294901760&C,k=C<<16|65535&S;for(_[0]^=S,_[1]^=R,_[2]^=C,_[3]^=k,_[4]^=S,_[5]^=R,_[6]^=C,_[7]^=k,h=0;h<4;h++)d.call(this)}},_doProcessBlock:function(p,f){var h=this._X;d.call(this),u[0]=h[0]^h[5]>>>16^h[3]<<16,u[1]=h[2]^h[7]>>>16^h[5]<<16,u[2]=h[4]^h[1]>>>16^h[7]<<16,u[3]=h[6]^h[3]>>>16^h[1]<<16;for(var g=0;g<4;g++)u[g]=16711935&(u[g]<<8|u[g]>>>24)|4278255360&(u[g]<<24|u[g]>>>8),p[f+g]^=u[g]},blockSize:4,ivSize:2});function d(){for(var p=this._X,f=this._C,h=0;h<8;h++)c[h]=f[h];for(f[0]=f[0]+1295307597+this._b|0,f[1]=f[1]+3545052371+(f[0]>>>0<c[0]>>>0?1:0)|0,f[2]=f[2]+886263092+(f[1]>>>0<c[1]>>>0?1:0)|0,f[3]=f[3]+1295307597+(f[2]>>>0<c[2]>>>0?1:0)|0,f[4]=f[4]+3545052371+(f[3]>>>0<c[3]>>>0?1:0)|0,f[5]=f[5]+886263092+(f[4]>>>0<c[4]>>>0?1:0)|0,f[6]=f[6]+1295307597+(f[5]>>>0<c[5]>>>0?1:0)|0,f[7]=f[7]+3545052371+(f[6]>>>0<c[6]>>>0?1:0)|0,this._b=f[7]>>>0<c[7]>>>0?1:0,h=0;h<8;h++){var g=p[h]+f[h],_=65535&g,m=g>>>16,y=((_*_>>>17)+_*m>>>15)+m*m,I=((4294901760&g)*g|0)+((65535&g)*g|0);l[h]=y^I}p[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,p[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,p[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,p[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,p[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,p[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,p[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,p[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}n.Rabbit=a._createHelper(r)}(),t.Rabbit)}),Ge(function(e,s){var t;e.exports=(t=Fe,function(){var n=t,a=n.lib.StreamCipher,i=n.algo,u=[],c=[],l=[],r=i.RabbitLegacy=a.extend({_doReset:function(){var p=this._key.words,f=this.cfg.iv,h=this._X=[p[0],p[3]<<16|p[2]>>>16,p[1],p[0]<<16|p[3]>>>16,p[2],p[1]<<16|p[0]>>>16,p[3],p[2]<<16|p[1]>>>16],g=this._C=[p[2]<<16|p[2]>>>16,4294901760&p[0]|65535&p[1],p[3]<<16|p[3]>>>16,4294901760&p[1]|65535&p[2],p[0]<<16|p[0]>>>16,4294901760&p[2]|65535&p[3],p[1]<<16|p[1]>>>16,4294901760&p[3]|65535&p[0]];this._b=0;for(var _=0;_<4;_++)d.call(this);for(_=0;_<8;_++)g[_]^=h[_+4&7];if(f){var m=f.words,y=m[0],I=m[1],S=16711935&(y<<8|y>>>24)|4278255360&(y<<24|y>>>8),C=16711935&(I<<8|I>>>24)|4278255360&(I<<24|I>>>8),R=S>>>16|4294901760&C,k=C<<16|65535&S;for(g[0]^=S,g[1]^=R,g[2]^=C,g[3]^=k,g[4]^=S,g[5]^=R,g[6]^=C,g[7]^=k,_=0;_<4;_++)d.call(this)}},_doProcessBlock:function(p,f){var h=this._X;d.call(this),u[0]=h[0]^h[5]>>>16^h[3]<<16,u[1]=h[2]^h[7]>>>16^h[5]<<16,u[2]=h[4]^h[1]>>>16^h[7]<<16,u[3]=h[6]^h[3]>>>16^h[1]<<16;for(var g=0;g<4;g++)u[g]=16711935&(u[g]<<8|u[g]>>>24)|4278255360&(u[g]<<24|u[g]>>>8),p[f+g]^=u[g]},blockSize:4,ivSize:2});function d(){for(var p=this._X,f=this._C,h=0;h<8;h++)c[h]=f[h];for(f[0]=f[0]+1295307597+this._b|0,f[1]=f[1]+3545052371+(f[0]>>>0<c[0]>>>0?1:0)|0,f[2]=f[2]+886263092+(f[1]>>>0<c[1]>>>0?1:0)|0,f[3]=f[3]+1295307597+(f[2]>>>0<c[2]>>>0?1:0)|0,f[4]=f[4]+3545052371+(f[3]>>>0<c[3]>>>0?1:0)|0,f[5]=f[5]+886263092+(f[4]>>>0<c[4]>>>0?1:0)|0,f[6]=f[6]+1295307597+(f[5]>>>0<c[5]>>>0?1:0)|0,f[7]=f[7]+3545052371+(f[6]>>>0<c[6]>>>0?1:0)|0,this._b=f[7]>>>0<c[7]>>>0?1:0,h=0;h<8;h++){var g=p[h]+f[h],_=65535&g,m=g>>>16,y=((_*_>>>17)+_*m>>>15)+m*m,I=((4294901760&g)*g|0)+((65535&g)*g|0);l[h]=y^I}p[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,p[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,p[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,p[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,p[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,p[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,p[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,p[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}n.RabbitLegacy=a._createHelper(r)}(),t.RabbitLegacy)}),Ge(function(e,s){e.exports=Fe});function hl(){throw new Error("setTimeout has not been defined")}function pl(){throw new Error("clearTimeout has not been defined")}var ms=hl,ys=pl;function fl(e){if(ms===setTimeout)return setTimeout(e,0);if((ms===hl||!ms)&&setTimeout)return ms=setTimeout,setTimeout(e,0);try{return ms(e,0)}catch{try{return ms.call(null,e,0)}catch{return ms.call(this,e,0)}}}typeof bn.setTimeout=="function"&&(ms=setTimeout),typeof bn.clearTimeout=="function"&&(ys=clearTimeout);var Vs,ps=[],_n=!1,da=-1;function pu(){_n&&Vs&&(_n=!1,Vs.length?ps=Vs.concat(ps):da=-1,ps.length&&gl())}function gl(){if(!_n){var e=fl(pu);_n=!0;for(var s=ps.length;s;){for(Vs=ps,ps=[];++da<s;)Vs&&Vs[da].run();da=-1,s=ps.length}Vs=null,_n=!1,function(t){if(ys===clearTimeout)return clearTimeout(t);if((ys===pl||!ys)&&clearTimeout)return ys=clearTimeout,clearTimeout(t);try{ys(t)}catch{try{return ys.call(null,t)}catch{return ys.call(this,t)}}}(e)}}function _t(e){var s=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)s[t-1]=arguments[t];ps.push(new _l(e,s)),ps.length!==1||_n||fl(gl)}function _l(e,s){this.fun=e,this.array=s}_l.prototype.run=function(){this.fun.apply(null,this.array)};var En=bn.performance||{};En.now||En.mozNow||En.msNow||En.oNow||En.webkitNow;function Is(){}function Be(){Be.init.call(this)}function vl(e){return e._maxListeners===void 0?Be.defaultMaxListeners:e._maxListeners}function fu(e,s,t){if(s)e.call(t);else for(var n=e.length,a=Wn(e,n),i=0;i<n;++i)a[i].call(t)}function gu(e,s,t,n){if(s)e.call(t,n);else for(var a=e.length,i=Wn(e,a),u=0;u<a;++u)i[u].call(t,n)}function _u(e,s,t,n,a){if(s)e.call(t,n,a);else for(var i=e.length,u=Wn(e,i),c=0;c<i;++c)u[c].call(t,n,a)}function vu(e,s,t,n,a,i){if(s)e.call(t,n,a,i);else for(var u=e.length,c=Wn(e,u),l=0;l<u;++l)c[l].call(t,n,a,i)}function mu(e,s,t,n){if(s)e.apply(t,n);else for(var a=e.length,i=Wn(e,a),u=0;u<a;++u)i[u].apply(t,n)}function hi(e,s,t,n){var a,i,u,c;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",s,t.listener?t.listener:t),i=e._events),u=i[s]):(i=e._events=new Is,e._eventsCount=0),u){if(typeof u=="function"?u=i[s]=n?[t,u]:[u,t]:n?u.unshift(t):u.push(t),!u.warned&&(a=vl(e))&&a>0&&u.length>a){u.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+s+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=s,l.count=u.length,c=l,typeof console.warn=="function"?console.warn(c):console.log(c)}}else u=i[s]=t,++e._eventsCount;return e}function pi(e,s,t){var n=!1;function a(){e.removeListener(s,a),n||(n=!0,t.apply(e,arguments))}return a.listener=t,a}function fi(e){var s=this._events;if(s){var t=s[e];if(typeof t=="function")return 1;if(t)return t.length}return 0}function Wn(e,s){for(var t=new Array(s);s--;)t[s]=e[s];return t}Is.prototype=Object.create(null),Be.EventEmitter=Be,Be.usingDomains=!1,Be.prototype.domain=void 0,Be.prototype._events=void 0,Be.prototype._maxListeners=void 0,Be.defaultMaxListeners=10,Be.init=function(){this.domain=null,Be.usingDomains&&(void 0).active&&(void 0).Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Is,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Be.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},Be.prototype.getMaxListeners=function(){return vl(this)},Be.prototype.emit=function(e){var s,t,n,a,i,u,c,l=e==="error";if(u=this._events)l=l&&u.error==null;else if(!l)return!1;if(c=this.domain,l){if(s=arguments[1],!c){if(s instanceof Error)throw s;var r=new Error('Uncaught, unspecified "error" event. ('+s+")");throw r.context=s,r}return s||(s=new Error('Uncaught, unspecified "error" event')),s.domainEmitter=this,s.domain=c,s.domainThrown=!1,c.emit("error",s),!1}if(!(t=u[e]))return!1;var d=typeof t=="function";switch(n=arguments.length){case 1:fu(t,d,this);break;case 2:gu(t,d,this,arguments[1]);break;case 3:_u(t,d,this,arguments[1],arguments[2]);break;case 4:vu(t,d,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=new Array(n-1),i=1;i<n;i++)a[i-1]=arguments[i];mu(t,d,this,a)}return!0},Be.prototype.addListener=function(e,s){return hi(this,e,s,!1)},Be.prototype.on=Be.prototype.addListener,Be.prototype.prependListener=function(e,s){return hi(this,e,s,!0)},Be.prototype.once=function(e,s){if(typeof s!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,pi(this,e,s)),this},Be.prototype.prependOnceListener=function(e,s){if(typeof s!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,pi(this,e,s)),this},Be.prototype.removeListener=function(e,s){var t,n,a,i,u;if(typeof s!="function")throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(t=n[e]))return this;if(t===s||t.listener&&t.listener===s)--this._eventsCount==0?this._events=new Is:(delete n[e],n.removeListener&&this.emit("removeListener",e,t.listener||s));else if(typeof t!="function"){for(a=-1,i=t.length;i-- >0;)if(t[i]===s||t[i].listener&&t[i].listener===s){u=t[i].listener,a=i;break}if(a<0)return this;if(t.length===1){if(t[0]=void 0,--this._eventsCount==0)return this._events=new Is,this;delete n[e]}else(function(c,l){for(var r=l,d=r+1,p=c.length;d<p;r+=1,d+=1)c[r]=c[d];c.pop()})(t,a);n.removeListener&&this.emit("removeListener",e,u||s)}return this},Be.prototype.removeAllListeners=function(e){var s,t;if(!(t=this._events))return this;if(!t.removeListener)return arguments.length===0?(this._events=new Is,this._eventsCount=0):t[e]&&(--this._eventsCount==0?this._events=new Is:delete t[e]),this;if(arguments.length===0){for(var n,a=Object.keys(t),i=0;i<a.length;++i)(n=a[i])!=="removeListener"&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new Is,this._eventsCount=0,this}if(typeof(s=t[e])=="function")this.removeListener(e,s);else if(s)do this.removeListener(e,s[s.length-1]);while(s[0]);return this},Be.prototype.listeners=function(e){var s,t=this._events;return t&&(s=t[e])?typeof s=="function"?[s.listener||s]:function(n){for(var a=new Array(n.length),i=0;i<a.length;++i)a[i]=n[i].listener||n[i];return a}(s):[]},Be.listenerCount=function(e,s){return typeof e.listenerCount=="function"?e.listenerCount(s):fi.call(e,s)},Be.prototype.listenerCount=fi,Be.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Ct=typeof Object.create=="function"?function(e,s){e.super_=s,e.prototype=Object.create(s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,s){e.super_=s;var t=function(){};t.prototype=s.prototype,e.prototype=new t,e.prototype.constructor=e},yu=/%[sdj%]/g;function Iu(e){if(!go(e)){for(var s=[],t=0;t<arguments.length;t++)s.push(Ms(arguments[t]));return s.join(" ")}t=1;for(var n=arguments,a=n.length,i=String(e).replace(yu,function(c){if(c==="%%")return"%";if(t>=a)return c;switch(c){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch{return"[Circular]"}default:return c}}),u=n[t];t<a;u=n[++t])Fo(u)||!Kn(u)?i+=" "+u:i+=" "+Ms(u);return i}function ml(e,s){if(ws(bn.process))return function(){return ml(e,s).apply(this,arguments)};var t=!1;return function(){return t||(console.error(s),t=!0),e.apply(this,arguments)}}var Pa,ta={};function Ms(e,s){var t={seen:[],stylize:Tu};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),yl(s)?t.showHidden=s:s&&function(n,a){if(!a||!Kn(a))return n;for(var i=Object.keys(a),u=i.length;u--;)n[i[u]]=a[i[u]]}(t,s),ws(t.showHidden)&&(t.showHidden=!1),ws(t.depth)&&(t.depth=2),ws(t.colors)&&(t.colors=!1),ws(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=bu),ya(t,e,t.depth)}function bu(e,s){var t=Ms.styles[s];return t?"\x1B["+Ms.colors[t][0]+"m"+e+"\x1B["+Ms.colors[t][1]+"m":e}function Tu(e,s){return e}function ya(e,s,t){if(e.customInspect&&s&&Ga(s.inspect)&&s.inspect!==Ms&&(!s.constructor||s.constructor.prototype!==s)){var n=s.inspect(t,e);return go(n)||(n=ya(e,n,t)),n}var a=function(h,g){if(ws(g))return h.stylize("undefined","undefined");if(go(g)){var _="'"+JSON.stringify(g).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return h.stylize(_,"string")}if(m=g,typeof m=="number")return h.stylize(""+g,"number");var m;if(yl(g))return h.stylize(""+g,"boolean");if(Fo(g))return h.stylize("null","null")}(e,s);if(a)return a;var i=Object.keys(s),u=function(h){var g={};return h.forEach(function(_,m){g[_]=!0}),g}(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(s)),Na(s)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return Oa(s);if(i.length===0){if(Ga(s)){var c=s.name?": "+s.name:"";return e.stylize("[Function"+c+"]","special")}if($a(s))return e.stylize(RegExp.prototype.toString.call(s),"regexp");if(gi(s))return e.stylize(Date.prototype.toString.call(s),"date");if(Na(s))return Oa(s)}var l,r,d="",p=!1,f=["{","}"];return l=s,Array.isArray(l)&&(p=!0,f=["[","]"]),Ga(s)&&(d=" [Function"+(s.name?": "+s.name:"")+"]"),$a(s)&&(d=" "+RegExp.prototype.toString.call(s)),gi(s)&&(d=" "+Date.prototype.toUTCString.call(s)),Na(s)&&(d=" "+Oa(s)),i.length!==0||p&&s.length!=0?t<0?$a(s)?e.stylize(RegExp.prototype.toString.call(s),"regexp"):e.stylize("[Object]","special"):(e.seen.push(s),r=p?function(h,g,_,m,y){for(var I=[],S=0,C=g.length;S<C;++S)Il(g,String(S))?I.push(La(h,g,_,m,String(S),!0)):I.push("");return y.forEach(function(R){R.match(/^\d+$/)||I.push(La(h,g,_,m,R,!0))}),I}(e,s,t,u,i):i.map(function(h){return La(e,s,t,u,h,p)}),e.seen.pop(),function(h,g,_){return h.reduce(function(m,y){return y.indexOf(`
`),m+y.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?_[0]+(g===""?"":g+`
 `)+" "+h.join(`,
  `)+" "+_[1]:_[0]+g+" "+h.join(", ")+" "+_[1]}(r,d,f)):f[0]+d+f[1]}function Oa(e){return"["+Error.prototype.toString.call(e)+"]"}function La(e,s,t,n,a,i){var u,c,l;if((l=Object.getOwnPropertyDescriptor(s,a)||{value:s[a]}).get?c=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(c=e.stylize("[Setter]","special")),Il(n,a)||(u="["+a+"]"),c||(e.seen.indexOf(l.value)<0?(c=Fo(t)?ya(e,l.value,null):ya(e,l.value,t-1)).indexOf(`
`)>-1&&(c=i?c.split(`
`).map(function(r){return"  "+r}).join(`
`).substr(2):`
`+c.split(`
`).map(function(r){return"   "+r}).join(`
`)):c=e.stylize("[Circular]","special")),ws(u)){if(i&&a.match(/^\d+$/))return c;(u=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=e.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=e.stylize(u,"string"))}return u+": "+c}function yl(e){return typeof e=="boolean"}function Fo(e){return e===null}function go(e){return typeof e=="string"}function ws(e){return e===void 0}function $a(e){return Kn(e)&&jo(e)==="[object RegExp]"}function Kn(e){return typeof e=="object"&&e!==null}function gi(e){return Kn(e)&&jo(e)==="[object Date]"}function Na(e){return Kn(e)&&(jo(e)==="[object Error]"||e instanceof Error)}function Ga(e){return typeof e=="function"}function jo(e){return Object.prototype.toString.call(e)}function Il(e,s){return Object.prototype.hasOwnProperty.call(e,s)}function Os(){this.head=null,this.tail=null,this.length=0}Ms.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Ms.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},Os.prototype.push=function(e){var s={data:e,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length},Os.prototype.unshift=function(e){var s={data:e,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length},Os.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},Os.prototype.clear=function(){this.head=this.tail=null,this.length=0},Os.prototype.join=function(e){if(this.length===0)return"";for(var s=this.head,t=""+s.data;s=s.next;)t+=e+s.data;return t},Os.prototype.concat=function(e){if(this.length===0)return X.alloc(0);if(this.length===1)return this.head.data;for(var s=X.allocUnsafe(e>>>0),t=this.head,n=0;t;)t.data.copy(s,n),n+=t.data.length,t=t.next;return s};var Cu=X.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Dn(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(s){if(s&&!Cu(s))throw new Error("Unknown encoding: "+s)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=wu;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=ku;break;default:return void(this.write=Su)}this.charBuffer=new X(6),this.charReceived=0,this.charLength=0}function Su(e){return e.toString(this.encoding)}function wu(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function ku(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}Dn.prototype.write=function(e){for(var s="";this.charLength;){var t=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,t),this.charReceived+=t,this.charReceived<this.charLength)return"";if(e=e.slice(t,e.length),!((a=(s=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(s.length-1))>=55296&&a<=56319)){if(this.charReceived=this.charLength=0,e.length===0)return s;break}this.charLength+=this.surrogateSize,s=""}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived);var a;if(n=(s+=e.toString(this.encoding,0,n)).length-1,(a=s.charCodeAt(n))>=55296&&a<=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),e.copy(this.charBuffer,0,0,i),s.substring(0,n)}return s},Dn.prototype.detectIncompleteChar=function(e){for(var s=e.length>=3?3:e.length;s>0;s--){var t=e[e.length-s];if(s==1&&t>>5==6){this.charLength=2;break}if(s<=2&&t>>4==14){this.charLength=3;break}if(s<=3&&t>>3==30){this.charLength=4;break}}this.charReceived=s},Dn.prototype.end=function(e){var s="";if(e&&e.length&&(s=this.write(e)),this.charReceived){var t=this.charReceived,n=this.charBuffer,a=this.encoding;s+=n.slice(0,t).toString(a)}return s},ct.ReadableState=bl;var Ve=function(e){return ws(Pa)&&(Pa=""),e=e.toUpperCase(),ta[e]||(new RegExp("\\b"+e+"\\b","i").test(Pa)?ta[e]=function(){var s=Iu.apply(null,arguments);console.error("%s %d: %s",e,0,s)}:ta[e]=function(){}),ta[e]}("stream");function bl(e,s){e=e||{},this.objectMode=!!e.objectMode,s instanceof Pt&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var t=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=t||t===0?t:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new Os,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new Dn(e.encoding),this.encoding=e.encoding)}function ct(e){if(!(this instanceof ct))return new ct(e);this._readableState=new bl(e,this),this.readable=!0,e&&typeof e.read=="function"&&(this._read=e.read),Be.call(this)}function _i(e,s,t,n,a){var i=function(r,d){var p=null;return xa(d)||typeof d=="string"||d==null||r.objectMode||(p=new TypeError("Invalid non-string/buffer chunk")),p}(s,t);if(i)e.emit("error",i);else if(t===null)s.reading=!1,function(r,d){if(!d.ended){if(d.decoder){var p=d.decoder.end();p&&p.length&&(d.buffer.push(p),d.length+=d.objectMode?1:p.length)}d.ended=!0,Ia(r)}}(e,s);else if(s.objectMode||t&&t.length>0)if(s.ended&&!a){var u=new Error("stream.push() after EOF");e.emit("error",u)}else if(s.endEmitted&&a){var c=new Error("stream.unshift() after end event");e.emit("error",c)}else{var l;!s.decoder||a||n||(t=s.decoder.write(t),l=!s.objectMode&&t.length===0),a||(s.reading=!1),l||(s.flowing&&s.length===0&&!s.sync?(e.emit("data",t),e.read(0)):(s.length+=s.objectMode?1:t.length,a?s.buffer.unshift(t):s.buffer.push(t),s.needReadable&&Ia(e))),function(r,d){d.readingMore||(d.readingMore=!0,_t(Eu,r,d))}(e,s)}else a||(s.reading=!1);return function(r){return!r.ended&&(r.needReadable||r.length<r.highWaterMark||r.length===0)}(s)}Ct(ct,Be),ct.prototype.push=function(e,s){var t=this._readableState;return t.objectMode||typeof e!="string"||(s=s||t.defaultEncoding)!==t.encoding&&(e=X.from(e,s),s=""),_i(this,t,e,s,!1)},ct.prototype.unshift=function(e){return _i(this,this._readableState,e,"",!0)},ct.prototype.isPaused=function(){return this._readableState.flowing===!1},ct.prototype.setEncoding=function(e){return this._readableState.decoder=new Dn(e),this._readableState.encoding=e,this};var vi=8388608;function mi(e,s){return e<=0||s.length===0&&s.ended?0:s.objectMode?1:e!=e?s.flowing&&s.length?s.buffer.head.data.length:s.length:(e>s.highWaterMark&&(s.highWaterMark=function(t){return t>=vi?t=vi:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(e)),e<=s.length?e:s.ended?s.length:(s.needReadable=!0,0))}function Ia(e){var s=e._readableState;s.needReadable=!1,s.emittedReadable||(Ve("emitReadable",s.flowing),s.emittedReadable=!0,s.sync?_t(yi,e):yi(e))}function yi(e){Ve("emit readable"),e.emit("readable"),Yo(e)}function Eu(e,s){for(var t=s.length;!s.reading&&!s.flowing&&!s.ended&&s.length<s.highWaterMark&&(Ve("maybeReadMore read 0"),e.read(0),t!==s.length);)t=s.length;s.readingMore=!1}function Mu(e){Ve("readable nexttick read 0"),e.read(0)}function xu(e,s){s.reading||(Ve("resume read 0"),e.read(0)),s.resumeScheduled=!1,s.awaitDrain=0,e.emit("resume"),Yo(e),s.flowing&&!s.reading&&e.read(0)}function Yo(e){var s=e._readableState;for(Ve("flow",s.flowing);s.flowing&&e.read()!==null;);}function Ii(e,s){return s.length===0?null:(s.objectMode?t=s.buffer.shift():!e||e>=s.length?(t=s.decoder?s.buffer.join(""):s.buffer.length===1?s.buffer.head.data:s.buffer.concat(s.length),s.buffer.clear()):t=function(n,a,i){var u;return n<a.head.data.length?(u=a.head.data.slice(0,n),a.head.data=a.head.data.slice(n)):u=n===a.head.data.length?a.shift():i?function(c,l){var r=l.head,d=1,p=r.data;for(c-=p.length;r=r.next;){var f=r.data,h=c>f.length?f.length:c;if(h===f.length?p+=f:p+=f.slice(0,c),(c-=h)===0){h===f.length?(++d,r.next?l.head=r.next:l.head=l.tail=null):(l.head=r,r.data=f.slice(h));break}++d}return l.length-=d,p}(n,a):function(c,l){var r=X.allocUnsafe(c),d=l.head,p=1;for(d.data.copy(r),c-=d.data.length;d=d.next;){var f=d.data,h=c>f.length?f.length:c;if(f.copy(r,r.length-c,0,h),(c-=h)===0){h===f.length?(++p,d.next?l.head=d.next:l.head=l.tail=null):(l.head=d,d.data=f.slice(h));break}++p}return l.length-=p,r}(n,a),u}(e,s.buffer,s.decoder),t);var t}function Ba(e){var s=e._readableState;if(s.length>0)throw new Error('"endReadable()" called on non-empty stream');s.endEmitted||(s.ended=!0,_t(Uu,s,e))}function Uu(e,s){e.endEmitted||e.length!==0||(e.endEmitted=!0,s.readable=!1,s.emit("end"))}function bi(e,s){for(var t=0,n=e.length;t<n;t++)if(e[t]===s)return t;return-1}function Au(){}function Ru(e,s,t){this.chunk=e,this.encoding=s,this.callback=t,this.next=null}function _o(e,s){Object.defineProperty(this,"buffer",{get:ml(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,s instanceof Pt&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var t=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=t||t===0?t:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=e.decodeStrings===!1;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){(function(u,c){var l=u._writableState,r=l.sync,d=l.writecb;if(function(f){f.writing=!1,f.writecb=null,f.length-=f.writelen,f.writelen=0}(l),c)(function(f,h,g,_,m){--h.pendingcb,g?_t(m,_):m(_),f._writableState.errorEmitted=!0,f.emit("error",_)})(u,l,r,c,d);else{var p=Cl(l);p||l.corked||l.bufferProcessing||!l.bufferedRequest||Tl(u,l),r?_t(Ti,u,l,p,d):Ti(u,l,p,d)}})(s,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new wl(this)}function yt(e){if(!(this instanceof yt||this instanceof Pt))return new yt(e);this._writableState=new _o(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev)),Be.call(this)}function vo(e,s,t,n,a,i,u){s.writelen=n,s.writecb=u,s.writing=!0,s.sync=!0,t?e._writev(a,s.onwrite):e._write(a,i,s.onwrite),s.sync=!1}function Ti(e,s,t,n){t||function(a,i){i.length===0&&i.needDrain&&(i.needDrain=!1,a.emit("drain"))}(e,s),s.pendingcb--,n(),Sl(e,s)}function Tl(e,s){s.bufferProcessing=!0;var t=s.bufferedRequest;if(e._writev&&t&&t.next){var n=s.bufferedRequestCount,a=new Array(n),i=s.corkedRequestsFree;i.entry=t;for(var u=0;t;)a[u]=t,t=t.next,u+=1;vo(e,s,!0,s.length,a,"",i.finish),s.pendingcb++,s.lastBufferedRequest=null,i.next?(s.corkedRequestsFree=i.next,i.next=null):s.corkedRequestsFree=new wl(s)}else{for(;t;){var c=t.chunk,l=t.encoding,r=t.callback;if(vo(e,s,!1,s.objectMode?1:c.length,c,l,r),t=t.next,s.writing)break}t===null&&(s.lastBufferedRequest=null)}s.bufferedRequestCount=0,s.bufferedRequest=t,s.bufferProcessing=!1}function Cl(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Ci(e,s){s.prefinished||(s.prefinished=!0,e.emit("prefinish"))}function Sl(e,s){var t=Cl(s);return t&&(s.pendingcb===0?(Ci(e,s),s.finished=!0,e.emit("finish")):Ci(e,s)),t}function wl(e){var s=this;this.next=null,this.entry=null,this.finish=function(t){var n=s.entry;for(s.entry=null;n;){var a=n.callback;e.pendingcb--,a(t),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=s:e.corkedRequestsFree=s}}ct.prototype.read=function(e){Ve("read",e),e=parseInt(e,10);var s=this._readableState,t=e;if(e!==0&&(s.emittedReadable=!1),e===0&&s.needReadable&&(s.length>=s.highWaterMark||s.ended))return Ve("read: emitReadable",s.length,s.ended),s.length===0&&s.ended?Ba(this):Ia(this),null;if((e=mi(e,s))===0&&s.ended)return s.length===0&&Ba(this),null;var n,a=s.needReadable;return Ve("need readable",a),(s.length===0||s.length-e<s.highWaterMark)&&Ve("length less than watermark",a=!0),s.ended||s.reading?Ve("reading or ended",a=!1):a&&(Ve("do read"),s.reading=!0,s.sync=!0,s.length===0&&(s.needReadable=!0),this._read(s.highWaterMark),s.sync=!1,s.reading||(e=mi(t,s))),(n=e>0?Ii(e,s):null)===null?(s.needReadable=!0,e=0):s.length-=e,s.length===0&&(s.ended||(s.needReadable=!0),t!==e&&s.ended&&Ba(this)),n!==null&&this.emit("data",n),n},ct.prototype._read=function(e){this.emit("error",new Error("not implemented"))},ct.prototype.pipe=function(e,s){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,Ve("pipe count=%d opts=%j",n.pipesCount,s);var a=!s||s.end!==!1?u:r;function i(m){Ve("onunpipe"),m===t&&r()}function u(){Ve("onend"),e.end()}n.endEmitted?_t(a):t.once("end",a),e.on("unpipe",i);var c=function(m){return function(){var y=m._readableState;Ve("pipeOnDrain",y.awaitDrain),y.awaitDrain&&y.awaitDrain--,y.awaitDrain===0&&m.listeners("data").length&&(y.flowing=!0,Yo(m))}}(t);e.on("drain",c);var l=!1;function r(){Ve("cleanup"),e.removeListener("close",h),e.removeListener("finish",g),e.removeListener("drain",c),e.removeListener("error",f),e.removeListener("unpipe",i),t.removeListener("end",u),t.removeListener("end",r),t.removeListener("data",p),l=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||c()}var d=!1;function p(m){Ve("ondata"),d=!1,e.write(m)!==!1||d||((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&bi(n.pipes,e)!==-1)&&!l&&(Ve("false write response, pause",t._readableState.awaitDrain),t._readableState.awaitDrain++,d=!0),t.pause())}function f(m){var y;Ve("onerror",m),_(),e.removeListener("error",f),y="error",e.listeners(y).length===0&&e.emit("error",m)}function h(){e.removeListener("finish",g),_()}function g(){Ve("onfinish"),e.removeListener("close",h),_()}function _(){Ve("unpipe"),t.unpipe(e)}return t.on("data",p),function(m,y,I){if(typeof m.prependListener=="function")return m.prependListener(y,I);m._events&&m._events[y]?Array.isArray(m._events[y])?m._events[y].unshift(I):m._events[y]=[I,m._events[y]]:m.on(y,I)}(e,"error",f),e.once("close",h),e.once("finish",g),e.emit("pipe",t),n.flowing||(Ve("pipe resume"),t.resume()),e},ct.prototype.unpipe=function(e){var s=this._readableState;if(s.pipesCount===0)return this;if(s.pipesCount===1)return e&&e!==s.pipes?this:(e||(e=s.pipes),s.pipes=null,s.pipesCount=0,s.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var t=s.pipes,n=s.pipesCount;s.pipes=null,s.pipesCount=0,s.flowing=!1;for(var a=0;a<n;a++)t[a].emit("unpipe",this);return this}var i=bi(s.pipes,e);return i===-1?this:(s.pipes.splice(i,1),s.pipesCount-=1,s.pipesCount===1&&(s.pipes=s.pipes[0]),e.emit("unpipe",this),this)},ct.prototype.on=function(e,s){var t=Be.prototype.on.call(this,e,s);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&Ia(this):_t(Mu,this))}return t},ct.prototype.addListener=ct.prototype.on,ct.prototype.resume=function(){var e=this._readableState;return e.flowing||(Ve("resume"),e.flowing=!0,function(s,t){t.resumeScheduled||(t.resumeScheduled=!0,_t(xu,s,t))}(this,e)),this},ct.prototype.pause=function(){return Ve("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ve("pause"),this._readableState.flowing=!1,this.emit("pause")),this},ct.prototype.wrap=function(e){var s=this._readableState,t=!1,n=this;for(var a in e.on("end",function(){if(Ve("wrapped end"),s.decoder&&!s.ended){var i=s.decoder.end();i&&i.length&&n.push(i)}n.push(null)}),e.on("data",function(i){Ve("wrapped data"),s.decoder&&(i=s.decoder.write(i)),s.objectMode&&i==null||(s.objectMode||i&&i.length)&&(n.push(i)||(t=!0,e.pause()))}),e)this[a]===void 0&&typeof e[a]=="function"&&(this[a]=function(i){return function(){return e[i].apply(e,arguments)}}(a));return function(i,u){for(var c=0,l=i.length;c<l;c++)u(i[c],c)}(["error","close","destroy","pause","resume"],function(i){e.on(i,n.emit.bind(n,i))}),n._read=function(i){Ve("wrapped _read",i),t&&(t=!1,e.resume())},n},ct._fromList=Ii,yt.WritableState=_o,Ct(yt,Be),_o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,s=[];e;)s.push(e),e=e.next;return s},yt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},yt.prototype.write=function(e,s,t){var n=this._writableState,a=!1;return typeof s=="function"&&(t=s,s=null),X.isBuffer(e)?s="buffer":s||(s=n.defaultEncoding),typeof t!="function"&&(t=Au),n.ended?function(i,u){var c=new Error("write after end");i.emit("error",c),_t(u,c)}(this,t):function(i,u,c,l){var r=!0,d=!1;return c===null?d=new TypeError("May not write null values to stream"):X.isBuffer(c)||typeof c=="string"||c===void 0||u.objectMode||(d=new TypeError("Invalid non-string/buffer chunk")),d&&(i.emit("error",d),_t(l,d),r=!1),r}(this,n,e,t)&&(n.pendingcb++,a=function(i,u,c,l,r){c=function(h,g,_){return h.objectMode||h.decodeStrings===!1||typeof g!="string"||(g=X.from(g,_)),g}(u,c,l),X.isBuffer(c)&&(l="buffer");var d=u.objectMode?1:c.length;u.length+=d;var p=u.length<u.highWaterMark;if(p||(u.needDrain=!0),u.writing||u.corked){var f=u.lastBufferedRequest;u.lastBufferedRequest=new Ru(c,l,r),f?f.next=u.lastBufferedRequest:u.bufferedRequest=u.lastBufferedRequest,u.bufferedRequestCount+=1}else vo(i,u,!1,d,c,l,r);return p}(this,n,e,s,t)),a},yt.prototype.cork=function(){this._writableState.corked++},yt.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||Tl(this,e))},yt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},yt.prototype._write=function(e,s,t){t(new Error("not implemented"))},yt.prototype._writev=null,yt.prototype.end=function(e,s,t){var n=this._writableState;typeof e=="function"?(t=e,e=null,s=null):typeof s=="function"&&(t=s,s=null),e!=null&&this.write(e,s),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(a,i,u){i.ending=!0,Sl(a,i),u&&(i.finished?_t(u):a.once("finish",u)),i.ended=!0,a.writable=!1}(this,n,t)},Ct(Pt,ct);for(var Si=Object.keys(yt.prototype),Ha=0;Ha<Si.length;Ha++){var Fa=Si[Ha];Pt.prototype[Fa]||(Pt.prototype[Fa]=yt.prototype[Fa])}function Pt(e){if(!(this instanceof Pt))return new Pt(e);ct.call(this,e),yt.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Du)}function Du(){this.allowHalfOpen||this._writableState.ended||_t(Pu,this)}function Pu(e){e.end()}function Ou(e){this.afterTransform=function(s,t){return function(n,a,i){var u=n._transformState;u.transforming=!1;var c=u.writecb;if(!c)return n.emit("error",new Error("no writecb in Transform class"));u.writechunk=null,u.writecb=null,i!=null&&n.push(i),c(a);var l=n._readableState;l.reading=!1,(l.needReadable||l.length<l.highWaterMark)&&n._read(l.highWaterMark)}(e,s,t)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function At(e){if(!(this instanceof At))return new At(e);Pt.call(this,e),this._transformState=new Ou(this);var s=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(t){wi(s,t)}):wi(s)})}function wi(e,s){if(s)return e.emit("error",s);var t=e._writableState,n=e._transformState;if(t.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function Pn(e){if(!(this instanceof Pn))return new Pn(e);At.call(this,e)}function is(){Be.call(this)}Ct(At,Pt),At.prototype.push=function(e,s){return this._transformState.needTransform=!1,Pt.prototype.push.call(this,e,s)},At.prototype._transform=function(e,s,t){throw new Error("Not implemented")},At.prototype._write=function(e,s,t){var n=this._transformState;if(n.writecb=t,n.writechunk=e,n.writeencoding=s,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},At.prototype._read=function(e){var s=this._transformState;s.writechunk!==null&&s.writecb&&!s.transforming?(s.transforming=!0,this._transform(s.writechunk,s.writeencoding,s.afterTransform)):s.needTransform=!0},Ct(Pn,At),Pn.prototype._transform=function(e,s,t){t(null,e)},Ct(is,Be),is.Readable=ct,is.Writable=yt,is.Duplex=Pt,is.Transform=At,is.PassThrough=Pn,is.Stream=is,is.prototype.pipe=function(e,s){var t=this;function n(d){e.writable&&e.write(d)===!1&&t.pause&&t.pause()}function a(){t.readable&&t.resume&&t.resume()}t.on("data",n),e.on("drain",a),e._isStdio||s&&s.end===!1||(t.on("end",u),t.on("close",c));var i=!1;function u(){i||(i=!0,e.end())}function c(){i||(i=!0,typeof e.destroy=="function"&&e.destroy())}function l(d){if(r(),Be.listenerCount(this,"error")===0)throw d}function r(){t.removeListener("data",n),e.removeListener("drain",a),t.removeListener("end",u),t.removeListener("close",c),t.removeListener("error",l),e.removeListener("error",l),t.removeListener("end",r),t.removeListener("close",r),e.removeListener("close",r)}return t.on("error",l),e.on("error",l),t.on("end",r),t.on("close",r),e.on("close",r),e.emit("pipe",t),e};var kl={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function Lu(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function us(e,s,t,n,a){if(s.subarray&&e.subarray)e.set(s.subarray(t,t+n),a);else for(var i=0;i<n;i++)e[a+i]=s[t+i]}var ba=Uint8Array,Rt=Uint16Array,Ta=Int32Array,$u=4,ki=0,Ei=1,Nu=2;function Sn(e){for(var s=e.length;--s>=0;)e[s]=0}var Gu=0,El=1,Bu=2,zo=29,Zn=256,Bn=Zn+1+zo,vn=30,Vo=19,Mi=2*Bn+1,Ws=15,ja=16,Hu=7,Wo=256,Ml=16,xl=17,Ul=18,mo=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ha=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Fu=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],xi=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ls=new Array(2*(Bn+2));Sn(ls);var On=new Array(2*vn);Sn(On);var Hn=new Array(512);Sn(Hn);var Fn=new Array(256);Sn(Fn);var Ko=new Array(zo);Sn(Ko);var Ui,Ai,Ri,Ca=new Array(vn);function Ya(e,s,t,n,a){this.static_tree=e,this.extra_bits=s,this.extra_base=t,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}function za(e,s){this.dyn_tree=e,this.max_code=0,this.stat_desc=s}function Al(e){return e<256?Hn[e]:Hn[256+(e>>>7)]}function jn(e,s){e.pending_buf[e.pending++]=255&s,e.pending_buf[e.pending++]=s>>>8&255}function St(e,s,t){e.bi_valid>ja-t?(e.bi_buf|=s<<e.bi_valid&65535,jn(e,e.bi_buf),e.bi_buf=s>>ja-e.bi_valid,e.bi_valid+=t-ja):(e.bi_buf|=s<<e.bi_valid&65535,e.bi_valid+=t)}function ts(e,s,t){St(e,t[2*s],t[2*s+1])}function Rl(e,s){var t=0;do t|=1&e,e>>>=1,t<<=1;while(--s>0);return t>>>1}function Dl(e,s,t){var n,a,i=new Array(Ws+1),u=0;for(n=1;n<=Ws;n++)i[n]=u=u+t[n-1]<<1;for(a=0;a<=s;a++){var c=e[2*a+1];c!==0&&(e[2*a]=Rl(i[c]++,c))}}function Pl(e){var s;for(s=0;s<Bn;s++)e.dyn_ltree[2*s]=0;for(s=0;s<vn;s++)e.dyn_dtree[2*s]=0;for(s=0;s<Vo;s++)e.bl_tree[2*s]=0;e.dyn_ltree[2*Wo]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Ol(e){e.bi_valid>8?jn(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Di(e,s,t,n){var a=2*s,i=2*t;return e[a]<e[i]||e[a]===e[i]&&n[s]<=n[t]}function Va(e,s,t){for(var n=e.heap[t],a=t<<1;a<=e.heap_len&&(a<e.heap_len&&Di(s,e.heap[a+1],e.heap[a],e.depth)&&a++,!Di(s,n,e.heap[a],e.depth));)e.heap[t]=e.heap[a],t=a,a<<=1;e.heap[t]=n}function Pi(e,s,t){var n,a,i,u,c=0;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],a=e.pending_buf[e.l_buf+c],c++,n===0?ts(e,a,s):(ts(e,(i=Fn[a])+Zn+1,s),(u=mo[i])!==0&&St(e,a-=Ko[i],u),ts(e,i=Al(--n),t),(u=ha[i])!==0&&St(e,n-=Ca[i],u));while(c<e.last_lit);ts(e,Wo,s)}function Wa(e,s){var t,n,a,i=s.dyn_tree,u=s.stat_desc.static_tree,c=s.stat_desc.has_stree,l=s.stat_desc.elems,r=-1;for(e.heap_len=0,e.heap_max=Mi,t=0;t<l;t++)i[2*t]!==0?(e.heap[++e.heap_len]=r=t,e.depth[t]=0):i[2*t+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=r<2?++r:0)]=1,e.depth[a]=0,e.opt_len--,c&&(e.static_len-=u[2*a+1]);for(s.max_code=r,t=e.heap_len>>1;t>=1;t--)Va(e,i,t);a=l;do t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Va(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=n,i[2*a]=i[2*t]+i[2*n],e.depth[a]=(e.depth[t]>=e.depth[n]?e.depth[t]:e.depth[n])+1,i[2*t+1]=i[2*n+1]=a,e.heap[1]=a++,Va(e,i,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(d,p){var f,h,g,_,m,y,I=p.dyn_tree,S=p.max_code,C=p.stat_desc.static_tree,R=p.stat_desc.has_stree,k=p.stat_desc.extra_bits,x=p.stat_desc.extra_base,M=p.stat_desc.max_length,G=0;for(_=0;_<=Ws;_++)d.bl_count[_]=0;for(I[2*d.heap[d.heap_max]+1]=0,f=d.heap_max+1;f<Mi;f++)(_=I[2*I[2*(h=d.heap[f])+1]+1]+1)>M&&(_=M,G++),I[2*h+1]=_,h>S||(d.bl_count[_]++,m=0,h>=x&&(m=k[h-x]),y=I[2*h],d.opt_len+=y*(_+m),R&&(d.static_len+=y*(C[2*h+1]+m)));if(G!==0){do{for(_=M-1;d.bl_count[_]===0;)_--;d.bl_count[_]--,d.bl_count[_+1]+=2,d.bl_count[M]--,G-=2}while(G>0);for(_=M;_!==0;_--)for(h=d.bl_count[_];h!==0;)(g=d.heap[--f])>S||(I[2*g+1]!==_&&(d.opt_len+=(_-I[2*g+1])*I[2*g],I[2*g+1]=_),h--)}}(e,s),Dl(i,r,e.bl_count)}function Oi(e,s,t){var n,a,i=-1,u=s[1],c=0,l=7,r=4;for(u===0&&(l=138,r=3),s[2*(t+1)+1]=65535,n=0;n<=t;n++)a=u,u=s[2*(n+1)+1],++c<l&&a===u||(c<r?e.bl_tree[2*a]+=c:a!==0?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[2*Ml]++):c<=10?e.bl_tree[2*xl]++:e.bl_tree[2*Ul]++,c=0,i=a,u===0?(l=138,r=3):a===u?(l=6,r=3):(l=7,r=4))}function Li(e,s,t){var n,a,i=-1,u=s[1],c=0,l=7,r=4;for(u===0&&(l=138,r=3),n=0;n<=t;n++)if(a=u,u=s[2*(n+1)+1],!(++c<l&&a===u)){if(c<r)do ts(e,a,e.bl_tree);while(--c!=0);else a!==0?(a!==i&&(ts(e,a,e.bl_tree),c--),ts(e,Ml,e.bl_tree),St(e,c-3,2)):c<=10?(ts(e,xl,e.bl_tree),St(e,c-3,3)):(ts(e,Ul,e.bl_tree),St(e,c-11,7));c=0,i=a,u===0?(l=138,r=3):a===u?(l=6,r=3):(l=7,r=4)}}Sn(Ca);var $i=!1;function ju(e){$i||(function(){var s,t,n,a,i,u=new Array(Ws+1);for(n=0,a=0;a<zo-1;a++)for(Ko[a]=n,s=0;s<1<<mo[a];s++)Fn[n++]=a;for(Fn[n-1]=a,i=0,a=0;a<16;a++)for(Ca[a]=i,s=0;s<1<<ha[a];s++)Hn[i++]=a;for(i>>=7;a<vn;a++)for(Ca[a]=i<<7,s=0;s<1<<ha[a]-7;s++)Hn[256+i++]=a;for(t=0;t<=Ws;t++)u[t]=0;for(s=0;s<=143;)ls[2*s+1]=8,s++,u[8]++;for(;s<=255;)ls[2*s+1]=9,s++,u[9]++;for(;s<=279;)ls[2*s+1]=7,s++,u[7]++;for(;s<=287;)ls[2*s+1]=8,s++,u[8]++;for(Dl(ls,Bn+1,u),s=0;s<vn;s++)On[2*s+1]=5,On[2*s]=Rl(s,5);Ui=new Ya(ls,mo,Zn+1,Bn,Ws),Ai=new Ya(On,ha,0,vn,Ws),Ri=new Ya(new Array(0),Fu,0,Vo,Hu)}(),$i=!0),e.l_desc=new za(e.dyn_ltree,Ui),e.d_desc=new za(e.dyn_dtree,Ai),e.bl_desc=new za(e.bl_tree,Ri),e.bi_buf=0,e.bi_valid=0,Pl(e)}function Ll(e,s,t,n){St(e,(Gu<<1)+(n?1:0),3),function(a,i,u,c){Ol(a),c&&(jn(a,u),jn(a,~u)),us(a.pending_buf,a.window,i,u,a.pending),a.pending+=u}(e,s,t,!0)}function Yu(e){St(e,El<<1,3),ts(e,Wo,ls),function(s){s.bi_valid===16?(jn(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):s.bi_valid>=8&&(s.pending_buf[s.pending++]=255&s.bi_buf,s.bi_buf>>=8,s.bi_valid-=8)}(e)}function zu(e,s,t,n){var a,i,u=0;e.level>0?(e.strm.data_type===Nu&&(e.strm.data_type=function(c){var l,r=4093624447;for(l=0;l<=31;l++,r>>>=1)if(1&r&&c.dyn_ltree[2*l]!==0)return ki;if(c.dyn_ltree[18]!==0||c.dyn_ltree[20]!==0||c.dyn_ltree[26]!==0)return Ei;for(l=32;l<Zn;l++)if(c.dyn_ltree[2*l]!==0)return Ei;return ki}(e)),Wa(e,e.l_desc),Wa(e,e.d_desc),u=function(c){var l;for(Oi(c,c.dyn_ltree,c.l_desc.max_code),Oi(c,c.dyn_dtree,c.d_desc.max_code),Wa(c,c.bl_desc),l=Vo-1;l>=3&&c.bl_tree[2*xi[l]+1]===0;l--);return c.opt_len+=3*(l+1)+5+5+4,l}(e),a=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=a&&(a=i)):a=i=t+5,t+4<=a&&s!==-1?Ll(e,s,t,n):e.strategy===$u||i===a?(St(e,(El<<1)+(n?1:0),3),Pi(e,ls,On)):(St(e,(Bu<<1)+(n?1:0),3),function(c,l,r,d){var p;for(St(c,l-257,5),St(c,r-1,5),St(c,d-4,4),p=0;p<d;p++)St(c,c.bl_tree[2*xi[p]+1],3);Li(c,c.dyn_ltree,l-1),Li(c,c.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,u+1),Pi(e,e.dyn_ltree,e.dyn_dtree)),Pl(e),n&&Ol(e)}function xs(e,s,t){return e.pending_buf[e.d_buf+2*e.last_lit]=s>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&s,e.pending_buf[e.l_buf+e.last_lit]=255&t,e.last_lit++,s===0?e.dyn_ltree[2*t]++:(e.matches++,s--,e.dyn_ltree[2*(Fn[t]+Zn+1)]++,e.dyn_dtree[2*Al(s)]++),e.last_lit===e.lit_bufsize-1}function yo(e,s,t,n){for(var a=65535&e|0,i=e>>>16&65535|0,u=0;t!==0;){t-=u=t>2e3?2e3:t;do i=i+(a=a+s[n++]|0)|0;while(--u);a%=65521,i%=65521}return a|i<<16|0}var Vu=function(){for(var e,s=[],t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;s[t]=e}return s}();function ht(e,s,t,n){var a=Vu,i=n+t;e^=-1;for(var u=n;u<i;u++)e=e>>>8^a[255&(e^s[u])];return-1^e}var hn,Xs=0,Wu=1,Ku=3,Ts=4,Ni=5,Ls=0,Gi=1,Qs=-2,Zu=-3,Ka=-5,qu=-1,Ju=1,sa=2,Xu=3,Qu=4,ed=2,Zo=8,td=9,Io=286,sd=30,nd=19,ad=2*Io+1,od=15,Ye=3,ks=258,Ht=ks+Ye+1,id=32,qo=42,bo=69,pa=73,fa=91,ga=103,Ks=113,Un=666,pt=1,Ln=2,Zs=3,mn=4,rd=3;function Es(e,s){return e.msg=kl[s],s}function Bi(e){return(e<<1)-(e>4?9:0)}function $s(e){for(var s=e.length;--s>=0;)e[s]=0}function bs(e){var s=e.state,t=s.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(us(e.output,s.pending_buf,s.pending_out,t,e.next_out),e.next_out+=t,s.pending_out+=t,e.total_out+=t,e.avail_out-=t,s.pending-=t,s.pending===0&&(s.pending_out=0))}function vt(e,s){zu(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,s),e.block_start=e.strstart,bs(e.strm)}function je(e,s){e.pending_buf[e.pending++]=s}function Mn(e,s){e.pending_buf[e.pending++]=s>>>8&255,e.pending_buf[e.pending++]=255&s}function $l(e,s){var t,n,a=e.max_chain_length,i=e.strstart,u=e.prev_length,c=e.nice_match,l=e.strstart>e.w_size-Ht?e.strstart-(e.w_size-Ht):0,r=e.window,d=e.w_mask,p=e.prev,f=e.strstart+ks,h=r[i+u-1],g=r[i+u];e.prev_length>=e.good_match&&(a>>=2),c>e.lookahead&&(c=e.lookahead);do if(r[(t=s)+u]===g&&r[t+u-1]===h&&r[t]===r[i]&&r[++t]===r[i+1]){i+=2,t++;do;while(r[++i]===r[++t]&&r[++i]===r[++t]&&r[++i]===r[++t]&&r[++i]===r[++t]&&r[++i]===r[++t]&&r[++i]===r[++t]&&r[++i]===r[++t]&&r[++i]===r[++t]&&i<f);if(n=ks-(f-i),i=f-ks,n>u){if(e.match_start=s,u=n,n>=c)break;h=r[i+u-1],g=r[i+u]}}while((s=p[s&d])>l&&--a!=0);return u<=e.lookahead?u:e.lookahead}function Yn(e){var s,t,n,a,i,u,c,l,r,d,p=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-Ht)){us(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,s=t=e.hash_size;do n=e.head[--s],e.head[s]=n>=p?n-p:0;while(--t);s=t=p;do n=e.prev[--s],e.prev[s]=n>=p?n-p:0;while(--t);a+=p}if(e.strm.avail_in===0)break;if(u=e.strm,c=e.window,l=e.strstart+e.lookahead,r=a,d=void 0,(d=u.avail_in)>r&&(d=r),t=d===0?0:(u.avail_in-=d,us(c,u.input,u.next_in,d,l),u.state.wrap===1?u.adler=yo(u.adler,c,d,l):u.state.wrap===2&&(u.adler=ht(u.adler,c,d,l)),u.next_in+=d,u.total_in+=d,d),e.lookahead+=t,e.lookahead+e.insert>=Ye)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+Ye-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<Ye)););}while(e.lookahead<Ht&&e.strm.avail_in!==0)}function Za(e,s){for(var t,n;;){if(e.lookahead<Ht){if(Yn(e),e.lookahead<Ht&&s===Xs)return pt;if(e.lookahead===0)break}if(t=0,e.lookahead>=Ye&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Ye-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-Ht&&(e.match_length=$l(e,t)),e.match_length>=Ye)if(n=xs(e,e.strstart-e.match_start,e.match_length-Ye),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Ye){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Ye-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!=0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=xs(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(vt(e,!1),e.strm.avail_out===0))return pt}return e.insert=e.strstart<Ye-1?e.strstart:Ye-1,s===Ts?(vt(e,!0),e.strm.avail_out===0?Zs:mn):e.last_lit&&(vt(e,!1),e.strm.avail_out===0)?pt:Ln}function un(e,s){for(var t,n,a;;){if(e.lookahead<Ht){if(Yn(e),e.lookahead<Ht&&s===Xs)return pt;if(e.lookahead===0)break}if(t=0,e.lookahead>=Ye&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Ye-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Ye-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-Ht&&(e.match_length=$l(e,t),e.match_length<=5&&(e.strategy===Ju||e.match_length===Ye&&e.strstart-e.match_start>4096)&&(e.match_length=Ye-1)),e.prev_length>=Ye&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-Ye,n=xs(e,e.strstart-1-e.prev_match,e.prev_length-Ye),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Ye-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!=0);if(e.match_available=0,e.match_length=Ye-1,e.strstart++,n&&(vt(e,!1),e.strm.avail_out===0))return pt}else if(e.match_available){if((n=xs(e,0,e.window[e.strstart-1]))&&vt(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return pt}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=xs(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Ye-1?e.strstart:Ye-1,s===Ts?(vt(e,!0),e.strm.avail_out===0?Zs:mn):e.last_lit&&(vt(e,!1),e.strm.avail_out===0)?pt:Ln}function Wt(e,s,t,n,a){this.good_length=e,this.max_lazy=s,this.nice_length=t,this.max_chain=n,this.func=a}function ld(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Zo,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Rt(2*ad),this.dyn_dtree=new Rt(2*(2*sd+1)),this.bl_tree=new Rt(2*(2*nd+1)),$s(this.dyn_ltree),$s(this.dyn_dtree),$s(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Rt(od+1),this.heap=new Rt(2*Io+1),$s(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Rt(2*Io+1),$s(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Hi(e){var s,t=function(n){var a;return n&&n.state?(n.total_in=n.total_out=0,n.data_type=ed,(a=n.state).pending=0,a.pending_out=0,a.wrap<0&&(a.wrap=-a.wrap),a.status=a.wrap?qo:Ks,n.adler=a.wrap===2?0:1,a.last_flush=Xs,ju(a),Ls):Es(n,Qs)}(e);return t===Ls&&((s=e.state).window_size=2*s.w_size,$s(s.head),s.max_lazy_match=hn[s.level].max_lazy,s.good_match=hn[s.level].good_length,s.nice_match=hn[s.level].nice_length,s.max_chain_length=hn[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=Ye-1,s.match_available=0,s.ins_h=0),t}function cd(e,s){var t,n,a,i;if(!e||!e.state||s>Ni||s<0)return e?Es(e,Qs):Qs;if(n=e.state,!e.output||!e.input&&e.avail_in!==0||n.status===Un&&s!==Ts)return Es(e,e.avail_out===0?Ka:Qs);if(n.strm=e,t=n.last_flush,n.last_flush=s,n.status===qo)if(n.wrap===2)e.adler=0,je(n,31),je(n,139),je(n,8),n.gzhead?(je(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),je(n,255&n.gzhead.time),je(n,n.gzhead.time>>8&255),je(n,n.gzhead.time>>16&255),je(n,n.gzhead.time>>24&255),je(n,n.level===9?2:n.strategy>=sa||n.level<2?4:0),je(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(je(n,255&n.gzhead.extra.length),je(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=ht(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=bo):(je(n,0),je(n,0),je(n,0),je(n,0),je(n,0),je(n,n.level===9?2:n.strategy>=sa||n.level<2?4:0),je(n,rd),n.status=Ks);else{var u=Zo+(n.w_bits-8<<4)<<8;u|=(n.strategy>=sa||n.level<2?0:n.level<6?1:n.level===6?2:3)<<6,n.strstart!==0&&(u|=id),u+=31-u%31,n.status=Ks,Mn(n,u),n.strstart!==0&&(Mn(n,e.adler>>>16),Mn(n,65535&e.adler)),e.adler=1}if(n.status===bo)if(n.gzhead.extra){for(a=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>a&&(e.adler=ht(e.adler,n.pending_buf,n.pending-a,a)),bs(e),a=n.pending,n.pending!==n.pending_buf_size));)je(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>a&&(e.adler=ht(e.adler,n.pending_buf,n.pending-a,a)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=pa)}else n.status=pa;if(n.status===pa)if(n.gzhead.name){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(e.adler=ht(e.adler,n.pending_buf,n.pending-a,a)),bs(e),a=n.pending,n.pending===n.pending_buf_size)){i=1;break}i=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,je(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>a&&(e.adler=ht(e.adler,n.pending_buf,n.pending-a,a)),i===0&&(n.gzindex=0,n.status=fa)}else n.status=fa;if(n.status===fa)if(n.gzhead.comment){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(e.adler=ht(e.adler,n.pending_buf,n.pending-a,a)),bs(e),a=n.pending,n.pending===n.pending_buf_size)){i=1;break}i=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,je(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>a&&(e.adler=ht(e.adler,n.pending_buf,n.pending-a,a)),i===0&&(n.status=ga)}else n.status=ga;if(n.status===ga&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&bs(e),n.pending+2<=n.pending_buf_size&&(je(n,255&e.adler),je(n,e.adler>>8&255),e.adler=0,n.status=Ks)):n.status=Ks),n.pending!==0){if(bs(e),e.avail_out===0)return n.last_flush=-1,Ls}else if(e.avail_in===0&&Bi(s)<=Bi(t)&&s!==Ts)return Es(e,Ka);if(n.status===Un&&e.avail_in!==0)return Es(e,Ka);if(e.avail_in!==0||n.lookahead!==0||s!==Xs&&n.status!==Un){var c=n.strategy===sa?function(l,r){for(var d;;){if(l.lookahead===0&&(Yn(l),l.lookahead===0)){if(r===Xs)return pt;break}if(l.match_length=0,d=xs(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++,d&&(vt(l,!1),l.strm.avail_out===0))return pt}return l.insert=0,r===Ts?(vt(l,!0),l.strm.avail_out===0?Zs:mn):l.last_lit&&(vt(l,!1),l.strm.avail_out===0)?pt:Ln}(n,s):n.strategy===Xu?function(l,r){for(var d,p,f,h,g=l.window;;){if(l.lookahead<=ks){if(Yn(l),l.lookahead<=ks&&r===Xs)return pt;if(l.lookahead===0)break}if(l.match_length=0,l.lookahead>=Ye&&l.strstart>0&&(p=g[f=l.strstart-1])===g[++f]&&p===g[++f]&&p===g[++f]){h=l.strstart+ks;do;while(p===g[++f]&&p===g[++f]&&p===g[++f]&&p===g[++f]&&p===g[++f]&&p===g[++f]&&p===g[++f]&&p===g[++f]&&f<h);l.match_length=ks-(h-f),l.match_length>l.lookahead&&(l.match_length=l.lookahead)}if(l.match_length>=Ye?(d=xs(l,1,l.match_length-Ye),l.lookahead-=l.match_length,l.strstart+=l.match_length,l.match_length=0):(d=xs(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++),d&&(vt(l,!1),l.strm.avail_out===0))return pt}return l.insert=0,r===Ts?(vt(l,!0),l.strm.avail_out===0?Zs:mn):l.last_lit&&(vt(l,!1),l.strm.avail_out===0)?pt:Ln}(n,s):hn[n.level].func(n,s);if(c!==Zs&&c!==mn||(n.status=Un),c===pt||c===Zs)return e.avail_out===0&&(n.last_flush=-1),Ls;if(c===Ln&&(s===Wu?Yu(n):s!==Ni&&(Ll(n,0,0,!1),s===Ku&&($s(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),bs(e),e.avail_out===0))return n.last_flush=-1,Ls}return s!==Ts?Ls:n.wrap<=0?Gi:(n.wrap===2?(je(n,255&e.adler),je(n,e.adler>>8&255),je(n,e.adler>>16&255),je(n,e.adler>>24&255),je(n,255&e.total_in),je(n,e.total_in>>8&255),je(n,e.total_in>>16&255),je(n,e.total_in>>24&255)):(Mn(n,e.adler>>>16),Mn(n,65535&e.adler)),bs(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Ls:Gi)}hn=[new Wt(0,0,0,0,function(e,s){var t=65535;for(t>e.pending_buf_size-5&&(t=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Yn(e),e.lookahead===0&&s===Xs)return pt;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+t;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,vt(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Ht&&(vt(e,!1),e.strm.avail_out===0))return pt}return e.insert=0,s===Ts?(vt(e,!0),e.strm.avail_out===0?Zs:mn):(e.strstart>e.block_start&&(vt(e,!1),e.strm.avail_out),pt)}),new Wt(4,4,8,4,Za),new Wt(4,5,16,8,Za),new Wt(4,6,32,32,Za),new Wt(4,4,16,16,un),new Wt(8,16,32,32,un),new Wt(8,16,128,128,un),new Wt(8,32,128,256,un),new Wt(32,128,258,1024,un),new Wt(32,258,258,4096,un)];var na=30,ud=12;function dd(e,s){var t,n,a,i,u,c,l,r,d,p,f,h,g,_,m,y,I,S,C,R,k,x,M,G,E;t=e.state,n=e.next_in,G=e.input,a=n+(e.avail_in-5),i=e.next_out,E=e.output,u=i-(s-e.avail_out),c=i+(e.avail_out-257),l=t.dmax,r=t.wsize,d=t.whave,p=t.wnext,f=t.window,h=t.hold,g=t.bits,_=t.lencode,m=t.distcode,y=(1<<t.lenbits)-1,I=(1<<t.distbits)-1;e:do{g<15&&(h+=G[n++]<<g,g+=8,h+=G[n++]<<g,g+=8),S=_[h&y];t:for(;;){if(h>>>=C=S>>>24,g-=C,(C=S>>>16&255)===0)E[i++]=65535&S;else{if(!(16&C)){if(!(64&C)){S=_[(65535&S)+(h&(1<<C)-1)];continue t}if(32&C){t.mode=ud;break e}e.msg="invalid literal/length code",t.mode=na;break e}R=65535&S,(C&=15)&&(g<C&&(h+=G[n++]<<g,g+=8),R+=h&(1<<C)-1,h>>>=C,g-=C),g<15&&(h+=G[n++]<<g,g+=8,h+=G[n++]<<g,g+=8),S=m[h&I];s:for(;;){if(h>>>=C=S>>>24,g-=C,!(16&(C=S>>>16&255))){if(!(64&C)){S=m[(65535&S)+(h&(1<<C)-1)];continue s}e.msg="invalid distance code",t.mode=na;break e}if(k=65535&S,g<(C&=15)&&(h+=G[n++]<<g,(g+=8)<C&&(h+=G[n++]<<g,g+=8)),(k+=h&(1<<C)-1)>l){e.msg="invalid distance too far back",t.mode=na;break e}if(h>>>=C,g-=C,k>(C=i-u)){if((C=k-C)>d&&t.sane){e.msg="invalid distance too far back",t.mode=na;break e}if(x=0,M=f,p===0){if(x+=r-C,C<R){R-=C;do E[i++]=f[x++];while(--C);x=i-k,M=E}}else if(p<C){if(x+=r+p-C,(C-=p)<R){R-=C;do E[i++]=f[x++];while(--C);if(x=0,p<R){R-=C=p;do E[i++]=f[x++];while(--C);x=i-k,M=E}}}else if(x+=p-C,C<R){R-=C;do E[i++]=f[x++];while(--C);x=i-k,M=E}for(;R>2;)E[i++]=M[x++],E[i++]=M[x++],E[i++]=M[x++],R-=3;R&&(E[i++]=M[x++],R>1&&(E[i++]=M[x++]))}else{x=i-k;do E[i++]=E[x++],E[i++]=E[x++],E[i++]=E[x++],R-=3;while(R>2);R&&(E[i++]=E[x++],R>1&&(E[i++]=E[x++]))}break}}break}}while(n<a&&i<c);n-=R=g>>3,h&=(1<<(g-=R<<3))-1,e.next_in=n,e.next_out=i,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=i<c?c-i+257:257-(i-c),t.hold=h,t.bits=g}var dn=15,Fi=852,ji=592,Yi=0,qa=1,zi=2,hd=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],pd=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],fd=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],gd=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function $n(e,s,t,n,a,i,u,c){var l,r,d,p,f,h,g,_,m,y=c.bits,I=0,S=0,C=0,R=0,k=0,x=0,M=0,G=0,E=0,O=0,U=null,N=0,W=new Rt(dn+1),J=new Rt(dn+1),le=null,ce=0;for(I=0;I<=dn;I++)W[I]=0;for(S=0;S<n;S++)W[s[t+S]]++;for(k=y,R=dn;R>=1&&W[R]===0;R--);if(k>R&&(k=R),R===0)return a[i++]=20971520,a[i++]=20971520,c.bits=1,0;for(C=1;C<R&&W[C]===0;C++);for(k<C&&(k=C),G=1,I=1;I<=dn;I++)if(G<<=1,(G-=W[I])<0)return-1;if(G>0&&(e===Yi||R!==1))return-1;for(J[1]=0,I=1;I<dn;I++)J[I+1]=J[I]+W[I];for(S=0;S<n;S++)s[t+S]!==0&&(u[J[s[t+S]]++]=S);if(e===Yi?(U=le=u,h=19):e===qa?(U=hd,N-=257,le=pd,ce-=257,h=256):(U=fd,le=gd,h=-1),O=0,S=0,I=C,f=i,x=k,M=0,d=-1,p=(E=1<<k)-1,e===qa&&E>Fi||e===zi&&E>ji)return 1;for(;;){g=I-M,u[S]<h?(_=0,m=u[S]):u[S]>h?(_=le[ce+u[S]],m=U[N+u[S]]):(_=96,m=0),l=1<<I-M,C=r=1<<x;do a[f+(O>>M)+(r-=l)]=g<<24|_<<16|m|0;while(r!==0);for(l=1<<I-1;O&l;)l>>=1;if(l!==0?(O&=l-1,O+=l):O=0,S++,--W[I]==0){if(I===R)break;I=s[t+u[S]]}if(I>k&&(O&p)!==d){for(M===0&&(M=k),f+=C,G=1<<(x=I-M);x+M<R&&!((G-=W[x+M])<=0);)x++,G<<=1;if(E+=1<<x,e===qa&&E>Fi||e===zi&&E>ji)return 1;a[d=O&p]=k<<24|x<<16|f-i|0}}return O!==0&&(a[f+O]=I-M<<24|64<<16|0),c.bits=k,0}var _d=0,Nl=1,Gl=2,Vi=4,vd=5,aa=6,Sa=0,md=1,yd=2,Us=-2,Id=-3,bd=-4,Td=-5,Wi=8,Bl=1,Ki=2,Zi=3,qi=4,Ji=5,Xi=6,Qi=7,er=8,tr=9,sr=10,nr=11,rs=12,Ja=13,ar=14,Xa=15,or=16,ir=17,rr=18,lr=19,oa=20,ia=21,cr=22,ur=23,dr=24,hr=25,pr=26,Qa=27,fr=28,gr=29,tt=30,Cd=31,Sd=32,wd=852,kd=592;function _r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function Ed(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Rt(320),this.work=new Rt(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Hl(e){var s;return e&&e.state?((s=e.state).wsize=0,s.whave=0,s.wnext=0,function(t){var n;return t&&t.state?(n=t.state,t.total_in=t.total_out=n.total=0,t.msg="",n.wrap&&(t.adler=1&n.wrap),n.mode=Bl,n.last=0,n.havedict=0,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Ta(wd),n.distcode=n.distdyn=new Ta(kd),n.sane=1,n.back=-1,Sa):Us}(e)):Us}function Md(e,s){var t,n;return e?(n=new Ed,e.state=n,n.window=null,(t=function(a,i){var u,c;return a&&a.state?(c=a.state,i<0?(u=0,i=-i):(u=1+(i>>4),i<48&&(i&=15)),i&&(i<8||i>15)?Us:(c.window!==null&&c.wbits!==i&&(c.window=null),c.wrap=u,c.wbits=i,Hl(a))):Us}(e,s))!==Sa&&(e.state=null),t):Us}var eo,to,vr=!0;function xd(e){if(vr){var s;for(eo=new Ta(512),to=new Ta(32),s=0;s<144;)e.lens[s++]=8;for(;s<256;)e.lens[s++]=9;for(;s<280;)e.lens[s++]=7;for(;s<288;)e.lens[s++]=8;for($n(Nl,e.lens,0,288,eo,0,e.work,{bits:9}),s=0;s<32;)e.lens[s++]=5;$n(Gl,e.lens,0,32,to,0,e.work,{bits:5}),vr=!1}e.lencode=eo,e.lenbits=9,e.distcode=to,e.distbits=5}function Ud(e,s){var t,n,a,i,u,c,l,r,d,p,f,h,g,_,m,y,I,S,C,R,k,x,M,G,E=0,O=new ba(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Us;(t=e.state).mode===rs&&(t.mode=Ja),u=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,n=e.input,c=e.avail_in,r=t.hold,d=t.bits,p=c,f=l,x=Sa;e:for(;;)switch(t.mode){case Bl:if(t.wrap===0){t.mode=Ja;break}for(;d<16;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}if(2&t.wrap&&r===35615){t.check=0,O[0]=255&r,O[1]=r>>>8&255,t.check=ht(t.check,O,2,0),r=0,d=0,t.mode=Ki;break}if(t.flags=0,t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&r)<<8)+(r>>8))%31){e.msg="incorrect header check",t.mode=tt;break}if((15&r)!==Wi){e.msg="unknown compression method",t.mode=tt;break}if(d-=4,k=8+(15&(r>>>=4)),t.wbits===0)t.wbits=k;else if(k>t.wbits){e.msg="invalid window size",t.mode=tt;break}t.dmax=1<<k,e.adler=t.check=1,t.mode=512&r?sr:rs,r=0,d=0;break;case Ki:for(;d<16;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}if(t.flags=r,(255&t.flags)!==Wi){e.msg="unknown compression method",t.mode=tt;break}if(57344&t.flags){e.msg="unknown header flags set",t.mode=tt;break}t.head&&(t.head.text=r>>8&1),512&t.flags&&(O[0]=255&r,O[1]=r>>>8&255,t.check=ht(t.check,O,2,0)),r=0,d=0,t.mode=Zi;case Zi:for(;d<32;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}t.head&&(t.head.time=r),512&t.flags&&(O[0]=255&r,O[1]=r>>>8&255,O[2]=r>>>16&255,O[3]=r>>>24&255,t.check=ht(t.check,O,4,0)),r=0,d=0,t.mode=qi;case qi:for(;d<16;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}t.head&&(t.head.xflags=255&r,t.head.os=r>>8),512&t.flags&&(O[0]=255&r,O[1]=r>>>8&255,t.check=ht(t.check,O,2,0)),r=0,d=0,t.mode=Ji;case Ji:if(1024&t.flags){for(;d<16;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}t.length=r,t.head&&(t.head.extra_len=r),512&t.flags&&(O[0]=255&r,O[1]=r>>>8&255,t.check=ht(t.check,O,2,0)),r=0,d=0}else t.head&&(t.head.extra=null);t.mode=Xi;case Xi:if(1024&t.flags&&((h=t.length)>c&&(h=c),h&&(t.head&&(k=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),us(t.head.extra,n,i,h,k)),512&t.flags&&(t.check=ht(t.check,n,h,i)),c-=h,i+=h,t.length-=h),t.length))break e;t.length=0,t.mode=Qi;case Qi:if(2048&t.flags){if(c===0)break e;h=0;do k=n[i+h++],t.head&&k&&t.length<65536&&(t.head.name+=String.fromCharCode(k));while(k&&h<c);if(512&t.flags&&(t.check=ht(t.check,n,h,i)),c-=h,i+=h,k)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=er;case er:if(4096&t.flags){if(c===0)break e;h=0;do k=n[i+h++],t.head&&k&&t.length<65536&&(t.head.comment+=String.fromCharCode(k));while(k&&h<c);if(512&t.flags&&(t.check=ht(t.check,n,h,i)),c-=h,i+=h,k)break e}else t.head&&(t.head.comment=null);t.mode=tr;case tr:if(512&t.flags){for(;d<16;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}if(r!==(65535&t.check)){e.msg="header crc mismatch",t.mode=tt;break}r=0,d=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=rs;break;case sr:for(;d<32;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}e.adler=t.check=_r(r),r=0,d=0,t.mode=nr;case nr:if(t.havedict===0)return e.next_out=u,e.avail_out=l,e.next_in=i,e.avail_in=c,t.hold=r,t.bits=d,yd;e.adler=t.check=1,t.mode=rs;case rs:if(s===vd||s===aa)break e;case Ja:if(t.last){r>>>=7&d,d-=7&d,t.mode=Qa;break}for(;d<3;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}switch(t.last=1&r,d-=1,3&(r>>>=1)){case 0:t.mode=ar;break;case 1:if(xd(t),t.mode=oa,s===aa){r>>>=2,d-=2;break e}break;case 2:t.mode=ir;break;case 3:e.msg="invalid block type",t.mode=tt}r>>>=2,d-=2;break;case ar:for(r>>>=7&d,d-=7&d;d<32;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}if((65535&r)!=(r>>>16^65535)){e.msg="invalid stored block lengths",t.mode=tt;break}if(t.length=65535&r,r=0,d=0,t.mode=Xa,s===aa)break e;case Xa:t.mode=or;case or:if(h=t.length){if(h>c&&(h=c),h>l&&(h=l),h===0)break e;us(a,n,i,h,u),c-=h,i+=h,l-=h,u+=h,t.length-=h;break}t.mode=rs;break;case ir:for(;d<14;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}if(t.nlen=257+(31&r),r>>>=5,d-=5,t.ndist=1+(31&r),r>>>=5,d-=5,t.ncode=4+(15&r),r>>>=4,d-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=tt;break}t.have=0,t.mode=rr;case rr:for(;t.have<t.ncode;){for(;d<3;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}t.lens[U[t.have++]]=7&r,r>>>=3,d-=3}for(;t.have<19;)t.lens[U[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,M={bits:t.lenbits},x=$n(_d,t.lens,0,19,t.lencode,0,t.work,M),t.lenbits=M.bits,x){e.msg="invalid code lengths set",t.mode=tt;break}t.have=0,t.mode=lr;case lr:for(;t.have<t.nlen+t.ndist;){for(;y=(E=t.lencode[r&(1<<t.lenbits)-1])>>>16&255,I=65535&E,!((m=E>>>24)<=d);){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}if(I<16)r>>>=m,d-=m,t.lens[t.have++]=I;else{if(I===16){for(G=m+2;d<G;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}if(r>>>=m,d-=m,t.have===0){e.msg="invalid bit length repeat",t.mode=tt;break}k=t.lens[t.have-1],h=3+(3&r),r>>>=2,d-=2}else if(I===17){for(G=m+3;d<G;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}d-=m,k=0,h=3+(7&(r>>>=m)),r>>>=3,d-=3}else{for(G=m+7;d<G;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}d-=m,k=0,h=11+(127&(r>>>=m)),r>>>=7,d-=7}if(t.have+h>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=tt;break}for(;h--;)t.lens[t.have++]=k}}if(t.mode===tt)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=tt;break}if(t.lenbits=9,M={bits:t.lenbits},x=$n(Nl,t.lens,0,t.nlen,t.lencode,0,t.work,M),t.lenbits=M.bits,x){e.msg="invalid literal/lengths set",t.mode=tt;break}if(t.distbits=6,t.distcode=t.distdyn,M={bits:t.distbits},x=$n(Gl,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,M),t.distbits=M.bits,x){e.msg="invalid distances set",t.mode=tt;break}if(t.mode=oa,s===aa)break e;case oa:t.mode=ia;case ia:if(c>=6&&l>=258){e.next_out=u,e.avail_out=l,e.next_in=i,e.avail_in=c,t.hold=r,t.bits=d,dd(e,f),u=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,n=e.input,c=e.avail_in,r=t.hold,d=t.bits,t.mode===rs&&(t.back=-1);break}for(t.back=0;y=(E=t.lencode[r&(1<<t.lenbits)-1])>>>16&255,I=65535&E,!((m=E>>>24)<=d);){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}if(y&&!(240&y)){for(S=m,C=y,R=I;y=(E=t.lencode[R+((r&(1<<S+C)-1)>>S)])>>>16&255,I=65535&E,!(S+(m=E>>>24)<=d);){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}r>>>=S,d-=S,t.back+=S}if(r>>>=m,d-=m,t.back+=m,t.length=I,y===0){t.mode=pr;break}if(32&y){t.back=-1,t.mode=rs;break}if(64&y){e.msg="invalid literal/length code",t.mode=tt;break}t.extra=15&y,t.mode=cr;case cr:if(t.extra){for(G=t.extra;d<G;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}t.length+=r&(1<<t.extra)-1,r>>>=t.extra,d-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=ur;case ur:for(;y=(E=t.distcode[r&(1<<t.distbits)-1])>>>16&255,I=65535&E,!((m=E>>>24)<=d);){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}if(!(240&y)){for(S=m,C=y,R=I;y=(E=t.distcode[R+((r&(1<<S+C)-1)>>S)])>>>16&255,I=65535&E,!(S+(m=E>>>24)<=d);){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}r>>>=S,d-=S,t.back+=S}if(r>>>=m,d-=m,t.back+=m,64&y){e.msg="invalid distance code",t.mode=tt;break}t.offset=I,t.extra=15&y,t.mode=dr;case dr:if(t.extra){for(G=t.extra;d<G;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}t.offset+=r&(1<<t.extra)-1,r>>>=t.extra,d-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=tt;break}t.mode=hr;case hr:if(l===0)break e;if(h=f-l,t.offset>h){if((h=t.offset-h)>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=tt;break}h>t.wnext?(h-=t.wnext,g=t.wsize-h):g=t.wnext-h,h>t.length&&(h=t.length),_=t.window}else _=a,g=u-t.offset,h=t.length;h>l&&(h=l),l-=h,t.length-=h;do a[u++]=_[g++];while(--h);t.length===0&&(t.mode=ia);break;case pr:if(l===0)break e;a[u++]=t.length,l--,t.mode=ia;break;case Qa:if(t.wrap){for(;d<32;){if(c===0)break e;c--,r|=n[i++]<<d,d+=8}if(f-=l,e.total_out+=f,t.total+=f,f&&(e.adler=t.check=t.flags?ht(t.check,a,f,u-f):yo(t.check,a,f,u-f)),f=l,(t.flags?r:_r(r))!==t.check){e.msg="incorrect data check",t.mode=tt;break}r=0,d=0}t.mode=fr;case fr:if(t.wrap&&t.flags){for(;d<32;){if(c===0)break e;c--,r+=n[i++]<<d,d+=8}if(r!==(4294967295&t.total)){e.msg="incorrect length check",t.mode=tt;break}r=0,d=0}t.mode=gr;case gr:x=md;break e;case tt:x=Id;break e;case Cd:return bd;case Sd:default:return Us}return e.next_out=u,e.avail_out=l,e.next_in=i,e.avail_in=c,t.hold=r,t.bits=d,(t.wsize||f!==e.avail_out&&t.mode<tt&&(t.mode<Qa||s!==Vi))&&function(N,W,J,le){var ce,ue=N.state;ue.window===null&&(ue.wsize=1<<ue.wbits,ue.wnext=0,ue.whave=0,ue.window=new ba(ue.wsize)),le>=ue.wsize?(us(ue.window,W,J-ue.wsize,ue.wsize,0),ue.wnext=0,ue.whave=ue.wsize):((ce=ue.wsize-ue.wnext)>le&&(ce=le),us(ue.window,W,J-le,ce,ue.wnext),(le-=ce)?(us(ue.window,W,J-le,le,0),ue.wnext=le,ue.whave=ue.wsize):(ue.wnext+=ce,ue.wnext===ue.wsize&&(ue.wnext=0),ue.whave<ue.wsize&&(ue.whave+=ce)))}(e,e.output,e.next_out,f-e.avail_out),p-=e.avail_in,f-=e.avail_out,e.total_in+=p,e.total_out+=f,t.total+=f,t.wrap&&f&&(e.adler=t.check=t.flags?ht(t.check,a,f,e.next_out-f):yo(t.check,a,f,e.next_out-f)),e.data_type=t.bits+(t.last?64:0)+(t.mode===rs?128:0)+(t.mode===oa||t.mode===Xa?256:0),(p===0&&f===0||s===Vi)&&x===Sa&&(x=Td),x}var ra,pn=1,Nn=7;function qt(e){if(e<pn||e>Nn)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function Ad(e,s){for(var t=0;t<e.length;t++)this[s+t]=e[t]}qt.prototype.init=function(e,s,t,n,a){var i;switch(this.windowBits=e,this.level=s,this.memLevel=t,this.strategy=n,this.mode!==3&&this.mode!==4||(this.windowBits+=16),this.mode===Nn&&(this.windowBits+=32),this.mode!==5&&this.mode!==6||(this.windowBits=-this.windowBits),this.strm=new Lu,this.mode){case pn:case 3:case 5:i=function(u,c,l,r,d,p){if(!u)return Qs;var f=1;if(c===qu&&(c=6),r<0?(f=0,r=-r):r>15&&(f=2,r-=16),d<1||d>td||l!==Zo||r<8||r>15||c<0||c>9||p<0||p>Qu)return Es(u,Qs);r===8&&(r=9);var h=new ld;return u.state=h,h.strm=u,h.wrap=f,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=d+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+Ye-1)/Ye),h.window=new ba(2*h.w_size),h.head=new Rt(h.hash_size),h.prev=new Rt(h.w_size),h.lit_bufsize=1<<d+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new ba(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=c,h.strategy=p,h.method=l,Hi(u)}(this.strm,this.level,8,this.windowBits,this.memLevel,this.strategy);break;case 2:case 4:case 6:case Nn:i=Md(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}i===0?(this.write_in_progress=!1,this.init_done=!0):this._error(i)},qt.prototype.params=function(){throw new Error("deflateParams Not supported")},qt.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===0)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},qt.prototype.write=function(e,s,t,n,a,i,u){this._writeCheck(),this.write_in_progress=!0;var c=this;return _t(function(){c.write_in_progress=!1;var l=c._write(e,s,t,n,a,i,u);c.callback(l[0],l[1]),c.pending_close&&c.close()}),this},qt.prototype.writeSync=function(e,s,t,n,a,i,u){return this._writeCheck(),this._write(e,s,t,n,a,i,u)},qt.prototype._write=function(e,s,t,n,a,i,u){if(this.write_in_progress=!0,e!==0&&e!==1&&e!==2&&e!==3&&e!==4&&e!==5)throw new Error("Invalid flush value");s==null&&(s=new X(0),n=0,t=0),a._set?a.set=a._set:a.set=Ad;var c,l=this.strm;switch(l.avail_in=n,l.input=s,l.next_in=t,l.avail_out=u,l.output=a,l.next_out=i,this.mode){case pn:case 3:case 5:c=cd(l,e);break;case Nn:case 2:case 4:case 6:c=Ud(l,e);break;default:throw new Error("Unknown mode "+this.mode)}return c!==1&&c!==0&&this._error(c),this.write_in_progress=!1,[l.avail_in,l.avail_out]},qt.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,this.mode===pn||this.mode===3||this.mode===5?function(e){var s;e&&e.state&&((s=e.state.status)!==qo&&s!==bo&&s!==pa&&s!==fa&&s!==ga&&s!==Ks&&s!==Un?Es(e,Qs):(e.state=null,s===Ks&&Es(e,Zu)))}(this.strm):function(e){if(!e||!e.state)return Us;var s=e.state;s.window&&(s.window=null),e.state=null}(this.strm),this.mode=0)},qt.prototype.reset=function(){switch(this.mode){case pn:case 5:ra=Hi(this.strm);break;case 2:case 6:ra=Hl(this.strm)}ra!==0&&this._error(ra)},qt.prototype._error=function(e){this.onerror(kl[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};var mr=Object.freeze({NONE:0,DEFLATE:pn,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:Nn,Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8,Zlib:qt}),ge={};Object.keys(mr).forEach(function(e){ge[e]=mr[e]}),ge.Z_MIN_WINDOWBITS=8,ge.Z_MAX_WINDOWBITS=15,ge.Z_DEFAULT_WINDOWBITS=15,ge.Z_MIN_CHUNK=64,ge.Z_MAX_CHUNK=1/0,ge.Z_DEFAULT_CHUNK=16384,ge.Z_MIN_MEMLEVEL=1,ge.Z_MAX_MEMLEVEL=9,ge.Z_DEFAULT_MEMLEVEL=8,ge.Z_MIN_LEVEL=-1,ge.Z_MAX_LEVEL=9,ge.Z_DEFAULT_LEVEL=ge.Z_DEFAULT_COMPRESSION;var so={Z_OK:ge.Z_OK,Z_STREAM_END:ge.Z_STREAM_END,Z_NEED_DICT:ge.Z_NEED_DICT,Z_ERRNO:ge.Z_ERRNO,Z_STREAM_ERROR:ge.Z_STREAM_ERROR,Z_DATA_ERROR:ge.Z_DATA_ERROR,Z_MEM_ERROR:ge.Z_MEM_ERROR,Z_BUF_ERROR:ge.Z_BUF_ERROR,Z_VERSION_ERROR:ge.Z_VERSION_ERROR};function To(e){if(!(this instanceof To))return new To(e);lt.call(this,e,ge.DEFLATE)}function Co(e){if(!(this instanceof Co))return new Co(e);lt.call(this,e,ge.INFLATE)}function So(e){if(!(this instanceof So))return new So(e);lt.call(this,e,ge.GZIP)}function wo(e){if(!(this instanceof wo))return new wo(e);lt.call(this,e,ge.GUNZIP)}function ko(e){if(!(this instanceof ko))return new ko(e);lt.call(this,e,ge.DEFLATERAW)}function Eo(e){if(!(this instanceof Eo))return new Eo(e);lt.call(this,e,ge.INFLATERAW)}function Mo(e){if(!(this instanceof Mo))return new Mo(e);lt.call(this,e,ge.UNZIP)}function lt(e,s){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||ge.Z_DEFAULT_CHUNK,At.call(this,e),e.flush&&e.flush!==ge.Z_NO_FLUSH&&e.flush!==ge.Z_PARTIAL_FLUSH&&e.flush!==ge.Z_SYNC_FLUSH&&e.flush!==ge.Z_FULL_FLUSH&&e.flush!==ge.Z_FINISH&&e.flush!==ge.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||ge.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<ge.Z_MIN_CHUNK||e.chunkSize>ge.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<ge.Z_MIN_WINDOWBITS||e.windowBits>ge.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<ge.Z_MIN_LEVEL||e.level>ge.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<ge.Z_MIN_MEMLEVEL||e.memLevel>ge.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=ge.Z_FILTERED&&e.strategy!=ge.Z_HUFFMAN_ONLY&&e.strategy!=ge.Z_RLE&&e.strategy!=ge.Z_FIXED&&e.strategy!=ge.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!xa(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new ge.Zlib(s);var t=this;this._hadError=!1,this._binding.onerror=function(i,u){t._binding=null,t._hadError=!0;var c=new Error(i);c.errno=u,c.code=ge.codes[u],t.emit("error",c)};var n=ge.Z_DEFAULT_COMPRESSION;typeof e.level=="number"&&(n=e.level);var a=ge.Z_DEFAULT_STRATEGY;typeof e.strategy=="number"&&(a=e.strategy),this._binding.init(e.windowBits||ge.Z_DEFAULT_WINDOWBITS,n,e.memLevel||ge.Z_DEFAULT_MEMLEVEL,a,e.dictionary),this._buffer=new X(this._chunkSize),this._offset=0,this._closed=!1,this._level=n,this._strategy=a,this.once("end",this.close)}Object.keys(so).forEach(function(e){so[so[e]]=e}),Ct(lt,At),lt.prototype.params=function(e,s,t){if(e<ge.Z_MIN_LEVEL||e>ge.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(s!=ge.Z_FILTERED&&s!=ge.Z_HUFFMAN_ONLY&&s!=ge.Z_RLE&&s!=ge.Z_FIXED&&s!=ge.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+s);if(this._level!==e||this._strategy!==s){var n=this;this.flush(ge.Z_SYNC_FLUSH,function(){n._binding.params(e,s),n._hadError||(n._level=e,n._strategy=s,t&&t())})}else _t(t)},lt.prototype.reset=function(){return this._binding.reset()},lt.prototype._flush=function(e){this._transform(new X(0),"",e)},lt.prototype.flush=function(e,s){var t=this._writableState;if((typeof e=="function"||e===void 0&&!s)&&(s=e,e=ge.Z_FULL_FLUSH),t.ended)s&&_t(s);else if(t.ending)s&&this.once("end",s);else if(t.needDrain){var n=this;this.once("drain",function(){n.flush(s)})}else this._flushFlag=e,this.write(new X(0),"",s)},lt.prototype.close=function(e){if(e&&_t(e),!this._closed){this._closed=!0,this._binding.close();var s=this;_t(function(){s.emit("close")})}},lt.prototype._transform=function(e,s,t){var n,a=this._writableState,i=(a.ending||a.ended)&&(!e||a.length===e.length);if(!e===null&&!xa(e))return t(new Error("invalid input"));i?n=ge.Z_FINISH:(n=this._flushFlag,e.length>=a.length&&(this._flushFlag=this._opts.flush||ge.Z_NO_FLUSH)),this._processChunk(e,n,t)},lt.prototype._processChunk=function(e,s,t){var n=e&&e.length,a=this._chunkSize-this._offset,i=0,u=this,c=typeof t=="function";if(!c){var l,r=[],d=0;this.on("error",function(_){l=_});do var p=this._binding.writeSync(s,e,i,n,this._buffer,this._offset,a);while(!this._hadError&&g(p[0],p[1]));if(this._hadError)throw l;var f=X.concat(r,d);return this.close(),f}var h=this._binding.write(s,e,i,n,this._buffer,this._offset,a);function g(_,m){if(!u._hadError){var y=a-m;if(function(C,R){if(!C)throw new Error(R)}(y>=0,"have should not go down"),y>0){var I=u._buffer.slice(u._offset,u._offset+y);u._offset+=y,c?u.push(I):(r.push(I),d+=I.length)}if((m===0||u._offset>=u._chunkSize)&&(a=u._chunkSize,u._offset=0,u._buffer=new X(u._chunkSize)),m===0){if(i+=n-_,n=_,!c)return!0;var S=u._binding.write(s,e,i,n,u._buffer,u._offset,u._chunkSize);return S.callback=g,void(S.buffer=e)}if(!c)return!1;t()}}h.buffer=e,h.callback=g},Ct(To,lt),Ct(Co,lt),Ct(So,lt),Ct(wo,lt),Ct(ko,lt),Ct(Eo,lt),Ct(Mo,lt);const yr=e=>typeof e=="function",Rd=e=>e!==null&&typeof e=="object",Fl=e=>/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(e),Dd=e=>{if(typeof e=="string")try{return!!JSON.parse(e)}catch{return!1}return!1},os=e=>!e||!Dd(e)?e:JSON.parse(e),Pd={"【安全提示】本 APP 仅用于体验腾讯云即时通信 IM 产品功能，不可用于业务洽谈与拓展。请勿轻信汇款、中奖等涉及钱款的信息，勿轻易拨打陌生电话，谨防上当受骗。":"【Security Tips】This APP is only used to experience the functions of Tencent Cloud Instant Messaging products, and cannot be used for business negotiation and expansion. Don't trust money-related information such as remittances and lottery wins, don't make unfamiliar phone calls easily, and beware of being deceived.","按Enter发送，Ctrl+Enter换行":"Press Enter to send a message and Ctrl+Enter to start a new line",表情:"[Face]",查看更多:"View more",撤回:"Recall",撤回了一条消息:"recalled a message",打开:"Open",单击下载:"Click download",点此投诉:"Complain",点击处理:"Click action",对方正在输入:"Typing...",发起群视频:"Make group video call",发起群语音:"Make group voice call",发起通话:"Start Call",发送失败:"send failed",复制:"Copy",该消息不存在:"The message does not exist",关闭阅读状态:"Read status closed",管理员开启全员禁言:"The admin enables Mute All",欢迎使用TUICallKit:"Welcome to TUICallKit",回到最新位置:"Back to the latest location",回复:"Reply",回复详情:"Replies",集成TUICallKit:" Integrate TUICallKit ","检测到您暂未集成TUICallKit，无法体验音视频通话功能":"It is detected that you have not integrated TUI CallKit yet, so you cannot experience the audio and video call. ",结束群聊:"Edit Group Call",进行体验:"to experience.",经度:"Longitude",拒绝:"Reject",拒绝通话:"Decline Call",开通腾讯实时音视频服务:"Integration Tencent Real-Time Communication",聊天记录:"[Chat history]",描述:"Description",内容包含敏感词汇:"Content contains sensitive words",您:"You",您当前购买使用的套餐包暂未开通此功能:"The package you purchased does not support this ability.",您当前购买使用的套餐包暂未开通群消息已读回执功能:"The package you purchased does not support the read receipt of group messages.",您当前购买使用的套餐包暂未开通在线用户列表功能:"The package you purchased does not support the online user list.",您已被管理员禁言:"You have been muted by the admin",您有:"You have",请点击:"Please click",请输入消息:"Enter a message",取消:"Cancel",取消通话:"Cancel Call",全部已读:"All read",确定:"Submit","确认重发该消息？":"Confirm to resend the message?",人关闭阅读状态:" read status closed",人未读:" unread",人已读:" read",删除:"Delete",涉及敏感内容:"Sensitive content",申请加入:"Application for join in",视频:"[video]",视频通话:"Video Call",条回复:"replies",条入群申请:"Item group application",条新消息:" new messages",通话时长:"Duration",同意:"Agree",图片:"[Image]","图片消息失败,无效的图片格式":"Image message failed, invalid image format.",纬度:"Latitude",未读:"Unread",位置:"[Location]",文件:"[File]","文件不存在,请检查文件路径是否正确":"The file does not exist, please check if the file path is correct.","文件大小超出了限制,如果上传文件,最大限制是100MB":"The file size exceeds the limit; if uploading a file, the maximum limit is 100MB.","文件消息失败,禁止发送违规封禁的文件":"File message failed, sending prohibited and banned files is not allowed.",我:"I",无法查看:"unable to view",无法定位到原消息:"Unable to navigate to the original message",无法收听:"unable to listen",正在加载:"Loading...",加载结束:"Load end",无应答:"No Answer",系统消息:"System message",消息:"[message]","消息或者资料中文本存在敏感内容,发送失败":"Sensitive content found in the message or information text, sending failed.",消息详情:"Message Detail","消息长度超出限制,消息长度不要超过12K":"Message length exceeds the limit; please keep the message length under 12K.","消息中图片存在敏感内容,发送失败":" Sensitive content is found in the picture in the message, sending failed.",选择提醒的人:"Select Contact",已读:"Read",已过撤回时限:"Withdrawal deadline has passed",已接听:"Answered",已拒绝:"Rejected",已同意:"Approved",引用:"Reference",引用失败:"quote failed",语音:"[Voice]",语音通话:"Voice Call",重新编辑:"Re-edit",重新发送:"Resend",转发:"Forward",翻译:"Translate",转文字:"Convert",隐藏:"Hidden",转发给:"Forward to",自定义:"[custom message]",自定义消息:"Custom message","腾讯云 IM":"Tencent Cloud Chat",空:"Empty",文本包含本地审核拦截词:"Text contains local moderation blocking words",按住说话:"Hold to speak",抬起发送:"Release to send",抬起取消:"Release to cancel",正在录音:"Recording",继续上滑可取消:"Continue to swipe to cancel","松开手指 取消发送":"Release to cancel",此机型暂不支持复制功能:"This model does not support the copy",请开通翻译功能:"Please open the translation feature",请开通语音转文字功能:"Please open the convert feature",翻译中:"Translating",转换中:"Converting",由IM提供翻译支持:"support by IM",所有人:"All",已达到表情回应上限数量:"You have reached the max reaction limit",等:"and others",人:"users",返回:"Back",关闭:"Close",多选:"Select",合并转发:"Combine Forward",逐条转发:"One-By-One Forward",未选择消息:"No message selected","[草稿]":"[Drafts]","[消息]":"[Message]","[文本]":"[Text]","[自定义消息]":"[Custom Message]","[图片]":"[Image]","[音频]":"[Voice]","[语音]":"[Voice]","[视频]":"[Video]","[文件]":"[File]","[地理位置]":"[Location]","[动画表情]":"[Animated Sticker]","[群提示]":"[Group Tip]","[聊天记录]":"[Chat History]",引用内容已撤回:"The quoted message has been withdrawn",群聊的聊天记录:"Chat history for Group Chat",和:"and",的聊天记录:"chat history","请升级IMSDK到v2.10.1或更高版本查看此消息":"Please upgrade IMSDK to v2.10.1 or higher to view this message",该群聊已被解散:"The group has been dismissed",您已被管理员移出群聊:"You have been removed from the group by the admin.",您已退出该群聊:"You have left the group."},Od={发起会话:"Start chat",发起单聊:"New one-to-one chat",发起群聊:"New group chat",请输入userID:"Enter a user ID",删除会话:"Delete","删除后，将清空该聊天的消息记录":"Once deleted, all chat messages will be cleared.","删除后，将清空该群聊的消息记录":"Once deleted, group chat history will be cleared.",系统通知:"System notification",置顶会话:"Pin",取消置顶:"Unpin",消息免打扰:"Mute Notifications",取消免打扰:"Enable Notifications","有人@我":"Someone @ me","@所有人":"@All",条:"strip",我:"me","网络异常，请您检查网络设置":"Network exception, please check the network settings",您已被群管理员移出群聊:"You have been removed from the group chat by the group administrator",该群聊已被解散:"The group chat has been disband",您已退出该群聊:"You have left the group chat"},Ld={输入groupID搜索:"Enter groupId search",群名称:"Group name",群ID:"Group ID",加入群聊:"Join",解散群聊:"Dissolution",退出群聊:"Quit",群类型:"Group type",请填写验证信息:"Please fill in the verification information",申请加入:"Apply Join",群公告:"Group notice",群成员:"Group member",群管理:"Manage group",好友工作群:"Work",陌生人社交群:"Public",临时会议群:"Meeting",直播群:"AVChatRoom",社群:"Community",自由加入:"Join freely",需要验证:"Require approval",禁止加群:"Disallow group joining",人:"",确认:"Confirm",群头像:"Group profile photo",加群方式:"Group joining mode",转让群组:"Transfer ownership",退出群组:"Quit group",群管理员:"Group admin",全员禁言:"Mute All","全员禁言开启后，只允许群主和管理员发言。":"If Mute All is enabled, only the group owner and admin can speak.",单独禁言人员:"Mute a member",删除成员:"Remove member","确定从群聊中删除该成员？":"Are you sure you want to remove this member from the group chat?","确定从群聊中删除所选成员？":"Are you sure you want to remove selected member(s) from the group chat?",暂无公告:"No notice",发布:"Post",编辑:"Edit",查看更多:"View more",管理员:"Admin",群主:"Group owner",我:"me",添加成员:"Add member",新增管理员:"Add admin",移除管理员:"Revoke admin",新增禁言用户:"Add muted member",移除禁言用户:"Remove muted member",修改群聊名称:"Edit group name","修改群聊名称后，将在群内通知其他成员":"After modifying the group chat name, other members will be notified in the group","仅限中文、字母、数字和下划线，2-20个字":"Chinese, letters, numbers and underscores only, 2-20 words","请先注册 TUIGroup 模块":"Please register the TUIGroup module first",该用户不存在:"The user does not exist",该用户不在群组内:"The user is not in the group",添加群聊:"Add a group chat",该群组不存在:"The group does not exist","创建群聊，请注册 TUIGroup 模块":"To create a group chat, please register the TUIGroup module",创建成功:"Creation successful","发起多人会话（群聊）":"New group chat",选填:"Optional",取消:"Cancel",创建:"Create","类似普通微信群，创建后仅支持已在群内的好友邀请加群，且无需被邀请方同意或群主神奇。详见":"Similar to a WeChat group. Users can join the group only via invitation by existing members. The invitation does not need to be agreed by the invitee or approved by the group owner. See the documentation for details.","类似 QQ 群，创建后群主可以指定群管理员，用户搜索群 ID 发起加群申请后，需要群主或管理员审批通过才能入群。详见":"Similar to a QQ group. After a public group is created, the group owner can designate group admins. To join the group, a user needs to search the group ID and send a request, which needs to be approved by the group owner or an admin before the user can join the group. See the documentation for details. ","创建后可以随意进出，且支持查看入群前消息；适合用于音视频会议场景、在线教育场景等与实时音视频产品结合的场景。详见":"After the group is created, a user can join and quit the group freely and can view the messages sent before joining the group. It is suitable for scenarios that integrate Tencent Real-Time Communication (TRTC), such as audio and video conferences and online education. See the documentation for details.","创建后可以随意进出，没有群成员数量上限，但不支持历史消息存储；适合与直播产品结合，用于弹幕聊天场景。详见":"After creation, a user can join and quit the group freely. The group can have an unlimited number of members, but it does not store message history. It can be combined with Live Video Broadcasting (LVB) to support on-screen comment scenarios. See the documentation for details. ","创建后可以随意进出，最多支持100000人，支持历史消息存储，用户搜索群 ID 发起加群申请后，无需管理员审批即可进群。详见":"After creation, you can enter and leave at will, support up to 100,000 people, support historical message storage, and after users search for group ID and initiate a group application, they can join the group without administrator approval. See product documentation for details. ",产品文档:"product documentation",设置群名称:"Group name",请输入群名称:"Enter the group name",设置群ID:"Group ID",请输入群ID:"Enter the group ID",选择群类型:"Group type","陌生人社交群（Public）":"Stranger social group (Public)","临时会议群（Meeting）":"Temporary meeting group (Meeting)","好友工作群（Work）":"Friends work group (Work)","直播群（AVChatroom）":"Live Streaming Group (AVChatroom)","社群（Community）":"Community（Community）",群组创建成功:"Create group success",群组解散成功:"Dismiss group success",禁言设置成功:"Mute all success",取消禁言成功:"Remove mute success",群名称不能为空:"Group name cannot be empty",群名称修改成功:"Group name modified success","群公告字数超出限制，最大长度为150":"The number of characters in the group announcement exceeds the limit, the maximum length is 150"},$d={群聊通知:"Group Chat Notifications",系统通知:"System Notifications",我的群聊:"My Group Chats",输入ID:"Enter a groupID/userID",群名称:"Group name",群ID:"Group ID",加入群聊:"Join group chat",解散群聊:"Disband group chat",退出群聊:"Quit group chat",进入群聊:"Enter group chat",群类型:"Group type",请填写验证信息:"Enter the verification info",申请加入:"Request to join",已申请:"Requested",接受:"Accept",拒绝:"Refuse",已处理:"Handled",添加群聊:"add group chat",已加入:"joined",该群组不存在:"The group does not exist",加群:"join",我的好友:"Friend",发送消息:"Send Message",个性签名:"Signature",等待管理员同意:"Successful application, waiting for the administrator to agree to join the group application",加群成功:"Join the group successfully",您已是群成员:"You are already a group member",新的联系人:"New Contacts",黑名单:"Blocked List",无搜索结果:"No Result",客服号:"Customer Service List",ID:"ID",联系人:"User",群聊:"Group","添加好友/群聊":"Add friend/group",备注名:"remark",加入黑名单:"block",删除好友:"Delete friend",等待验证:"waiting for verification",验证信息:"verification info",发送申请:"Send application",加入直播群:"Join AVChatRoom",同意:"Agree",删除好友成功:"Delete friend success",删除好友失败:"Delete friend failed",申请已发送:"Application has been sent",申请发送失败:"Application failed to send",进入会话失败:"Failed to enter session",添加好友成功:"Add friend success",同意好友申请失败:"Failed to agree to friend request",拒绝成功:"Reject friend request success",拒绝好友申请失败:"Failed to reject friend request",解散群聊成功:"Dismissed group success",解散群聊失败:"Dismissed group failed",退出群组成功:"Quit group success",退出群组失败:"Quit group failed",申请入群失败:"Application to join the group failed",加入黑名单失败:"Add to blocklist failed",移除黑名单失败:"Remove from blocklist failed","修改备注失败: 备注长度不得超过 96 字节":"Failed to modify the remark: the length of the remark cannot exceed 96 bytes",修改备注成功:"Remark modified success",修改备注失败:"Remark modified failed"},Nd={搜索:"Search",全部:"All",联系人:"Contacts",群聊:"Groups",聊天记录:"Chat History",文本:"Text",文件:"File",其他:"Other","图片/视频":"Image/Video",选择时间:"Select time",今天:"Today",近三天:"Nearly three days",近七天:"Nearly seven days",查看更多:"View more ",条相关:" related ",条与:" related to ",相关的:"keywords",进入聊天:"enter",定位到聊天位置:"Navigate to the chat position",搜索会话内容:"Search in conversation",查看更多历史记录:"View more history message",暂无搜索结果:"No Results",结果:"results",取消:"Cancel","[文本]":"[Text Message]","[图片]":"[Image Message]","[语音]":"[Audio Message]","[视频]":"[Video Message]","[文件]":"[File Message]","[自定义消息]":"[Custom Message]","[系统消息]":"[System Message]","[合并消息]":"[Merged Message]","[位置消息]":"[Position Message]","消息云端搜索失败：":"Message cloud search failed: ","查找联系人失败：":"Failed to find contact: ","查找群聊失败：":"Failed to find group: ",进入会话失败:"Failed to enter conversation"},Gd={tip:{群成员:"group members",加入群组:"joined the group",退出群组:"left the group",被:"by",踢出群组:"was kicked out of the group",成为管理员:"was set as an admin",被撤销管理员:"was revoked",被禁言:" was unmuted",被取消禁言:"cancel the prohibition",群提示消息:"group prompt message",管理员:"The admin",开启全员禁言:"enabled Mute All",取消全员禁言:"disabled Mute All",成为新的群主:"became the new group owner",修改群名为:"changed the group name to",发布新公告:"posted a new notice",把群公告修改为:"changed the group notice to",申请加入群组:"requested to join the group",成功加入群组:"Successfully joined the group",被拒绝:"The request to join the group was refused",你被管理员:"You",群:"group",解散:"disbanded",创建群:"created the group",邀请你加群:"invite you to join the group",你退出群组:"You left the group",你被:"You were",设置为群:"set as group",的管理员:"as an admin",撤销群:"revoked",的管理员身份:"admin role of the group",同意加群:"agreed to join the group",拒接加群:"refused to join the group",自定义群系统通知:"Custom group system notification"},custom:{自定义消息:"Custom message",通话时长:"Call duration",通话结束:"Call End",切换语音通话:"Switch voice call",切换视频通话:"Switch video call",发起通话:"Start a call",取消通话:"Cancel",已接听:"Answered",拒绝通话:"Decline",无应答:"No answer",对本次服务评价:"Rate this service","查看详情>>":"View details >>"}},Bd={取消:"Cancel",完成:"Done",已选中:"Selected",人:"",保存:"Save",请输入userID:"Enter a userID",请输入groupID:"Enter a groupID",确定:"submit",全选:"All",已在群聊中:"exists",查看更多:"More","图片 url 不存在":"Image url does not exist",已取消:"Cancelled",获取权限失败:"Failed to obtain permission",已保存至相册:"Saved to album",图片下载失败:"Image download failed",暂不支持下载此类型图片:"Downloading this type of pictures is not supported yet"},Hd={周:"week(s) ",天:"day(s)",小时:"hour(s) ",分钟:"minute(s)",刚刚:"Just now",前:" ago",昨天:"Yesterday",星期一:"Monday",星期二:"Tuesday",星期三:"Wednesday",星期四:"Thursday",星期五:"Friday",星期六:"Saturday",星期日:"Sunday",一月:"January",二月:"February",三月:"March",四月:"April",五月:"May",六月:"June",七月:"July",八月:"August",九月:"September",十月:"October",十一月:"November",十二月:"December",一:"Mon",二:"Tues",三:"Wed",四:"Thur",五:"Fri",六:"Sat",日:"Sun"},Fd={请对本次服务进行评价:"Please rate this service",提交评价:"Feedback","常用语-快捷回复工具":"Common Expressions - Quick Reply Tool",使用:"Build with",自定义消息:"Custom message",搭建:"","在吗？在吗？在吗？重要的话说三遍。":"Are you there? ","好久没聊天了，快来和我说说话～":"It’s been a long time. How about you?","好的，就这么说定了。":"Okay. It's a deal.","感恩的心，感谢有你。":"So grateful! ","糟糕！是心动的感觉！":"Oh, no. Flipped.","心疼地抱抱自己，我太难了！":"Give myself a warm hug. ","没关系，别在意，事情过去就过去了。":"Take it easy.","早上好，今天也是让人期待的一天呢！":"Good morning. Have a wonderful day.","熬夜有什么用，又没人陪你聊天，早点休息吧。":"It's better to go to bed early."},jd={请对本次服务进行评价:"Please rate this service",提交评价:"Feedback",服务评价工具:"Service rate tool",使用:"Build with",自定义消息:"Custom message",搭建:"",星:"Star"},jl={"[TUIEmoji_Smile]":"[Smile]","[TUIEmoji_Expect]":"[Expect]","[TUIEmoji_Blink]":"[Blink]","[TUIEmoji_Guffaw]":"[Guffaw]","[TUIEmoji_KindSmile]":"[KindSmile]","[TUIEmoji_Haha]":"[Haha]","[TUIEmoji_Cheerful]":"[Cheerful]","[TUIEmoji_Speechless]":"[Speechless]","[TUIEmoji_Amazed]":"[Amazed]","[TUIEmoji_Sorrow]":"[Sorrow]","[TUIEmoji_Complacent]":"[Complacent]","[TUIEmoji_Silly]":"[Silly]","[TUIEmoji_Lustful]":"[Lustful]","[TUIEmoji_Giggle]":"[Giggle]","[TUIEmoji_Kiss]":"[Kiss]","[TUIEmoji_Wail]":"[Wail]","[TUIEmoji_TearsLaugh]":"[TearsLaugh]","[TUIEmoji_Trapped]":"[Trapped]","[TUIEmoji_Mask]":"[Mask]","[TUIEmoji_Fear]":"[Fear]","[TUIEmoji_BareTeeth]":"[BareTeeth]","[TUIEmoji_FlareUp]":"[FlareUp]","[TUIEmoji_Yawn]":"[Yawn]","[TUIEmoji_Tact]":"[Tact]","[TUIEmoji_Stareyes]":"[StarEyes]","[TUIEmoji_ShutUp]":"[ShutUp]","[TUIEmoji_Sigh]":"[Sigh]","[TUIEmoji_Hehe]":"[Hehe]","[TUIEmoji_Silent]":"[Silent]","[TUIEmoji_Surprised]":"[Surprised]","[TUIEmoji_Askance]":"[Askance]]","[TUIEmoji_Ok]":"[OK]","[TUIEmoji_Shit]":"[Shit]","[TUIEmoji_Monster]":"[Monster]","[TUIEmoji_Daemon]":"[Daemon]","[TUIEmoji_Rage]":"[Rage]","[TUIEmoji_Fool]":"[Fool]","[TUIEmoji_Pig]":"[Pig]","[TUIEmoji_Cow]":"[Cow]","[TUIEmoji_Ai]":"[AI]","[TUIEmoji_Skull]":"[Skull]","[TUIEmoji_Bombs]":"[Bombs]","[TUIEmoji_Coffee]":"[Coffee]","[TUIEmoji_Cake]":"[Cake]","[TUIEmoji_Beer]":"[Beer]","[TUIEmoji_Flower]":"[Flower]","[TUIEmoji_Watermelon]":"[Watermelon]","[TUIEmoji_Rich]":"[Rich]","[TUIEmoji_Heart]":"[Heart]","[TUIEmoji_Moon]":"[Moon]","[TUIEmoji_Sun]":"[Sun]","[TUIEmoji_Star]":"[Star]","[TUIEmoji_RedPacket]":"[RedPacket]","[TUIEmoji_Celebrate]":"[Celebrate]","[TUIEmoji_Bless]":"[Bless]","[TUIEmoji_Fortune]":"[Fortune]","[TUIEmoji_Convinced]":"[Convinced]","[TUIEmoji_Prohibit]":"[Prohibit]","[TUIEmoji_666]":"[666]","[TUIEmoji_857]":"[857]","[TUIEmoji_Knife]":"[Knife]","[TUIEmoji_Like]":"[Like]"},Yd={en:{取消:"Cancel",发送:"Send",系统通知:"System notification",关闭:"Close",确定:"Save",开始时间:"Start Date",结束时间:"End Date",消息:"Messages",通讯录:"Contacts",欢迎使用腾讯云即时通信IM:"Welcome to Tencent Cloud Chat",TUIChat:Pd,TUIConversation:Od,TUIGroup:Ld,TUIContact:$d,message:Gd,component:Bd,time:Hd,Evaluate:jd,Words:Fd,TUISearch:Nd,Emoji:jl}},zd={"【安全提示】本 APP 仅用于体验腾讯云即时通信 IM 产品功能，不可用于业务洽谈与拓展。请勿轻信汇款、中奖等涉及钱款的信息，勿轻易拨打陌生电话，谨防上当受骗。":"【安全提示】本 APP 仅用于体验腾讯云即时通信 IM 产品功能，不可用于业务洽谈与拓展。请勿轻信汇款、中奖等涉及钱款的信息，勿轻易拨打陌生电话，谨防上当受骗。","按Enter发送，Ctrl+Enter换行":"按Enter发送，Ctrl+Enter换行",表情:"[表情]",查看更多:"查看更多",撤回:"撤回",撤回了一条消息:"撤回了一条消息",打开:"打开",单击下载:"单击下载",点此投诉:"点此投诉",点击处理:"点击处理",对方正在输入:"对方正在输入...",发起群视频:"发起群视频",发起群语音:"发起群语音",发起通话:"发起通话",发送失败:"发送失败",复制:"复制",该消息不存在:"该消息不存在",关闭阅读状态:"关闭",管理员开启全员禁言:"管理员开启全员禁言",欢迎使用TUICallKit:"欢迎使用腾讯云音视频通话组件TUICallKit ",回到最新位置:"回到最新位置",回复:"回复",回复详情:"回复详情",集成TUICallKit:"集成 TUICallKit ","检测到您暂未集成TUICallKit，无法体验音视频通话功能":"检测到您暂未集成TUICallKit，无法体验音视频通话功能。",结束群聊:"结束群聊",进行体验:"进行体验。",经度:"经度",拒绝:"拒绝",拒绝通话:"拒绝通话",开通腾讯实时音视频服务:"开通腾讯实时音视频服务",聊天记录:"[聊天记录]",描述:"描述",内容包含敏感词汇:"内容包含敏感词汇",您:"您",您当前购买使用的套餐包暂未开通此功能:"您当前购买使用的套餐包暂未开通此功能。",您当前购买使用的套餐包暂未开通群消息已读回执功能:"您当前购买使用的套餐包暂未开通【群消息已读回执】功能，请升级至旗舰版进行体验",您当前购买使用的套餐包暂未开通在线用户列表功能:"您当前购买使用的套餐包暂未开通【在线用户列表】功能，请升级至旗舰版进行体验",您已被管理员禁言:"您已被管理员禁言",您有:"您有",请点击:"请点击",请输入消息:"请输入消息",取消:"取消",取消通话:"取消通话",全部已读:"全部已读",确定:"确定","确认重发该消息？":"确认重发该消息？",人关闭阅读状态:"人关闭阅读状态",人未读:"人未读",人已读:"人已读",删除:"删除",涉及敏感内容:"涉及敏感内容",申请加入:"申请加入",视频:"[视频]",视频通话:"视频通话",条回复:"条回复",条入群申请:"条入群申请",条新消息:"条新消息",通话时长:"通话时长",同意:"同意",图片:"[图片]","图片消息失败,无效的图片格式":"图片消息失败,无效的图片格式",纬度:"纬度",未读:"未读",位置:"[位置]",文件:"[文件]","文件不存在,请检查文件路径是否正确":"文件不存在,请检查文件路径是否正确","文件大小超出了限制,如果上传文件,最大限制是100MB":"文件大小超出了限制,如果上传文件,最大限制是100MB","文件消息失败,禁止发送违规封禁的文件":"文件消息失败,禁止发送违规封禁的文件",我:"我",无法查看:"无法查看",无法定位到原消息:"无法定位到原消息",无法收听:"无法收听",正在加载:"正在加载...",加载结束:"加载结束",无应答:"无应答",系统消息:"系统消息",消息:"message","消息或者资料中文本存在敏感内容,发送失败":"消息或者资料中文本存在敏感内容,发送失败",消息详情:"消息详情","消息长度超出限制,消息长度不要超过12K":"消息长度超出限制,消息长度不要超过12K","消息中图片存在敏感内容,发送失败":"消息中图片存在敏感内容,发送失败",选择提醒的人:"选择提醒的人",已读:"已读",已过撤回时限:"已过撤回时限",已接听:"已接听",已拒绝:"已拒绝",已同意:"已同意",引用:"引用",引用失败:"引用失败",语音:"[语音]",语音通话:"语音通话",重新编辑:"重新编辑",重新发送:"重新发送",转发:"转发",翻译:"翻译",转文字:"转文字",隐藏:"隐藏",转发给:"转发给",自定义:"[自定义消息]",自定义消息:"自定义消息","腾讯云 IM":"腾讯云 IM",空:"空",文本包含本地审核拦截词:"文本包含本地审核拦截词",按住说话:"按住说话",抬起发送:"抬起发送",抬起取消:"抬起取消",正在录音:"正在录音",继续上滑可取消:"继续上滑可取消","松开手指 取消发送":"松开手指 取消发送",此机型暂不支持复制功能:"此机型暂不支持复制功能",请开通翻译功能:"请开通翻译功能",请开通语音转文字功能:"请开通语音转文字功能",翻译中:"翻译中",转换中:"转换中",由IM提供翻译支持:"由IM提供翻译支持",所有人:"所有人",已达到表情回应上限数量:"已达到表情回应上限数量",等:"等",人:"人",返回:"返回",关闭:"关闭",多选:"多选",合并转发:"合并转发",逐条转发:"逐条转发",未选择消息:"未选择消息",引用内容已撤回:"引用内容已撤回","[草稿]":"[草稿]","[消息]":"[消息]","[文本]":"[文本]","[自定义消息]":"[自定义消息]","[图片]":"[图片]","[音频]":"[音频]","[语音]":"[语音]","[视频]":"[视频]","[文件]":"[文件]","[地理位置]":"[地理位置]","[动画表情]":"[动画表情]","[群提示]":"[群提示]","[聊天记录]":"[聊天记录]",群聊的聊天记录:"群聊的聊天记录",和:"和",的聊天记录:"的聊天记录","请升级IMSDK到v2.10.1或更高版本查看此消息":"请升级IMSDK到v2.10.1或更高版本查看此消息",您已被管理员移出群聊:"您已被管理员移出群聊",该群聊已被解散:"该群聊已被解散",您已退出该群聊:"您已退出该群聊"},Vd={发起会话:"发起会话",发起单聊:"发起单聊",发起群聊:"发起群聊",请输入userID:"请输入userID",删除会话:"删除会话","删除后，将清空该聊天的消息记录":"删除后，将清空该聊天的消息记录","删除后，将清空该群聊的消息记录":"删除后，将清空该群聊的消息记录",置顶会话:"置顶会话",取消置顶:"取消置顶",消息免打扰:"消息免打扰",取消免打扰:"取消免打扰",系统通知:"系统通知","有人@我":"有人@我","@所有人":"@所有人",条:"条",我:"我","网络异常，请您检查网络设置":"网络异常，请您检查网络设置",您已被群管理员移出群聊:"您已被群管理员移出群聊",该群聊已被解散:"该群聊已被解散",您已退出该群聊:"您已退出该群聊"},Wd={输入groupID搜索:"输入groupID搜索",群名称:"群名称",群ID:"群ID",加入群聊:"加入群聊",解散群聊:"解散群聊",退出群聊:"退出群聊",群类型:"群类型",请填写验证信息:"请填写验证信息",申请加入:"申请加入",已申请:"已申请",群公告:"群公告",群成员:"群成员",群管理:"群管理",好友工作群:"好友工作群",陌生人社交群:"陌生人社交群",临时会议群:"临时会议群",直播群:"直播群",社群:"社群",自由加入:"自由加入",需要验证:"需要验证",禁止加群:"禁止加群",人:"人",群头像:"群头像",加群方式:"加群方式",转让群组:"转让群组",退出群组:"退出群组",群管理员:"群管理员",全员禁言:"全员禁言","全员禁言开启后，只允许群主和管理员发言。":"全员禁言开启后，只允许群主和管理员发言。",单独禁言人员:"单独禁言人员",删除成员:"删除成员","确定从群聊中删除该成员？":"确定从群聊中删除该成员？","确定从群聊中删除所选成员？":"确定从群聊中删除所选成员？",暂无公告:"暂无公告",发布:"发布",编辑:"编辑",查看更多:"查看更多",管理员:"管理员",群主:"群主",我:"我",确认:"确认",添加成员:"添加成员",新增管理员:"新增管理员",移除管理员:"移除管理员",新增禁言用户:"新增禁言用户",移除禁言用户:"移除禁言用户",修改群聊名称:"修改群聊名称","修改群聊名称后，将在群内通知其他成员":"修改群聊名称后，将在群内通知其他成员","仅限中文、字母、数字和下划线，2-20个字":"仅限中文、字母、数字和下划线，2-20个字","请先注册 TUIGroup 模块":"请先注册 TUIGroup 模块",该用户不存在:"该用户不存在",该用户不在群组内:"该用户不在群组内",添加群聊:"添加群聊",该群组不存在:"该群组不存在","创建群聊，请注册 TUIGroup 模块":"创建群聊，请注册 TUIGroup 模块",创建成功:"创建成功","发起多人会话（群聊）":"发起多人会话（群聊）",选填:"选填",取消:"取消",创建:"创建","类似普通微信群，创建后仅支持已在群内的好友邀请加群，且无需被邀请方同意或群主神奇。详见":"类似普通微信群，创建后仅支持已在群内的好友邀请加群，且无需被邀请方同意或群主神奇。详见","类似 QQ 群，创建后群主可以指定群管理员，用户搜索群 ID 发起加群申请后，需要群主或管理员审批通过才能入群。详见":"类似 QQ 群，创建后群主可以指定群管理员，用户搜索群 ID 发起加群申请后，需要群主或管理员审批通过才能入群。详见","创建后可以随意进出，且支持查看入群前消息；适合用于音视频会议场景、在线教育场景等与实时音视频产品结合的场景。详见":"创建后可以随意进出，且支持查看入群前消息；适合用于音视频会议场景、在线教育场景等与实时音视频产品结合的场景。详见","创建后可以随意进出，没有群成员数量上限，但不支持历史消息存储；适合与直播产品结合，用于弹幕聊天场景。详见":"创建后可以随意进出，没有群成员数量上限，但不支持历史消息存储；适合与直播产品结合，用于弹幕聊天场景。详见","创建后可以随意进出，最多支持100000人，支持历史消息存储，用户搜索群 ID 发起加群申请后，无需管理员审批即可进群。详见":"创建后可以随意进出，最多支持100000人，支持历史消息存储，用户搜索群 ID 发起加群申请后，无需管理员审批即可进群。详见",产品文档:"产品文档",设置群名称:"设置群名称",请输入群名称:"请输入群名称",设置群ID:"设置群ID",请输入群ID:"请输入群ID",选择群类型:"选择群类型","陌生人社交群（Public）":"陌生人社交群（Public）","临时会议群（Meeting）":"临时会议群（Meeting）","好友工作群（Work）":"好友工作群（Work）","直播群（AVChatroom）":"直播群（AVChatroom）","社群（Community）":"社群（Community）",群组创建成功:"群组创建成功",群组解散成功:"群组解散成功",禁言设置成功:"禁言设置成功",取消禁言成功:"取消禁言成功",群名称不能为空:"群名称不能为空",群名称修改成功:"群名称修改成功","群公告字数超出限制，最大长度为150":"群公告字数超出限制，最大长度为150"},Kd={群聊通知:"群聊通知",系统通知:"系统通知",我的群聊:"我的群聊",输入ID:"请输入用户/群聊 ID，回车搜索",群名称:"群名称",群ID:"群ID",加入群聊:"加入群聊",解散群聊:"解散群聊",退出群聊:"退出群聊",进入群聊:"进入群聊",群类型:"群类型",请填写验证信息:"请填写验证信息",申请加入:"申请加入",已申请:"已申请",接受:"接受",拒绝:"拒绝",已处理:"已处理",添加群聊:"添加群聊",已加入:"已加入",该群组不存在:"该群组不存在",加群:"加群",我的好友:"我的好友",发送消息:"发送消息",个性签名:"个性签名",等待管理员同意:"申请成功，等待管理员同意入群申请",加群成功:"加群成功",您已是群成员:"您已是群成员",新的联系人:"新的联系人",黑名单:"黑名单",无搜索结果:"无搜索结果",客服号:"客服号",ID:"ID",联系人:"联系人",群聊:"群聊","添加好友/群聊":"添加好友/群聊",备注名:"备注名",加入黑名单:"加入黑名单",删除好友:"删除好友",等待验证:"等待验证",验证信息:"验证信息",发送申请:"发送申请",加入直播群:"加入直播群",同意:"同意",删除好友成功:"删除好友成功",删除好友失败:"删除好友失败",申请已发送:"申请已发送",申请发送失败:"申请发送失败",进入会话失败:"进入会话失败",添加好友成功:"添加好友成功",同意好友申请失败:"同意好友申请失败",拒绝成功:"拒绝成功",拒绝好友申请失败:"拒绝好友申请失败",解散群聊成功:"解散群聊成功",解散群聊失败:"解散群聊失败",退出群组成功:"退出群组成功",退出群组失败:"退出群组失败",申请入群失败:"申请入群失败",加入黑名单失败:"加入黑名单失败",移除黑名单失败:"移除黑名单失败","修改备注失败: 备注长度不得超过 96 字节":"修改备注失败: 备注长度不得超过 96 字节",修改备注成功:"修改备注成功",修改备注失败:"修改备注失败"},Zd={搜索:"搜索",全部:"全部",联系人:"联系人",群聊:"群聊",聊天记录:"聊天记录",文本:"文本",文件:"文件","图片/视频":"图片/视频",其他:"其他",选择时间:"选择时间",今天:"今天",近三天:"近三天",近七天:"近七天",查看更多:"查看更多",条相关:"条相关",条与:"条与",相关的:"相关的",进入聊天:"进入聊天",定位到聊天位置:"定位到聊天位置",搜索会话内容:"搜索会话内容",查看更多历史记录:"查看更多历史记录",暂无搜索结果:"暂无搜索结果",结果:"结果",取消:"取消","[文本]":"[文本]","[图片]":"[图片]","[语音]":"[语音]","[视频]":"[视频]","[文件]":"[文件]","[自定义消息]":"[自定义消息]","[系统消息]":"[系统消息]","[合并消息]":"[合并消息]","[位置消息]":"[位置消息]","消息云端搜索失败：":"消息云端搜索失败：","查找联系人失败：":"查找联系人失败：","查找群聊失败：":"查找群聊失败：",进入会话失败:"进入会话失败"},qd={tip:{群成员:"群成员",加入群组:"加入群组",退出群组:"退出群组",被:"被",踢出群组:"踢出群组",成为管理员:"成为管理员",被撤销管理员:"被撤销管理员",被禁言:"被禁言",被取消禁言:"被取消禁言",群提示消息:"群提示消息",管理员:"管理员",开启全员禁言:"开启全员禁言",取消全员禁言:"取消全员禁言",成为新的群主:"成为新的群主",修改群名为:"修改群名为",发布新公告:"发布新公告",把群公告修改为:"把群公告修改为",申请加入群组:"申请加入群组",成功加入群组:"成功加入群组",被拒绝:"被拒绝",你被管理员:"你被管理员",群:"群",解散:"解散",创建群:"创建群",邀请你加群:"邀请你加群",你退出群组:"你退出群组",你被:"你被",设置为群:"设置为群",的管理员:"的管理员",撤销群:"撤销群",的管理员身份:"的管理员身份",同意加群:"同意加群",拒接加群:"拒接加群",自定义群系统通知:"自定义群系统通知"},custom:{自定义消息:"自定义消息",通话时长:"通话时长",通话结束:"通话结束",切换语音通话:"切换语音通话",切换视频通话:"切换视频通话",发起通话:"发起通话",取消通话:"取消通话",已接听:"已接听",拒绝通话:"拒绝通话",无应答:"无应答",对本次服务评价:"对本次服务评价","查看详情>>":"查看详情>>"}},Jd={取消:"取消",完成:"完成",已选中:"已选中",人:"人",保存:"保存",请输入userID:"请输入userID",请输入groupID:"请输入groupID",确定:"确定",全选:"全选",已在群聊中:"已在群聊中",查看更多:"查看更多","图片 url 不存在":"图片 url 不存在",已取消:"已取消",获取权限失败:"获取权限失败",已保存至相册:"已保存至相册",图片下载失败:"图片下载失败",暂不支持下载此类型图片:"暂不支持下载此类型图片"},Xd={周:"周",天:"天",小时:"小时",分钟:"分钟",刚刚:"刚刚",前:"前",昨天:"昨天",星期一:"星期一",星期二:"星期二",星期三:"星期三",星期四:"星期四",星期五:"星期五",星期六:"星期六",星期日:"星期日",一月:"一月",二月:"二月",三月:"三月",四月:"四月",五月:"五月",六月:"六月",七月:"七月",八月:"八月",九月:"九月",十月:"十月",十一月:"十一月",十二月:"十二月",一:"一",二:"二",三:"三",四:"四",五:"五",六:"六",日:"日"},Qd={"常用语-快捷回复工具":"常用语-快捷回复工具","在吗？在吗？在吗？重要的话说三遍。":"在吗？在吗？在吗？重要的话说三遍。","好久没聊天了，快来和我说说话～":"好久没聊天了，快来和我说说话～","好的，就这么说定了。":"好的，就这么说定了。","感恩的心，感谢有你。":"感恩的心，感谢有你。","糟糕！是心动的感觉！":"糟糕！是心动的感觉！","心疼地抱抱自己，我太难了！":"心疼地抱抱自己，我太难了！","没关系，别在意，事情过去就过去了。":"没关系，别在意，事情过去就过去了。","早上好，今天也是让人期待的一天呢！":"早上好，今天也是让人期待的一天呢！","熬夜有什么用，又没人陪你聊天，早点休息吧。":"熬夜有什么用，又没人陪你聊天，早点休息吧。"},eh={请对本次服务进行评价:"请对本次服务进行评价",提交评价:"提交评价",服务评价工具:"服务评价工具",使用:"使用",自定义消息:"自定义消息",搭建:"搭建",星:"星"},Ua={"[TUIEmoji_Smile]":"[微笑]","[TUIEmoji_Expect]":"[期待]","[TUIEmoji_Blink]":"[眨眼]","[TUIEmoji_Guffaw]":"[大笑]","[TUIEmoji_KindSmile]":"[姨母笑]","[TUIEmoji_Haha]":"[哈哈哈]","[TUIEmoji_Cheerful]":"[愉快]","[TUIEmoji_Speechless]":"[无语]","[TUIEmoji_Amazed]":"[惊讶]","[TUIEmoji_Sorrow]":"[悲伤]","[TUIEmoji_Complacent]":"[得意]","[TUIEmoji_Silly]":"[傻了]","[TUIEmoji_Lustful]":"[色]","[TUIEmoji_Giggle]":"[憨笑]","[TUIEmoji_Kiss]":"[亲亲]","[TUIEmoji_Wail]":"[大哭]","[TUIEmoji_TearsLaugh]":"[哭笑]","[TUIEmoji_Trapped]":"[困]","[TUIEmoji_Mask]":"[口罩]","[TUIEmoji_Fear]":"[恐惧]","[TUIEmoji_BareTeeth]":"[龇牙]","[TUIEmoji_FlareUp]":"[发怒]","[TUIEmoji_Yawn]":"[打哈欠]","[TUIEmoji_Tact]":"[机智]","[TUIEmoji_Stareyes]":"[星星眼]","[TUIEmoji_ShutUp]":"[闭嘴]","[TUIEmoji_Sigh]":"[叹气]","[TUIEmoji_Hehe]":"[呵呵]","[TUIEmoji_Silent]":"[收声]","[TUIEmoji_Surprised]":"[惊喜]","[TUIEmoji_Askance]":"[白眼]","[TUIEmoji_Ok]":"[OK]","[TUIEmoji_Shit]":"[便便]","[TUIEmoji_Monster]":"[怪兽]","[TUIEmoji_Daemon]":"[恶魔]","[TUIEmoji_Rage]":"[恶魔怒]","[TUIEmoji_Fool]":"[衰]","[TUIEmoji_Pig]":"[猪]","[TUIEmoji_Cow]":"[牛]","[TUIEmoji_Ai]":"[AI]","[TUIEmoji_Skull]":"[骷髅]","[TUIEmoji_Bombs]":"[炸弹]","[TUIEmoji_Coffee]":"[咖啡]","[TUIEmoji_Cake]":"[蛋糕]","[TUIEmoji_Beer]":"[啤酒]","[TUIEmoji_Flower]":"[花]","[TUIEmoji_Watermelon]":"[瓜]","[TUIEmoji_Rich]":"[壕]","[TUIEmoji_Heart]":"[爱心]","[TUIEmoji_Moon]":"[月亮]","[TUIEmoji_Sun]":"[太阳]","[TUIEmoji_Star]":"[星星]","[TUIEmoji_RedPacket]":"[红包]","[TUIEmoji_Celebrate]":"[庆祝]","[TUIEmoji_Bless]":"[福]","[TUIEmoji_Fortune]":"[发]","[TUIEmoji_Convinced]":"[服]","[TUIEmoji_Prohibit]":"[禁]","[TUIEmoji_666]":"[666]","[TUIEmoji_857]":"[857]","[TUIEmoji_Knife]":"[刀]","[TUIEmoji_Like]":"[赞]"},th={zh_cn:{取消:"取消",发送:"发送",系统通知:"系统通知",关闭:"关闭",确定:"确定",开始时间:"开始时间",结束时间:"结束时间",消息:"消息",通讯录:"通讯录",欢迎使用腾讯云即时通信IM:"欢迎使用腾讯云即时通信IM",TUIChat:zd,TUIConversation:Vd,TUIGroup:Wd,TUIContact:Kd,message:qd,component:Jd,time:Xd,Evaluate:eh,Words:Qd,TUISearch:Zd,Emoji:Ua}},sh={...Yd,...th};var tn;let nh=(tn=class{constructor(){Ue(this,"chat");Ue(this,"SDKAppID");Ue(this,"TUICore");Ue(this,"TUIChatEngine");Ue(this,"TUIGlobal");Ue(this,"TUIComponents",{});Ue(this,"TUIPlugins",{});this.TUICore=ze,this.TUIChatEngine=Z,this.TUIGlobal=fe,this.SDKAppID=0,this.TUIGlobal._isTIMCallKit=!0,ze.registerEvent(_e.TUILogin.EVENT.LOGIN_STATE_CHANGED,_e.TUILogin.EVENT_SUB_KEY.USER_LOGIN_SUCCESS,this),ze.registerEvent(_e.TUITranslate.EVENT.LANGUAGE_CHANGED,_e.TUITranslate.EVENT_SUB_KEY.CHANGE_SUCCESS,this),ze.registerService(_e.TUITranslatePlugin.SERVICE.NAME,1),ze.registerService(_e.TUIVoiceToTextPlugin.SERVICE.NAME,1)}onNotifyEvent(s,t,n){if(s===_e.TUILogin.EVENT.LOGIN_STATE_CHANGED)switch(t){case _e.TUILogin.EVENT_SUB_KEY.USER_LOGIN_SUCCESS:this.login();break}if(s===_e.TUITranslate.EVENT.LANGUAGE_CHANGED)switch(t){case _e.TUITranslate.EVENT_SUB_KEY.CHANGE_SUCCESS:n!=null&&n.language&&A.changeLanguage(n.language);break}}init(){tn.isInitialized||(tn.isInitialized=!0,A.provideLanguages({...sh}),A.useI18n(),fe.TUIComponents=this.TUIComponents,fe.TUIPlugins=this.TUIPlugins,console.warn("[TUIChatKit]: init success."))}login(){const{chat:s,SDKAppID:t,userID:n,userSig:a}=Xr.getContext();return this.SDKAppID=t,this.TUIChatEngine.login({chat:s,SDKAppID:t,userID:n,userSig:a}),this.chat=s,this.TUIChatEngine}component(s,t,n){var a,i;return(a=this==null?void 0:this.TUIComponents)!=null&&a.componentName?console.warn(`[TUIChatKit]: ${(i=this==null?void 0:this.TUIComponents)==null?void 0:i.componentName} component has already been applied to target TUIChatEngine.`):(this.TUIComponents[s]=t,n==null||n.component(s,t)),n&&!fe.Vue&&(fe.Vue=n),this.TUIChatEngine}components(s,t){var n;return!s||!Rd(s)?console.warn("[TUIChatKit]: components is empty or not object."):(n=Object==null?void 0:Object.keys(s))==null||n.forEach(a=>{this.component(a,s[a],t)}),this.TUIChatEngine}use(s,t,n){if(!this.TUICore){console.warn(`[TUIChatKit]: Plugin ${this.TUIPlugins[s]} can't be used before init.`);return}return this.TUIPlugins[s]?console.warn(`[TUIChatKit]: Plugin ${this.TUIPlugins[s]} has already been applied to target TUIChatEngine.`):t&&yr(t==null?void 0:t.plugin)?(this.TUIPlugins[s]=t,t==null||t.plugin(this,n)):yr(t)?(this.TUIPlugins[s]=t,t(this,n)):console.warn('[TUIChatKit]: A plugin must either be a function or an object with an "plugin" function.'+this.TUIPlugins[s]+"does not comply with the above rules."),this.TUIChatEngine}},Ue(tn,"isInitialized"),tn);const rn="/admin/assets/back-e9626a2e.svg",Ns=class Ns{constructor(){Ue(this,"chatType");Ue(this,"features");this.chatType="",this.features={DownloadFile:!0,CopyMessage:!0,DeleteMessage:!0,RevokeMessage:!0,QuoteMessage:!0,ForwardMessage:!0,TranslateMessage:!0,VoiceToText:!0,MultiSelection:!0,EmojiReaction:!0,InputEmoji:!0,InputStickers:!0,InputImage:!0,InputVoice:!0,InputVideo:!0,InputFile:!0,InputEvaluation:!0,InputQuickReplies:!0,InputMention:!0,MessageSearch:!0,ReadStatus:!0}}static getInstance(){return Ns.instance||(Ns.instance=new Ns),Ns.instance}setChatType(s){this.chatType=s}getChatType(){return this.chatType}hideTUIChatFeatures(s){s&&s.forEach(t=>{this.features[t]&&(this.features[t]=!1)})}getFeatureConfig(s){return s?this.features[s]:this.features}};Ue(Ns,"instance");let xo=Ns;const Uo=xo.getInstance();Uo.hideTUIChatFeatures.bind(Uo);const Ft=Uo,ah=e=>(nn("data-v-008bbcbe"),e=e(),an(),e),oh={class:"chat-header-container"},ih=ah(()=>T("div",null,null,-1)),rh=["onClick"],lh=ne({__name:"index",props:{headerExtensionList:{default:()=>[]}},emits:["closeChat"],setup(e,{emit:s}){const t=e,n=s,a=w(),i=w(""),u=w(!1),c=w(""),l=w(Ft.getChatType()!==_e.TUIChat.TYPE.ROOM);Ne(()=>{j.watch(V.CONV,{currentConversation:p}),j.watch(V.CHAT,{typingStatus:f})}),at(()=>{j.unwatch(V.CONV,{currentConversation:p}),j.unwatch(V.CHAT,{typingStatus:f})});const r=h=>{n("closeChat",h)},d=h=>{var g,_;(_=(g=h.listener).onClicked)==null||_.call(g,{groupID:c.value})};function p(h){var g,_,m;a.value=h,c.value=(_=(g=a.value)==null?void 0:g.groupProfile)==null?void 0:_.groupID,i.value=(m=a==null?void 0:a.value)==null?void 0:m.getShowName()}function f(h){var g;u.value=h,u.value?i.value=A.t("TUIChat.对方正在输入"):i.value=((g=a.value)==null?void 0:g.getShowName())||""}return(h,g)=>(v(),b("div",{class:P(["chat-header",!o(F)&&"chat-header-h5"])},[!o(F)&&o(l)?(v(),b("div",{key:0,class:P(["chat-header-back",!o(F)&&"chat-header-h5-back"]),onClick:g[0]||(g[0]=_=>r(o(a).conversationID))},[K(pe,{file:o(rn)},null,8,["file"])],2)):H("",!0),T("div",oh,[o(l)?(v(),b("div",{key:0,class:P(["chat-header-content",!o(F)&&"chat-header-h5-content"])},D(o(i)),3)):H("",!0),ih]),T("div",{class:P(["chat-header-setting",!o(F)&&"chat-header-h5-setting"])},[(v(!0),b(ve,null,Te(t.headerExtensionList,(_,m)=>(v(),b("div",{key:m,onClick:Oe(y=>d(_),["stop"])},[K(pe,{file:_.icon},null,8,["file"])],8,rh))),128))],2)],2))}});const ch=ae(lh,[["__scopeId","data-v-008bbcbe"]]),uh={product:{label:"产品文档",url:"https://cloud.tencent.com/document/product/269/1499#.E7.BE.A4.E7.BB.84.E5.8A.9F.E8.83.BD"},customMessage:{label:"自定义消息",url:"https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#createCustomMessage"},complaint:{label:"点此投诉",url:"https://cloud.tencent.com/apply/p/xc3oaubi98g"},implement:{label:"集成TUICallKit",url:"https://cloud.tencent.com/document/product/269/79861"},purchase:{label:"开通腾讯实时音视频服务",url:"https://cloud.tencent.com/document/product/1640/79968"}},dh=uh,hh=["src"],ph=["src"],fh=["src"],gh=ne({__name:"index",props:{url:{default:"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png"},size:{default:"36px"},borderRadius:{default:"5px"},useSkeletonAnimation:{type:Boolean,default:!1}},emits:["onLoad","onError"],setup(e,{emit:s}){const t=w("https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png"),n=s,a=e,{size:i,url:u,borderRadius:c,useSkeletonAnimation:l}=Ea(a);let r=0;const d=w(!1),p=w(!1);function f(g){d.value=!0,n("onLoad",g)}function h(g){r+=1,!(r>3)&&(ie?p.value=!0:g.currentTarget.src=t.value,n("onError",g))}return(g,_)=>(v(),b("div",{class:"avatar-container",style:jt({width:o(i),height:o(i),borderRadius:o(c)})},[o(ie)?(v(),b(ve,{key:0},[o(p)?(v(),b("image",{key:1,class:"avatar-image",src:o(t),onLoad:f,onError:h},null,40,ph)):(v(),b("image",{key:0,class:"avatar-image",src:o(u)||o(t),onLoad:f,onError:h},null,40,hh))],64)):(v(),b("img",{key:1,class:"avatar-image",src:o(u)||o(t),onLoad:f,onError:h},null,40,fh)),o(l)&&!o(d)?(v(),b("div",{key:2,class:P({placeholder:!0,hidden:o(d),"skeleton-animation":o(l)})},null,2)):H("",!0)],4))}});const gs=ae(gh,[["__scopeId","data-v-c79d3f5a"]]),_h=ne({__name:"index",props:{visible:{type:Boolean,default:!0},zIndex:{default:9999},useMask:{type:Boolean,default:!0},maskColor:{default:"rgba(0, 0, 0, 0.6)"},isFullScreen:{type:Boolean,default:!0},width:{default:"auto"},height:{default:"auto"}},emits:["onOverlayClick"],setup(e,{expose:s,emit:t}){const n=t,a=e,i=w(),u=w(a.visible);Ze(()=>a.visible,l=>{l?u.value=!0:setTimeout(()=>{u.value=!1},150)},{immediate:!0});function c(){n("onOverlayClick")}return s({overlayDomRef:i}),(l,r)=>o(u)?(v(),b("div",{key:0,ref_key:"overlayDomRef",ref:i,class:"overlay-container",style:jt({position:a.isFullScreen?"fixed":"absolute",zIndex:a.zIndex})},[a.useMask?(v(),b("div",{key:0,class:P({"overlay-mask":!0,"fade-in":a.visible}),style:jt({backgroundColor:a.maskColor}),onClick:c,onTouchstart:Oe(c,["prevent","stop"])},null,38)):H("",!0),T("div",{class:P({"overlay-content":!0,"full-screen":a.isFullScreen})},[nt(l.$slots,"default",{},void 0,!0)],2)],4)):H("",!0)}});const qn=ae(_h,[["__scopeId","data-v-47bc5332"]]),vh={class:"drawer-container"},mh=ne({__name:"index",props:{visible:{type:Boolean,default:!0},popDirection:{default:"bottom"},useMask:{type:Boolean,default:!0},isFullScreen:{type:Boolean,default:!0},overlayColor:{},drawerStyle:{default:()=>({})}},emits:["onOverlayClick"],setup(e,{expose:s,emit:t}){var d;const n=t,a=e,i=w(),u=w(),c=w(!1),l=w(a.drawerStyle[a.popDirection]||{});Ze(()=>a.visible,p=>{p?c.value=!0:setTimeout(()=>{c.value=!1},150)},{immediate:!0});function r(p){n("onOverlayClick",p)}return s({drawerDomRef:i,overlayDomRef:(d=u.value)==null?void 0:d.overlayDomRef}),(p,f)=>(v(),oe(qn,{ref_key:"overlayDomInstanceRef",ref:u,visible:a.visible,useMask:a.useMask,maskColor:a.overlayColor,isFullScreen:a.isFullScreen,onOnOverlayClick:r},{default:Pe(()=>[o(c)?(v(),b("div",{key:0,ref_key:"drawerDomRef",ref:i,class:P({drawer:!0,"origin-bottom":a.popDirection==="bottom","origin-right":a.popDirection==="right","slide-bottom":p.visible&&a.popDirection==="bottom","slide-right":p.visible&&a.popDirection==="right"}),style:jt({minHeight:o(l).minHeight,maxHeight:o(l).maxHeight,borderRadius:o(l).borderRadius,boxShadow:o(l).boxShadow,width:o(l).width})},[T("div",vh,[nt(p.$slots,"default",{},void 0,!0)])],6)):H("",!0)]),_:3},8,["visible","useMask","maskColor","isFullScreen"]))}});const Yl=ae(mh,[["__scopeId","data-v-2700752c"]]),zl="/admin/assets/close-dark-f3809f45.svg",yh={key:0,class:"application-tips"},Ih={class:P({"application-contaienr":!0})},bh={class:"application-header"},Th={key:1},Ch={class:"application-item-info"},Sh={class:"application-item-nick"},wh={class:"application-item-note"},kh={class:"application-item-operation"},Eh=["onClick"],Mh=["onClick"],xh=ne({__name:"index",props:{groupID:{default:""}},setup(e){const s=e,t=w(),n=w(0),a=w(!1),i=w([]);Ze(a,p=>{p&&l().then(f=>{i.value=f,n.value=f.length})}),Ze(()=>i.value.length,(p,f)=>{f>0&&p===0&&(a.value=!1)});async function u(){return(await Je.getGroupApplicationList()).data.applicationList.filter(h=>h.groupID===s.groupID)}function c(){a.value=!a.value}async function l(){const p=await u();if(p.length===0)return[];const f=p.map(m=>m.applicationType===0?m.applicant:m.userID),{data:h}=await on.getUserProfile({userIDList:f}),g={};return h.forEach(m=>{g[m.userID]=m}),p.map(m=>{const y=g[m.applicationType===0?m.applicant:m.userID];return{nick:y.nick||y.userID||"anonymous",avatar:y.avatar||"",isRemoved:!1,application:m}})}function r(p,f,h){Je.handleGroupApplication({handleAction:f,application:p.application}).then(()=>{i.value[h].isRemoved=!0,setTimeout(()=>{i.value.splice(h,1),n.value-=1},150)}).catch(()=>{})}Ne(()=>{u().then(p=>{n.value=p.length}),j.watch(V.GRP,{groupSystemNoticeList:d})}),at(()=>{j.unwatch(V.GRP,{groupSystemNoticeList:d})});function d(){l().then(p=>{i.value=p,n.value=p.length})}return(p,f)=>(v(),b("div",null,[o(n)>0?(v(),b("div",yh,[T("div",null,D(o(n))+D(o(A).t("TUIChat.条入群申请")),1),T("div",{class:"application-tips-btn",onClick:c},D(o(A).t("TUIChat.点击处理")),1)])):H("",!0),K(Yl,{ref_key:"drawerDomInstanceRef",ref:t,visible:o(a),zIndex:998,popDirection:o(ft)?"bottom":"right",isFullScreen:o(ft),overlayColor:o(ft)?void 0:"transparent",drawerStyle:{bottom:{minHeight:"60vh",maxHeight:"80vh",borderRadius:"12px 12px 0 0"},right:{width:"360px",borderRadius:"12px 0 0 12px",boxShadow:"0 0 10px 0 #d0d0d0"}},onOnOverlayClick:c},{default:Pe(()=>[T("div",Ih,[T("header",bh,[T("div",{onClick:c},[o(F)?(v(),oe(pe,{key:0,file:o(zl),size:"16px"},null,8,["file"])):(v(),b("div",Th,D(o(A).t("关闭")),1))])]),T("main",null,[(v(!0),b(ve,null,Te(o(i),(h,g)=>(v(),b("div",{key:h.nick,class:P({"application-item":!0,removed:h.isRemoved})},[K(gs,{style:{flex:"0 0 auto"},url:h.avatar,useSkeletonAnimation:!0},null,8,["url"]),T("div",Ch,[T("div",Sh,D(h.nick),1),T("div",wh,D(o(A).t("TUIChat.申请加入")),1)]),T("div",kh,[T("div",{class:"agree",onClick:_=>r(h,"Agree",g)},D(o(A).t("TUIChat.同意")),9,Eh),T("div",{class:"reject",onClick:_=>r(h,"Reject",g)},D(o(A).t("TUIChat.拒绝")),9,Mh)])],2))),128))])])]),_:1},8,["visible","popDirection","isFullScreen","overlayColor"])]))}});const Uh=ae(xh,[["__scopeId","data-v-b934ca67"]]),Ah="",Rh=[],Vl="",Dh={},Kt={DELETE:"delete",ISPINNED:"ispinned",DISPINNED:"dispinned",MUTE:"mute",NOTMUTE:"notmute"},fn={TYPEC2C:"isC2C",TYPEGROUP:"isGroup",JOINGROUP:"joinGroup"},ss={SERVICE:"consultion",EVALUATE:"evaluation",LINK:"text_link",CALL:1,ORDER:"order"},Mt={BASIC:"basic",BIG:"big",CUSTOM:"CUSTOM"},An={LEFT:"left",TOP:"top"},yn={INPUT:"input",TEXTAREA:"textarea",SWITCH:"switch"},Gt={SUBMIT:"submit",CANCEL:"cancel"},Ph="https://web.sdk.qcloud.com/im/assets/emoji-plugin/",_a="https://web.sdk.qcloud.com/im/assets/face-elem/",Oh={"[TUIEmoji_Expect]":"emoji_0@2x.png","[TUIEmoji_Blink]":"emoji_1@2x.png","[TUIEmoji_Guffaw]":"emoji_2@2x.png","[TUIEmoji_KindSmile]":"emoji_3@2x.png","[TUIEmoji_Haha]":"emoji_4@2x.png","[TUIEmoji_Cheerful]":"emoji_5@2x.png","[TUIEmoji_Smile]":"emoji_6@2x.png","[TUIEmoji_Sorrow]":"emoji_7@2x.png","[TUIEmoji_Speechless]":"emoji_8@2x.png","[TUIEmoji_Amazed]":"emoji_9@2x.png","[TUIEmoji_Complacent]":"emoji_10@2x.png","[TUIEmoji_Lustful]":"emoji_11@2x.png","[TUIEmoji_Stareyes]":"emoji_12@2x.png","[TUIEmoji_Giggle]":"emoji_13@2x.png","[TUIEmoji_Daemon]":"emoji_14@2x.png","[TUIEmoji_Rage]":"emoji_15@2x.png","[TUIEmoji_Yawn]":"emoji_16@2x.png","[TUIEmoji_TearsLaugh]":"emoji_17@2x.png","[TUIEmoji_Silly]":"emoji_18@2x.png","[TUIEmoji_Wail]":"emoji_19@2x.png","[TUIEmoji_Kiss]":"emoji_20@2x.png","[TUIEmoji_Trapped]":"emoji_21@2x.png","[TUIEmoji_Fear]":"emoji_22@2x.png","[TUIEmoji_BareTeeth]":"emoji_23@2x.png","[TUIEmoji_FlareUp]":"emoji_24@2x.png","[TUIEmoji_Tact]":"emoji_25@2x.png","[TUIEmoji_Shit]":"emoji_26@2x.png","[TUIEmoji_ShutUp]":"emoji_27@2x.png","[TUIEmoji_Sigh]":"emoji_28@2x.png","[TUIEmoji_Hehe]":"emoji_29@2x.png","[TUIEmoji_Silent]":"emoji_30@2x.png","[TUIEmoji_Skull]":"emoji_31@2x.png","[TUIEmoji_Mask]":"emoji_32@2x.png","[TUIEmoji_Beer]":"emoji_33@2x.png","[TUIEmoji_Cake]":"emoji_34@2x.png","[TUIEmoji_RedPacket]":"emoji_35@2x.png","[TUIEmoji_Bombs]":"emoji_36@2x.png","[TUIEmoji_Ai]":"emoji_37@2x.png","[TUIEmoji_Celebrate]":"emoji_38@2x.png","[TUIEmoji_Bless]":"emoji_39@2x.png","[TUIEmoji_Flower]":"emoji_40@2x.png","[TUIEmoji_Watermelon]":"emoji_41@2x.png","[TUIEmoji_Cow]":"emoji_42@2x.png","[TUIEmoji_Fool]":"emoji_43@2x.png","[TUIEmoji_Surprised]":"emoji_44@2x.png","[TUIEmoji_Askance]":"emoji_45@2x.png","[TUIEmoji_Monster]":"emoji_46@2x.png","[TUIEmoji_Pig]":"emoji_47@2x.png","[TUIEmoji_Coffee]":"emoji_48@2x.png","[TUIEmoji_Ok]":"emoji_49@2x.png","[TUIEmoji_Heart]":"emoji_50@2x.png","[TUIEmoji_Sun]":"emoji_51@2x.png","[TUIEmoji_Moon]":"emoji_52@2x.png","[TUIEmoji_Star]":"emoji_53@2x.png","[TUIEmoji_Rich]":"emoji_54@2x.png","[TUIEmoji_Fortune]":"emoji_55@2x.png","[TUIEmoji_857]":"emoji_56@2x.png","[TUIEmoji_666]":"emoji_57@2x.png","[TUIEmoji_Prohibit]":"emoji_58@2x.png","[TUIEmoji_Convinced]":"emoji_59@2x.png","[TUIEmoji_Knife]":"emoji_60@2x.png","[TUIEmoji_Like]":"emoji_61@2x.png"},Lh=[{emojiGroupID:1,type:Mt.BIG,url:_a,list:["yz00","yz01","yz02","yz03","yz04","yz05","yz06","yz07","yz08","yz09","yz10","yz11","yz12","yz13","yz14","yz15","yz16","yz17"]},{emojiGroupID:2,type:Mt.BIG,url:_a,list:["ys00","ys01","ys02","ys03","ys04","ys05","ys06","ys07","ys08","ys09","ys10","ys11","ys12","ys13","ys14","ys15"]},{emojiGroupID:3,type:Mt.BIG,url:_a,list:["gcs00","gcs01","gcs02","gcs03","gcs04","gcs05","gcs06","gcs07","gcs08","gcs09","gcs10","gcs11","gcs12","gcs13","gcs14","gcs15","gcs16"]}];var zr,Vr;const $h={...Object.fromEntries((zr=Object.entries(Ua))==null?void 0:zr.map(([e,s])=>[s,e])),...Object.fromEntries((Vr=Object.entries(jl))==null?void 0:Vr.map(([e,s])=>[s,e]))},Wl=Vl,Jo=Wl?Vl:Ph,Tn=Wl?Dh:Oh,Nh=[{emojiGroupID:0,type:Mt.BASIC,url:Jo,list:Object.keys(Tn)},...Lh,...Rh],Kl=e=>zn?Ua[e]:A.t(`Emoji.${e}`),ln=e=>{if(!e)return"";const s=/(\[.+?\])/g;let t=e;return s.test(e)&&(t=e.replace(s,n=>Tn[n]?Kl(n):n)),t},Gh=e=>{if(!e)return"";const s=/(\[.+?\])/g;let t=e;return s.test(e)&&(t=e.replace(s,n=>$h[n]||n)),t},Ir={emojiBaseUrl:Jo,emojiUrlMapping:Tn,emojiNameMapping:{...Ua}},Zl=e=>{const s=/\[([^\]]+)\]/g,t=[];let n,a=0;for(;(n=s.exec(e))!==null;){const i=n.index,u=s.lastIndex,c=n[0];i>a&&t.push({type:"text",content:e.substring(a,i)});const l=Jo+Tn[c];l?t.push({type:"image",content:l,emojiKey:c}):t.push({type:"text",content:c}),a=u,s.lastIndex=a}return a<e.length&&t.push({type:"text",content:e.substring(a)}),t},Bh={key:0,class:"text"},Hh=["src","alt"],Fh=ne({__name:"message-text",props:{content:{default:()=>({})}},setup(e){const s=e,t=w();return et(()=>{var n;t.value=s.content,(n=t.value.text)==null||n.forEach(a=>{a.name==="img"&&(a==null?void 0:a.type)==="custom"&&console.warn("CUSTOM_BASIC_EMOJI_URL is required for custom emoji, please check your CUSTOM_BASIC_EMOJI_URL.")})}),(n,a)=>(v(),b("div",{class:P(["message-text-container",o(F)&&"text-select"])},[(v(!0),b(ve,null,Te(o(t).text,(i,u)=>(v(),b("span",{key:u},[i.name==="text"?(v(),b("span",Bh,D(i.text),1)):(v(),b("img",{key:1,class:"emoji",src:i.src,alt:i.emojiKey},null,8,Hh))]))),128))],2))}});const jh=ae(Fh,[["__scopeId","data-v-fc073d41"]]),Yh=["src","width","height"],zh=ne({__name:"message-image",props:{content:{default:()=>({})},messageItem:{default:()=>({})}},emits:["previewImage"],setup(e,{emit:s}){const t=s,n=e,a=w();Ne(()=>{var c,l,r;(((c=n.messageItem)==null?void 0:c.status)==="success"||((l=n.messageItem)==null?void 0:l.status)==="fail"||((r=n.messageItem)==null?void 0:r.progress)===1)&&i()}),Ze(()=>n.content.height,(c,l)=>{c>l&&i()});function i(){var f,h,g;const{width:c=0,height:l=0}=n.content;if(c===0||l===0)return;const r=((f=document.getElementById("app"))==null?void 0:f.clientWidth)||0,d=F?300:Math.min(r-180,300),p=Kr(c,l,d,d);(h=a==null?void 0:a.value)!=null&&h.style&&(a.value.style.width=`${p.width}px`),(g=a==null?void 0:a.value)!=null&&g.style&&(a.value.style.height=`${p.height}px`)}function u(){var c,l;(((c=n.messageItem)==null?void 0:c.status)==="success"||((l=n.messageItem)==null?void 0:l.progress)===1)&&t("previewImage",n.messageItem)}return(c,l)=>(v(),b("div",{ref_key:"skeletonDomRef",ref:a,class:"image-container",onClick:Oe(u,["self"])},[T("img",{class:P(["message-image",!o(F)&&"message-image-h5"]),src:n.content.url,width:n.content.width,height:n.content.height},null,10,Yh)],512))}});const Vh=ae(zh,[["__scopeId","data-v-a2f2f3ad"]]),Wh="/admin/assets/msg-audio-ac2cd1c9.svg",Kh={class:"audio-icon-container"},Zh=["src"],qh=ne({__name:"message-audio",props:{content:{type:Object,default:()=>({})},messageItem:{type:Object,default:()=>({})}},emits:["setAudioPlayed"],setup(e,{emit:s}){const t=s,n=e,a=w(),i=w(),u=w(),c=w();Ne(()=>{c.value&&(c.value.addEventListener("ended",r),c.value.addEventListener("pause",d))}),at(()=>{c.value&&(c.value.removeEventListener("ended",r),c.value.removeEventListener("pause",d))}),et(()=>{i.value=n.messageItem,a.value=n.content});function l(){if(i.value.hasRiskContent||!c.value)return;if(!c.value.paused){c.value.pause(),c.value.currentTime=0,u.value=!1;return}const p=document.getElementsByTagName("audio");Array.from(p).forEach(f=>{f.paused||(f.pause(),f.currentTime=0)}),c.value.play(),u.value=!0,i.value.flow==="in"&&t("setAudioPlayed",i.value.ID)}function r(){u.value=!1}function d(){u.value=!1}return(p,f)=>(v(),b("div",{class:P(["message-audio",[o(ft)&&"message-audio-h5",o(i).flow==="out"&&"reserve",o(i).hasRiskContent&&"disable"]]),onClick:Oe(l,["stop"])},[T("div",Kh,[T("div",{class:P({mask:!0,play:o(u)})},null,2),K(pe,{class:"icon",width:"16px",height:"20px",file:o(Wh)},null,8,["file"])]),T("span",{class:"time",style:jt({width:`${o(a).second*10+20}px`})},D(o(a).second||1)+' " ',5),T("audio",{ref_key:"audioRef",ref:c,src:o(a).url},null,8,Zh)],2))}});const Jh=ae(qh,[["__scopeId","data-v-3e755c49"]]),ql="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAYAAABxLuKEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUY5QURCQ0E0RkI2MTFFNTk3QThDMzJBNTE2MDVFNEQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUY5QURCQzk0RkI2MTFFNTk3QThDMzJBNTE2MDVFNEQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkYzNEJFNkIxQTc0QjExRTM4NDk4RDBGMTA0RjRBQzUxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkYzNEJFNkIyQTc0QjExRTM4NDk4RDBGMTA0RjRBQzUxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+QQDPWgAABYNJREFUeNrknF9MW1Ucx09LBenkXyPsYSvZRib2weI6dNLNuSbGxZg+EsAlYHgxGBU0vvDmg4GgxmDUBx8IGpMRnkwQTcBEsrkKzD+VGdcRw2YdaERTnJNSSdf6/a3nLk0t/UN7zz339pt8sizd7r399vz5nnPPOSYmTiZwADSD/aAR7AM1oBJY+b8Lgy1wA6yBX8AqWAY/g7ioh1VTVeAEaAUuUFvg9f4CfvA18IG/9WQMXfNh4AXHgEWlZ4+CRfAJuFjsklRMY8rA4+AMsDOxug7Ogs/BLZmMoarSz9sOLUVt0dvgG62NqQfPgVNMLp0D74E/Cin+u9VJ8Dq4j8kn6v2eBL+CoChj7gLPgz5QzuRVOS/JFAe+AzE1jaGbjIDHmH7k4FGBuvd/1TCG2pNRcJjpTw3gOLjAA2TRjKnnrf0+pl/V8LB5PhdzcjGm1gCmJCfxNjAHIoUYQ6n1TdDEjKNq0AJmMjXI2Yyh3udRZjzVc4MWd2PMSd4lG1X3g2s75Zydku+94AOwhxlbm6AXrKd+YM5QhYxuCuPf8eV0H6Qz5iGdBbhCdYxnnIzGUNV6gZWenk31ItUYj5pzKfF4/NTU1JSjrq6uTDJj7Py7pzWGSssZtZ/A6/XuXVpaavV4PFWSmfN0cmeUbAxNRx4S8vPY7ZWzs7NHhoaG7CaTSRZjDnEP/mfMaZFPYbFYzIODg00+n8/Z2Ngoy/TF6VRj9qRrmUWora3N5vf7W9vb220SGHNciSnmpJSr2a9ms9nKJycnnWNjY00VFRVa1q1y7sUdY9xa/1TU1vT29tpRelxOp7NSw0dxK8YQD8rSAjocjqr5+fmj/f39ezV6hCPkCZlyENwjU79ptVoto6OjDo0yD7UxB8mYZlnjqIaZp9ksKrsUmHlcgjPP7RIj/ZQlMo9JcObZT8Y06GWkp2Sejo4OtTNPAxlTy3QkyjwTExNqZ54aMuZuvc0RCMg8lWSMVa+TKDzztKqQeaxmZgwVvUrRe6OwXktNIBC42dXVdRlZZ6vIlw5TiYnozZB4PM7Gx8evu1wuvwqmkLaoxNCCP5teTNnY2Nju6+u7gtF4SMXb3CBj1mVPv4oWFhZCnZ2dV4LB4LbKt1qnqrQmuyHRaDQ+MjKy4na7LwkwhbRKJeaqzKasrq5udXd3X56bm7sp8LbXyJhlWU2Znp7+vaen56dQKBQVfOtlqkr0YntTJkPC4fCtgYGBgNfrDWhgyqZSYmiNCC1DP2HwbJKryIuYkny/KoFskqtue6EYQ+vStrV6EsomKCWXMDBciUQiMQ1N2eZe3NkAQfWKlnt6DJxNcpFPaW+TB5EzorPJ8PCwyGySi2aSB5GKLvJMo3oK1iibZNNV7gFLLTG03+esiGzS0tLyrWSmMP7d4zvNY9DfP2Ti9xtpLdrv9AxLWt6aOlFFjr3LSk/vs5Q1v+lm8KienSshUxZ5b8SyGUOiTVDhEjCFvuNb6T4oy/Af/mTGXBWerDfAD/kYQ1phiZdxhw1qymfgo50+zLaSgPY300bQeoOZEgCvsgI2WcR4w0Qj72qDmEI7bV/J1obmsvaE3iJc4OZU6dyU38BLIOtEeq6LcsjdL8EjLLFTTK8hjvYN5LTlOJ/VSjTq/AI8wHS0QoLrR159cn7lku8yLtqFSscE0NI0h05M+Ri8lm8u2836thhPi0HeY8m695pK+DCYZHnuuU43iMxXVKXoCAPZtvGc5+l9fbcXKNYqAdrj9CKT49CLd1jSvIrWxijV8gnQxbQ5JmUCzDLJjklJvSZ1608xMQfrfAoWmMQH66RTNR+IHmWJFdfFOIrpe5Y4H4Zyla6OYsp0rwMsseDazlEO76Luv4KXAnqn9A//c41XE0Lo4V3/CTAAFPSPXCEbSD0AAAAASUVORK5CYII=",Xh={class:"simple-message-container"},Qh={class:"simple-message-avatar"},ep={class:"simple-message-sender"},tp={class:"simple-message-body"},sp={class:"timestamp"},np=ne({__name:"message-container",props:{sender:{default:""},avatar:{default:""},type:{},time:{}},setup(e){const s=e,t=Z.TYPES,n=re(()=>[t.MSG_IMAGE,t.MSG_VIDEO,t.MSG_MERGER].includes(s.type));return(a,i)=>(v(),b("div",Xh,[T("div",Qh,[K(gs,{url:s.avatar},null,8,["url"])]),T("div",null,[T("div",ep,D(s.sender),1),T("div",tp,[T("div",{class:P({"simple-message-content":!0,"no-padding":o(n)})},[nt(a.$slots,"default",{},void 0,!0)],2),T("div",sp,D(o(uo)(s.time*1e3)),1)])])]))}});const ap=ae(np,[["__scopeId","data-v-08da82bd"]]),op={class:"header-container"},ip={key:0},rp={key:1},lp={class:"title"},cp={key:0},up={key:0,class:"message-text"},dp={key:0,class:"text"},hp=["src"],pp={key:1,class:"message-image"},fp=["src"],gp={key:2,class:"message-video"},_p=["onClick"],vp=["src"],mp=["poster"],yp=["src"],Ip={key:3,class:"message-audio"},bp={key:4,class:"message-face"},Tp=["src"],Cp={key:5,class:"message-file"},Sp={key:6},wp=["onClickCapture"],kp={key:8},Ep=ne({__name:"index",props:{messageID:{default:""},isMounted:{type:Boolean,default:!1}},emits:["closeOverlay"],setup(e,{emit:s}){const t=s,n=e,a=Z.TYPES,i=w(!1),u=w([]),c=w({title:"",messageList:[]}),l=w();Ze(()=>u.value.length,async _=>{if(i.value=!1,_<1)return;const m=u.value[u.value.length-1];if(m.downloadKey&&m.messageList.length===0)try{const y=await it.downloadMergedMessages({payload:m,type:Z.TYPES.MSG_MERGER});u.value[u.value.length-1]=y.payload}catch{i.value=!0}c.value=u.value[u.value.length-1]}),Ze(()=>n.isMounted,_=>{if(_){if(!n.messageID)throw new Error("messageID is required when first render of simple-message-list.");const m=j.getMessageModel(n.messageID).getMessage().payload;u.value=[m]}else u.value=[]},{immediate:!0});const r=re(()=>u.value.length>1),d=re(()=>{var _;return(_=c.value)!=null&&_.messageList?c.value.messageList.length>0:!1});function p(_,m){u.value.push(m.messageBody[0].payload),_.stopPropagation()}function f(){u.value.pop(),u.value.length<1&&t("closeOverlay")}function h(_){if(ie){const m=encodeURIComponent(_);uni.navigateTo({url:`/TUIKit/components/TUIChat/video-play?videoUrl=${m}`})}}function g(_){let m="";return _.indexOf("@custom")>-1?m=Ah+_:(m=_a+_,m.indexOf("@2x")===-1?m+="@2x.png":m+=".png"),m}return(_,m)=>(v(),b("div",{class:P({"simple-message-list-container":!0,"simple-message-list-container-mobile":o(ft)})},[T("div",op,[T("span",{class:"back",onClick:f},[K(pe,{class:"close-icon",file:o(rn),size:"18px"},null,8,["file"]),o(r)?(v(),b("span",ip,D(o(A).t("TUIChat.返回")),1)):(v(),b("span",rp,D(o(A).t("TUIChat.关闭")),1))]),T("span",lp,D(o(c).title),1)]),o(i)?(v(),b("div",cp," Load Merge Message Error ")):o(d)?(v(),b("div",{key:1,ref_key:"simpleMessageListRef",ref:l,class:"message-list"},[(v(!0),b(ve,null,Te(o(c).messageList,y=>(v(),b("div",{key:y.ID,class:P({"message-item":!0})},[K(ap,{sender:y.nick,avatar:y.avatar,type:y.messageBody[0].type,time:y.time},{default:Pe(()=>[y.messageBody[0].type===o(a).MSG_TEXT?(v(),b("div",up,[(v(!0),b(ve,null,Te(o(Zl)(y.messageBody[0].payload.text),(I,S)=>(v(),b("span",{key:S,class:"message-text-container"},[I.type==="text"?(v(),b("span",dp,D(I.content),1)):(v(),b("img",{key:1,class:"simple-emoji",src:I.content,alt:"small-face"},null,8,hp))]))),128))])):y.messageBody[0].type===o(a).MSG_IMAGE?(v(),b("div",pp,[T("img",{class:"image",src:y.messageBody[0].payload.imageInfoArray[2].url,mode:"widthFix",alt:"image"},null,8,fp)])):y.messageBody[0].type===o(a).MSG_VIDEO?(v(),b("div",gp,[o(ie)?(v(),b("div",{key:0,onClick:I=>h(y.messageBody[0].payload.remoteVideoUrl)},[T("image",{class:"image",src:y.messageBody[0].payload.thumbUrl,mode:"widthFix",alt:"image"},null,8,vp),K(pe,{class:"video-play-icon",file:o(ql)},null,8,["file"])],8,_p)):(v(),b("video",{key:1,class:"video",controls:"",poster:y.messageBody[0].payload.thumbUrl},[T("source",{src:y.messageBody[0].payload.remoteVideoUrl,type:"video/mp4"},null,8,yp)],8,mp))])):y.messageBody[0].type===o(a).MSG_AUDIO?(v(),b("div",Ip,[T("span",null,D(o(A).t("TUIChat.语音"))+" ",1),T("span",null,D(y.messageBody[0].payload.second)+"s",1)])):y.messageBody[0].type===o(a).MSG_FACE?(v(),b("div",bp,[T("img",{class:"image",src:g(y.messageBody[0].payload.data),alt:"face"},null,8,Tp)])):y.messageBody[0].type===o(a).MSG_FILE?(v(),b("div",Cp,D(o(A).t("TUIChat.[文件]")),1)):y.messageBody[0].type===o(a).MSG_LOCATION?(v(),b("div",Sp,D(o(A).t("TUIChat.[地理位置]")),1)):y.messageBody[0].type===o(a).MSG_MERGER?(v(),b("div",{key:7,class:"message-merger",onClickCapture:I=>p(I,y)},[K(Jl,{disabled:"",renderData:y.messageBody[0].payload},null,8,["renderData"])],40,wp)):y.messageBody[0].type===o(a).MSG_CUSTOM?(v(),b("div",kp,D(o(A).t("TUIChat.[自定义消息]")),1)):H("",!0)]),_:2},1032,["sender","avatar","type","time"])]))),128))],512)):H("",!0)],2))}});const br=ae(Ep,[["__scopeId","data-v-e34678bf"]]),Mp={class:"record-title"},xp={class:"record-abstract-container"},Up={class:"record-footer"},Ap=ne({__name:"index",props:{renderData:{},disabled:{type:Boolean,default:!1},messageItem:{default:()=>({})}},emits:["assignMessageIDInUniapp"],setup(e,{emit:s}){const t=s,n=e,a=w(!1);function i(){n.disabled||(ie?t("assignMessageIDInUniapp",n.messageItem.ID):a.value=!0)}function u(){a.value=!1}return(c,l)=>(v(),b("div",null,[T("div",{class:"message-record-container",onClick:i},[T("div",Mp,D(n.renderData.title),1),T("div",xp,[(v(!0),b(ve,null,Te(n.renderData.abstractList.slice(0,7),(r,d)=>(v(),b("div",{key:d,class:"record-abstract-item"},D(o(ln)(r)),1))),128))]),T("div",Up,D(o(A).t("TUIChat.聊天记录")),1)]),!n.disabled&&o(F)?(v(),oe(qn,{key:0,visible:o(a),onOnOverlayClick:l[0]||(l[0]=r=>a.value=!1)},{default:Pe(()=>[K(br,{isMounted:o(a),renderData:n.renderData,messageID:n.messageItem.ID,onCloseOverlay:u},null,8,["isMounted","renderData","messageID"])]),_:1},8,["visible"])):!n.disabled&&o($e)&&!o(ie)?(v(),oe(Yl,{key:1,visible:o(a),isFullScreen:!0,overlayColor:"transparent",popDirection:"right"},{default:Pe(()=>[K(br,{isMounted:o(a),renderData:n.renderData,messageID:n.messageItem.ID,onCloseOverlay:u},null,8,["isMounted","renderData","messageID"])]),_:1},8,["visible"])):H("",!0)]))}});const Jl=ae(Ap,[["__scopeId","data-v-5d90bac5"]]),Xl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAqCAYAAAD1T9h6AAAAAXNSR0IArs4c6QAAA0BJREFUaEPtWd9LU3EUP+d7N91QFkJolBDoLOdM0GnzwYcV9CAZPVRCCZkP9WRQVPQSNaL/oKJfDxH0kPUQCRbRg4uwNJmC6fLXgsDCDBKWsul2vyfuxpW7MnR332sad0/b937P55zP55z7/XB3ETSfykpvUYwSJ4BDPQAWEXGr9vpK3xFRRoBRkFjnts15nYFAILFSTLbXUQUod9cdSHA6R8TzsgVV4hHZF4Zw51hz00u/389FYC6HkSSgFB+X5ctGJEFkYbDgrckP/a8NwU+OjSx3qMozhmMA1uvWQttIKBCYyySpz+ezff0+10wExznnm7SxKVx8wwCmM8FU9hLAogVg2m6vGQ4G78a18eh0ey6STIeVRSWJw+5p+31TpgkrfL78+MxcCwC1cE72TOP/tp8hm0cGt8eG+zsQkZKj6nR5nhJRcYpATvtEqLdPVMJdDQ0F0R/RNiA8RMRzROEyxgYKC7ae7+np/IlOV+1b9bTJ3eLYk+nYrKYor7fRMRuZ2csRSpBAxyGB+RzIDURFaj6J4fPxUPAKlpbX9KuL4dGButUU9C/2+P1+9vBx11Hi8hkNibMbhoBadJmr9gIn3pz8LWFPGgG7xdqUjZEZ1RlEFgegb8Cgl1FOt8wXbqa8BmfTCCCyeVFGZiCZtBrTCBiV1EjcPwhkY2RGFZrylZgbIH6ac9qZZmTaU0iUkRlFxOM5ZY1Eg/e1JNI6INrIjCBSVlHv5XzxhoqdRsAoIxNJRBmnhelI97IE1rORaUXQjv2GMzKFiElA5EzrwTI7oEc1kTFmB0SqqQfL7IAe1UTGmB0QqaYeLLMDelQTGWN2QKSaerDMDuhRTWTM/9sByEnsDw8NzYhUSzRWaVVVISxaupaeiZ0uzzsisigLkmS5MT7y/oHopCLxdrh3t8pyol3BRMSE8vf6IyJemlxguBCLlOybmnoSFZlUFFZx8RG7zfHpFXHKTRFgYXRWeysoGl9SXSHBULonS7EX62WclLGRZFsjJ/mkWnySgN3amnzJV+aqvsQJD4pSai1wGNKziY+D15Zes24kEmrxyS5o1VLGCWLK61bart7Ya6HmanIoNywAfgabdHVysC+kxvwC0SKlujS63bMAAAAASUVORK5CYII=",Rp=["title"],Dp=ne({__name:"message-file",props:{content:{default:()=>({})},messageItem:{default:()=>({})}},setup(e){const s=e,t=()=>{if(s.messageItem.hasRiskContent)return;const n={mode:"cors",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"})};if(window!=null&&window.fetch)fetch(s.content.url,n).then(a=>a.blob()).then(a=>{const i=document.createElement("a"),u=window.URL.createObjectURL(a);i.href=u,i.download=s.content.name,i.click()});else{const a=document.createElement("a");a.href=s.content.url,a.target="_blank",a.download=s.content.name,a.click()}};return(n,a)=>(v(),b("div",{class:"file-message-montainer",title:o(A).t("TUIChat.单击下载"),onClick:t},[K(pe,{file:o(Xl),class:"file-icon"},null,8,["file"]),T("div",null,[T("div",null,D(s.content.name),1),T("div",null,D(s.content.size),1)])],8,Rp))}});const Pp=ae(Dp,[["__scopeId","data-v-90bd8774"]]),Op={class:"message-image"},Lp=["src"],$p=ne({__name:"message-face",props:{content:{type:Object,default:()=>({})}},setup(e){const s=e,t=w(s.content.url);return Ne(()=>{s.content.type==="custom"&&console.warn("CUSTOM_BIG_EMOJI_URL is required for custom emoji, please check your CUSTOM_BIG_EMOJI_URL.")}),(n,a)=>(v(),b("div",Op,[T("img",{mode:"aspectFit",class:"message-image",src:o(t)},null,8,Lp)]))}});const Np=ae($p,[["__scopeId","data-v-40b1f80b"]]),Xo="/admin/assets/star-light-d9a7aedf.png",Gp={class:"custom"},Bp={key:0},Hp=["href"],Fp={key:0},jp=["href"],Yp={key:1},zp={key:1,class:"evaluate"},Vp={class:"evaluate-list"},Wp=["src"],Kp={key:3,class:"textLink"},Zp=["href"],qp=["innerHTML"],Jp=ne({__name:"message-custom",props:{messageItem:{default:void 0},content:{default:void 0}},setup(e){const s=e,t=w(),n=w(),a=w(),i=w({businessID:""});et(()=>{t.value=s.content,n.value=s.messageItem;const{payload:c}=s.messageItem;i.value=c.data||"",i.value=os(c.data),c.data===ss.SERVICE&&(a.value=os(c.extension))});const u=c=>{window.open(c)};return(c,l)=>(v(),b("div",Gp,[o(i).businessID===o(ss).SERVICE?(v(),b("div",Bp,[T("h1",null,[T("label",null,D(o(a).title),1),o(a).hyperlinks_text?(v(),b("a",{key:0,href:o(a).hyperlinks_text.value,target:"view_window"},D(o(a).hyperlinks_text.key),9,Hp)):H("",!0)]),o(a).item&&o(a).item.length>0?(v(),b("ul",Fp,[(v(!0),b(ve,null,Te(o(a).item,(r,d)=>(v(),b("li",{key:d},[o(Fl)(r.value)?(v(),b("a",{key:0,href:r.value,target:"view_window"},D(r.key),9,jp)):(v(),b("p",Yp,D(r.key),1))]))),128))])):H("",!0),T("article",null,D(o(a).description),1)])):o(i).businessID===o(ss).EVALUATE?(v(),b("div",zp,[T("h1",null,D(o(A).t("message.custom.对本次服务评价")),1),T("ul",Vp,[(v(!0),b(ve,null,Te(Math.max(o(i).score,0),(r,d)=>(v(),b("li",{key:d,class:"evaluate-list-item"},[K(pe,{file:o(Xo),class:"file-icon"},null,8,["file"])]))),128))]),T("article",null,D(o(i).comment),1)])):o(i).businessID===o(ss).ORDER?(v(),b("div",{key:2,class:"order",onClick:l[0]||(l[0]=r=>u(o(i).link))},[T("img",{src:o(i).imageUrl},null,8,Wp),T("main",null,[T("h1",null,D(o(i).title),1),T("p",null,D(o(i).description),1),T("span",null,D(o(i).price),1)])])):o(i).businessID===o(ss).LINK?(v(),b("div",Kp,[T("p",null,D(o(i).text),1),T("a",{href:o(i).link,target:"view_window"},D(o(A).t("message.custom.查看详情>>")),9,Zp)])):(v(),b("span",{key:4,innerHTML:c.content.custom},null,8,qp))]))}});const Xp=ae(Jp,[["__scopeId","data-v-fe3175fb"]]),Qp={class:"message-tip"},ef=ne({__name:"message-tip",props:{content:{type:Object,default:()=>({})}},setup(e){const s=e,t=re(()=>{var n,a;return((n=s.content)==null?void 0:n.text)||((a=s.content)==null?void 0:a.custom)||""});return(n,a)=>(v(),b("div",Qp,[T("span",null,D(o(t)),1)]))}});const tf=ae(ef,[["__scopeId","data-v-b9dc8c31"]]),sf=ne({__name:"index",props:{message:{default:()=>({})}},emits:["openReadUserPanel"],setup(e,{emit:s}){const t=s,n=e,a=Ft.getFeatureConfig("ReadStatus"),i=Z.TYPES,u=w(j.getData(V.USER,"displayMessageReadReceipt"));Ne(()=>{j.watch(V.USER,{displayMessageReadReceipt:h})}),at(()=>{j.unwatch(V.USER,{displayMessageReadReceipt:h})});const c=re(()=>{if(!a||!u.value)return!1;const{ID:g,type:_,flow:m,status:y,hasRiskContent:I,conversationID:S,conversationType:C,needReadReceipt:R=!1}=n.message;if(I)return!1;const{groupProfile:k}=j.getConversationModel(S)||{};if((k==null?void 0:k.type)===i.GRP_AVCHATROOM||(k==null?void 0:k.type)===i.GRP_COMMUNITY)return!1;if(_===i.MSG_CUSTOM){const x=j.getMessageModel(g);if((x==null?void 0:x.getSignalingInfo())!==null)return!1}return m!=="out"||y!=="success"?!1:C==="GROUP"?R:C==="C2C"}),l=re(()=>{const{conversationType:g,needReadReceipt:_=!1,isPeerRead:m=!1}=n.message,{readCount:y=0,unreadCount:I=0,isPeerRead:S=!1}=n.message.readReceiptInfo;return g==="C2C"?_?S?0:1:m?0:1:g==="GROUP"?_?y===0?1:I===0?2:4:3:1}),r=re(()=>{const{readCount:g=0}=n.message.readReceiptInfo;switch(l.value){case 0:return A.t("TUIChat.已读");case 1:return A.t("TUIChat.未读");case 2:return A.t("TUIChat.全部已读");case 4:return`${g}${A.t("TUIChat.人已读")}`;default:return""}}),d=re(()=>{const{conversationType:g}=n.message;return g==="C2C"?l.value!==0:g==="GROUP"?l.value!==2:!1}),p=re(()=>n.message.needReadReceipt&&n.message.conversationType==="GROUP"&&(l.value===4||l.value===1));function f(){p.value&&t("openReadUserPanel")}function h(g){u.value=g}return(g,_)=>ut((v(),b("div",{class:P({"message-label":!0,unread:o(d),"finger-point":o(p)}),onClick:f},[T("span",null,D(o(r)),1)],2)),[[Jt,o(c)]])}});const nf=ae(sf,[["__scopeId","data-v-999f5a95"]]);var Et=(e=>(e[e.TYPE_NONE=0]="TYPE_NONE",e[e.TYPE_TEXT=1]="TYPE_TEXT",e[e.TYPE_CUSTOM=2]="TYPE_CUSTOM",e[e.TYPE_IMAGE=3]="TYPE_IMAGE",e[e.TYPE_SOUND=4]="TYPE_SOUND",e[e.TYPE_VIDEO=5]="TYPE_VIDEO",e[e.TYPE_FILE=6]="TYPE_FILE",e[e.TYPE_LOCATION=7]="TYPE_LOCATION",e[e.TYPE_FACE=8]="TYPE_FACE",e[e.TYPE_GROUP_TIPS=9]="TYPE_GROUP_TIPS",e[e.TYPE_MERGER=10]="TYPE_MERGER",e))(Et||{});const af={key:0,class:"revoked-text"},of={key:1,class:"max-double-line"},rf=ne({__name:"index",props:{message:{default:()=>({})}},emits:["scrollTo","blinkMessage"],setup(e,{emit:s}){const t=s,n=e;let a=0;const i=w(""),u=w(!1),c=w({}),l=re(()=>{var p;try{const f=JSON.parse(((p=n.message)==null?void 0:p.cloudCustomData)||"{}"),h=j.getMessageModel(f.messageReply.messageID);return h==null?void 0:h.isRevoked}catch{return!0}});Ne(()=>{var p;try{const f=JSON.parse(((p=n.message)==null?void 0:p.cloudCustomData)||"{}");u.value=!!f.messageReply,u.value&&(c.value=f.messageReply,i.value=r(c.value))}catch{u.value=!1}});function r(p){let f="",h="";switch(p.messageType){case Et.TYPE_TEXT:f="[文本]";break;case Et.TYPE_CUSTOM:f="[自定义消息]";break;case Et.TYPE_IMAGE:f="[图片]";break;case Et.TYPE_SOUND:f="[音频]";break;case Et.TYPE_VIDEO:f="[视频]";break;case Et.TYPE_FILE:f="[文件]";break;case Et.TYPE_LOCATION:f="[地理位置]";break;case Et.TYPE_FACE:f="[动画表情]";break;case Et.TYPE_GROUP_TIPS:f="[群提示]";break;case Et.TYPE_MERGER:f="[聊天记录]";break;default:f="[消息]";break}return[Et.TYPE_TEXT,Et.TYPE_MERGER].includes(p.messageType)&&(h=p.messageAbstract),h||A.t(`TUIChat.${f}`)}async function d(){var g;if(l.value)return;const p=(g=c.value)==null?void 0:g.messageID,h=j.getData(V.CHAT,"messageList").some(_=>_.ID===p);if(p&&h)try{const _=await va("#messageScrollList","messageList"),m=await va("#tui-"+p,"messageList"),{scrollTop:y}=await Qr("#messageScrollList","messageList"),I=m.top+y-_.top-a++%2,S=m.top<_.top;if(!ie&&window){const C=document.getElementById("messageScrollList");S&&C&&(C.scrollTop=I)}else ie&&S&&t("scrollTo",I);t("blinkMessage",p)}catch(_){console.error(_)}else Se({message:A.t("TUIChat.无法定位到原消息"),type:we.WARNING})}return(p,f)=>o(u)?(v(),b("div",{key:0,class:P({"reference-content":!0,reverse:p.message.flow==="out"}),onClick:d},[o(l)?(v(),b("div",af,D(o(A).t("TUIChat.引用内容已撤回")),1)):(v(),b("div",of,D(o(c).messageSender)+": "+D(o(ln)(o(i))),1))],2)):H("",!0)}});const lf=ae(rf,[["__scopeId","data-v-3df50379"]]),cf=["src"],uf={key:1,class:"text-plain"},df=ne({__name:"translation-content",props:{message:{default:()=>({})},translationContentVisible:{type:Boolean},isSingleTranslation:{type:Boolean},translationWrapperRef:{}},emits:["toggleErrorStatus"],setup(e,{emit:s}){const t=s,n=e,a=w(!1),i=w(""),u=w([]),c=w(0),l=w(0),r=w(),d=w();return Ze(()=>n.translationContentVisible,p=>{p&&Ac.get(n.message).then(f=>{a.value=!0,u.value=f,wt(()=>{const{height:h,width:g}=Xt(r.value),{height:_,width:m}=Xt(d.value);c.value=h,l.value=g,requestAnimationFrame(()=>{c.value=_,l.value=m,n.isSingleTranslation&&wt(()=>{const{bottom:y}=Xt(n.translationWrapperRef),{bottom:I}=Xt("#messageScrollList");if(y>I){const S=setTimeout(()=>{n.translationWrapperRef.scrollIntoView({block:"end",behavior:"smooth"}),clearTimeout(S)},150)}})})})}).catch(f=>{a.value=!0;const{height:h}=Xt(r.value);c.value=h,u.value=[],t("toggleErrorStatus",!0),i.value=f.message})},{immediate:!0}),(p,f)=>(v(),b("div",{class:"message-translation-container",style:jt({height:o(c)>0?`${o(c)}px`:"auto",width:o(l)>0?`${o(l)}px`:"auto"})},[o(a)?(v(),b("div",{key:0,ref_key:"translationContentRef",ref:d,class:P({"translation-content":!0,occur:o(c)>0})},[o(u).length>0?(v(!0),b(ve,{key:0},Te(o(u),(h,g)=>(v(),b("span",{key:g},[h.type==="face"?(v(),b("img",{key:0,class:"text-face",src:h.value},null,8,cf)):(v(),b("span",uf,D(h.value),1))]))),128)):(v(),b(ve,{key:1},[Gn(D(o(i)),1)],64))],2)):H("",!0),T("div",{ref_key:"translationLoadingRef",ref:r,class:P({loading:!0,"loading-end":o(a)})},D(o(A).t("TUIChat.翻译中"))+"... ",3)],4))}});const hf=ae(df,[["__scopeId","data-v-49653dc3"]]),pf="/admin/assets/check-sm-bfc05916.svg",ff={class:"copyright"},gf={class:"copyright-text"},_f=ne({__name:"index",props:{message:{default:()=>({})}},setup(e){const s=e,t=w(!1),n=w(!1),a=w();let i=!0;Ne(()=>{j.watch(V.CHAT,{translateTextInfo:c})}),at(()=>{j.unwatch(V.CHAT,{translateTextInfo:c})});function u(l){n.value=l}function c(l){if(l===void 0)return;i=!1;const r=l.get(s.message.conversationID)||[];for(let d=0;d<r.length;++d){const{messageID:p,visible:f}=r[d];if(p===s.message.ID&&f!==void 0){r.length===1&&f&&(i=!0),n.value=!1,t.value=f;break}}}return(l,r)=>o(t)?(v(),b("div",{key:0,ref_key:"translationWrapperRef",ref:a,class:P({"message-translation":!0,reverse:s.message.flow==="out",error:o(n)})},[K(hf,{message:s.message,translationContentVisible:o(t),translationWrapperRef:o(a),isSingleTranslation:o(i),onToggleErrorStatus:u},null,8,["message","translationContentVisible","translationWrapperRef","isSingleTranslation"]),T("div",ff,[K(pe,{file:o(pf),size:"13px"},null,8,["file"]),T("div",gf,D(o(A).t("TUIChat.由IM提供翻译支持")),1)])],2)):H("",!0)}});const vf=ae(_f,[["__scopeId","data-v-b0897e3b"]]),Gs=class Gs{constructor(){Ue(this,"isUseCache",!0);Ue(this,"convertCache",new Map)}static getInstance(){return Gs.instance||(Gs.instance=new Gs),Gs.instance}async get(s){if(this.isUseCache){const i=this.convertCache.get(s.ID);if(i!==void 0)return i}const t=j.getMessageModel(s.ID);if(!t)return Promise.reject("message not found");const n=await it.convertVoiceToText({message:t});let{data:{result:a}={}}=n;return a?this.convertCache.set(t.ID,a):a="",a}clear(){this.convertCache.clear()}disableCache(){this.isUseCache=!1}enableCache(){this.isUseCache=!0}};Ue(Gs,"instance");let Ao=Gs;const mf=Ao.getInstance(),yf=ne({__name:"convert-content",props:{message:{default:()=>({})},contentVisible:{type:Boolean},convertWrapperRef:{},isSingleConvert:{type:Boolean,default:!1}},emits:["toggleErrorStatus"],setup(e,{emit:s}){const t=s,n=e,a=w(!1),i=w(""),u=w(0),c=w(0),l=w(),r=w();return Ze(()=>n.contentVisible,d=>{d&&mf.get(n.message).then(p=>{a.value=!0,i.value=p,wt(()=>{const{height:f,width:h}=Xt(l.value),{height:g,width:_}=Xt(r.value);u.value=f,c.value=h,requestAnimationFrame(()=>{u.value=g,c.value=_,n.isSingleConvert&&wt(()=>{const{bottom:m}=Xt(n.convertWrapperRef),{bottom:y}=Xt("#messageScrollList");if(m>y){const I=setTimeout(()=>{n.convertWrapperRef.scrollIntoView({block:"end",behavior:"smooth"}),clearTimeout(I)},150)}})})})}).catch(p=>{a.value=!0,t("toggleErrorStatus",!0);const{height:f}=Xt(l.value);u.value=f,i.value=p.message})},{immediate:!0}),(d,p)=>(v(),b("div",{class:"message-convert-container",style:jt({height:o(u)>0?`${o(u)}px`:"auto",width:o(c)>0?`${o(c)}px`:"auto"})},[o(a)?(v(),b("div",{key:0,ref_key:"convertContentRef",ref:r,class:P({"convert-content":!0,occur:o(u)>0})},D(o(i)),3)):H("",!0),T("div",{ref_key:"convertLoadingRef",ref:l,class:P({loading:!0,"loading-end":o(a)})},D(o(A).t("TUIChat.转换中"))+"... ",3)],4))}});const If=ae(yf,[["__scopeId","data-v-b142ed60"]]),bf=ne({__name:"index",props:{message:{default:()=>({})}},setup(e){const s=e,t=w(!1),n=w(!1),a=w();let i=!0;Ne(()=>{j.watch(V.CHAT,{voiceToTextInfo:c})}),at(()=>{j.unwatch(V.CHAT,{voiceToTextInfo:c})});function u(l){n.value=l}function c(l){if(l===void 0)return;i=!1;const r=l.get(s.message.conversationID)||[];for(let d=0;d<r.length;++d){const{messageID:p,visible:f}=r[d];if(p===s.message.ID&&f!==void 0){r.length===1&&f&&(i=!0),n.value=!1,t.value=f;break}}}return(l,r)=>o(t)?(v(),b("div",{key:0,ref_key:"convertWrapperRef",ref:a,class:P({"message-convert":!0,reverse:s.message.flow==="out",error:o(n)})},[K(If,{message:s.message,contentVisible:o(t),isSingleConvert:o(i),convertWrapperRef:o(a),onToggleErrorStatus:u},null,8,["message","contentVisible","isSingleConvert","convertWrapperRef"])],2)):H("",!0)}});const Tf=ae(bf,[["__scopeId","data-v-3b11ea73"]]),Cf="/admin/assets/radio-0422f0b5.svg",Sf={key:0,class:"radio-no-select"},wf=ne({__name:"index",props:{isSelected:{type:Boolean}},emits:["onChange"],setup(e,{emit:s}){const t=s,n=e;function a(){t("onChange",!n.isSelected)}return(i,u)=>(v(),b("div",{class:"radio-select",onClick:a},[n.isSelected?(v(),oe(pe,{key:1,file:o(Cf),size:"20px"},null,8,["file"])):(v(),b("div",Sf))]))}});const kf=ae(wf,[["__scopeId","data-v-b42245ec"]]),Ef="/admin/assets/loading-2a143778.png",Mf={class:"message-bubble-content"},xf={key:0,class:"message-body-nick-name"},Uf={class:"content-main"},Af={key:0,class:"content-has-risk-tips"},Rf={key:0,class:"audio-unplay-mark"},Df={class:"message-bubble-extra-content"},Pf="https://web.sdk.qcloud.com/component/TUIKit/assets/has_risk_default.png",Of=ne({__name:"message-bubble",props:{messageItem:{default:()=>({})},content:{default:()=>({})},classNameList:{default:()=>[]},blinkMessageIDList:{default:()=>[]},isMultipleSelectMode:{type:Boolean,default:!1},isAudioPlayed:{type:Boolean,default:!1},multipleSelectedMessageIDList:{default:()=>[]}},emits:["resendMessage","blinkMessage","setReadReceiptPanelVisible","changeSelectMessageIDList","scrollTo"],setup(e,{emit:s}){const t=s,n=e,a=Z.TYPES,i=[a.MSG_LOCATION,a.MSG_TEXT,a.MSG_CUSTOM,a.MSG_MERGER,a.MSG_FACE],{blinkMessageIDList:u,messageItem:c}=Ea(n),l=re(()=>n.multipleSelectedMessageIDList.includes(c.value.ID)),r=re(()=>c.value.flow==="in"&&c.value.status==="success"&&c.value.type===a.MSG_AUDIO&&!n.isAudioPlayed),d=re(()=>["message-bubble",l.value?"multiple-selected":"",...n.classNameList]),p=re(()=>{var C;return(C=c.value)==null?void 0:C.reactionList.some(R=>R.totalUserCount!==0)}),f=re(()=>!p.value&&[a.MSG_IMAGE,a.MSG_VIDEO,a.MSG_MERGER].includes(c.value.type)),h=re(()=>{let C=A.t("TUIChat.涉及敏感内容")+", ";return c.value.flow==="out"?C+=A.t("TUIChat.发送失败"):C+=A.t(c.value.type===a.MSG_AUDIO?"TUIChat.无法收听":"TUIChat.无法查看"),C}),g=re(()=>{var C,R;return(C=c.value)!=null&&C.ID?(R=u==null?void 0:u.value)==null?void 0:R.includes(c.value.ID):!1});function _(C){t("changeSelectMessageIDList",{type:C?"add":"remove",messageID:c.value.ID})}function m(){var C;(C=c.value)!=null&&C.hasRiskContent||t("resendMessage")}function y(C){t("blinkMessage",C)}function I(C){t("scrollTo",C)}function S(){t("setReadReceiptPanelVisible",!0,c.value)}return(C,R)=>(v(),b("div",{class:P(o(d))},[n.isMultipleSelectMode?(v(),oe(kf,{key:0,class:"multiple-select-radio",isSelected:o(l),onOnChange:_},null,8,["isSelected"])):H("",!0),T("div",{class:P({"control-reverse":o(c).flow==="out"})},[T("div",Mf,[T("div",{class:P(["message-bubble-main-content",[o(c).flow==="in"?"":"reverse"]])},[K(gs,{useSkeletonAnimation:"",url:o(c).avatar||""},null,8,["url"]),T("main",{class:"message-body",onClick:R[1]||(R[1]=Oe(()=>{},["stop"]))},[o(c).flow==="in"&&o(c).conversationType==="GROUP"?(v(),b("div",xf,D(n.content.showName),1)):H("",!0),T("div",{class:P(["message-body-main",o(c).flow==="out"&&"message-body-main-reverse"])},[T("div",{class:P(["blink","message-body-content",o(c).flow==="out"?"content-out":"content-in",o(c).hasRiskContent&&"content-has-risk",o(f)?"content-no-padding":"",o(f)&&o(g)?"blink-shadow":"",!o(f)&&o(g)?"blink-content":""])},[T("div",Uf,[(o(c).type===o(a).MSG_IMAGE||o(c).type===o(a).MSG_VIDEO)&&o(c).hasRiskContent?(v(),b("img",{key:0,class:P(["message-risk-replace",!o(F)&&"message-risk-replace-h5"]),src:Pf},null,2)):(v(),b(ve,{key:1},[nt(C.$slots,"messageElement",{},void 0,!0),nt(C.$slots,"TUIEmojiPlugin",{},void 0,!0)],64))]),o(c).hasRiskContent?(v(),b("div",Af,D(o(h)),1)):H("",!0)],2),o(r)?(v(),b("div",Rf)):H("",!0),o(c).status==="fail"||o(c).hasRiskContent?(v(),b("div",{key:1,class:"message-label fail",onClick:R[0]||(R[0]=k=>m())}," ! ")):H("",!0),o(c).status==="unSend"&&i.includes(o(c).type)?(v(),oe(pe,{key:2,class:"message-label loading-circle",file:o(Ef),width:"15px",height:"15px"},null,8,["file"])):H("",!0),K(nf,{class:"message-label align-self-bottom",message:o(Zr)(o(c)),onOpenReadUserPanel:S},null,8,["message"])],2)])],2),T("div",Df,[K(vf,{class:P(o(c).flow==="out"?"reverse":"flex-row"),message:o(c)},null,8,["class","message"]),K(Tf,{class:P(o(c).flow==="out"?"reverse":"flex-row"),message:o(c)},null,8,["class","message"]),K(lf,{class:P(o(c).flow==="out"?"reverse":"flex-row"),message:o(c),onBlinkMessage:y,onScrollTo:I},null,8,["class","message"])])])],2)],2))}});const Ql=ae(Of,[["__scopeId","data-v-2b0130b9"]]),Lf=["href"],$f={class:"el-icon-location-outline"},Nf=["src"],Gf=ne({__name:"message-location",props:{content:{type:Object,default:()=>({})}},setup(e){const s=e,t=w();return et(()=>{t.value=s.content}),(n,a)=>(v(),b("a",{class:"message-location",href:o(t).href,target:"_blank",title:"点击查看详情"},[T("span",$f,D(o(t).description),1),T("img",{src:o(t).url},null,8,Nf)],8,Lf))}});const Bf=ae(Gf,[["__scopeId","data-v-f9b994c8"]]),Hf={key:0,class:"message-timestamp"},Ff=ne({__name:"message-timestamp",props:{currTime:{type:Number,default:0},prevTime:{type:Number,default:0}},setup(e){const s=e,{currTime:t,prevTime:n}=Ea(s),a=w(!1),i=w(""),u=(c,l)=>(a.value=!1,c<=0?"":!l||l<=0?(a.value=!0,uo(c*1e3)):c-l>=600?(a.value=!0,uo(c*1e3)):"");return Ze(()=>[t.value,n.value],(c,l)=>{(c==null?void 0:c.toString())!==(l==null?void 0:l.toString())&&(i.value=u(t.value,n.value))},{immediate:!0}),(c,l)=>o(a)?(v(),b("div",Hf,D(o(i)),1)):H("",!0)}});const jf=ae(Ff,[["__scopeId","data-v-46cc8bf9"]]),Jn="/admin/assets/icon-close-00e2ef94.svg",Yf={class:"message-video"},zf=["src"],Vf=["src","poster"],Wf=["src","poster"],Kf={key:0,class:"dialog-video"},Zf=["src"],la="https://web.sdk.qcloud.com/im/assets/images/transparent.png",qf=ne({__name:"message-video",props:{content:{default:()=>({})},messageItem:{default:()=>({})}},emits:["uploading"],setup(e,{emit:s}){const t=e,n=s,a=w(!1),i=w(""),u=w(0),c=w(0),l=w(),r=w();et(async()=>{t.content&&(i.value=await h(t.content,t.messageItem),wt(async()=>{var y,I,S,C,R;const g=((y=document.getElementById("messageScrollList"))==null?void 0:y.clientWidth)||0,_=F?300:Math.min(g-172,300);let m;if(t.messageItem.status==="success"){let{snapshotWidth:k=0,snapshotHeight:x=0}=t.content;const{snapshotUrl:M}=t.content;if(k===0||x===0)return;M===la&&(k=u.value,x=c.value),m=Kr(k,x,_,_),(I=l==null?void 0:l.value)!=null&&I.style&&(l.value.style.width=`${m.width}px`),(S=l==null?void 0:l.value)!=null&&S.style&&(l.value.style.height=`${m.height}px`),F&&((C=r==null?void 0:r.value)!=null&&C.style&&(r.value.style.width=`${m.width}px`),(R=r==null?void 0:r.value)!=null&&R.style&&(r.value.style.height=`${m.height}px`))}else n("uploading")}))});const d=re(()=>{const{snapshotWidth:g=0,snapshotHeight:_=0}=t.messageItem.payload;return g>=_});Ze(()=>t.messageItem.status,(g,_)=>{g==="success"&&_!=="success"&&n("uploading")});function p(){t.messageItem.progress>0&&t.messageItem.progress<1||(a.value=!a.value)}function f(g){return new Promise(_=>{let m="";const y=document.createElement("video");y.setAttribute("crossOrigin","anonymous"),y.setAttribute("src",g),y.setAttribute("preload","auto"),y.addEventListener("loadeddata",function(){const I=document.createElement("canvas"),S=y.videoWidth,C=y.videoHeight;I.width=S,I.height=C,I.getContext("2d").drawImage(y,0,0,S,C),m=I.toDataURL("image/jpeg"),u.value=S,c.value=C,_(m)},{once:!0})})}async function h(g,_){var m,y,I,S;return _?_.status!=="success"?await f(g.url):g.snapshotUrl!==la&&g.snapshotUrl||((m=_==null?void 0:_.payload)==null?void 0:m.snapshotUrl)!==la&&((y=_==null?void 0:_.payload)==null?void 0:y.snapshotUrl)||((I=_.payload)==null?void 0:I.thumbUrl)!==la&&((S=_==null?void 0:_.payload)==null?void 0:S.thumbUrl)||await f(g.url):""}return(g,_)=>(v(),b("div",Yf,[T("div",{ref_key:"skeleton",ref:l,class:P(["message-video-box",[(!t.messageItem.progress||t.messageItem.progress===1)&&!o(F)&&"message-video-cover"]]),onClick:p},[t.messageItem.progress>0&&t.messageItem.progress<1&&o(i)||!o(F)&&o(i)?(v(),b("img",{key:0,class:P(["message-img",[o(d)?"is-width":"is-height"]]),src:o(i)},null,10,zf)):o(F)?(v(),b("video",{key:2,ref_key:"videoRef",ref:r,class:"message-img video-web",src:t.content.url,controls:"",preload:"metadata",poster:o(i)},null,8,Wf)):(v(),b("video",{key:1,ref_key:"videoRef",ref:r,class:"message-img video-h5-uploading",src:t.content.url+"#t=0.1",poster:t.content.url,preload:"auto",muted:""},null,8,Vf))],2),o(a)&&!o(F)?(v(),b("div",Kf,[T("div",{class:"dialog-video-close",onClick:Oe(p,["stop"])},[K(pe,{file:o(Jn)},null,8,["file"])]),T("div",{class:P(["dialog-video-box",[o(F)?"":"dialog-video-h5"]]),onClick:Oe(p,["self"])},[T("video",{class:P([o(d)?"is-width":"is-height"]),src:t.content.url,controls:"",autoplay:""},null,10,Zf)],2)])):H("",!0)]))}});const Jf=ae(qf,[["__scopeId","data-v-239905cc"]]),Xf="/admin/assets/msg-del-8e1884b8.svg",Tr="/admin/assets/msg-copy-91b797d7.svg",Qf="/admin/assets/msg-quote-6ed4649b.svg",eg="/admin/assets/msg-revoke-a0b46d31.svg",tg="/admin/assets/msg-forward-b9d14da1.svg",sg="/admin/assets/translate-a0cfa550.svg",ng="/admin/assets/multiple-select-63011d60.svg",ag="/admin/assets/convertText_zh-ea05cc29.svg";function As(e){const s=j.getData(V.APP,"tasks");e in s&&!s[e]&&(s[e]=!0,j.update(V.APP,"tasks",s))}const Bs=class Bs{constructor(){Ue(this,"savedSelection");this.savedSelection=null}static getInstance(){return Bs.instance||(Bs.instance=new Bs),Bs.instance}saveCurrentSelection(){const s=window.getSelection();$e||!s||(this.savedSelection={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset})}restoreSelection(){const s=window.getSelection();if($e||!s||!this.savedSelection)return;const{anchorNode:t,anchorOffset:n,focusNode:a,focusOffset:i}=this.savedSelection;if(!t||!a)return;const u=document.createRange();(t===a?n<=i:t.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING)?(u.setStart(t,n),u.setEnd(a,i)):(u.setStart(a,i),u.setEnd(t,n)),s.removeAllRanges(),s.addRange(u)}async copySelection(s){this.restoreSelection();const t=window.getSelection();if($e||!t||t.rangeCount===0){await this.copyTextOrHtml(s,"text");return}const a=t.getRangeAt(0).cloneContents(),i=document.createElement("div");i.appendChild(a);const u=i.innerHTML||s,c=i.innerHTML?"html":"text";await this.copyTextOrHtml(u,c),this.savedSelection=null}async copyTextOrHtml(s,t){const n=t==="html"?"text/html":"text/plain";if(navigator.clipboard)try{const i=new Blob([s],{type:n}),u=new ClipboardItem({[n]:i});await navigator.clipboard.write([u]);return}catch{}let a;if(t==="html"){a=document.createElement("div"),a.style.position="fixed",a.style.opacity="0",a.contentEditable="true",a.innerHTML=s,document.body.appendChild(a);const i=document.createRange();i.selectNodeContents(a);const u=window.getSelection();u==null||u.removeAllRanges(),u==null||u.addRange(i),a.focus()}else a=document.createElement("textarea"),a.value=s,a.style.position="fixed",document.body.appendChild(a),a.focus(),a.select();try{document.execCommand("copy")}catch(i){Se({message:A.t("TUIChat.此机型暂不支持复制"),type:we.ERROR}),console.warn("use document.execCommand copy failed:",i)}finally{document.body.removeChild(a)}}};Ue(Bs,"instance");let Ro=Bs;const Cr=Ro.getInstance(),og=["onClick","onMousedown"],ig={class:"list-item-text"},rg=ne({__name:"index",props:{messageItem:{default:()=>({})},isMultipleSelectMode:{type:Boolean,default:!1}},emits:["toggleMultipleSelectMode"],setup(e,{expose:s,emit:t}){const n=t,a=e,i=Ft.getFeatureConfig(),u=Z.TYPES,c=w([{key:"open",text:A.t("TUIChat.打开"),iconUrl:Tr,renderCondition(){var M;return!i.DownloadFile||!l.value?!1:F&&(((M=l.value)==null?void 0:M.type)===u.MSG_FILE||l.value.type===u.MSG_VIDEO||l.value.type===u.MSG_IMAGE)},clickEvent:f},{key:"copy",text:A.t("TUIChat.复制"),iconUrl:Tr,renderCondition(){return!i.CopyMessage||!l.value?!1:l.value.type===u.MSG_TEXT},clickEvent:_},{key:"revoke",text:A.t("TUIChat.撤回"),iconUrl:eg,renderCondition(){return!i.RevokeMessage||!l.value?!1:l.value.flow==="out"&&l.value.status==="success"},clickEvent:h},{key:"delete",text:A.t("TUIChat.删除"),iconUrl:Xf,renderCondition(){return!i.DeleteMessage||!l.value?!1:l.value.status==="success"},clickEvent:g},{key:"forward",text:A.t("TUIChat.转发"),iconUrl:tg,renderCondition(){return!i.ForwardMessage||!l.value?!1:l.value.status==="success"},clickEvent:y},{key:"quote",text:A.t("TUIChat.引用"),iconUrl:Qf,renderCondition(){if(!i.QuoteMessage||!l.value)return!1;const M=j.getMessageModel(l.value.ID);return l.value.status==="success"&&!M.getSignalingInfo()},clickEvent:I},{key:"translate",text:A.t("TUIChat.翻译"),visible:!1,iconUrl:sg,renderCondition(){return!i.TranslateMessage||!l.value?!1:l.value.status==="success"&&l.value.type===u.MSG_TEXT},clickEvent:S},{key:"convert",text:A.t("TUIChat.转文字"),visible:!1,iconUrl:ag,renderCondition(){return!i.VoiceToText||!l.value?!1:l.value.status==="success"&&l.value.type===u.MSG_AUDIO},clickEvent:C},{key:"multi-select",text:A.t("TUIChat.多选"),iconUrl:ng,renderCondition(){return!i.MultiSelection||!l.value?!1:l.value.status==="success"},clickEvent:R}]),l=w(),r=w();Ne(()=>{j.watch(V.CHAT,{translateTextInfo:k,voiceToTextInfo:x})}),at(()=>{j.unwatch(V.CHAT,{translateTextInfo:k,voiceToTextInfo:x})}),et(()=>{l.value=j.getMessageModel(a.messageItem.ID)});const d=re(()=>{for(let M=0;M<c.value.length;++M)if(c.value[M].renderCondition())return!1;return!0});function p(M){c.value[M].clickEvent()}function f(){var G;let M="";switch((G=l.value)==null?void 0:G.type){case Z.TYPES.MSG_FILE:M=l.value.payload.fileUrl;break;case Z.TYPES.MSG_VIDEO:M=l.value.payload.remoteVideoUrl;break;case Z.TYPES.MSG_IMAGE:M=l.value.payload.imageInfoArray[0].url;break}window==null||window.open(M,"_blank")}function h(){if(!l.value)return;j.getMessageModel(l.value.ID).revokeMessage().then(()=>{As("revokeMessage")}).catch(G=>{if(G.code===20016){const E=A.t("TUIChat.已过撤回时限");Se({message:E,type:we.ERROR})}})}function g(){if(!l.value)return;j.getMessageModel(l.value.ID).deleteMessage()}async function _(){var M,G,E,O,U;ie?(E=fe)==null||E.setClipboardData({data:ln((G=(M=l.value)==null?void 0:M.payload)==null?void 0:G.text)}):Cr.copySelection((U=(O=l.value)==null?void 0:O.payload)==null?void 0:U.text)}function m(M){M!=="copy"||$e||Cr.saveCurrentSelection()}function y(){l.value&&j.update(V.CUSTOM,"singleForwardMessageID",l.value.ID)}function I(){l.value&&l.value.quoteMessage()}function S(){if(!j.getData(V.APP,"enabledTranslationPlugin")){Se({message:A.t("TUIChat.请开通翻译功能"),type:we.WARNING});return}if(!l.value)return;const G=c.value.findIndex(E=>E.key==="translate");j.update(V.CHAT,"translateTextInfo",{conversationID:l.value.conversationID,messageID:l.value.ID,visible:!c.value[G].visible})}function C(){if(!j.getData(V.APP,"enabledVoiceToText")){Se({message:A.t("TUIChat.请开通语音转文字功能")});return}if(!l.value)return;const G=c.value.findIndex(E=>E.key==="convert");j.update(V.CHAT,"voiceToTextInfo",{conversationID:l.value.conversationID,messageID:l.value.ID,visible:!c.value[G].visible})}function R(){n("toggleMultipleSelectMode")}function k(M){if(M===void 0)return;const G=M.get(a.messageItem.conversationID)||[],E=c.value.findIndex(O=>O.key==="translate");for(let O=0;O<G.length;++O){const{messageID:U,visible:N}=G[O];if(U===a.messageItem.ID){c.value[E].text=A.t(N?"TUIChat.隐藏":"TUIChat.翻译"),c.value[E].visible=!!N;return}}c.value[E].text=A.t("TUIChat.翻译")}function x(M){if(M===void 0)return;const G=M.get(a.messageItem.conversationID)||[],E=c.value.findIndex(O=>O.key==="convert");for(let O=0;O<G.length;++O){const{messageID:U,visible:N}=G[O];if(U===a.messageItem.ID){c.value[E].text=A.t(N?"TUIChat.隐藏":"TUIChat.转文字"),c.value[E].visible=!!N;return}}c.value[E].text=A.t("TUIChat.转文字")}return s({messageToolDom:r}),(M,G)=>!o(d)&&!M.messageItem.hasRiskContent?(v(),b("div",{key:0,ref_key:"messageToolDom",ref:r,class:P(["dialog-item",o(F)?"dialog-item-web":"dialog-item-h5"])},[o(i).EmojiReaction?nt(M.$slots,"TUIEmojiPlugin",{key:0},void 0,!0):H("",!0),T("div",{class:P(["dialog-item-list",o(F)?"dialog-item-list-web":"dialog-item-list-h5"])},[(v(!0),b(ve,null,Te(o(c),(E,O)=>(v(),b(ve,null,[E.renderCondition()?(v(),b("div",{key:E.key,class:"list-item",onClick:U=>p(O),onMousedown:U=>m(E.key)},[K(pe,{file:E.iconUrl,size:"15px"},null,8,["file"]),T("span",ig,D(E.text),1)],40,og)):H("",!0)],64))),256))],2)],2)):H("",!0)}});const lg=ae(rg,[["__scopeId","data-v-25636b70"]]),cg={class:"revoke"},ug={key:0},dg={key:1},hg={key:2},pg=ne({__name:"message-revoked",props:{isEdit:{type:Boolean,default:()=>!1},messageItem:{type:Object,default:()=>({})}},emits:["messageEdit"],setup(e,{emit:s}){const t=e,n=w(),a=w(!1),i=s;et(()=>{n.value=t.messageItem,a.value=t.isEdit});const u=()=>{i("messageEdit")};return(c,l)=>(v(),b("div",cg,[o(n).flow==="in"?(v(),b("span",ug,D(o(n).nick||o(n).from),1)):o(n).from===o(n).revoker?(v(),b("span",dg,D(o(A).t("TUIChat.您")),1)):(v(),b("span",hg,D(o(n).revoker),1)),T("span",null,D(o(A).t("TUIChat.撤回了一条消息")),1),o(n).flow==="out"&&o(a)?(v(),b("span",{key:3,class:"edit",onClick:u},D(o(A).t("TUIChat.重新编辑")),1)):H("",!0)]))}});const fg=ae(pg,[["__scopeId","data-v-f397fa70"]]);function ec(e){var t;const s=os((t=e==null?void 0:e.payload)==null?void 0:t.data);return!!((s==null?void 0:s.businessID)===1&&(s!=null&&s.data)&&os(s.data).businessID==="av_call")}function gg(e){var t;const s=os((t=e==null?void 0:e.payload)==null?void 0:t.data);return(s==null?void 0:s.businessID)==="ROOM_INVITE_ACTION"||(s==null?void 0:s.businessID)==="tuikit_engine_room"}function tc(e){var t;const s=os((t=e==null?void 0:e.payload)==null?void 0:t.data);return(s==null?void 0:s.businessID)==="group_room_message"}function _g(e){return e.type===Z.TYPES.MSG_CUSTOM&&(ec(e)||el(e)||tc(e)||gg(e))}const vg={class:"message-plugin"},mg={key:0,class:"message-plugin-tip"},yg=ne({__name:"message-plugin-layout",props:{message:{default:()=>({})},showStyle:{default:""},bubbleClassNameList:{default:()=>[]},blinkMessageIDList:{default:()=>[]}},emits:["resendMessage","handleToggleMessageItem","handleH5LongPress"],setup(e,{emit:s}){const t=e,n=s,a=re(()=>{var l;return j.getMessageModel((l=t.message)==null?void 0:l.ID)}),i=l=>{n("resendMessage",l)},u=(l,r,d=!1)=>{n("handleToggleMessageItem",l,r,d)},c=(l,r,d)=>{n("handleH5LongPress",l,r,d)};return(l,r)=>(v(),b("div",vg,[t.showStyle==="tip"?(v(),b("div",mg,[nt(l.$slots,"messageTip",{},void 0,!0)])):t.showStyle==="bubble"?(v(),b("div",{key:1,class:"message-plugin-bubble-content",onLongpress:r[1]||(r[1]=d=>u(d,o(a),!0)),onContextmenu:r[2]||(r[2]=Oe(d=>u(d,o(a)),["prevent","right"])),onTouchstart:r[3]||(r[3]=d=>c(d,o(a),"touchstart")),onTouchend:r[4]||(r[4]=d=>c(d,o(a),"touchend")),onMouseover:r[5]||(r[5]=d=>c(d,o(a),"touchend"))},[K(Ql,{messageItem:o(a),content:o(a).getMessageContent(),blinkMessageIDList:t.blinkMessageIDList,classNameList:t.bubbleClassNameList,onResendMessage:r[0]||(r[0]=d=>i(o(a)))},{messageElement:Pe(()=>[o(ie)?H("",!0):nt(l.$slots,"messageBubble",{key:0},void 0,!0)]),default:Pe(()=>[o(ie)?nt(l.$slots,"messageBubble",{key:0},void 0,!0):H("",!0)]),_:3},8,["messageItem","content","blinkMessageIDList","classNameList"])],32)):H("",!0)]))}});const Ig=ae(yg,[["__scopeId","data-v-93a987ab"]]),bg=ne({__name:"message-call-group",props:{message:{default:()=>({})},signalingInfo:{default:()=>({})},customContent:{default:()=>({})},blinkMessageIDList:{default:()=>[]}},setup(e){const s=e,t=Z.TYPES,n=re(()=>!!s.signalingInfo),a=re(()=>{var c;return(c=s.message)==null?void 0:c.conversationType}),i=re(()=>{var c;return(c=s.customContent)==null?void 0:c.custom}),u=re(()=>{var c,l;return(c=s.message)!=null&&c.ID?(l=s.blinkMessageIDList)==null?void 0:l.includes(s.message.ID):!1});return(c,l)=>o(n)&&o(a)===o(t).CONV_GROUP?(v(),b("div",{key:0,class:P({"blink-text":o(u)})},D(o(i)),3)):H("",!0)}});const Tg=ae(bg,[["__scopeId","data-v-674f4c0b"]]),Cg="/admin/assets/call-video-6c7799e9.svg",Sg="/admin/assets/call-voice-f8912d47.svg",wg={androidInfo:{sound:"private_ring.mp3",XiaoMiChannelID:"high_custom_1",OPPOChannelID:"tuikit"},apnsInfo:{sound:"01.caf",image:"https://web.sdk.qcloud.com/im/demo/latest/faviconnew.png"}},kg={title:"call",description:"you have a call",androidSound:"private_ring",androidOPPOChannelID:"tuikit",iOSSound:"01.caf"},Eg={[Z.TYPES.MSG_TEXT]:"[文本]",[Z.TYPES.MSG_FACE]:"[动画表情]",[Z.TYPES.MSG_IMAGE]:"[图片]",[Z.TYPES.MSG_FILE]:"[文件]",[Z.TYPES.MSG_AUDIO]:"[语音]",[Z.TYPES.MSG_VIDEO]:"[视频]",[Z.TYPES.MSG_LOCATION]:"[地理位置]",[Z.TYPES.MSG_MERGER]:"[聊天记录]",[Z.TYPES.MSG_CUSTOM]:"[自定义消息]"};var gn=(e=>(e.CHAT="chat",e.CALL="call",e))(gn||{}),fs;let Mg=(fs=class{constructor(){Ue(this,"name","OfflinePushInfoManager");Ue(this,"offlinePushInfo",{});this.offlinePushInfo={[gn.CHAT]:wg,[gn.CALL]:kg}}static getInstance(){return fs.instance||(fs.instance=new fs),fs.instance}getOfflinePushInfo(s){return Object.values(gn).includes(s)?this.offlinePushInfo[s]:(console.error(`${this.name} getOfflinePushInfo scene: ${s} is invalid`),null)}genTitle(s,t){let n=s==null?void 0:s.getShowName();return s.type===Z.TYPES.CONV_C2C&&(n=(t==null?void 0:t.nick)||(t==null?void 0:t.userID)),n}genDesc(s,t){let n="";return s===Z.TYPES.MSG_TEXT&&(n=ln(t.text)),s===Z.TYPES.MSG_CUSTOM&&(n=t.description),n||A.t(`TUIChat.${Eg[s]}`)}create(s){var c;const{conversation:t,messageType:n="",payload:a={}}=s||{},i=j.getData(V.USER,"userProfile"),u={sender:t.type===Z.TYPES.CONV_GROUP?(c=t.groupProfile)==null?void 0:c.groupID:i==null?void 0:i.userID,nickName:i==null?void 0:i.nick,chatType:t.type===Z.TYPES.CONV_GROUP?2:1,version:1,action:1};return{title:this.genTitle(t,i),description:this.genDesc(n,a),extension:JSON.stringify({entity:u}),...this.offlinePushInfo[gn.CHAT]}}},Ue(fs,"instance",null),fs);const ns=Mg.getInstance(),xg={class:"call-content"},Ug=ne({__name:"message-call-c2c",props:{message:{type:Object,default:()=>({})},signalingInfo:{type:Object,default:()=>({})},customContent:{type:Object,default:()=>({})}},setup(e){const s=e,t=w(Z.TYPES),n=re(()=>s.signalingInfo!=null),a=re(()=>{var r,d;switch((d=os((r=s.signalingInfo)==null?void 0:r.data))==null?void 0:d.call_type){case 1:return{type:1,icon:Sg};case 2:return{type:2,icon:Cg}}return{type:0,icon:""}}),i=re(()=>{var l;return(l=s.message)==null?void 0:l.conversationType}),u=re(()=>{var l;return(l=s.customContent)==null?void 0:l.custom}),c=()=>{var l,r,d,p;if(i.value===Z.TYPES.CONV_C2C){const f=((l=s.message)==null?void 0:l.flow)==="out"?(r=s.message)==null?void 0:r.to:(d=s.message)==null?void 0:d.from;ze.callService({serviceName:_e.TUICalling.SERVICE.NAME,method:_e.TUICalling.SERVICE.METHOD.START_CALL,params:{userIDList:[f],type:(p=a==null?void 0:a.value)==null?void 0:p.type,callParams:{offlinePushInfo:ns.getOfflinePushInfo(gn.CALL)}}})}};return(l,r)=>o(n)&&o(i)===o(t).CONV_C2C?(v(),b("div",{key:0,class:P(["call",["call-"+o(i),e.message.flow==="out"&&"call-reverse"]]),onClick:c},[T("div",{class:P(["icon",e.message.flow==="out"&&o(a).type===2&&"icon-reverse"])},[K(pe,{file:o(a).icon},null,8,["file"])],2),T("span",xg,D(o(u)),1)],2)):H("",!0)}});const Ag=ae(Ug,[["__scopeId","data-v-3ce56025"]]),Rg=ne({__name:"message-customer-service",props:{message:{default:()=>({})}},setup(e){const s=e;return(t,n)=>(v(),oe(Pc,{message:s.message},null,8,["message"]))}});const Dg=ae(Rg,[["__scopeId","data-v-cb63c929"]]),Pg=ne({__name:"message-room-default",props:{message:{default:()=>({})}},setup(e){const s=e;return(t,n)=>(v(),b("div",{class:P(["room-default",o(ie)&&"room-default-uni",s.message.flow==="in"?"room-default-in":"room-default-out"])},D(o(A).t("message.custom.自定义消息")),3))}});const Og=ae(Pg,[["__scopeId","data-v-2b8047ad"]]),Lg=ne({__name:"message-plugin",props:{message:{default:()=>({})},blinkMessageIDList:{default:()=>[]}},emits:["resendMessage","handleToggleMessageItem","handleH5LongPress"],setup(e,{emit:s}){const t=e,n=s,a=re(()=>j.getMessageModel(t.message.ID)),i=re(()=>{var p;return(p=a==null?void 0:a.value)==null?void 0:p.getSignalingInfo()}),u=re(()=>{var p;return(p=a==null?void 0:a.value)==null?void 0:p.getMessageContent()}),c=re(()=>{var f;let p={pluginType:"",showStyle:""};return ec(a.value)?p={pluginType:"call",showStyle:((f=a.value)==null?void 0:f.conversationType)===Z.TYPES.CONV_GROUP?"tip":"bubble"}:tc(a.value)?p={pluginType:"room",showStyle:"bubble"}:el(a.value)&&(p={pluginType:"customer",showStyle:Oc(a.value)?"":"bubble"}),p}),l=p=>{n("resendMessage",p)},r=(p,f,h=!1)=>{n("handleToggleMessageItem",p,f,h)},d=(p,f,h)=>{n("handleH5LongPress",p,f,h)};return(p,f)=>(v(),oe(Ig,{message:t.message,showStyle:o(c).showStyle,bubbleClassNameList:[o(c).pluginType==="room"?"message-bubble-room":""],onResendMessage:l,onHandleToggleMessageItem:r,onHandleH5LongPress:d},{messageTip:Pe(()=>[K(Tg,{message:t.message,signalingInfo:o(i),customContent:o(u),blinkMessageIDList:t.blinkMessageIDList},null,8,["message","signalingInfo","customContent","blinkMessageIDList"])]),messageBubble:Pe(()=>[o(c).pluginType==="call"?(v(),oe(Ag,{key:0,message:t.message,signalingInfo:o(i),customContent:o(u)},null,8,["message","signalingInfo","customContent"])):H("",!0),o(c).pluginType==="customer"?(v(),oe(Dg,{key:1,message:t.message},null,8,["message"])):H("",!0),o(c).pluginType==="room"?(v(),oe(Og,{key:2,message:t.message},null,8,["message"])):H("",!0)]),_:1},8,["message","showStyle","bubbleClassNameList"]))}});const $g=ae(Lg,[["__scopeId","data-v-06f2aa39"]]),Ng="/admin/assets/double-arrow-a1a15b8b.svg",Gg={class:"scroll-button-text"},Bg=ne({__name:"index",emits:["scrollToLatestMessage"],setup(e,{expose:s,emit:t}){const n=t,a=w([]),i=w(""),u=w(0),c=w(0),l=w(!1),r=w(!1),d=w(!1),p=re(()=>c.value?`${c.value}${A.t("TUIChat.条新消息")}`:A.t("TUIChat.回到最新位置"));Ze(()=>[l.value,r.value],()=>{d.value=l.value||r.value,d.value||I()},{immediate:!0}),Ne(()=>{j.watch(V.CHAT,{messageList:h,newMessageList:g}),j.watch(V.CONV,{currentConversation:_})}),at(()=>{j.unwatch(V.CHAT,{messageList:h,newMessageList:g}),j.unwatch(V.CONV,{currentConversation:_})});function f(C){var R,k;return((k=os((R=C.payload)==null?void 0:R.data))==null?void 0:k.businessID)==="user_typing_status"}function h(C){var k,x;a.value=C||[];const R=(x=a.value)==null?void 0:x[((k=a.value)==null?void 0:k.length)-1];r.value=!!(R&&(R==null?void 0:R.time)<(u==null?void 0:u.value))}function g(C){Array.isArray(C)&&d.value&&C.forEach(R=>{R&&R.conversationID===i.value&&!R.isDeleted&&!R.isRevoked&&!f(R)&&(c.value+=1)})}function _(C){var R;(C==null?void 0:C.conversationID)!==i.value&&I(),i.value=(C==null?void 0:C.conversationID)||"",u.value=((R=C==null?void 0:C.lastMessage)==null?void 0:R.lastTime)||0}async function m(C){var R,k,x,M,G;if(C.target)try{const{height:E}=await va(`#${(R=C.target)==null?void 0:R.id}`,"messageList")||{},O=((k=C.target)==null?void 0:k.scrollHeight)||((x=C.detail)==null?void 0:x.scrollHeight),U=((M=C.target)==null?void 0:M.scrollTop)||((G=C.detail)==null?void 0:G.scrollTop)||0;if(O-U>2*E){l.value=!0;return}l.value=!1}catch{l.value=!1}}function y(){j.getData(V.CHAT,"messageSource")!==void 0&&j.update(V.CHAT,"messageSource",void 0)}function I(){c.value=0}function S(){y(),I(),n("scrollToLatestMessage")}return s({judgeScrollOverOneScreen:m,isScrollButtonVisible:d}),(C,R)=>o(d)?(v(),b("div",{key:0,class:"scroll-button",onClick:S},[K(pe,{width:"10px",height:"10px",file:o(Ng)},null,8,["file"]),T("div",Gg,D(o(p)),1)])):H("",!0)}});const Hg=ae(Bg,[["__scopeId","data-v-d2111ace"]]),Fg=ne({__name:"index",props:{isFetching:{type:Boolean,default:!1},isTerminateObserve:{type:Boolean,default:!1}},emits:["onExposed"],setup(e,{emit:s}){var c;const t=s,n=e;let a=null;const i=w(),u=((c=In())==null?void 0:c.proxy)||In();return Ne(()=>{n.isTerminateObserve||(ie?(a=uni.createIntersectionObserver(u).relativeToViewport(),a.observe(".fetch-more-block",()=>{t("onExposed")})):(a=new IntersectionObserver(([l])=>{l.isIntersecting&&t("onExposed")},{threshold:1}),i.value&&a.observe(i.value)))}),at(()=>{a&&(a.disconnect(),a=null)}),Ze(()=>n.isTerminateObserve,l=>{a&&(l?a.disconnect():i.value&&(a.disconnect(),ie?a.observe(".fetch-more-block",()=>{t("onExposed")}):a.observe(i.value)))}),(l,r)=>(v(),b("div",{ref_key:"selfDomRef",ref:i,class:"fetch-more-block"},[n.isFetching?nt(l.$slots,"fetching",{key:0},()=>[T("div",null,D(o(A).t("TUIChat.正在加载")),1)],!0):nt(l.$slots,"fetchEnd",{key:1},()=>[T("div",null,D(o(A).t("TUIChat.加载结束")),1)],!0)],512))}});const jg=ae(Fg,[["__scopeId","data-v-fd5944b2"]]),Yg={class:"header"},zg={class:"header-text"},Vg={class:"header-close-icon"},Wg={class:"read-status-counter-container"},Kg=["onClick"],Zg={class:"status-text"},qg={class:"status-count"},Jg={class:"read-status-member-list"},Xg={key:0,class:"empty-list-tip"},Qg={class:"username"},e_={class:"username"},t_={key:2,class:"fetch-more-container"},s_=ne({__name:"index",props:{message:{default:()=>({})}},emits:["setReadReceiptPanelVisible"],setup(e,{emit:s}){const t=s,n=e;let a="",i="";const u=["unread","read"],c={unread:!1,read:!1,close:!1},l=w(!1),r=w(!1),d=w(!1),p=w(!1),f=w("unread"),h=w(S());Ne(async()=>{await m(),wt(()=>{d.value=!0})}),Ze(()=>n.message.readReceiptInfo.readCount,()=>{m()});async function g(k="all"){const x=j.getMessageModel(n.message.ID);let M={},G={};(k==="all"||k==="unread")&&(M=await it.getGroupMessageReadMemberList({message:x,filter:1,cursor:a,count:100}),M&&(a=M.data.cursor,M.data.isCompleted&&(c.unread=!0))),(k==="all"||k==="read")&&(G=await it.getGroupMessageReadMemberList({message:x,filter:0,cursor:i,count:100}),G&&(i=G.data.cursor,G.data.isCompleted&&(c.read=!0)));const{unreadCount:E,readCount:O}=x.readReceiptInfo;return{unreadResult:{count:E,...M.data},readResult:{count:O,...G.data}}}async function _(){if(!(c[f.value]||l.value)&&(l.value=!0,f.value==="unread"||f.value==="read")){const{unreadResult:k,readResult:x}=await g(f.value);y();try{h.value.unread.memberList=h.value.unread.memberList.concat(k.unreadUserInfoList||[]),h.value.read.memberList=h.value.read.memberList.concat(x.readUserInfoList||[])}finally{l.value=!1}}}async function m(){a="",i="",p.value=!1,c.unread=!1,c.read=!1;const{unreadResult:k,readResult:x}=await g("all");y(),I("read",x.count,x.readUserInfoList),I("unread",k.count,k.unreadUserInfoList),I("close")}function y(){c.read&&c.unread&&(p.value=!0)}function I(k,x,M){h.value[k].count=x,h.value[k].memberList=M||[]}function S(){return{read:{tabName:A.t("TUIChat.已读"),count:void 0,memberList:[]},unread:{tabName:A.t("TUIChat.未读"),count:void 0,memberList:[]},close:{tabName:A.t("TUIChat.关闭"),count:void 0,memberList:[]}}}function C(k){f.value=k}function R(){r.value=!0,setTimeout(()=>{t("setReadReceiptPanelVisible",!1)},200)}return(k,x)=>(v(),oe(qn,{maskColor:"transparent",onOnOverlayClick:R},{default:Pe(()=>[T("div",{class:P({"read-receipt-panel":!0,"read-receipt-panel-mobile":o(ft),"read-receipt-panel-close-mobile":o(ft)&&o(r)})},[T("div",Yg,[T("div",zg,D(o(A).t("TUIChat.消息详情")),1),T("div",Vg,[K(pe,{size:"12px",hotAreaSize:"8",file:o(Jn),onOnClick:R},null,8,["file"])])]),T("div",Wg,[(v(),b(ve,null,Te(u,M=>T("div",{key:M,class:P({"read-status-counter":!0,active:M===o(f)}),onClick:G=>C(M)},[T("div",Zg,D(o(h)[M].tabName),1),T("div",qg,D(o(h)[M].count===void 0?"":o(h)[M].count),1)],10,Kg)),64))]),T("div",Jg,[o(h)[o(f)].count===0&&o(d)?(v(),b("div",Xg," - "+D(o(A).t("TUIChat.空"))+" - ",1)):o(d)?(v(),b(ve,{key:1},[o(f)==="unread"?(v(!0),b(ve,{key:0},Te(o(h)[o(f)].memberList,M=>(v(),b("div",{key:M.userID,class:"read-status-member-container"},[K(gs,{class:"read-status-avatar",useSkeletonAnimation:"",url:M.avatar||""},null,8,["url"]),T("div",Qg,D(M.nick||M.userID),1)]))),128)):H("",!0),o(f)==="read"?(v(!0),b(ve,{key:1},Te(o(h)[o(f)].memberList,M=>(v(),b("div",{key:M.userID,class:"read-status-member-container"},[K(gs,{class:"read-status-avatar",useSkeletonAnimation:"",url:M.avatar},null,8,["url"]),T("div",e_,D(M.nick||M.userID),1)]))),128)):H("",!0)],64)):H("",!0),o(d)?(v(),b("div",t_,[K(jg,{isFetching:o(l),isTerminateObserve:o(p),onOnExposed:_},null,8,["isFetching","isTerminateObserve"])])):H("",!0)])],2)]),_:1}))}});const n_=ae(s_,[["__scopeId","data-v-4cc7208c"]]),a_={key:0,class:"dialog-main-header"},o_={class:"dialog-main-title"},i_={key:1,class:"dialog-main-footer"},r_=ne({__name:"index",props:{show:{type:Boolean,default:!1},isHeaderShow:{type:Boolean,default:!0},isFooterShow:{type:Boolean,default:!0},background:{type:Boolean,default:!0},title:{type:String,default:""},center:{type:Boolean,default:!1}},emits:["update:show","submit"],setup(e,{emit:s}){const t={OUTSIDE:"outside",INSIDE:"inside"},n=e,a=w(!1),i=w(!0),u=w(!0),c=w(!0),l=w("");et(()=>{a.value=n.show,l.value=n.title,i.value=n.isHeaderShow,u.value=n.isFooterShow,c.value=n.background});const r=s,d=h=>{h===t.OUTSIDE&&p()},p=()=>{a.value=!a.value,r("update:show",a.value)},f=()=>{r("submit"),p()};return(h,g)=>o(a)?(v(),b("div",{key:0,class:P(["dialog",[o(F)?"":"dialog-h5",e.center?"center":""]]),onClick:g[1]||(g[1]=Oe(_=>d(t.OUTSIDE),["stop","prevent"]))},[T("main",{class:P(["dialog-main",[o(c)?"":"dialog-main-back"]]),onClick:g[0]||(g[0]=Oe(_=>d(t.INSIDE),["stop","prevent"]))},[o(i)?(v(),b("header",a_,[T("h1",o_,D(o(l)),1),T("i",{class:"icon icon-close",onClick:p})])):H("",!0),T("div",{class:P(["dialog-main-content",[o(ie)&&o($e)?"dialog-main-content-uniapp":""]])},[nt(h.$slots,"default",{},void 0,!0)],2),o(u)?(v(),b("footer",i_,[T("button",{class:"btn btn-cancel",onClick:p},D(o(A).t("component.取消")),1),T("button",{class:"btn btn-default",onClick:f},D(o(A).t("component.确定")),1)])):H("",!0)],2)],2)):H("",!0)}});const wn=ae(r_,[["__scopeId","data-v-b016c025"]]),Sr="/admin/assets/icon-arrow-left-af0c0bb9.svg",l_="/admin/assets/zoom-in-c967ceef.svg",c_="/admin/assets/zoom-out-862aabb4.svg",u_="/admin/assets/rotate-left-6ff9e83b.svg",d_="/admin/assets/rotate-right-161115e3.svg",h_="/admin/assets/download-a9b7471d.svg",p_=["src"],f_=ne({__name:"image-item",props:{zoom:{type:Number,default:1},rotate:{type:Number,default:0},src:{type:String,default:""}},setup(e){const s=e;return(t,n)=>(v(),b("img",{class:"image-preview",style:jt({transform:`scale(${s.zoom}) rotate(${s.rotate}deg)`}),src:s.src},null,12,p_))}});const g_={class:"image-counter"},__=ne({__name:"index",props:{imageList:{default:()=>[]},currentImage:{}},emits:["close"],setup(e,{emit:s}){const t=e,n=new Map([[1,"jpg"],[2,"gif"],[3,"png"],[4,"bmp"]]),a=s,i=w(1),u=w(0),c=w(.1),l=w(0),r=w(),d=w();let p=0;const f={};let h=!1,g=!1,_=null;et(()=>{l.value=t.imageList.findIndex($=>{var L;return $.ID===((L=t==null?void 0:t.currentImage)==null?void 0:L.ID)})});const m=$=>typeof $=="number"&&isFinite($),y=$=>{$.preventDefault(),k($),x($)},I=$=>{$.preventDefault(),h=!0,$.touches&&$.touches.length===2&&(g=!0,M($))},S=$=>{var Ce;$.preventDefault(),$.stopPropagation();let L=0,Y=0;if(g){_||(g=!1,delete f.pageX2,delete f.pageY2,_=setTimeout(()=>{_=null},200));return}if(_===null){switch(h){case!0:L=(Ce=$==null?void 0:$.changedTouches[0])==null?void 0:Ce.pageX,Y=L-p,Y>100?le():Y<-100&&J();break;case!1:U();break}_=setTimeout(()=>{_=null},200)}},C=()=>{g=!1,delete f.pageX1,delete f.pageY1},R=$=>{if($.preventDefault(),Math.abs($.deltaX)!==0&&Math.abs($.deltaY)!==0)return;let L=i.value;L+=$.deltaY*($.ctrlKey?-.01:.002),L=Math.min(Math.max(.125,L),4),i.value=L},k=$=>{var L;p=(L=$==null?void 0:$.changedTouches[0])==null?void 0:L.pageX,h=!1},x=$=>{const L=$==null?void 0:$.touches[0],Y=$==null?void 0:$.touches[1];f.pageX1=L==null?void 0:L.pageX,f.pageY1=L==null?void 0:L.pageY,Y&&(f.pageX2=Y==null?void 0:Y.pageX,f.pageY2=Y==null?void 0:Y.pageY)},M=$=>{const L=$==null?void 0:$.touches[0],Y=$==null?void 0:$.touches[1];Y&&(m(f.pageX2)||(f.pageX2=Y.pageX),m(f.pageY2)||(f.pageY2=Y.pageY));const Ce=(Le,We,qe,It)=>Math.hypot(qe-Le,It-We);if(!m(f.pageX1)||!m(f.pageY1)||!m(f.pageX2)||!m(f.pageY2))return;const Ae=Ce(L.pageX,L.pageY,Y.pageX,Y.pageY)/Ce(f.pageX1,f.pageY1,f.pageX2,f.pageY2);i.value=Math.min(Math.max(.5,i.value*Ae),4)};Ne(()=>{document!=null&&document.addEventListener&&(document==null||document.addEventListener("keydown",G))});const G=$=>{$.preventDefault(),($==null?void 0:$.keyCode)===27&&U()},E=()=>{i.value+=.1},O=()=>{i.value=i.value-.1>c.value?i.value-.1:c.value},U=()=>{a("close")},N=()=>{u.value-=90},W=()=>{u.value+=90},J=()=>{l.value<t.imageList.length-1&&l.value++,ce()},le=()=>{l.value>0&&l.value--,ce()},ce=()=>{i.value=1,u.value=0},ue=$=>{var L,Y,Ce,Ae;return F?(Y=(L=$==null?void 0:$.payload)==null?void 0:L.imageInfoArray[0])==null?void 0:Y.url:(Ae=(Ce=$==null?void 0:$.payload)==null?void 0:Ce.imageInfoArray[2])==null?void 0:Ae.url},me=()=>{var Y,Ce;const $=t.imageList[l.value],L=(Ce=(Y=$==null?void 0:$.payload)==null?void 0:Y.imageInfoArray[0])==null?void 0:Ce.url;if(!L){Se({message:A.t("component.图片 url 不存在"),type:we.ERROR});return}switch(Lc()){case"wechat":fe.getSetting({success:Ae=>{Ae!=null&&Ae.authSetting["scope.writePhotosAlbum"]?ke(L):fe.authorize({scope:"scope.writePhotosAlbum",success(){ke(L)},fail(){fe.showModal({title:"您已拒绝获取相册权限",content:"是否进入权限管理，调整授权？",success:Le=>{if(Le.confirm)fe.openSetting({success:We=>{console.log(We.authSetting)}});else if(Le.cancel)return Se({message:A.t("component.已取消"),type:we.ERROR})}})}})},fail:()=>{Se({message:A.t("component.获取权限失败"),type:we.ERROR})}});break;case"app":ke(L);break;default:B(L);break}},ke=$=>{fe.showLoading({title:"大图提取中"}),fe.downloadFile({url:$,success:function(L){fe.hideLoading(),fe.saveImageToPhotosAlbum({filePath:L.tempFilePath,success:()=>{Se({message:A.t("component.已保存至相册"),type:we.SUCCESS})}})},fail:function(){fe.hideLoading(),Se({message:A.t("component.图片下载失败"),type:we.ERROR})}})},B=$=>{var Ae;const L={mode:"cors",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"})},Y=t.imageList[l.value],Ce=(Ae=Y==null?void 0:Y.payload)==null?void 0:Ae.imageFormat;if(!n.has(Ce)){Se({message:A.t("component.暂不支持下载此类型图片"),type:we.ERROR});return}if(window.fetch)fetch($,L).then(Le=>Le.blob()).then(Le=>{const We=document.createElement("a"),qe=window.URL.createObjectURL(Le);We.href=qe,We.download=qe+"."+n.get(Ce),We.click()});else{const Le=document.createElement("a");Le.href=$,Le.target="_blank",Le.download=$+"."+n.get(Ce),Le.click()}};return at(()=>{document!=null&&document.removeEventListener&&(document==null||document.removeEventListener("keydown",G))}),($,L)=>(v(),b("div",{class:P(["image-previewer",[o(ft)&&"image-previewer-h5"]])},[T("div",{ref_key:"image",ref:r,class:"image-wrapper",onTouchstart:Oe(y,["stop"]),onTouchmove:Oe(I,["stop"]),onTouchend:Oe(S,["stop"]),onTouchcancel:Oe(C,["stop"]),onWheel:Oe(R,["stop"])},[T("ul",{ref_key:"ulRef",ref:d,class:"image-list",style:jt({width:`${$.imageList.length*100}%`,transform:`translateX(-${o(l)*100/$.imageList.length}%)`,transition:"0.5s"})},[(v(!0),b(ve,null,Te($.imageList,(Y,Ce)=>(v(),b("li",{key:Ce,class:"image-item"},[K(f_,{zoom:o(i),rotate:o(u),src:ue(Y),messageItem:Y,class:P([o(ie)?"image-item":""])},null,8,["zoom","rotate","src","messageItem","class"])]))),128))],4)],544),ut(T("div",{class:"icon icon-close",onClick:U},[K(pe,{file:o(Jn),width:"16px",height:"16px"},null,8,["file"])],512),[[Jt,o(F)]]),o(F)&&o(l)>0?(v(),b("div",{key:0,class:"image-button image-button-left",onClick:le},[K(pe,{file:o(Sr)},null,8,["file"])])):H("",!0),o(F)&&o(l)<$.imageList.length-1?(v(),b("div",{key:1,class:"image-button image-button-right",onClick:J},[K(pe,{file:o(Sr)},null,8,["file"])])):H("",!0),T("div",{class:P(["actions-bar",o(ft)&&"actions-bar-h5"])},[o(F)?(v(),b("div",{key:0,class:"icon-zoom-in",onClick:E},[K(pe,{file:o(l_),width:"27px",height:"27px"},null,8,["file"])])):H("",!0),o(F)?(v(),b("div",{key:1,class:"icon-zoom-out",onClick:O},[K(pe,{file:o(c_),width:"27px",height:"27px"},null,8,["file"])])):H("",!0),o(F)?(v(),b("div",{key:2,class:"icon-refresh-left",onClick:N},[K(pe,{file:o(u_),width:"27px",height:"27px"},null,8,["file"])])):H("",!0),o(F)?(v(),b("div",{key:3,class:"icon-refresh-right",onClick:W},[K(pe,{file:o(d_),width:"27px",height:"27px"},null,8,["file"])])):H("",!0),T("span",g_,D(o(l)+1)+" / "+D($.imageList.length),1)],2),T("div",{class:"save",onClick:Oe(me,["stop","prevent"])},[K(pe,{file:o(h_),width:"20px",height:"20px"},null,8,["file"])])],2))}});const v_=ae(__,[["__scopeId","data-v-c03c167b"]]),m_={class:"progress-message"},y_={key:0,class:"progress-container"},I_=["value"],b_=["percent"],T_=ne({__name:"index",props:{content:{default:()=>({})},messageItem:{default:()=>({})}},setup(e){const s=e;return(t,n)=>(v(),b("div",m_,[nt(t.$slots,"default",{},void 0,!0),s.messageItem.status==="unSend"&&s.messageItem.progress<1?(v(),b("div",y_,[o(ie)?(v(),b("progress",{key:1,activeColor:"#006EFF",class:"progress-common",percent:Math.round(s.messageItem.progress*100)},null,8,b_)):(v(),b("progress",{key:0,class:"progress",value:s.messageItem.progress,max:"1"},null,8,I_))])):H("",!0)]))}});const no=ae(T_,[["__scopeId","data-v-587025e1"]]),xt=class xt{constructor(){Ue(this,"chatStorage",null)}static getInstance(){return xt.instance||(xt.instance=new xt),xt.instance}getChatStorage(s){if(this.chatStorage||(this.chatStorage=this.getChatStorageFromLocalStorage()),s)return this.chatStorage[s];throw new Error("No key provided")}setChatStorage(s,t){this.chatStorage||(this.chatStorage=this.getChatStorageFromLocalStorage()),this.chatStorage[s]=t;try{ie?fe.setStorageSync(xt.CHAT_STORAGE_KEY,JSON.stringify(this.chatStorage)):localStorage.setItem(xt.CHAT_STORAGE_KEY,JSON.stringify(this.chatStorage))}catch{throw new Error("Fail to set chat storage")}}getChatStorageFromLocalStorage(){let s="";if(ie?s=fe.getStorageSync(xt.CHAT_STORAGE_KEY)||"":s=localStorage.getItem(xt.CHAT_STORAGE_KEY)||"",!s)return{};try{this.chatStorage=JSON.parse(s)}catch{this.chatStorage={}}return this.chatStorage}};Ue(xt,"instance",null),Ue(xt,"CHAT_STORAGE_KEY","TUI_CHAT_STORAGE");let Do=xt;const ao=Do.getInstance(),C_={key:0,class:"tui-chat-safe-tips"},S_=["id"],w_={class:"message-item"},k_=["onLongpress","onContextmenu","onTouchstart","onTouchend","onMouseover"],E_={class:"delDialog-title"},M_=ne({__name:"index",props:{isGroup:{type:Boolean,default:!1},groupID:{default:""},isNotInGroup:{type:Boolean,default:!1},isMultipleSelectMode:{type:Boolean,default:!1}},emits:["closeInputToolBar","toggleMultipleSelectMode","handleEditor"],setup(e,{expose:s,emit:t}){const n=t,a=e;let i,u=null;const c=new Set,l=j.getData(V.APP,"isOfficial"),r=j.getData(V.APP,"enabledEmojiPlugin"),d=w(),p=w(),f=w(),h=w(),g=w([]),_=w(!1),m=w(""),y=w(),I=w(),S=w(""),C=w(Z.TYPES),R=w(!1),k=w(),x=w(),M=w(),G=w([]),E=w(),O=w(!1),U=w(),N=w(0),W=w(!1),J=w({}),le=w(!1),ce=w(),ue=re(()=>{var de;return(de=f==null?void 0:f.value)==null?void 0:de.filter(be=>!be.isRevoked&&!be.hasRiskContent&&be.type===C.value.MSG_IMAGE)}),me=w(!1),ke=w(),B=re(()=>ze.getExtensionList(_e.TUIChat.EXTENSION.MSG_POP_MENU.EXT_ID,{enabledEmojiPlugin:r}).some(be=>be.text==="TUIEmojiPlugin"));Ne(()=>{J.value=ao.getChatStorage("audioPlayedMapping")||{},j.watch(V.CHAT,{messageList:$,messageSource:Ce,isCompleted:Ae}),j.watch(V.CONV,{currentConversationID:We}),j.watch(V.CUSTOM,{isShowMessagePopMenu:Le})}),Ne(()=>{var de;(de=d.value)==null||de.addEventListener("scroll",Qe)}),at(()=>{var de;j.unwatch(V.CHAT,{messageList:$,messageSource:Ce,isCompleted:Ae}),j.unwatch(V.CONV,{currentConversationID:We}),j.unwatch(V.CUSTOM,{isShowMessagePopMenu:Le}),(de=d.value)==null||de.removeEventListener("scroll",Qe),Object.keys(J.value).length>0&&ao.setChatStorage("audioPlayedMapping",J.value),c.clear(),u==null||u.disconnect(),u=null});async function $(de){var He,gt,$t,kt,mt;u==null||u.disconnect();const be=y.value;let se=!1;if(h.value=de,f.value=de.filter(ot=>{var vs;return(vs=ot.reactionList)!=null&&vs.length&&!ot.isDeleted&&(se=!0),!ot.isDeleted}),!((He=f.value)!=null&&He.length)){y.value={};return}const De=($t=f.value)==null?void 0:$t[((gt=f.value)==null?void 0:gt.length)-1];if(k.value){if(((kt=f.value)==null?void 0:kt.findIndex(ot=>{var vs;return(ot==null?void 0:ot.ID)===((vs=k.value)==null?void 0:vs.ID)}))>=0){const ot=k.value;k.value=void 0,await Y({scrollToMessage:ot}),await Me(ot==null?void 0:ot.ID)}}else if(N.value)await Y({scrollToOffset:{bottom:N.value}}),N.value=0;else{if((mt=E.value)!=null&&mt.isScrollButtonVisible&&(De==null?void 0:De.flow)==="in")return;De!=null&&De.ID&&JSON.stringify(be)!==JSON.stringify(De)?await Y({scrollToBottom:!0}):se&&L()&&await Y({scrollToBottom:!0})}y.value=Object.assign({},De),as()&&wt(()=>rt())}function L(){return d.value&&typeof d.value.scrollTop=="number"&&typeof d.value.scrollHeight=="number"&&typeof d.value.clientHeight=="number"&&Math.ceil(d.value.scrollTop+d.value.clientHeight)>=d.value.scrollHeight}async function Y(de={}){return new Promise((be,se)=>{requestAnimationFrame(()=>{var He,gt,$t;d.value||se();const De=d.value;if(de.scrollToBottom)De.scrollTop=De.scrollHeight;else if(de.scrollToMessage){const kt=(He=x.value)==null?void 0:He.find(mt=>{var ot;return(mt==null?void 0:mt.id)===`tui-${(ot=de.scrollToMessage)==null?void 0:ot.ID}`});kt!=null&&kt.scrollIntoView&&kt.scrollIntoView({behavior:"smooth",block:"nearest"})}else de.scrollToOffset&&((gt=de.scrollToOffset)!=null&&gt.top?De.scrollTop=de.scrollToOffset.top:($t=de.scrollToOffset)!=null&&$t.bottom&&(De.scrollTop=De.scrollHeight-de.scrollToOffset.bottom));be()})})}async function Ce(de){var be;if(k.value=de,k.value&&((be=f.value)==null?void 0:be.findIndex(se=>{var De;return(se==null?void 0:se.ID)===((De=k.value)==null?void 0:De.ID)}))>=0){const se=k.value;k.value=void 0,await Y({scrollToMessage:se}),await Me(se==null?void 0:se.ID)}}function Ae(de){_.value=de}function Le(de){de||(S.value="")}const We=de=>{if(m.value=de,m.value||(f.value=[]),as()){const{groupProfile:be}=j.getConversationModel(de)||{};i=be==null?void 0:be.type}Object.keys(J.value).length>0&&ao.setChatStorage("audioPlayedMapping",J.value)},qe=()=>{var de;it.getMessageList().then(be=>{const{nextReqMessageID:se}=be.data;I.value=se}),N.value=(de=d.value)==null?void 0:de.scrollHeight},It=de=>{window.open(de.url)},z=de=>{le.value||ce.value||R.value||(le.value=!0,ce.value=de)},q=()=>{le.value=!1,ce.value=null},he=(de,be,se=!1)=>{a.isMultipleSelectMode||a.isNotInGroup||(se&&(R.value=!0),S.value=be.ID,Ee(de.target))},ye=(de,be)=>{var se;a.isMultipleSelectMode||a.isNotInGroup||F&&(S.value=be.ID,M.value=(se=x.value)==null?void 0:se.find(De=>(De==null?void 0:De.id)===`tui-${be.ID}`),wt(()=>{var He;const De=p.value&&((He=p.value[0])==null?void 0:He.messageToolDom);Vn.listen({domRefs:M.value,ignoreDomRefs:De,handler:bt,button:de.button}),Ee(de.target)}))};function Ee(de){const be=document.getElementById("tui-chat-main"),se=160,De=de.getBoundingClientRect(),He=be.getBoundingClientRect();W.value=De.top-He.top<se}let xe;const Ie=(de,be,se)=>{if(a.isMultipleSelectMode||a.isNotInGroup||!$e)return;function De(){clearTimeout(xe),he(de,be)}function He(){xe=setTimeout(De,500)}function gt(){clearTimeout(xe)}switch(se){case"touchstart":He();break;case"touchend":gt(),setTimeout(()=>{R.value=!1},200);break}},te=de=>{n("handleEditor",de,"reedit")},Q=de=>{me.value=!0,ke.value=de},ee=()=>{me.value=!me.value,ke.value.resendMessage()};function Me(de){return new Promise(be=>{if(G.value.indexOf(de)<0){G.value.push(de);const De=setTimeout(()=>{G.value.splice(G.value.indexOf(de),1),clearTimeout(De),be()},3e3)}})}async function Re(){const{scrollHeight:de}=await Qr("#messageScrollList"),{height:be}=await va("#messageScrollList");d.value&&(d.value.scrollTop=de-be)}const Qe=tl.throttle(function(de){var be;(be=E.value)==null||be.judgeScrollOverOneScreen(de)},150,{leading:!0});async function rt(){var se;if(!f.value||!d.value||f.value.length===0||i===C.value.GRP_AVCHATROOM||i===C.value.GRP_COMMUNITY)return;const de={};u==null||u.disconnect(),u=new IntersectionObserver(De=>{De.forEach(He=>{var kt;const{isIntersecting:gt,target:$t}=He;if(gt){const{msgDom:mt,msgModel:ot}=de[$t.id];ot&&!((kt=ot.readReceiptInfo)!=null&&kt.isPeerRead)&&!c.has(ot.ID)&&(it.sendMessageReadReceipt([ot]),c.add(ot.ID),u==null||u.unobserve(mt))}})},{root:d.value,threshold:.7});const be=(se=d.value)==null?void 0:se.querySelectorAll(".message-li");if(be)for(let De=0;De<(be==null?void 0:be.length);++De){const He=be[De],gt=f.value.find($t=>He.id.slice(4)===$t.ID);gt&&gt.needReadReceipt&&gt.flow==="in"&&(de[He.id]={msgDom:He,msgModel:gt},u==null||u.observe(He))}}function Ke(de,be){de&&a.isNotInGroup||(de?U.value=be:U.value=void 0,O.value=de)}function bt(){S.value=""}function cn(){n("closeInputToolBar")}Ze(()=>a.isMultipleSelectMode,de=>{de||_s({type:"clearAll",messageID:""})});function _s({type:de,messageID:be}){de==="clearAll"?g.value=[]:de==="add"&&!g.value.includes(be)?g.value.push(be):de==="remove"&&(g.value=g.value.filter(se=>se!==be))}function Ds(){j.update(V.CUSTOM,"multipleForwardMessageID",{isMergeForward:!0,messageIDList:g.value})}function Lt(){j.update(V.CUSTOM,"multipleForwardMessageID",{isMergeForward:!1,messageIDList:g.value})}function Vt(de){J.value={...J.value,[de]:!0}}return s({oneByOneForwardMessage:Lt,mergeForwardMessage:Ds,scrollToLatestMessage:Re}),(de,be)=>(v(),b("div",{class:P(["tui-chat",[o($e)?"tui-chat-h5":""]])},[T("div",{id:"tui-chat-main",class:"tui-chat-main",onClick:bt},[o(l)?(v(),b("div",C_,[T("span",null,D(o(A).t("TUIChat.【安全提示】本 APP 仅用于体验腾讯云即时通信 IM 产品功能，不可用于业务洽谈与拓展。请勿轻信汇款、中奖等涉及钱款的信息，勿轻易拨打陌生电话，谨防上当受骗。")),1),T("a",{onClick:be[0]||(be[0]=se=>It(o(dh).complaint))},D(o(A).t("TUIChat.点此投诉")),1)])):H("",!0),de.isGroup?(v(),oe(Uh,{key:a.groupID,groupID:a.groupID},null,8,["groupID"])):H("",!0),T("ul",{id:"messageScrollList",ref_key:"messageListRef",ref:d,class:"tui-message-list",onClick:cn},[o(_)?H("",!0):(v(),b("p",{key:0,class:"message-more",onClick:qe},D(o(A).t("TUIChat.查看更多")),1)),(v(!0),b(ve,null,Te(o(f),(se,De)=>(v(),b("li",{id:"tui-"+se.ID,key:se.ID,ref_for:!0,ref_key:"messageElementListRef",ref:x,class:"message-li"},[K(jf,{currTime:se.time,prevTime:De>0?o(f)[De-1].time:0},null,8,["currTime","prevTime"]),T("div",w_,[se.type===o(C).MSG_GRP_TIP||o(Rc)(se)?(v(),oe(tf,{key:0,content:se.getMessageContent(),blinkMessageIDList:o(G),onBlinkMessage:Me},null,8,["content","blinkMessageIDList"])):se.isRevoked?(v(),oe(fg,{key:1,isEdit:se.type===o(C).MSG_TEXT,messageItem:se,onMessageEdit:He=>te(se)},null,8,["isEdit","messageItem","onMessageEdit"])):o(_g)(se)?(v(),oe($g,{key:2,message:o(qr)(se),blinkMessageIDList:o(G),onResendMessage:Q,onHandleToggleMessageItem:he,onHandleH5LongPress:Ie},null,8,["message","blinkMessageIDList"])):(v(),b("div",{key:3,class:P({"message-event-bind-div":!0}),onLongpress:He=>he(He,se,!0),onContextmenu:Oe(He=>ye(He,se),["prevent","right"]),onTouchstart:He=>Ie(He,se,"touchstart"),onTouchend:He=>Ie(He,se,"touchend"),onMouseover:He=>Ie(He,se,"touchend")},[K(Ql,{content:se.getMessageContent(),isAudioPlayed:!!o(J)[se.ID],blinkMessageIDList:o(G),isMultipleSelectMode:de.isMultipleSelectMode,messageItem:JSON.parse(JSON.stringify(se)),multipleSelectedMessageIDList:o(g),onBlinkMessage:Me,onResendMessage:He=>Q(se),onChangeSelectMessageIDList:_s,onSetReadReceiptPanelVisible:Ke},{messageElement:Pe(()=>[se.type===o(C).MSG_TEXT?(v(),oe(jh,{key:0,content:se.getMessageContent()},null,8,["content"])):se.type===o(C).MSG_IMAGE?(v(),oe(no,{key:1,content:se.getMessageContent(),messageItem:se},{default:Pe(()=>[K(Vh,{content:se.getMessageContent(),messageItem:se,onPreviewImage:z},null,8,["content","messageItem"])]),_:2},1032,["content","messageItem"])):se.type===o(C).MSG_VIDEO?(v(),oe(no,{key:2,content:se.getMessageContent(),messageItem:se},{default:Pe(()=>[K(Jf,{content:se.getMessageContent(),messageItem:se},null,8,["content","messageItem"])]),_:2},1032,["content","messageItem"])):se.type===o(C).MSG_AUDIO?(v(),oe(Jh,{key:3,content:se.getMessageContent(),messageItem:se,onSetAudioPlayed:Vt},null,8,["content","messageItem"])):se.type===o(C).MSG_FILE?(v(),oe(no,{key:4,content:se.getMessageContent(),messageItem:se},{default:Pe(()=>[K(Pp,{content:se.getMessageContent(),messageItem:se},null,8,["content","messageItem"])]),_:2},1032,["content","messageItem"])):se.type===o(C).MSG_MERGER?(v(),oe(Jl,{key:5,renderData:se.payload,messageItem:se},null,8,["renderData","messageItem"])):se.type===o(C).MSG_FACE?(v(),oe(Np,{key:6,content:se.getMessageContent()},null,8,["content"])):se.type===o(C).MSG_LOCATION?(v(),oe(Bf,{key:7,content:se.getMessageContent()},null,8,["content"])):se.type===o(C).MSG_CUSTOM?(v(),oe(Xp,{key:8,content:se.getMessageContent(),messageItem:se},null,8,["content","messageItem"])):H("",!0)]),TUIEmojiPlugin:Pe(()=>[o(B)&&se.reactionList.length>0?(v(),oe(o(ni),{key:0,type:"reaction-detail",emojiConfig:o(Ir),message:o(Zr)(se)},null,8,["emojiConfig","message"])):H("",!0)]),_:2},1032,["content","isAudioPlayed","blinkMessageIDList","isMultipleSelectMode","messageItem","multipleSelectedMessageIDList","onResendMessage"])],40,k_)),se.ID===o(S)?(v(),oe(lg,{key:4,ref_for:!0,ref_key:"messageToolListRef",ref:p,class:P({"message-tool":!0,"message-tool-out":se.flow==="out","message-tool-in":se.flow==="in","message-tool-bottom":o(W)}),messageItem:se,isMultipleSelectMode:de.isMultipleSelectMode,onToggleMultipleSelectMode:be[1]||(be[1]=()=>n("toggleMultipleSelectMode"))},{TUIEmojiPlugin:Pe(()=>[o(B)?(v(),oe(o(ni),{key:0,message:se,emojiConfig:o(Ir)},null,8,["message","emojiConfig"])):H("",!0)]),_:2},1032,["class","messageItem","isMultipleSelectMode"])):H("",!0)])],8,S_))),128))],512),K(Hg,{ref_key:"scrollButtonInstanceRef",ref:E,onScrollToLatestMessage:Re},null,512),o(me)?(v(),oe(wn,{key:2,class:"resend-dialog",show:o(me),isH5:!o(F),center:!0,isHeaderShow:o(F),onSubmit:be[2]||(be[2]=se=>ee()),"onUpdate:show":be[3]||(be[3]=se=>me.value=se)},{default:Pe(()=>[T("p",E_,D(o(A).t("TUIChat.确认重发该消息？")),1)]),_:1},8,["show","isH5","isHeaderShow"])):H("",!0),o(le)?(v(),oe(v_,{key:3,currentImage:o(ce),imageList:o(ue),onClose:q},null,8,["currentImage","imageList"])):H("",!0),o(O)?(v(),oe(n_,{key:4,message:Object.assign({},o(U)),onSetReadReceiptPanelVisible:Ke},null,8,["message"])):H("",!0)])],2))}});const x_=ae(M_,[["__scopeId","data-v-b35ffc2d"]]),U_=ai.extend({name:"custom-image",addAttributes(){return{...ai.config.addAttributes(),class:{default:"image",rendered:!1}}},addCommands(){return{setImage:e=>({tr:s,commands:t})=>{var n,a,i;return((i=(a=(n=s.selection)==null?void 0:n.node)==null?void 0:a.type)==null?void 0:i.name)=="custom-image"?t.updateAttributes("custom-image",e):t.insertContent({type:this.name,attrs:e})}}},renderHTML({node:e,HTMLAttributes:s}){var t;return s.class=((t=e.attrs.class)!=null&&t.includes("custom-image-")?"":"custom-image-")+e.attrs.class,["img",s]}});let xn="",Po=[],cs=[],Xe=[],en=0,Cs=!1,Oo;const A_={userID:Z.TYPES.MSG_AT_ALL,nick:"所有人",isAll:!0,avatar:"https://web.sdk.qcloud.com/im/assets/images/at.svg"};j.watch(V.CONV,{currentConversationID:e=>{e!==xn&&(xn=e,xn!=null&&xn.startsWith("GROUP")?Cs=!0:(Cs=!1,Po=[],cs=[],Xe=[]))}});j.watch(V.CUSTOM,{memberList:e=>{Cs&&Array.isArray(e)&&(Po=e,cs=[A_,...Po],Xe=cs)}});const R_=()=>({allowedPrefixes:null,items:e=>{if(!Cs)return;const s=cs==null?void 0:cs.filter(t=>{var n,a,i,u,c,l;return((i=(n=t==null?void 0:t.nick)==null?void 0:n.toLowerCase())==null?void 0:i.startsWith((a=e==null?void 0:e.query)==null?void 0:a.toLowerCase()))||((l=(u=t==null?void 0:t.userID)==null?void 0:u.toLowerCase())==null?void 0:l.startsWith((c=e==null?void 0:e.query)==null?void 0:c.toLowerCase()))});return Xe=s!=null&&s.length?s:cs,fe.setShowMemberList(Xe),Xe},render:()=>({onStart:e=>{if(!Cs||(fe.toggleAtList(!0),!(e!=null&&e.clientRect)))return;const s=e==null?void 0:e.clientRect();s!=null&&s.left&&(s!=null&&s.top)&&!$e&&fe.handleAtListPosition({left:s==null?void 0:s.left,top:s==null?void 0:s.top}),Oo=e.command},onUpdate(e){if(!Cs||!(e!=null&&e.clientRect))return;const s=e==null?void 0:e.clientRect();s!=null&&s.left&&(s!=null&&s.top)&&!$e&&fe.handleAtListPosition({left:s==null?void 0:s.left,top:s==null?void 0:s.top})},onKeyDown(e){var s,t;if(Cs)return e.event.key==="Enter"&&((s=e.event)==null||s.stopPropagation(),(t=e.event)==null||t.preventDefault()),e.event.key==="Escape"?(fe.toggleAtList(!1),Xe=cs,!0):(e==null?void 0:e.event.key)==="ArrowUp"?(D_(),!0):(e==null?void 0:e.event.key)==="ArrowDown"?(P_(),!0):(e==null?void 0:e.event.key)==="Enter"?(O_(),!0):!1},onExit(){Cs&&(fe.toggleAtList(!1),Xe=cs,fe.handleAtListPosition({left:0,top:0}))}})}),D_=()=>{Xe!=null&&Xe.length&&(en=(en+(Xe==null?void 0:Xe.length)-1)%(Xe==null?void 0:Xe.length),fe.setCurrentSelectIndex(en))},P_=()=>{Xe!=null&&Xe.length&&(en=(en+1)%(Xe==null?void 0:Xe.length),fe.setCurrentSelectIndex(en))},O_=()=>{sc(en)},sc=e=>{if(!(Xe!=null&&Xe.length))return;const s=Xe[e];s&&Oo&&Oo({id:s==null?void 0:s.userID,label:(s==null?void 0:s.nick)||(s==null?void 0:s.userID)})};fe.selectItem=sc;const L_=R_,Hs=class Hs{constructor(){Ue(this,"quoteMessageMap",new Map)}static getInstance(){return Hs.instance||(Hs.instance=new Hs),Hs.instance}setStore(s,t,n,a){var i,u;if(s&&(this.isEditorNotEmpty(t)||(i=a==null?void 0:a.message)!=null&&i.ID)){let c={};(u=a==null?void 0:a.message)!=null&&u.ID&&(this.quoteMessageMap.set(a.message.ID,a.message),c={messageID:a.message.ID,type:a.type});const l={conversationID:s,draftInfo:{html:t,abstract:n,...c}};Yt.setConversationDraft(l),j.update(V.CHAT,"quoteMessage",{message:void 0,type:"quote"})}}getStore(s,t){const n=j.getConversationModel(s);if(n){if(n.conversationID&&n.draftText){const a=os(n.draftText);j.update(V.CHAT,"quoteMessage",{message:this.quoteMessageMap.get(a.messageID)||void 0,type:a.type}),t(a.html)}Yt.setConversationDraft({conversationID:n.conversationID})}}generateAbstract(s){let t="";return s==null||s.forEach(n=>{switch(n.type){case"text":t+=ln(n.payload.text||"");break;case"image":t+=A.t("TUIChat.图片");break;case"video":t+=A.t("TUIChat.视频");break;case"file":t+=A.t("TUIChat.文件");break}}),t}isEditorNotEmpty(s){return s&&!s.includes("is-empty")&&s!=="<p></p>"}};Ue(Hs,"instance",null);let Lo=Hs;const oo=Lo.getInstance(),$_={key:0,class:"message-input-mute"},N_=["contenteditable"],G_=ne({__name:"message-input-editor",props:{placeholder:{type:String,default:"this is placeholder"},replayOrReferenceMessage:{type:Object,default:()=>({})},isMuted:{type:Boolean,default:!0},muteText:{type:String,default:""},enableInput:{type:Boolean,default:!0},enableAt:{type:Boolean,default:!0},enableDragUpload:{type:Boolean,default:!0},enableTyping:{type:Boolean,default:!0}},emits:["sendMessage","onTyping","onAt"],setup(e,{expose:s,emit:t}){const n=e,a=t,{placeholder:i,enableAt:u,enableDragUpload:c,enableTyping:l}=Ea(n),r=w(!0),d=w(!0),p=w(!1),f=w(""),h=w(),g=w();let _=null;const m=new Map;function y(z){f.value!==z&&(f.value&&oo.setStore(f.value,Ce(),oo.generateAbstract(ce()),h.value),Y(),z&&oo.getStore(z,Ae)),f.value=z}function I(z){h.value=z}Ne(()=>{_=F?new Bc({element:g.value,extensions:[Hc,Fc,jc,Yc.configure({emptyEditorClass:"is-editor-empty",placeholder:i.value}),zc.configure({HTMLAttributes:{class:"mention"},suggestion:u.value&&L_()}),U_.configure({inline:!0,allowBase64:!0})],autofocus:!$e,editable:!0,injectCSS:!1,editorProps:{transformPastedText(){return""}},onUpdate({editor:z,transaction:q}){var he,ye;!l.value||!p.value||(d.value=!z.isFocused,((ye=(he=q==null?void 0:q.doc)==null?void 0:he.content)==null?void 0:ye.size)>2?r.value=!1:r.value=!0)},onFocus(){var z;if($e&&((z=document==null?void 0:document.getElementById("app"))!=null&&z.style)){const q=document.body.scrollHeight-window.innerHeight;document.getElementById("app").style.marginBottom=`${q}px`,document.getElementById("app").style.height=`calc(100% - ${q}px)`}!l.value||!p.value||(d.value=!0)},onBlur(){var z;$e&&((z=document==null?void 0:document.getElementById("app"))!=null&&z.style)&&(document.getElementById("app").style.marginBottom="",document.getElementById("app").style.height="100%"),!(!l.value||!p.value)&&(d.value=!0)}}):null,j.watch(V.CONV,{currentConversationID:y}),j.watch(V.CHAT,{quoteMessage:I})}),at(()=>{j.unwatch(V.CONV,{currentConversationID:y}),j.unwatch(V.CHAT,{quoteMessage:I}),m.clear()});function S(z){var q;$e||(z==null||z.preventDefault(),z==null||z.stopPropagation(),z.keyCode===13&&z.ctrlKey?(q=_==null?void 0:_.commands)==null||q.insertContent("<p></p>"):z.keyCode===13&&a("sendMessage"))}function C(z){var q;$e&&(z.data==="@"&&a("onAt",!0),r.value=!((q=g.value)!=null&&q.childNodes))}function R(){$e&&(d.value=!0)}function k(){$e&&(d.value=!1)}function x(z){var he;const q=document.createElement("span");q.innerHTML=z.label,q.className="mention",q.id=z.id,(he=g.value)==null||he.appendChild(q)}function M(z){F&&O(z,"drop")}function G(z){z.clipboardData&&(F&&z.clipboardData.files.length?O(z,"paste"):(E(z),It(g.value)))}function E(z){var ye,Ee;z.preventDefault();const q=(ye=z.clipboardData)==null?void 0:ye.getData("text/html"),he=((Ee=z.clipboardData)==null?void 0:Ee.getData("text/plain"))||"";if(!q){const xe=Zl(he);Le(xe)}}async function O(z,q){var he,ye,Ee;if(z.preventDefault(),z.stopPropagation(),!(!c.value&&q==="drop")&&(q==="drop"&&z.dataTransfer||q==="paste"&&z.clipboardData)){const xe=q==="drop"?(he=z==null?void 0:z.dataTransfer)==null?void 0:he.files:(ye=z==null?void 0:z.clipboardData)==null?void 0:ye.files;for(let Ie=0;Ie<xe.length;Ie++){const te=xe[Ie],Q=te.type.startsWith("image/"),ee=Q?URL.createObjectURL(te):await W(te);(Ee=_==null?void 0:_.commands)==null||Ee.insertContent({type:"custom-image",attrs:{src:ee,alt:te==null?void 0:te.name,class:Q?"normal":"file"}}),m.set(ee,te),Ie===xe.length-1&&setTimeout(()=>{var Me,Re;(Me=_==null?void 0:_.commands)==null||Me.focus("end"),(Re=_==null?void 0:_.commands)==null||Re.scrollIntoView()},10)}}}const U=new Map,N=(z,q)=>new Promise((he,ye)=>{if(U.has(q))he(U.get(q));else{const Ee=new Image;Ee.crossOrigin="anonymous",Ee.onload=()=>{U.set(q,Ee),he(Ee)},Ee.onerror=ye,Ee.src=z}}),W=async z=>{const{name:q,type:he}=z,ye=document.createElement("canvas"),Ee=160,xe=50;ye.style.width=Ee+"px",ye.style.height=xe+"px";const Ie=window.devicePixelRatio;ye.width=Math.floor(Ee*Ie),ye.height=Math.floor(xe*Ie);const te=ye.getContext("2d");if(!te)return"";te.scale(Ie,Ie);const{iconSrc:Q,iconType:ee}=J(he),Me=await N(Q,ee);te==null||te.drawImage(Me,10,10,30,30);const Re=le(q);return te.fillText(Re,45,22),ye.toDataURL()},J=z=>{const q="https://web.sdk.qcloud.com/component/TUIKit/assets/file-",he=["image","pdf","text","ppt","presentation","sheet","zip","word","video","unknown"];let ye="",Ee="";return he.forEach(xe=>{z.includes(xe)&&(ye=q+xe+".svg",Ee=xe)}),{iconSrc:ye||q+"unknown.svg",iconType:Ee||"unknown"}},le=z=>{if(!z)return z;let q="",he=0;for(let ye=0;ye<(z==null?void 0:z.length);ye++){if(he>16){q+="...";break}q+=z[ye],/[a-z]|[0-9]|[,;.!@#-+/\\$%^*()<>?:"'{}~]/i.test(z[ye])?he+=1:he+=2}return q};function ce(){return F?ue():B()}function ue(){var he,ye;const z=_==null?void 0:_.getJSON(),q=[];if(me(z,q),q.length>0&&q[q.length-1]&&q[q.length-1].type==="text"&&((ye=(he=q[q.length-1].payload)==null?void 0:he.text)!=null&&ye.endsWith(`
`))){const Ee=q[q.length-1].payload.text||"";q[q.length-1].payload.text=Ee==null?void 0:Ee.substring(0,Ee.lastIndexOf(`
`))}return q}function me(z,q){var he;if(!(!z||!z.type))if(z.type!=="text"&&z.type!=="custom-image"&&z.type!=="mention"){z.type==="paragraph"&&ke(z,q),(he=z.content)!=null&&he.length&&z.content.forEach(ye=>{me(ye,q)});return}else ke(z,q)}function ke(z,q){var he,ye,Ee,xe,Ie,te,Q,ee,Me,Re,Qe,rt,Ke,bt,cn,_s,Ds,Lt,Vt,de,be;if(z.type==="paragraph")q.length>0&&q[q.length-1]&&((he=q[q.length-1])==null?void 0:he.type)==="text"&&(q[q.length-1].payload.text+=`
`);else if(z.type==="text"||z.type==="custom-image"&&((Ee=(ye=z==null?void 0:z.attrs)==null?void 0:ye.class)!=null&&Ee.includes("emoji"))){const se=z.type==="text"?z==null?void 0:z.text:(xe=z==null?void 0:z.attrs)==null?void 0:xe.alt;q.length>0&&q[q.length-1]&&((Ie=q[q.length-1])==null?void 0:Ie.type)==="text"?q[q.length-1].payload.text+=se:q.push({type:"text",payload:{text:se}})}else if(z.type==="custom-image"&&((Q=(te=z==null?void 0:z.attrs)==null?void 0:te.class)!=null&&Q.includes("normal")))q.push({type:"image",payload:{file:m==null?void 0:m.get((ee=z==null?void 0:z.attrs)==null?void 0:ee.src)}});else if(z.type==="custom-image"&&((Re=(Me=z==null?void 0:z.attrs)==null?void 0:Me.class)!=null&&Re.includes("file"))){const se=m==null?void 0:m.get((Qe=z==null?void 0:z.attrs)==null?void 0:Qe.src);q.push({type:(rt=se==null?void 0:se.type)!=null&&rt.includes("video")?"video":"file",payload:{file:se}})}else if(z.type==="mention"){const se="@"+((Ke=z==null?void 0:z.attrs)==null?void 0:Ke.label)+" ";q.length>0&&q[q.length-1]&&((bt=q[q.length-1])==null?void 0:bt.type)==="text"?q[q.length-1].payload.text+=se:q.push({type:"text",payload:{text:se}}),(_s=(cn=q[q.length-1])==null?void 0:cn.payload)!=null&&_s.atUserList?(de=(Lt=(Ds=q[q.length-1])==null?void 0:Ds.payload)==null?void 0:Lt.atUserList)==null||de.push((Vt=z==null?void 0:z.attrs)==null?void 0:Vt.id):q[q.length-1].payload.atUserList=[(be=z==null?void 0:z.attrs)==null?void 0:be.id]}}function B(){var ye,Ee,xe;const z=g.value;let q="";const he=[];try{for(const Ie of z.childNodes)(Ie.nodeName==="#text"||Ie.nodeName==="SPAN"||(ye=Ie.classList)!=null&&ye.contains("custom-image-emoji")||(Ee=Ie.classList)!=null&&Ee.contains("mention"))&&(q+=Ie.nodeValue||Ie.alt||Ie.innerHTML||"",(xe=Ie.classList)!=null&&xe.contains("mention")&&Ie.id&&!(he!=null&&he.includes(Ie.id))&&he.push(Ie.id))}catch(Ie){if(Ie instanceof Error)throw Ie}return[{type:"text",payload:{text:q,atUserList:he}}]}function $(z){var q,he,ye,Ee,xe;if(F)(q=_==null?void 0:_.commands)==null||q.insertContent({type:"custom-image",attrs:{src:z==null?void 0:z.url,alt:z==null?void 0:z.emoji.key,title:z==null?void 0:z.emoji.key,class:"emoji"}});else{const Ie=document.createElement("img");Ie==null||Ie.setAttribute("src",z==null?void 0:z.url),Ie==null||Ie.setAttribute("class","custom-image custom-image-emoji"),Ie==null||Ie.setAttribute("alt",z==null?void 0:z.emoji.key),Ie==null||Ie.setAttribute("title",z==null?void 0:z.emoji.key),Ie==null||Ie.setAttribute("width","20px"),Ie==null||Ie.setAttribute("height","20px"),(he=g.value)==null||he.appendChild(Ie);const te=document.createElement("span");te.contentEditable="true",(ye=g.value)==null||ye.appendChild(te)}$e||((Ee=_==null?void 0:_.commands)==null||Ee.focus(),(xe=_==null?void 0:_.commands)==null||xe.scrollIntoView())}function L(){var z,q;F?(z=_==null?void 0:_.commands)==null||z.blur():(q=g.value)==null||q.blur()}function Y(){var z;(z=_==null?void 0:_.commands)==null||z.clearContent(!0),d.value=!0,r.value=!0,$e&&(g.value.innerHTML="")}function Ce(){return F?_==null?void 0:_.getHTML():g.value.innerHTML}function Ae(z){var q;F?(q=_==null?void 0:_.commands)==null||q.setContent(z):g.value.innerHTML=z}function Le(z){const q=window.getSelection();if(q&&q.rangeCount){const he=q.getRangeAt(0);z.forEach(ye=>{const Ee=ye.type==="image"?qe(ye.emojiKey||"",ye.content):We(ye.content);if(he.insertNode(Ee),he.setStartAfter(Ee),ye.type==="image"&&$e){const xe=document.createElement("span");xe.contentEditable="true",he.insertNode(xe),he.setStartAfter(xe)}}),he.collapse(!1),q.removeAllRanges(),q.addRange(he)}}function We(z){return document.createTextNode(z)}function qe(z,q){const he=document.createElement("img");return he.src=q,he.alt=z||"",he.classList.add("custom-image","custom-image-emoji"),he.width=20,he.height=20,he}function It(z){const q=window.getSelection();if(q&&q.rangeCount>0){const he=q.getRangeAt(0),ye=document.createRange(),Ee="​",xe=document.createTextNode(Ee);ye.setStart(he.startContainer,he.startOffset),ye.insertNode(xe);const Ie=ye.getBoundingClientRect();xe.parentNode&&xe.parentNode.removeChild(xe),z.scrollTop=Ie.top-z.getBoundingClientRect().top}}return Ze(()=>[r.value,d.value],(z,q)=>{z!==q&&a("onTyping",r.value,d.value)},{immediate:!0,deep:!0}),s({getEditorContent:ce,addEmoji:$,resetEditor:Y,insertAt:x,setEditorContent:Ae,getEditorHTML:Ce,insertEditorContent:Le,blur:L}),(z,q)=>(v(),b("div",{class:P(["message-input-editor-container",o($e)&&"message-input-editor-container-h5"])},[e.isMuted?(v(),b("div",$_,D(e.muteText),1)):H("",!0),!e.isMuted&&e.enableInput?(v(),b("div",{key:1,ref_key:"editorDom",ref:g,class:"message-input-editor-area",contenteditable:o($e),onKeydown:sn(S,["enter"]),onDrop:M,onPaste:G,onInput:C,onBlur:R,onFocus:k},null,40,N_)):H("",!0)],2))}});const B_=ae(G_,[["__scopeId","data-v-4a5d4b3b"]]),H_={ref:"dialog",class:"member-list"},F_={key:0,class:"member-list-title"},j_={class:"title"},Y_={class:"member-list-box"},z_=["onClick"],V_=["src"],W_={class:"member-list-box-body-name"},K_=ne({__name:"index",emits:["onAtListOpen","insertAt"],setup(e,{expose:s,emit:t}){const n=t,a=w(),i=w(),u=w(!1),c=w(),l=w(),r=w(),d=w(!1),p=w({left:0,top:0}),f=w(0),h=w(""),g={userID:Z.TYPES.MSG_AT_ALL,nick:"所有人",isAll:!0,avatar:"https://web.sdk.qcloud.com/im/assets/images/at.svg"};j.watch(V.CONV,{currentConversationID:x=>{var M,G;if(x!==h.value)if(h.value=x,c.value=[],l.value=[],r.value=[],d.value=!1,j.update(V.CUSTOM,"memberList",c.value),(M=h==null?void 0:h.value)!=null&&M.startsWith("GROUP")){d.value=!0;const E=(G=h==null?void 0:h.value)==null?void 0:G.substring(5);Je.switchGroup(E)}else Je.switchGroup("")}}),j.watch(V.GRP,{currentGroupMemberList:x=>{c.value=x,l.value=[g,...c.value],r.value=l.value,j.update(V.CUSTOM,"memberList",c.value)}});const _=x=>{d.value&&(u.value=x,u.value&&n("onAtListOpen"))},m=x=>{p.value=x},y=x=>{var M,G;f.value=x,(G=(M=i.value)==null?void 0:M[f.value])==null||G.scrollIntoView(!1)},I=x=>{r.value=x};fe.toggleAtList=_,fe.handleAtListPosition=m,fe.setCurrentSelectIndex=y,fe.setShowMemberList=I,s({toggleAtList:_}),Ze(()=>[p.value,a==null?void 0:a.value],()=>{var x;$e||!(a!=null&&a.value)||!((x=a==null?void 0:a.value)!=null&&x.style)||(a.value.style.left=p.value.left+"px",a.value.style.top=p.value.top-a.value.clientHeight+"px")});const S=()=>{u.value=!1,r.value=l.value,p.value={left:0,top:0}},C=x=>{var M;if(F&&fe.selectItem)fe.selectItem(x);else if((M=r==null?void 0:r.value)!=null&&M.length){const G=r==null?void 0:r.value[x];n("insertAt",{id:G==null?void 0:G.userID,label:(G==null?void 0:G.nick)||(G==null?void 0:G.userID)})}S()},R=x=>(x==null?void 0:x.avatar)||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",k=x=>x!=null&&x.nick?x==null?void 0:x.nick:x==null?void 0:x.userID;return(x,M)=>(v(),oe(Jr,{show:o(u),onOnClose:S},{default:Pe(()=>[T("div",{ref_key:"MessageInputAt",ref:a,class:P([o(F)?"message-input-at":"message-input-at-h5"])},[T("div",H_,[o(F)?H("",!0):(v(),b("header",F_,[T("span",j_,D(o(A).t("TUIChat.选择提醒的人")),1)])),T("ul",Y_,[(v(!0),b(ve,null,Te(o(r),(G,E)=>(v(),b("li",{key:E,ref_for:!0,ref_key:"memberListItems",ref:i,class:P(["member-list-box-body",[E===o(f)&&"selected"]]),onClick:O=>C(E)},[T("img",{class:"member-list-box-body-avatar",src:R(G)},null,8,V_),T("span",W_,D(k(G)),1)],10,z_))),128))])],512)],2)]),_:1},8,["show"]))}});const Z_=ae(K_,[["__scopeId","data-v-e731d073"]]),q_={key:0,class:"message-input-button-hover"},J_=ne({__name:"message-input-button",props:{enableSend:{type:Boolean,default:!0}},emits:["sendMessage"],setup(e,{emit:s}){const t=e,n=w(Ft.getChatType()!==_e.TUIChat.TYPE.ROOM),a=s,i=()=>{a("sendMessage")};return(u,c)=>(v(),b("div",{class:P(["message-input-button",!o(F)&&"message-input-button-h5"])},[t.enableSend?(v(),b("button",{key:0,class:"message-input-button-cont","data-type":"text",disabled:!1,onClick:i},[o(n)?(v(),b("p",q_,D(o(A).t("TUIChat.按Enter发送，Ctrl+Enter换行")),1)):H("",!0),Gn(" "+D(o(A).t("发送")),1)])):H("",!0)],2))}});const X_=ae(J_,[["__scopeId","data-v-70369730"]]),Q_={class:"input-quote-content"},ev={class:"max-one-line"},tv=ne({__name:"index",props:{displayType:{default:"editor"}},setup(e){const s=e,t=Z.TYPES,n=w();Ne(()=>{j.watch(V.CHAT,{quoteMessage:u})}),at(()=>{j.unwatch(V.CHAT,{quoteMessage:u})});const a=re(()=>{var l,r;let c;switch((l=n.value)==null?void 0:l.type){case t.MSG_TEXT:c=ln((r=n.value.payload)==null?void 0:r.text);break;case t.MSG_IMAGE:c=A.t("TUIChat.图片");break;case t.MSG_AUDIO:c=A.t("TUIChat.语音");break;case t.MSG_VIDEO:c=A.t("TUIChat.视频");break;case t.MSG_FILE:c=A.t("TUIChat.文件");break;case t.MSG_CUSTOM:c=A.t("TUIChat.自定义");break;case t.MSG_FACE:c=A.t("TUIChat.表情");break;case t.MSG_MERGER:c=A.t("TUIChat.聊天记录");break;default:c=A.t("TUIChat.消息");break}return c});function i(){j.update(V.CHAT,"quoteMessage",{message:void 0,type:"quote"})}function u(c){c!=null&&c.message&&(c==null?void 0:c.type)==="quote"?n.value=c.message:n.value=void 0}return(c,l)=>o(n)&&s.displayType!=="audio"?(v(),b("div",{key:0,class:P({"input-quote-container":!0,"input-quote-container-uni":o(ie),"input-quote-container-h5":o($e)})},[T("div",Q_,[T("div",ev,D(o(n).nick||o(n).from)+": "+D(o(a)),1),K(pe,{class:"input-quote-close-icon",file:o(Jn),width:"11px",height:"11px",onOnClick:i},null,8,["file"])])],2)):H("",!0)}});const sv=ae(tv,[["__scopeId","data-v-6b103290"]]),wr=new Map([[3123,"文本包含本地审核拦截词"],[4004,"图片消息失败,无效的图片格式"],[4005,"文件消息失败,禁止发送违规封禁的文件"],[7004,"文件不存在,请检查文件路径是否正确"],[7005,"文件大小超出了限制,如果上传文件,最大限制是100MB"],[8001,"消息长度超出限制,消息长度不要超过12K"],[80001,"消息或者资料中文本存在敏感内容,发送失败"],[80004,"消息中图片存在敏感内容,发送失败"]]),nv=async(e,s)=>{j.getData(V.CHAT,"messageSource")&&j.update(V.CHAT,"messageSource",void 0),e==null||e.forEach(async t=>{var n,a,i,u,c,l,r;try{const d={to:((n=s==null?void 0:s.groupProfile)==null?void 0:n.groupID)||((a=s==null?void 0:s.userProfile)==null?void 0:a.userID),conversationType:s==null?void 0:s.type,payload:{},needReadReceipt:as()};let p;const f={offlinePushInfo:{}},h={conversation:s,payload:t.payload,messageType:""};switch(t==null?void 0:t.type){case"text":if(p=JSON.parse(JSON.stringify((i=t.payload)==null?void 0:i.text)),!p)break;d.payload={text:p},h.messageType=Z.TYPES.MSG_TEXT,f.offlinePushInfo=ns.create(h),(u=t.payload)!=null&&u.atUserList?(d.payload.atUserList=t.payload.atUserList,await it.sendTextAtMessage(d,f)):await it.sendTextMessage(d,f);break;case"image":d.payload={file:(c=t.payload)==null?void 0:c.file},h.messageType=Z.TYPES.MSG_IMAGE,f.offlinePushInfo=ns.create(h),await it.sendImageMessage(d,f);break;case"video":d.payload={file:(l=t.payload)==null?void 0:l.file},h.messageType=Z.TYPES.MSG_VIDEO,f.offlinePushInfo=ns.create(h),await it.sendVideoMessage(d,f);break;case"file":d.payload={file:(r=t.payload)==null?void 0:r.file},h.messageType=Z.TYPES.MSG_FILE,f.offlinePushInfo=ns.create(h),await it.sendFileMessage(d,f);break;default:break}As("sendMessage")}catch(d){Se({message:wr.get(d==null?void 0:d.code)?A.t(`TUIChat.${wr.get(d.code)}`):d==null?void 0:d.message,type:we.ERROR}),j.getData(V.CHAT,"quoteMessage")&&j.update(V.CHAT,"quoteMessage",{})}})},av=(e,s)=>{!e&&!s?it.enterTypingState():it.leaveTypingState()},ov={class:"message-input-wrapper"},iv=ne({__name:"index",props:{placeholder:{type:String,default:"this is placeholder"},isMuted:{type:Boolean,default:!0},muteText:{type:String,default:""},enableInput:{type:Boolean,default:!0},enableAt:{type:Boolean,default:!0},enableDragUpload:{type:Boolean,default:!0},enableTyping:{type:Boolean,default:!0}},emits:["sendMessage","resetReplyOrReference","onTyping"],setup(e,{expose:s,emit:t}){const n=e,a=t,i=w(),u=w(),c=w();j.watch(V.CONV,{currentConversation:_=>{c.value=_}});const l=(_,m)=>{av(_,m)},r=_=>{var m;(m=u.value)==null||m.toggleAtList(_)},d=async()=>{var y,I;const _=(y=i.value)==null?void 0:y.getEditorContent();if(!_||!c.value)return;const m=_.map(S=>(S.type==="text"&&(S.payload.text=Gh(S.payload.text)),S));await nv(m,c.value),a("sendMessage"),(I=i.value)==null||I.resetEditor()},p=_=>{var m;(m=i.value)==null||m.addEmoji(_)},f=()=>{var _;$e&&((_=i.value)==null||_.blur())},h=_=>{var m,y;(m=i==null?void 0:i.value)!=null&&m.insertAt&&((y=i==null?void 0:i.value)==null||y.insertAt(_))};return s({insertEmoji:p,reEdit:_=>{var m,y;(m=i.value)==null||m.resetEditor(),(y=i.value)==null||y.setEditorContent(_)}}),(_,m)=>(v(),b("div",ov,[T("div",{class:P(["message-input-container",!o(F)&&"message-input-container-h5"])},[K(B_,{ref_key:"editor",ref:i,placeholder:n.placeholder,isMuted:n.isMuted,muteText:n.muteText,enableInput:n.enableInput,enableAt:n.enableAt,enableTyping:n.enableTyping,enableDragUpload:n.enableDragUpload,onSendMessage:d,onOnTyping:l,onOnAt:r},null,8,["placeholder","isMuted","muteText","enableInput","enableAt","enableTyping","enableDragUpload"]),n.isMuted?H("",!0):(v(),oe(X_,{key:0,onSendMessage:d})),n.enableAt?(v(),oe(Z_,{key:1,ref_key:"messageInputAtRef",ref:u,onInsertAt:h,onOnAtListOpen:f},null,512)):H("",!0)],2),K(sv)]))}});const rv=ae(iv,[["__scopeId","data-v-fcf6cf8e"]]),lv="/admin/assets/forward-each-9e79e381.svg",cv="/admin/assets/forward-merge-eef115cf.svg",uv="/admin/assets/add-circle-b2afe9dc.svg",dv=ne({__name:"index",emits:["oneByOneForwardMessage","mergeForwardMessage","toggleMultipleSelectMode"],setup(e,{emit:s}){const t=s,n=w(ft?"25px":"30px");function a(){t("oneByOneForwardMessage")}function i(){t("mergeForwardMessage")}function u(){t("toggleMultipleSelectMode")}return(c,l)=>(v(),b("div",{class:P({"mulitple-select-panel":!0,"mulitple-select-panel-mobile":o(ft)})},[T("div",{class:"forward-button",onClick:a},[K(pe,{file:o(lv),size:o(n)},null,8,["file","size"]),T("span",{class:P({"forward-button-text":!0,"forward-button-text-mobile":o(ft)})},D(o(A).t("TUIChat.逐条转发")),3)]),T("div",{class:"forward-button",onClick:i},[K(pe,{file:o(cv),size:o(n)},null,8,["file","size"]),T("span",{class:P({"forward-button-text":!0,"forward-button-text-mobile":o(ft)})},D(o(A).t("TUIChat.合并转发")),3)]),T("div",{class:"forward-button",onClick:u},[K(pe,{class:"cancel-button-icon",file:o(uv),size:o(n)},null,8,["file","size"]),T("span",{class:P({"forward-button-text":!0,"forward-button-text-mobile":o(ft)})},D(o(A).t("TUIChat.取消")),3)])],2))}});const hv=ae(dv,[["__scopeId","data-v-1b003743"]]),pv="/admin/assets/cancel-aba36dc1.svg",fv=e=>(nn("data-v-5d1a604c"),e=e(),an(),e),gv={key:0,class:"transfer-header transfer-h5-header"},_v={class:"title"},vv=fv(()=>T("span",{class:"space"},null,-1)),mv={class:"main"},yv={class:"left"},Iv={class:"transfer-header"},bv=["value","placeholder"],Tv=["placeholder","value"],Cv={class:"transfer-left-main"},Sv={class:"transfer-list"},wv={key:1,class:"icon-unselected"},kv={class:"select-all"},Ev=["onClick"],Mv=["src"],xv={class:"name"},Uv={key:0},Av={class:"right"},Rv={key:0,class:"transfer-header"},Dv={key:1,class:"transfer-list"},Pv={key:0,class:"transfer-text"},Ov={class:"transfer-list-item-content"},Lv=["src"],$v={key:0,class:"name"},Nv=["onClick"],Gv={class:"transfer-right-footer"},Bv=ne({__name:"index",props:{list:{type:Array,default:()=>[]},selectedList:{type:Array,default:()=>[]},isSearch:{type:Boolean,default:!0},isRadio:{type:Boolean,default:!1},isCustomItem:{type:Boolean,default:!1},title:{type:String,default:""},type:{type:String,default:""},resultShow:{type:Boolean,default:!0},total:{type:Number,default:0},isHiddenBackIcon:{type:Boolean,default:!1}},emits:["search","submit","cancel","getMore"],setup(e,{emit:s}){const t=e,n=w([]),a=w(0),i=w([]),u=w(!0),c=w(!1),l=w(""),r=w("");et(()=>{if(t.isCustomItem)for(let I=0;I<t.list.length;I++)t.list[I].conversationID.indexOf("@TIM#SYSTEM")>-1&&t.list.splice(I,1),n.value=t.list;else n.value=t.list;a.value=t.total?t.total:t.list.length,i.value=t.selectedList&&t.selectedList.length>0?t.selectedList:i.value,u.value=t.isSearch,c.value=t.isCustomItem,l.value=t.title});const d=s,p=re(()=>n.value.filter(I=>!I.isDisabled)),f=I=>{r.value=I.target.value||I.detail.value,d("search",r.value)},h=I=>{if(I.isDisabled)return;let S=i.value;const C=S.indexOf(I);if(C>-1)return i.value.splice(C,1);t.isRadio&&(S=[]),S.push(I),i.value=S},g=()=>{i.value.length===p.value.length?i.value=[]:i.value=[...p.value]},_=()=>{d("submit",i.value),r.value=""},m=()=>{d("cancel"),r.value=""},y=()=>{d("getMore")};return(I,S)=>(v(),b("div",{class:P(["transfer",[o(F)?"":"transfer-h5",o(ft)?"transfer-h5-wechat":""]])},[o(F)?H("",!0):(v(),b("header",gv,[t.isHiddenBackIcon?H("",!0):(v(),b("div",{key:0,onClick:m},[K(pe,{class:"icon",file:o(rn),width:"18px",height:"18px"},null,8,["file"])])),T("span",_v,D(o(l)),1),vv])),T("main",mv,[T("div",yv,[T("header",Iv,[o(F)&&o(u)?(v(),b("input",{key:0,type:"text",value:o(r),placeholder:o(A).t("component.请输入userID"),enterkeyhint:"search",class:P([o(ie)?"left-uniapp-input":""]),onKeyup:sn(f,["enter"])},null,42,bv)):H("",!0),!o(F)&&o(u)?(v(),b("input",{key:1,type:"text",placeholder:o(A).t("component.请输入userID"),enterkeyhint:"search",value:o(r),class:P([o(ie)?"left-uniapp-input":""]),onBlur:f,onConfirm:f},null,42,Tv)):H("",!0)]),T("main",Cv,[T("ul",Sv,[o(p).length>1&&!e.isRadio?(v(),b("li",{key:0,class:"transfer-list-item",onClick:g},[o(i).length===o(p).length?(v(),oe(pe,{key:0,file:o(ho),width:"18px",height:"18px"},null,8,["file"])):(v(),b("i",wv)),T("span",kv,D(o(A).t("component.全选")),1)])):H("",!0),(v(!0),b(ve,null,Te(o(n),C=>(v(),b("li",{key:C.userID,class:"transfer-list-item",onClick:R=>h(C)},[o(i).indexOf(C)>-1?(v(),oe(pe,{key:0,file:o(ho),class:P([C.isDisabled&&"disabled"]),width:"18px",height:"18px"},null,8,["file","class"])):(v(),b("i",{key:1,class:P([C.isDisabled&&"disabled","icon-unselected"])},null,2)),o(c)?nt(I.$slots,"left",{key:3,data:C},void 0,!0):(v(),b(ve,{key:2},[T("img",{class:"avatar",src:C.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.onerror=null;this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,Mv),T("span",xv,D(C.nick||C.userID),1),C.isDisabled?(v(),b("span",Uv,"（"+D(o(A).t("component.已在群中"))+"）",1)):H("",!0)],64))],8,Ev))),128)),o(a)>o(n).length?(v(),b("li",{key:1,class:"transfer-list-item more",onClick:y},D(o(A).t("component.查看更多")),1)):H("",!0)])])]),T("div",Av,[o(F)?(v(),b("header",Rv,D(o(l)),1)):H("",!0),e.resultShow?(v(),b("ul",Dv,[o(i).length>0&&o(F)?(v(),b("p",Pv,D(o(A).t("component.已选中"))+D(o(i).length)+D(o(A).t("component.人")),1)):H("",!0),(v(!0),b(ve,null,Te(o(i),(C,R)=>(v(),b("li",{key:R,class:"transfer-list-item space-between"},[T("aside",Ov,[o(c)?nt(I.$slots,"right",{key:1,data:C},void 0,!0):(v(),b(ve,{key:0},[T("img",{class:"avatar",src:C.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.onerror=null;this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,Lv),o(F)?(v(),b("span",$v,D(C.nick||C.userID),1)):H("",!0)],64))]),o(F)?(v(),b("span",{key:0,onClick:k=>h(C)},[K(pe,{file:o(pv),width:"18px",height:"18px"},null,8,["file"])],8,Nv)):H("",!0)]))),128))])):H("",!0),T("footer",Gv,[T("button",{class:"btn btn-cancel",onClick:m},D(o(A).t("component.取消")),1),o(i).length>0?(v(),b("button",{key:0,class:"btn",onClick:_},D(o(A).t("component.完成")),1)):(v(),b("button",{key:1,class:"btn btn-no",onClick:_},D(o(A).t("component.完成")),1))])])])],2))}});const Aa=ae(Bv,[["__scopeId","data-v-5d1a604c"]]),Hv=ne({__name:"index",emits:["toggleMultipleSelectMode"],setup(e,{emit:s}){const t=s;let n=[],a=!1;const i=w(!1),u=w();Ne(()=>{j.watch(V.CUSTOM,{singleForwardMessageID:c,multipleForwardMessageID:l})}),at(()=>{j.unwatch(V.CUSTOM,{singleForwardMessageID:c,multipleForwardMessageID:l}),r()});function c(g){typeof g<"u"&&(a=!1,n=[g],p())}function l(g){if(!g)return;a=!1;const{isMergeForward:_,messageIDList:m}=g||{};(m==null?void 0:m.length)>0?(a=_,n=m,p()):Se({message:A.t("TUIChat.未选择消息"),type:we.ERROR})}function r(){j.update(V.CUSTOM,"singleForwardMessageID",void 0),j.update(V.CUSTOM,"multipleForwardMessageID",void 0)}function d(){r(),i.value=!1}function p(){h(),i.value=!0}function f(g){if((g==null?void 0:g.length)===0)return;const _=g.map(I=>j.getConversationModel(I.userID)),m=n.map(I=>j.getMessageModel(I)).sort((I,S)=>I.time-S.time),y=_.map(I=>{const S={conversation:I,messageType:Z.TYPES.MSG_MERGER};return it.sendForwardMessage([I],m,{needMerge:a,offlinePushInfo:ns.create(S),params:{needReadReceipt:as()}})});Promise.allSettled(y).then(I=>{for(const S of I){const{status:C}=S;if(C==="rejected"){const R=S.reason.code===80001?A.t("TUIChat.内容包含敏感词汇"):S.reason.message;Se({message:R,type:we.ERROR});break}}}),d(),t("toggleMultipleSelectMode",!1)}function h(){const g=j.getData(V.CONV,"conversationList");u.value=g.map(_=>({userID:_.conversationID,nick:_.getShowName(),avatar:_.getAvatar()}))}return(g,_)=>(v(),oe(qn,{visible:o(i),useMask:!1},{default:Pe(()=>[K(Aa,{title:o(A).t("TUIChat.转发"),isSearch:!1,isCustomItem:!1,list:o(u),isHiddenBackIcon:o(ie),onCancel:d,onSubmit:f},null,8,["title","list","isHiddenBackIcon"])]),_:1},8,["visible"]))}}),nc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAKrWlDQ1BJQ0MgUHJvZmlsZQAASImVlwdQU1kXgO976SGhJUQ6oTdBOgGkhNACCEgHGyEJEEqIgQAiKiqLK7iiiIigougqRcG1ALJWRLEtCopdN8gioKyLBRsq/wOG4O4////Pf2bOnO+dd+6559659815AJAVOSJRKqwIQJowUxzq60mPjoml4wYBGsgDGlADthxuhogZEhIIEJmxf5f3dwE0aW9bTOb69/f/VZR4/AwuAFAIwvG8DG4awicQfcEViTMBQO1F/PrZmaJJ7kCYKkYKRPj+JCdO88gkx08xGkzFhIeyEKYCgCdxOOJEAEh0xE/P4iYieUgeCFsJeQIhwiKE3dLS0nkIH0XYBIlBfKTJ/Iz47/Ik/i1nvCwnh5Mo4+m1TAneS5AhSuWs+D+3439LWqpkZg4jRElJYr9QxCoje3Y/JT1AxsL4oOAZFvCm4qc4SeIXMcPcDFbsDPM4XgGysalBgTOcIPBhy/JkssNnmJ/hHTbD4vRQ2VwJYhZzhjni2XklKREyfxKfLcufmxQeNcNZgsigGc5ICQuYjWHJ/GJJqKx+vtDXc3ZeH9na0zK+W6+ALRubmRTuJ1s7Z7Z+vpA5mzMjWlYbj+/lPRsTIYsXZXrK5hKlhsji+am+Mn9GVphsbCZyIGfHhsj2MJnjHzLDgAXSQSqiYkAHgciTFwCZ/JzMyYWw0kUrxILEpEw6E7lhfDpbyLWcS7exsrEFYPK+Th+Ht7SpewjRrs361hMBcBVOTEycnvUFfAbghC4AROmsz7gHAHnk3F/ZypWIs6Z9U3cJA4hAAVCRL4E20AcmwALYAAfgAjyAN/AHwSAcxIClgAuSQBpSeTbIA2tBISgGW8B2UAmqwX5QC46AY6AFnAYXwGVwHdwCveARkIIB8BKMgvdgHIIgHESGKJAapAMZQuaQDcSA3CBvKBAKhWKgOCgREkISKA9aDxVDpVAltA+qg36BTkEXoKtQN/QA6oOGoTfQZxgFk2AqrAUbwfNgBsyEA+BweAmcCC+Hc+ECeDNcAdfAh+Fm+AJ8He6FpfBLeAwFUHIoGkoXZYFioFioYFQsKgElRq1GFaHKUTWoRlQbqhN1GyVFjaA+obFoCpqOtkC7oP3QEWguejl6NXoTuhJdi25Gd6Bvo/vQo+hvGDJGE2OOccawMdGYREw2phBTjjmIOYm5hOnFDGDeY7FYGtYY64j1w8Zgk7ErsZuwu7FN2PPYbmw/dgyHw6nhzHGuuGAcB5eJK8TtxB3GncP14AZwH/FyeB28Dd4HH4sX4tfhy/H1+LP4HvwgfpygSDAkOBOCCTzCCkIJ4QChjXCTMEAYJyoRjYmuxHBiMnEtsYLYSLxEfEx8KycnpyfnJLdQTiCXL1chd1Tuilyf3CeSMsmMxCItJklIm0mHSOdJD0hvyWSyEdmDHEvOJG8m15Evkp+SP8pT5C3l2fI8+TXyVfLN8j3yrxQICoYKTIWlCrkK5QrHFW4qjCgSFI0UWYocxdWKVYqnFO8pjilRlKyVgpXSlDYp1StdVRpSxikbKXsr85QLlPcrX1Tup6Ao+hQWhUtZTzlAuUQZoGKpxlQ2NZlaTD1C7aKOqiir2KlEquSoVKmcUZHSUDQjGpuWSiuhHaPdpX2eozWHOYc/Z+Ocxjk9cz6oaqh6qPJVi1SbVHtVP6vR1bzVUtS2qrWoPVFHq5upL1TPVt+jfkl9RIOq4aLB1SjSOKbxUBPWNNMM1VypuV/zhuaYlraWr5ZIa6fWRa0RbZq2h3aydpn2We1hHYqOm45Ap0znnM4LugqdSU+lV9A76KO6mrp+uhLdfbpduuN6xnoReuv0mvSe6BP1GfoJ+mX67fqjBjoGCwzyDBoMHhoSDBmGSYY7DDsNPxgZG0UZbTBqMRoyVjVmG+caNxg/NiGbuJssN6kxuWOKNWWYppjuNr1lBpvZmyWZVZndNIfNHcwF5rvNu+di5jrNFc6tmXvPgmTBtMiyaLDos6RZBlqus2yxfDXPYF7svK3zOud9s7K3SrU6YPXIWtna33qddZv1GxszG65Nlc0dW7Ktj+0a21bb13bmdny7PXb37Sn2C+w32Lfbf3VwdBA7NDoMOxo4xjnucrzHoDJCGJsYV5wwTp5Oa5xOO31ydnDOdD7m/JeLhUuKS73L0Hzj+fz5B+b3u+q5clz3uUrd6G5xbnvdpO667hz3GvdnHvoePI+DHoNMU2Yy8zDzlaeVp9jzpOcHljNrFeu8F8rL16vIq8tb2TvCu9L7qY+eT6JPg8+or73vSt/zfhi/AL+tfvfYWmwuu4496u/ov8q/I4AUEBZQGfAs0CxQHNi2AF7gv2DbgsdBhkHCoJZgEMwO3hb8JMQ4ZHnIrwuxC0MWVi18HmodmhfaGUYJWxZWH/Y+3DO8JPxRhEmEJKI9UiFycWRd5Icor6jSKGn0vOhV0ddj1GMEMa2xuNjI2IOxY4u8F21fNLDYfnHh4rtLjJfkLLm6VH1p6tIzyxSWcZYdj8PERcXVx33hBHNqOGPx7Phd8aNcFncH9yXPg1fGG+a78kv5gwmuCaUJQ4muidsSh5Pck8qTRgQsQaXgdbJfcnXyh5TglEMpE6lRqU1p+LS4tFNCZWGKsCNdOz0nvVtkLioUSZc7L9++fFQcID6YAWUsyWjNpCKN0Q2JieQHSV+WW1ZV1sfsyOzjOUo5wpwbK8xWbFwxmOuT+/NK9EruyvY83by1eX2rmKv2rYZWx69uX6O/pmDNQL5vfu1a4tqUtb+ts1pXuu7d+qj1bQVaBfkF/T/4/tBQKF8oLry3wWVD9Y/oHwU/dm203bhz47ciXtG1Yqvi8uIvm7ibrv1k/VPFTxObEzZ3lTiU7NmC3SLccner+9baUqXS3NL+bQu2NZfRy4rK3m1ftv1quV159Q7iDskOaUVgRetOg51bdn6pTKrsrfKsatqluWvjrg+7ebt79njsaazWqi6u/rxXsPf+Pt99zTVGNeX7sfuz9j8/EHmg82fGz3UH1Q8WH/x6SHhIWhta21HnWFdXr1lf0gA3SBqGDy8+fOuI15HWRovGfU20puKj4Kjk6Itf4n65eyzgWPtxxvHGE4Yndp2knCxqhppXNI+2JLVIW2Nau0/5n2pvc2k7+avlr4dO656uOqNypuQs8WzB2YlzuefGzovOj1xIvNDfvqz90cXoi3c6FnZ0XQq4dOWyz+WLnczOc1dcr5y+6nz11DXGtZbrDtebb9jfOPmb/W8nuxy6mm863my95XSrrXt+99ke954Lt71uX77DvnO9N6i3+27E3fv3Ft+T3ufdH3qQ+uD1w6yH44/yH2MeFz1RfFL+VPNpze+mvzdJHaRn+rz6bjwLe/aon9v/8o+MP74MFDwnPy8f1BmsG7IZOj3sM3zrxaIXAy9FL8dHCv9U+nPXK5NXJ/7y+OvGaPTowGvx64k3m96qvT30zu5d+1jI2NP3ae/HPxR9VPtY+4nxqfNz1OfB8ewvuC8VX02/tn0L+PZ4Im1iQsQRc6ZaARSicEICAG8OAUCOAYByC+kfFk3301MCTf8DTBH4Tzzdc0+JAwCNiJlsi1jnATiKqFE+khvRyZYo3APAtrYynel9p/r0ScEifyx7vSbpwbYl+eAfMt3Df1f3Py2YzGoH/mn/BRtaBzaO17uzAAAAOGVYSWZNTQAqAAAACAABh2kABAAAAAEAAAAaAAAAAAACoAIABAAAAAEAAAAgoAMABAAAAAEAAAAgAAAAAI9OQMkAAAP4SURBVFgJxVfNbxNHFH9vYzcVidOUJBJBQpFS4ZgDqoilHrg04sDJfwARZyLOCA69tFLPiEtPhHMFf0DOKLlVlTZVq0qNE0AgBOaAD4kTpNbJPn6/mR1n6zi1iWL3SbuzO/M+Z97XqPQIk3NzhTEd+TYSKYtY0SSaxljw5NpQSWoiupmIxDu2t/a+Wm30wlq7Ic1cKk/nLVmEwMqhwG5UUEVk5W+zR6+rv739L+xjFaDF43rmlokuZhjEotGqWbS+Y9u1YCVxv9CRItYuiiULwMcueVDRx8824gfhv33sqACtHjJ7iEVsM+yGNc0erAnMU/ol0GPXHH0N9Lc77cYRBWZL3xRF9u9TOJ5aIrm7LzZ+3QzMP2X0x2cPYcA0HvjIAXj9/i9eQ1mGJIgk+YnCafW27d17U/0DhCeD7fe13amJsRXR4RlwuCwSXR2dOLe2U3/XctDWDqRe/jOFw4VWn2/E904mtjPVbGn+B/CucCcQJTeD/yCqPNDhKBxPbdt2fwzzpzXmbe8BeVPGuI7eCnydAtz64O0IndtBu4B0GmMVeYH+RF4mtnhh7sp5fjsF8mZLfkFWOnkq104D6Mz0LfLKq9zgmJtDDO+n4cJQ42QWLpbmK4noHWi9C49d3tpYdwyyONnvbvgHqss5swryQwV+9yhqIr2mDOJO1h+IYHeswLNDmr2TFdbpuxv+q79iRlWMx6d2nIHPWmqrnRhC09EwDyV2w/dxY0/4yKakp2w8hsQDMN1yY9sLW++8F6GJgiPLbctHfnvBN2uue0It6lel8lNuMZLOtX54/xENMeH8TkcgVxrcAVdSByWcCjEkOQIKUOD/BSigThum4kGpwiNIZTUi38mIjOnnrvQOQol99g4AREwtSiSquh+N5gch3Mlg4wJIxDbphD4kTBfc4iBevmuipDhClVpL/aAcCkQ/dWDhA3+X/Ni8RgwJ+IHL78OqrTLZLyWyhY+h78KwqdFjCkSlqsyWvvaZsQ8a+LLv+8RQ+JwCvkDYEy9z6H4/QpI82ehSBpzvSSh8TgFO5uzDMnJ92rGMdK16pPkU+FJHvwd/13E1ICvQtprSer3+T2Hq/ComFnAU5bOT08WhibFfPmA+IJ9kpOXnpma+A+11GsiO6131z3rg1VKAE+xixycvxOiMr+L38rB+dr29iw2EvYxs8Yc1x/tFmcLZkr2qxi+ztJg/CnQWeKvr57kKpJ6uWYFTSr9Ep07pneXh3ANeupb9Pfz2JfMMuiF1vVu64q5muH5toXxvhgrKbWYqV83Pt1/N6HA884B7KMF/ddyBLBKtgfe2rlnZteO/tWHILU2Tlrcfh9tVgUDorXT9I9qo07uefwQgZ8NU4rzNHwAAAABJRU5ErkJggg==",Fv=["onClick"],jv=["src"],Yv=["src"],zv=["src"],Vv={class:"emoji-picker-tab"},Wv=["onClick"],Kv=["src"],Zv=["src"],qv=ne({__name:"emoji-picker-dialog",emits:["insertEmoji","onClose","sendMessage"],setup(e,{emit:s}){var y;const t=s,n=w(0),a=w(),i=w(),u=w(),c=Ft.getFeatureConfig(),l=w(m()),r=w(l==null?void 0:l.value[0]),d=w((y=l==null?void 0:l.value[0])==null?void 0:y.list);Ne(()=>{j.watch(V.CONV,{currentConversation:_})}),at(()=>{j.unwatch(V.CONV,{currentConversation:_})});const p=I=>{var S;n.value=I,r.value=l==null?void 0:l.value[I],d.value=(S=l==null?void 0:l.value[I])==null?void 0:S.list,ie||u!=null&&u.value&&(u.value.scrollTop=0)},f=(I,S)=>{var R,k,x;const C={emoji:{key:I,name:Kl(I)},type:(R=r==null?void 0:r.value)==null?void 0:R.type};switch((k=r==null?void 0:r.value)==null?void 0:k.type){case Mt.BASIC:C.url=((x=r==null?void 0:r.value)==null?void 0:x.url)+Tn[I],ie?uni.$emit("insert-emoji",C):t("insertEmoji",C);break;case Mt.BIG:h(S,r.value);break;case Mt.CUSTOM:h(S,r.value);break}F&&t("onClose")},h=(I,S)=>{var R,k,x,M,G;const C={to:((k=(R=a==null?void 0:a.value)==null?void 0:R.groupProfile)==null?void 0:k.groupID)||((M=(x=a==null?void 0:a.value)==null?void 0:x.userProfile)==null?void 0:M.userID),conversationType:(G=a==null?void 0:a.value)==null?void 0:G.type,payload:{index:S.emojiGroupID,data:S.list[I]},needReadReceipt:as()};it.sendFaceMessage(C)};function g(){uni.$emit("send-message-in-emoji-picker")}function _(I){a.value=I}function m(){return Nh.filter(I=>{if(I.type===Mt.BASIC)return c.InputEmoji;if(I.type===Mt.BIG)return c.InputStickers})}return(I,S)=>(v(),b("div",{ref_key:"emojiPickerDialog",ref:i,class:P({"emoji-picker":!0,"emoji-picker-h5":!o(F)})},[T("ul",{ref_key:"emojiPickerListRef",ref:u,class:P(["emoji-picker-list",!o(F)&&"emoji-picker-h5-list"])},[(v(!0),b(ve,null,Te(o(d),(C,R)=>(v(),b("li",{key:R,class:"emoji-picker-list-item",onClick:k=>f(C,R)},[o(r).type===o(Mt).BASIC?(v(),b("img",{key:0,class:"emoji",src:o(r).url+o(Tn)[C]},null,8,jv)):o(r).type===o(Mt).BIG?(v(),b("img",{key:1,class:"emoji-big",src:o(r).url+C+"@2x.png"},null,8,Yv)):(v(),b("img",{key:2,class:"emoji-custom emoji-big",src:o(r).url+C},null,8,zv))],8,Fv))),128))],2),T("ul",Vv,[(v(!0),b(ve,null,Te(o(l),(C,R)=>(v(),b("li",{key:R,class:"emoji-picker-tab-item",onClick:k=>p(R)},[C.type===o(Mt).BASIC?(v(),oe(pe,{key:0,class:"icon",file:o(nc)},null,8,["file"])):C.type===o(Mt).BIG?(v(),b("img",{key:1,class:"icon-big",src:C.url+C.list[0]+"@2x.png"},null,8,Kv)):(v(),b("img",{key:2,class:"icon-custom icon-big",src:C.url+C.list[0]},null,8,Zv))],8,Wv))),128)),o(ie)?(v(),b("li",{key:0,class:"send-btn",onClick:g}," 发送 ")):H("",!0)])],2))}});const Jv=ae(qv,[["__scopeId","data-v-f676bb83"]]),Xv={key:0,class:P(["toolbar-item-container-uni-title"])},Qv=ne({__name:"index",props:{iconFile:{type:String,required:!0},title:{type:String,default:""},needDialog:{type:Boolean,default:!0},iconWidth:{type:String,default:"20px"},iconHeight:{type:String,default:"20px"},needBottomPopup:{type:Boolean,default:!1}},emits:["onIconClick","onDialogClose","onDialogShow"],setup(e,{expose:s,emit:t}){const n=e,a=t,i=w(!1),u=w(),c=w(),l=()=>{a("onIconClick",c),F&&Vn.listen({domRefs:u.value,handler:r}),n.needDialog&&d(!i.value)},r=()=>{i.value=!1,a("onDialogClose",c)},d=f=>{if(i.value!==f)switch(i.value=f,f){case!0:a("onDialogShow",c);break;case!1:a("onDialogClose",c)}},p=()=>{i.value=!1};return s({toggleDialogDisplay:d}),(f,h)=>(v(),b("div",{ref_key:"toolbarItemRef",ref:u,class:P(["toolbar-item-container",!o(F)&&"toolbar-item-container-h5",o(ie)&&"toolbar-item-container-uni"])},[T("div",{class:P(["toolbar-item-container-icon",o(ie)&&"toolbar-item-container-uni-icon"]),onClick:l},[K(pe,{file:n.iconFile,class:"icon",width:n.iconWidth,height:n.iconHeight},null,8,["file","width","height"])],2),o(ie)?(v(),b("div",Xv,D(n.title),1)):H("",!0),ut(T("div",{ref_key:"dialogRef",ref:c,class:P(["toolbar-item-container-dialog",!o(F)&&"toolbar-item-container-h5-dialog",o(ie)&&"toolbar-item-container-uni-dialog"])},[n.needBottomPopup&&!o(F)?(v(),oe(Jr,{key:0,class:"toolbar-bottom-popup",show:o(i),onTouchmove:h[0]||(h[0]=Oe(()=>{},["stop","prevent"])),onOnClose:p},{default:Pe(()=>[nt(f.$slots,"default",{},void 0,!0)]),_:3},8,["show"])):nt(f.$slots,"default",{key:1},void 0,!0)],2),[[Jt,o(i)]])],2))}});const Rs=ae(Qv,[["__scopeId","data-v-6fb2dc17"]]),e1=ne({__name:"index",emits:["sendMessage","toggleComponent","insertEmoji","dialogShowInH5","dialogCloseInH5","changeToolbarDisplayType"],setup(e,{expose:s,emit:t}){const n=t,a=w(),i=w();j.watch(V.CONV,{currentConversation:p=>{a.value=p}});const u=p=>{$e&&(n("changeToolbarDisplayType","emojiPicker"),n("dialogShowInH5",p.value))},c=p=>{$e&&(n("changeToolbarDisplayType","none"),n("dialogCloseInH5",p.value))},l=p=>{n("insertEmoji",p)},r=()=>{n("sendMessage")},d=()=>{var p;(p=i.value)==null||p.toggleDialogDisplay(!1)};return s({closeEmojiPicker:d}),(p,f)=>(v(),oe(Rs,{ref_key:"container",ref:i,iconFile:o(nc),title:"表情",onOnDialogShow:u,onOnDialogClose:c},{default:Pe(()=>[K(Jv,{onInsertEmoji:l,onSendMessage:r,onOnClose:d})]),_:1},8,["iconFile"]))}});const t1=ae(e1,[["__scopeId","data-v-0953aab5"]]),s1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAqCAYAAAD1T9h6AAAAAXNSR0IArs4c6QAABLlJREFUaEPlmVtsFFUYx893ZpfeaRNjK7ZJLexuu7NFSmeXNgG1Gn0ooQajpdjiBR9MJFxsvRSxbVb0xRiFUKOJLxrBW5aERIhGCbItUMDtFKTt2psiRiNYH7iVXnbn+8xsO9tl09JtdyuzcV5mds+Zc37/7zYz5wALOQoLS7JGyP8sQ1bKGGQRoTG0/XZdA3AfY3SJcXYqEQyfdHWdvqSxgHZRYHNU+JFeIsKU2wUaybwAfMjA4d2ebs9BtX9AgArvU5SmSAbQSx+jIOxURUAgbBTlK83ynEMvY8ZmY2Zit9ftvq4HYLGsLNX394iNMd8WRMoPWB74UKIgVIHJJtWTQk+of6rwC5OkjbL8kU8P4OEMkvS88eqw/HFQhAD7wWSVDhBRzriABZv7vadO6xFeYzKLpSWIY++PewH+AJPV3qZVm4S7Fj6ol7CZzohqOI1evHp0Iox8sKSg2KN1/qWnw6Fn62tsocz/TwGVlZXCT94LNYj+RwAgl4gucG44vEzM/czlcinz7cWoPKDCn+08/wEyLA4H5Yx3FC3N2zTfIqISYLGteFpR/Fums7IgGJr7un/8dD69EJUAk7V4LxErCFQBzj9MT1r05ZXhv9YT4gvjlYH1DPzc8ZRuBZhFqRWRklTAjJTsB2T54A1Jqki+PPRny8TDcLjfK9+vWwFx74G4z4H/ogoREeTb7CsBgHq6PG3qOTQko0pidaD5fA6o8BbR3oBEj6pzCRxq+7zy8ZgKmK8EHYd37EDCtdocBoG/2NvdfkL3AlR4s016jZA9psFygK/7vO1vxTyEYu2BcXh7PSE9ro0NjB/asH7Nm06nE8PnizoHYi0g9KNqIu6/qV5X8cZU8Gq7rgSYbfZXUcHKkLD5tqaqwjkdvK4ELBEdLzNUqibh+Xc1VWuabgWvGwEmcUUdof/JYMxz/v1yW15TJG+yMQshkyhVAmOrgbHf05JYsyzL/0SSHyabvZYUrNb6ChwOL7MtbowEPiYeUFcHrg3LDQrS6qAFAS4KxpStvedaz99KhNnq2IakbJgMG+FIdlZKg9vt9kciPmoBRUVlGddHh94hUorCJwQO1xYwXuf1es5OBWMWpa2IFHzV5sB/yM5KfX028FEJKCgqvcc/6t9NhNlBC3JwM8ZKtFdsAD7GjdDUd85zJFSERbRvVhCfmbyPH83OTN0xW/g5C7DYHA4kfJuQ0iYgCAzCnoEuzz7LUqkAFbabkO7Q2rjAd/V3t3+h/rZYHZsUUjZOJiy05GSmbZ8L/JwEWKzSWmRsOxEJ6gCcwwgJvGGg0xP4iFGP/OUr71ZGR/cQYm4QVOCfM6QRInouBL41JzOtfq7wsxYQnnQAbJAboK6vU+4Jj3NJejj9yo3L7xHhvVPlAAA7lp5sr4926TLiMmoRpVUK0q6QeO9NTUiuPXPm2OB0FaO8vDxh4LfBnUj40E19BDiRkSi9Ei38rDwQKgA4tNyZvrjx5EnX8Ezlzul08n2uQ9u0Wq9WG2NhXqPX5Rqb6d5I2iP2QCABRWmVeq5eV9E20yM+fHKr9b5FfgMl9Xce/zUSsEj73CQg7hd34395Pd43OOJ+i0lNnLje5NMyP663WTUR8bjR/S+/EAdi6i5GNAAAAABJRU5ErkJggg==",n1="/admin/assets/image-uni-3e951cbb.png",ac="/admin/assets/camera-uni-e7fd6e1a.png",a1=ne({__name:"index",props:{imageSourceType:{type:String,default:"album"}},setup(e){const s=e,t=w(),n=w(),a={web_album:{icon:s1,title:"图片"},uni_album:{icon:n1,title:"图片"},uni_camera:{icon:ac,title:"拍照"}};j.watch(V.CONV,{currentConversation:r=>{n.value=r}});const i=re(()=>ie?s.imageSourceType==="camera"?a.uni_camera:a.uni_album:a.web_album),u=()=>{var r,d,p,f;ie?zn&&((r=fe)!=null&&r.chooseMedia)?(d=fe)==null||d.chooseMedia({count:1,mediaType:["image"],sizeType:["original","compressed"],sourceType:[s.imageSourceType],success:function(h){l(h)}}):(p=fe)==null||p.chooseImage({count:1,sourceType:[s.imageSourceType],success:function(h){l(h)}}):(f=t.value)!=null&&f.click&&t.value.click()},c=r=>{var d,p;((p=(d=r==null?void 0:r.target)==null?void 0:d.files)==null?void 0:p.length)<=0||(l(r==null?void 0:r.target),r.target.value="")},l=r=>{var h,g,_,m,y;if(!r)return;const d={to:((g=(h=n==null?void 0:n.value)==null?void 0:h.groupProfile)==null?void 0:g.groupID)||((m=(_=n==null?void 0:n.value)==null?void 0:_.userProfile)==null?void 0:m.userID),conversationType:(y=n==null?void 0:n.value)==null?void 0:y.type,payload:{file:r},needReadReceipt:as()},p={conversation:n.value,payload:d.payload,messageType:Z.TYPES.MSG_IMAGE},f={offlinePushInfo:ns.create(p)};it.sendImageMessage(d,f)};return(r,d)=>(v(),oe(Rs,{iconFile:o(i).icon,title:o(i).title,iconWidth:o(ie)?"32px":"21px",iconHeight:o(ie)?"25px":"18px",needDialog:!1,onOnIconClick:u},{default:Pe(()=>[o(ie)?H("",!0):(v(),b("div",{key:0,class:P(["image-upload",!o(F)&&"image-upload-h5"])},[T("input",{ref_key:"inputRef",ref:t,title:"图片",type:"file","data-type":"image",accept:"image/gif,image/jpeg,image/jpg,image/png,image/bmp,image/webp",onChange:c},null,544)],2))]),_:1},8,["iconFile","title","iconWidth","iconHeight"]))}});const o1=ae(a1,[["__scopeId","data-v-135d5601"]]),i1=ne({__name:"index",setup(e){const s=w(),t=w();j.watch(V.CONV,{currentConversation:i=>{t.value=i}});const n=()=>{var i,u;ie||(i=s==null?void 0:s.value)!=null&&i.click&&((u=s==null?void 0:s.value)==null||u.click())},a=i=>{var r,d,p,f,h,g,_;if(((d=(r=i==null?void 0:i.target)==null?void 0:r.files)==null?void 0:d.length)<=0)return;const u={to:((f=(p=t==null?void 0:t.value)==null?void 0:p.groupProfile)==null?void 0:f.groupID)||((g=(h=t==null?void 0:t.value)==null?void 0:h.userProfile)==null?void 0:g.userID),conversationType:(_=t==null?void 0:t.value)==null?void 0:_.type,payload:{file:i==null?void 0:i.target},needReadReceipt:as()},c={conversation:t.value,payload:u.payload,messageType:Z.TYPES.MSG_FILE},l={offlinePushInfo:ns.create(c)};it.sendFileMessage(u,l),i.target.value=""};return(i,u)=>(v(),oe(Rs,{iconFile:o(Xl),title:"文件",iconWidth:o(ie)?"32px":"21px",iconHeight:o(ie)?"25px":"18px",needDialog:!1,onOnIconClick:n},{default:Pe(()=>[T("div",{class:P(["file-upload",!o(F)&&"file-upload-h5"])},[T("input",{ref_key:"inputRef",ref:s,title:"文件",type:"file","data-type":"file",accept:"*",onChange:a},null,544)],2)]),_:1},8,["iconFile","iconWidth","iconHeight"]))}});const r1=ae(i1,[["__scopeId","data-v-afa2fa24"]]),l1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAqCAYAAAD1T9h6AAAAAXNSR0IArs4c6QAAAqlJREFUaEPtmUFoE0EUhufNNBpRWi9tPAhWm9RmU7S6Dekxolc1gqDgxV48tHoS7E0WwWPwoCcp1KAWC0KlHnI0WJGGsj1Ik9ZUbxWsB8HQ0nQ3mSebZsMaKrRmN9mR5LRkZ2f/771/3j5mgFh+/f0RXwGLNwknQ4SAD5F7rPebdQ1AdUJwjVAy54W2Z4uL6TVTC5gXfaHwxSLHu4j8YLOE7ua9AHSjjUJ8OTP/1hhfBjDE66XS/d1M4JYxHsYeGBBQtk2pNGVGnlL4TIjnsafLm8mmUutuECxFo4f0H4UQIfodzvFkOfJAN7yMXQN/SB7DEl41/jTEtx+Qh1X1qe4G4bUaZPmWJ7+pTlQhGLwGf1CeRsSj2wD7bq9k59JuFG9qCkhDEc61J9tZgFXwBwc/mtVm/5H2c26xzd+CaNhp63v+XcVGOvT0nZ03B39dXgi7OfqmNqvmFkAzMtbKQDOibn1nKwM7ZaA3KMc4IVcYgfcnujtfJJPJLacy5UgGApI8yzl6K/X5GwUez2UXZp2AcATAOmm11WX0A2Es/uVTetVOkIYBVLKhAfKE/7gvYZetHAcASqaRk5jZrtttK8cBjJZEOh0OaRq/h4iS1T5gg60aAmCIVhSFvnw1EyOUjnDOO6prA6hGCU7kltTxf1kbDQMwxQ0MRA+va/mRWlsxgIe5JfXNXiEaDiDLFzp+bf4crQWgDB6tZNRJ1wIYFpqcmrmMQEdrLWRUphvXL40risJdCRA6E5G2CsUxIRex8GX0j7IJVAMgCf+xTnE+ZEK2EoHgYIpXdvUAqHjNXO+p8Hks8mFAkurp7npuV9+zU4Vy5Duw11JYz/gWQD3Rs+PZVgbsiGI9c/xfGRB+c1f87XXRDziEP2IyqoHQh3xmORP6mNWEEPGg+zdk8RZTNE1sngAAAABJRU5ErkJggg==",kr="/admin/assets/video-uni-0b4d3e53.png",c1=ne({__name:"index",props:{videoSourceType:{type:String,default:"album"}},setup(e){const s=e,t=w(),n=w();j.watch(V.CONV,{currentConversation:r=>{n.value=r}});const a=()=>{if(ie)switch(s.videoSourceType){case"album":return kr;case"camera":return ac;default:return kr}else return l1},i=()=>ie&&s.videoSourceType==="camera"?"录制":"视频",u=()=>{var r,d,p,f,h;ie?zn&&((r=fe)!=null&&r.chooseMedia)?(d=fe)==null||d.chooseMedia({mediaType:["video"],count:1,sourceType:[s.videoSourceType],maxDuration:60,success:function(g){l(g)}}):(p=fe)==null||p.chooseVideo({count:1,sourceType:[s.videoSourceType],compressed:!1,success:function(g){l(g)}}):(f=t==null?void 0:t.value)!=null&&f.click&&((h=t==null?void 0:t.value)==null||h.click())},c=r=>{var d,p;((p=(d=r==null?void 0:r.target)==null?void 0:d.files)==null?void 0:p.length)<=0||(l(r==null?void 0:r.target),r.target.value="")},l=r=>{var h,g,_,m,y;if(!r)return;const d={to:((g=(h=n==null?void 0:n.value)==null?void 0:h.groupProfile)==null?void 0:g.groupID)||((m=(_=n==null?void 0:n.value)==null?void 0:_.userProfile)==null?void 0:m.userID),conversationType:(y=n==null?void 0:n.value)==null?void 0:y.type,payload:{file:r},needReadReceipt:as()},p={conversation:n.value,payload:d.payload,messageType:Z.TYPES.MSG_VIDEO},f={offlinePushInfo:ns.create(p)};it.sendVideoMessage(d,f)};return(r,d)=>(v(),oe(Rs,{iconFile:a(),title:i(),needDialog:!1,iconWidth:o(ie)?"32px":"21px",iconHeight:o(ie)?s.videoSourceType==="album"?"20px":"25px":"18px",onOnIconClick:u},{default:Pe(()=>[T("div",{class:P(["video-upload",!o(F)&&"video-upload-h5"])},[T("input",{ref_key:"inputRef",ref:t,title:"视频",type:"file","data-type":"video",accept:"video/*",onChange:c},null,544)],2)]),_:1},8,["iconFile","title","iconWidth","iconHeight"]))}});const u1=ae(c1,[["__scopeId","data-v-7d4b2cfb"]]),d1="/admin/assets/evaluate-43b9a230.svg",h1={product:{label:"产品文档",url:"https://cloud.tencent.com/document/product/269/1499#.E7.BE.A4.E7.BB.84.E5.8A.9F.E8.83.BD"},customMessage:{label:"自定义消息",url:"https://web.sdk.qcloud.com/im/doc/v3/zh-cn/SDK.html#createCustomMessage"},complaint:{label:"点此投诉",url:"https://cloud.tencent.com/apply/p/xc3oaubi98g"},implement:{label:"集成TUICallKit",url:"https://cloud.tencent.com/document/product/269/79861"},purchase:{label:"开通腾讯实时音视频服务",url:"https://cloud.tencent.com/document/product/1640/79968"}},Ss=h1,p1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABMCAYAAADHl1ErAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATvSURBVHgB7ZxhUttGFMffW8mJM8lMnS8FGTPIuUDdnoCcoL1B3V4gQw9QzAVa2gsUTtD0BM0RyAmsGaAq6Qf0hY5rW7vdR6zYGGykXUm7sv2b0QBm7JF+/ktP2qcVwIZqE4b/HF6GH65pod/BMhAs4iIMuwjst9nXUIiDZnP7GCzBKmGX4VVf/vDnXo6Gg3/bkggsgIElULrgviyiUXv6rAuWYI0wuSsuPF4h4huwBCuELUlXgh+GV9+CBVghbFm6EjhADyzAuLAU6Urwz8NwHwxjXFiadCU44Bg/LzMqLEO6bhEg9k2nzKgwFCxz9TOdMmPCzs9lUhA6kBHTKTMmzHHVk2IyZUaEUbooKaCIyZQZEcYcpn3mbiplpV98h2Hoc2B9yAEO/PWu572DEik9YTFnPcgJEykrNWF5piuh7JSVmrA805XAwCn1ory0hBWRrgQGvO15XgAlUFrCikhXAi/xWFZKwopMV4Icxn5ZxjB24QkjWQLdn6Fgnj57cXhx8SHzpVZWckkYSRmNeMd9UtuLx7ztuLgnxO11og8mEHAmh7WjOObvHZf141H83nUhyOM4l1pYv99v1GrPfXk06gjADnPgM/n2fbk05Bo2oCqQTAYByUQBgfxig/F4cJZ2d74j7I4UBJ8x3AOBHdmF8CslRQmMpIwzOeZ0m0wR8zPGasFodBPMykSSVK+/eCNPALtgaheyHiRhb4eDmwO8uLw6kRG1oiNjO4jwFmW3WcCGtERsErcN6YiYEOMj2JAK2Rs9Za1m81ge8DfSHkHKOtr1tnqfTivkkG+PZegRrhOJLPr9znnYRtp9ZmUR9870N9KmzMsiHrw02kh7WBax8FpynaUtkkUsvfheR2nLZBGPjlask7THZBGphnfWQVoaWUTq8bBVlpZWFpFpxHUVpWWRRWQeol4laVllEUpj+qsgTUUWodwEqbI0VVmEVteoitJ0ZBHabbYqSdOVReTSl7z86+/f5YD3N2AzQvyx09zWXsdcOt+IbMVbcFNyESa7KIW36LVB/AJyQFtYv39dlc63Tz1Y0ERbmOsO7E/XhNpz6urroS0MHayMMD6MtddVW5io0O0FCGhemIMsl4NpGTCm/+XmkbDK7JJUKYXQuzNCS1iFKmSCHwSB1vpqCatShUzQrZRawqpUIRN0K6WWsCpVyATdSqklrEoVMsFx9NZZN2GV2yUFiI5OpVQWVnCFDCZLETR0KqWysGIqJEby2z/Y8bbatAjg30EB4tx6XXndlYXlWyExopv6hoObdmvm0VctzzshcZMb/gLICRRYvrB8KuRU1K7n9RZNLqD/MeCvBeenkAOCq6+7sjD9CilOGMRfLhM1C017ae14XZrqpytOp1Iqj+nTI/dUDvqySr2Ty5HuLFqa3xRzOETGaI5B1u2Imtufv0TMvvlKwqhCPqkPr7O8Jy9R89DjGJhgP00eGpJ6e1SnCyrtkhkrZEDzslvediFzs+kzd5pbX8mK+r38k+ZkpjrJUq2USsLSVUikWRNdqnJlTGKfVNRXacWpVkolYfJcacmxa1r5PG8rl6qWhU/iRPwDfBT3IMu3YTGqN6Psy273n3MfJUXFv4wHg+MyphKngQrDWKZcruuPcHdbhay2r1QmnCpXyckzVw9pgimPx6fj0X89W0TNM62oztfSFV1N/Nqy6NmwK83/UkAsIDt3h2wAAAAASUVORK5CYII=",f1=["onClick"],g1=ne({__name:"index",props:{starTotal:{type:Number,default:5}},emits:["onDialogPopupShowOrHide"],setup(e,{emit:s}){const t=e,n=s,a=w(),i=w(t.starTotal),u=w(-1),c=w(""),l=w();j.watch(V.CONV,{currentConversation:y=>{l.value=y}});const r=re(()=>c.value.length||u.value>=0),d=()=>{n("onDialogPopupShowOrHide",!0)},p=()=>{g(),n("onDialogPopupShowOrHide",!1)},f=()=>{var y;(F||$e)&&window.open((y=Ss==null?void 0:Ss.customMessage)==null?void 0:y.url)},h=()=>{var y;(y=a==null?void 0:a.value)==null||y.toggleDialogDisplay(!1)},g=()=>{u.value=-1,c.value=""},_=y=>{u.value===y?u.value=u.value-1:u.value=y},m=()=>{var R,k,x,M,G,E;if(u.value<0&&!c.value.length)return;const y={data:JSON.stringify({businessID:ss.EVALUATE,version:1,score:u.value+1,comment:c.value}),description:"对本次的服务评价",extension:"对本次的服务评价"},I={to:((k=(R=l==null?void 0:l.value)==null?void 0:R.groupProfile)==null?void 0:k.groupID)||((M=(x=l==null?void 0:l.value)==null?void 0:x.userProfile)==null?void 0:M.userID),conversationType:(G=l==null?void 0:l.value)==null?void 0:G.type,payload:y,needReadReceipt:as()},S={conversation:l.value,payload:I.payload,messageType:Z.TYPES.MSG_CUSTOM},C={offlinePushInfo:ns.create(S)};it.sendCustomMessage(I,C),(E=a==null?void 0:a.value)==null||E.toggleDialogDisplay(!1)};return(y,I)=>(v(),oe(Rs,{ref_key:"container",ref:a,iconFile:o(d1),title:"评价",needBottomPopup:!0,iconWidth:o(ie)?"26px":"20px",iconHeight:o(ie)?"26px":"20px",onOnDialogShow:d,onOnDialogClose:p},{default:Pe(()=>[T("div",{class:P(["evaluate",!o(F)&&"evaluate-h5"])},[T("div",{class:P(["evaluate-header",!o(F)&&"evaluate-h5-header"])},[T("div",{class:P(["evaluate-header-content",!o(F)&&"evaluate-h5-header-content"])},D(o(A).t("Evaluate.请对本次服务进行评价")),3),o(F)?H("",!0):(v(),b("div",{key:0,class:P(["evaluate-header-close",!o(F)&&"evaluate-h5-header-close"]),onClick:Oe(h,["stop"])},D(o(A).t("关闭")),3))],2),T("div",{class:P(["evaluate-content",!o(F)&&"evaluate-h5-content"])},[T("ul",{class:P(["evaluate-content-list",!o(F)&&"evaluate-h5-content-list"])},[(v(!0),b(ve,null,Te(o(i),(S,C)=>(v(),b("li",{key:C,class:P(["evaluate-content-list-item",!o(F)&&"evaluate-h5-content-list-item"]),onClick:Oe(R=>_(C),["stop"])},[C<=o(u)?(v(),oe(pe,{key:0,file:o(Xo),width:o(F)?"20px":"30px",height:o(F)?"20px":"30px"},null,8,["file","width","height"])):(v(),oe(pe,{key:1,file:o(p1),width:o(F)?"20px":"30px",height:o(F)?"20px":"30px"},null,8,["file","width","height"]))],10,f1))),128))],2),ut(T("textarea",{"onUpdate:modelValue":I[0]||(I[0]=S=>Bt(c)?c.value=S:null),class:P(["evaluate-content-text",!o(F)&&"evaluate-h5-content-text"])},null,2),[[Ot,o(c)]]),T("div",{class:P(["evaluate-content-button",!o(F)&&"evaluate-h5-content-button"])},[T("button",{class:P(["btn",o(r)?"btn-valid":"btn-invalid"]),onClick:m},D(o(A).t("Evaluate.提交评价")),3)],2)],2),T("div",{class:P(["evaluate-adv",!o(F)&&"evaluate-h5-adv"])},[Gn(D(o(A).t("Evaluate.服务评价工具"))+" "+D("("+o(A).t("Evaluate.使用"))+" ",1),T("a",{onClick:I[1]||(I[1]=S=>f(o(Ss).customMessage))},D(o(A).t(`Evaluate.${o(Ss).customMessage.label}`)),1),Gn(" "+D(o(A).t("Evaluate.搭建")+")"),1)],2)],2)]),_:1},8,["iconFile","iconWidth","iconHeight"]))}});const _1=ae(g1,[["__scopeId","data-v-80925c86"]]),v1="/admin/assets/words-92f275fc.svg",m1=[{value:"在吗？在吗？在吗？重要的话说三遍。"},{value:"好久没聊天了，快来和我说说话～"},{value:"好的，就这么说定了。"},{value:"感恩的心，感谢有你。"},{value:"糟糕！是心动的感觉！"},{value:"心疼地抱抱自己，我太难了！"},{value:"没关系，别在意，事情过去就过去了。"},{value:"早上好，今天也是让人期待的一天呢！"},{value:"熬夜有什么用，又没人陪你聊天，早点休息吧。"}],y1=["onClick"],I1=ne({__name:"index",emits:["onDialogPopupShowOrHide"],setup(e,{emit:s}){const t=s,n=w(),a=w();j.watch(V.CONV,{currentConversation:r=>{n.value=r}});const i=r=>{var p,f,h,g,_,m;const d={to:((f=(p=n==null?void 0:n.value)==null?void 0:p.groupProfile)==null?void 0:f.groupID)||((g=(h=n==null?void 0:n.value)==null?void 0:h.userProfile)==null?void 0:g.userID),conversationType:(_=n==null?void 0:n.value)==null?void 0:_.type,payload:{text:A.t(`Words.${r.value}`)},needReadReceipt:as()};it.sendTextMessage(d),(m=a==null?void 0:a.value)==null||m.toggleDialogDisplay(!1)},u=()=>{var r;(r=a==null?void 0:a.value)==null||r.toggleDialogDisplay(!1)},c=()=>{t("onDialogPopupShowOrHide",!0)},l=()=>{t("onDialogPopupShowOrHide",!1)};return(r,d)=>(v(),oe(Rs,{ref_key:"container",ref:a,iconFile:o(v1),title:"常用语",needBottomPopup:!0,iconWidth:o(ie)?"26px":"20px",iconHeight:o(ie)?"26px":"20px",onOnDialogShow:c,onOnDialogClose:l},{default:Pe(()=>[T("div",{class:P(["words",!o(F)&&"words-h5"])},[T("div",{class:P(["words-header",!o(F)&&"words-h5-header"])},[T("span",{class:P(["words-header-title",!o(F)&&"words-h5-header-title"])},D(o(A).t("Words.常用语-快捷回复工具")),3),o(F)?H("",!0):(v(),b("span",{key:0,class:P(["words-header-close",!o(F)&&"words-h5-header-close"]),onClick:u}," 关闭 ",2))],2),T("ul",{class:P(["words-list",!o(F)&&"words-h5-list"])},[(v(!0),b(ve,null,Te(o(m1),(p,f)=>(v(),b("li",{key:f,class:P(["words-list-item",!o(F)&&"words-h5-list-item"]),onClick:h=>i(p)},D(o(A).t(`Words.${p.value}`)),11,y1))),128))],2)],2)]),_:1},8,["iconFile","iconWidth","iconHeight"]))}});const b1=ae(I1,[["__scopeId","data-v-a172ca58"]]),T1=ne({__name:"index",props:{type:{type:String,default:""},currentConversation:{type:Object,default:()=>({})},isGroup:{type:Boolean,default:!1}},emits:["submit","cancel"],setup(e,{expose:s,emit:t}){const n=e,a=t,i=w(!1),u=w(""),c=w([]),l=w([]),r=w(""),d={voiceCall:"发起群语音",videoCall:"发起群视频"},p=re(()=>d[n.type]?d[n.type]:"");on.getUserProfile().then(m=>{var y;(y=m==null?void 0:m.data)!=null&&y.userID&&(r.value=m.data.userID)}),Ze(()=>{var m;return[(m=n==null?void 0:n.currentConversation)==null?void 0:m.conversationID,i.value]},(m,y)=>{m&&m!==y&&(n.isGroup&&i.value?(u.value=n.currentConversation.groupProfile.groupID,Je.getGroupMemberList({groupID:u.value}).then(I=>{var S,C;c.value=(C=(S=I==null?void 0:I.data)==null?void 0:S.memberList)==null?void 0:C.filter(R=>(R==null?void 0:R.userID)!==r.value),l.value=c.value})):(u.value="",c.value=[],l.value=c.value))},{immediate:!0});const f=m=>{var I;const y=(I=c.value)==null?void 0:I.filter(S=>(S==null?void 0:S.userID)===m);l.value=y!=null&&y.length?y:c.value},h=m=>{const y=[];m==null||m.forEach(I=>{I!=null&&I.userID&&y.push(I.userID)}),n.type==="voiceCall"?a("submit",{userIDList:y,groupID:u.value,type:1}):n.type==="videoCall"&&a("submit",{userIDList:y,groupID:u.value,type:2}),l.value=c.value,_(!1)},g=()=>{l.value=c.value,a("cancel"),_(!1)},_=m=>{i.value=m};return s({toggleShow:_}),(m,y)=>(v(),oe(wn,{show:o(i),isH5:!o(F),isHeaderShow:!1,isFooterShow:!1,background:!1,"onUpdate:show":_},{default:Pe(()=>[K(Aa,{isSearch:!0,title:o(p),list:o(l),isH5:!o(F),isRadio:!1,onSearch:f,onSubmit:h,onCancel:g},null,8,["title","list","isH5"])]),_:1},8,["show","isH5"]))}}),C1={key:0,class:P(["message-input-toolbar-list-end"])},S1=ne({__name:"index",props:{displayType:{default:"none"}},emits:["scrollToLatestMessage","changeToolbarDisplayType","insertEmoji"],setup(e,{emit:s}){const t=e,n=s,a=w(),i=w(),u=w(!1),c=w(""),l=w(),r=w(),d=w(),p=w([]),f=Ft.getFeatureConfig(),h=w(!0);h.value=f.InputEmoji||f.InputStickers,Ne(()=>{j.watch(V.CONV,{currentConversation:g})}),at(()=>{j.unwatch(V.CONV,{currentConversation:g})}),Ze(()=>t.displayType,O=>{var U;O==="none"?(U=r.value)==null||U.closeEmojiPicker():n("scrollToLatestMessage")});const g=O=>{var U,N;O!=null&&O.conversationID&&O.conversationID!==((U=i.value)==null?void 0:U.conversationID)&&_(O.conversationID),i.value=O,u.value=((N=i==null?void 0:i.value)==null?void 0:N.type)===Z.TYPES.CONV_GROUP},_=O=>{if(!O)return;const U=Ft.getChatType(),N={chatType:U};U===_e.TUIChat.TYPE.CUSTOMER_SERVICE&&(N.filterVoice=!0,N.filterVideo=!0,As("customerService")),p.value=[...ze.getExtensionList(_e.TUIChat.EXTENSION.INPUT_MORE.EXT_ID,N)].filter(W=>{var J;return((J=W==null?void 0:W.data)==null?void 0:J.name)==="search"?f.MessageSearch:!0})},m=re(()=>F?p.value.filter(U=>{var N;return((N=U==null?void 0:U.data)==null?void 0:N.name)!=="search"}):p.value),y=re(()=>{if(F){const O=p.value.find(U=>{var N;return((N=U==null?void 0:U.data)==null?void 0:N.name)==="search"});return O?[O]:[]}return[]}),I=O=>{var U,N,W;switch((U=O==null?void 0:O.data)==null?void 0:U.name){case"voiceCall":S(O,1);break;case"videoCall":S(O,2);break;default:(W=O==null?void 0:O.listener)==null||W.onClicked((N=i.value)==null?void 0:N._conversation);break}},S=(O,U)=>{var N,W,J,le,ce,ue,me;c.value=(N=O==null?void 0:O.data)==null?void 0:N.name,((W=i==null?void 0:i.value)==null?void 0:W.type)===Z.TYPES.CONV_C2C?(ue=(J=O.listener)==null?void 0:J.onClicked)==null||ue.call(J,{userIDList:[(ce=(le=i==null?void 0:i.value)==null?void 0:le.conversationID)==null?void 0:ce.slice(3)],type:U}):u.value&&(d.value=O,(me=l==null?void 0:l.value)!=null&&me.toggleShow&&l.value.toggleShow(!0))},C=O=>O==null?void 0:O.icon,R=O=>O==null?void 0:O.text,k=O=>{var U,N,W;(W=(N=(U=d.value)==null?void 0:U.listener)==null?void 0:N.onClicked)==null||W.call(N,O),d.value=void 0},x=()=>{d.value=void 0},M=O=>{n("insertEmoji",O)},G=O=>{var U,N;$e&&(U=a.value)!=null&&U.appendChild&&((N=a.value)==null||N.appendChild(O))},E=O=>{var U,N;$e&&O&&(U=a.value)!=null&&U.removeChild&&((N=a.value)==null||N.removeChild(O))};return(O,U)=>(v(),b("div",{class:P(["message-input-toolbar",!o(F)&&"message-input-toolbar-h5",o(ie)&&"message-input-toolbar-uni"])},[T("div",{class:P(["message-input-toolbar-list",!o(F)&&"message-input-toolbar-h5-list",o(ie)&&"message-input-toolbar-uni-list"])},[o(h)?(v(),oe(t1,{key:0,ref_key:"emojiPickerRef",ref:r,onInsertEmoji:M,onDialogShowInH5:G,onDialogCloseInH5:E,onChangeToolbarDisplayType:U[0]||(U[0]=N=>n("changeToolbarDisplayType",N))},null,512)):H("",!0),o(f).InputImage?(v(),oe(o1,{key:1,imageSourceType:"album"})):H("",!0),o(f).InputFile?(v(),oe(r1,{key:2})):H("",!0),o(f).InputVideo?(v(),oe(u1,{key:3,videoSourceType:"album"})):H("",!0),o(f).InputEvaluation?(v(),oe(_1,{key:4})):H("",!0),o(f).InputQuickReplies?(v(),oe(b1,{key:5})):H("",!0),o(m)[0]?(v(!0),b(ve,{key:6},Te(o(m),N=>(v(),oe(Rs,{key:N.id,iconFile:C(N),title:R(N),iconWidth:o(ie)?"25px":"20px",iconHeight:o(ie)?"25px":"20px",needDialog:!1,onOnIconClick:W=>I(N)},null,8,["iconFile","title","iconWidth","iconHeight","onOnIconClick"]))),128)):H("",!0)],2),o(y)[0]&&o(F)?(v(),b("div",C1,[(v(!0),b(ve,null,Te(o(y),(N,W)=>(v(),oe(Rs,{key:W,iconFile:C(N),title:R(N),iconWidth:o(ie)?"25px":"20px",iconHeight:o(ie)?"25px":"20px",needDialog:!1,onOnIconClick:J=>I(N)},null,8,["iconFile","title","iconWidth","iconHeight","onOnIconClick"]))),128))])):H("",!0),K(T1,{ref_key:"userSelectorRef",ref:l,type:o(c),currentConversation:o(i),isGroup:o(u),onSubmit:k,onCancel:x},null,8,["type","currentConversation","isGroup"]),o($e)?(v(),b("div",{key:1,ref_key:"h5Dialog",ref:a,class:P(["message-input-toolbar-h5-dialog"])},null,512)):H("",!0)],2))}});const w1=ae(S1,[["__scopeId","data-v-b344fa44"]]),k1={class:"chat"},E1=ne({__name:"index",emits:["closeChat"],setup(e,{emit:s}){const t=s,n=w(void 0),a=w(!1),i=w(!1),u=w(),c=w(),l=w(!1),r=w("none"),d=w(),p=w(),f=w([]),h=Ft.getFeatureConfig();Ne(()=>{j.watch(V.CONV,{currentConversationID:O,currentConversation:E})}),at(()=>{j.unwatch(V.CONV,{currentConversationID:O,currentConversation:E}),m()});const g=re(()=>ie?r.value!=="none":!0),_=re(()=>{let U="";switch(u.value){case 4:U=A.t("TUIChat.您已被管理员移出群聊");break;case 5:U=A.t("TUIChat.该群聊已被解散");break;case 8:U=A.t("TUIChat.您已退出该群聊");break;default:U=A.t("TUIChat.您已退出该群聊");break}return U}),m=()=>{Yt.switchConversation("")},y=U=>{t("closeChat",U),m()},I=U=>{var N;(N=d.value)==null||N.insertEmoji(U)},S=(U,N)=>{var W,J,le;if(!(!U||!N))switch(N){case"reference":break;case"reply":break;case"reedit":(W=U==null?void 0:U.payload)!=null&&W.text&&((le=d==null?void 0:d.value)==null||le.reEdit((J=U==null?void 0:U.payload)==null?void 0:J.text));break}},C=()=>{f.value[0].listener.onClicked({groupID:n.value})};function R(U){r.value=r.value===U?"none":U,r.value!=="none"&&ie&&uni.$emit("scroll-to-bottom")}function k(){var U;(U=p.value)==null||U.scrollToLatestMessage()}function x(U){l.value=U===void 0?!l.value:U}function M(){var U;(U=p.value)==null||U.mergeForwardMessage()}function G(){var U;(U=p.value)==null||U.oneByOneForwardMessage()}function E(U){(U==null?void 0:U.operationType)>0?(f.value=[],i.value=!0,u.value=U==null?void 0:U.operationType):(i.value=!1,u.value=void 0)}function O(U){if(c.value===U)return;a.value=!1;let N=Z.TYPES.CONV_C2C;U.startsWith(Z.TYPES.CONV_GROUP)&&(N=Z.TYPES.CONV_GROUP,a.value=!0,n.value=U.replace(Z.TYPES.CONV_GROUP,"")),f.value=[],c.value=U,l.value=!1,Ft.setChatType(N),ze.notifyEvent(_e.TUIChat.EVENT.CHAT_STATE_CHANGED,_e.TUIChat.EVENT_SUB_KEY.CHAT_OPENED,{groupID:n.value}),ze.callService({serviceName:_e.TUICustomerServicePlugin.SERVICE.NAME,method:_e.TUICustomerServicePlugin.SERVICE.METHOD.ACTIVE_CONVERSATION,params:{conversationID:U}}),Ft.getChatType()===_e.TUIChat.TYPE.GROUP&&(f.value=ze.getExtensionList(_e.TUIChat.EXTENSION.CHAT_HEADER.EXT_ID))}return(U,N)=>(v(),b("div",k1,[T("div",{class:P(["tui-chat",!o(F)&&"tui-chat-h5"])},[o(c)?H("",!0):(v(),b("div",{key:0,class:P(["tui-chat-default",!o(F)&&"tui-chat-h5-default"])},[nt(U.$slots,"default",{},void 0,!0)],2)),o(c)?(v(),b("div",{key:1,class:P(["tui-chat",!o(F)&&"tui-chat-h5"])},[K(ch,{class:P(["tui-chat-header",!o(F)&&"tui-chat-H5-header",o(ie)&&"tui-chat-uniapp-header"]),headerExtensionList:o(f),onCloseChat:y},null,8,["class","headerExtensionList"]),K(Hv,{onToggleMultipleSelectMode:x}),K(x_,{ref_key:"messageListRef",ref:p,class:P(["tui-chat-message-list",!o(F)&&"tui-chat-h5-message-list"]),isGroup:o(a),groupID:o(n),isNotInGroup:o(i),isMultipleSelectMode:o(l),onHandleEditor:S,onCloseInputToolBar:N[0]||(N[0]=()=>R("none")),onToggleMultipleSelectMode:x},null,8,["class","isGroup","groupID","isNotInGroup","isMultipleSelectMode"]),o(i)?(v(),b("div",{key:0,class:P({"tui-chat-leave-group":!0,"tui-chat-leave-group-mobile":o(ft)})},D(o(_)),3)):o(l)?(v(),oe(hv,{key:1,onOneByOneForwardMessage:G,onMergeForwardMessage:M,onToggleMultipleSelectMode:x})):(v(),b(ve,{key:2},[o(g)?(v(),oe(w1,{key:0,class:P(["tui-chat-message-input-toolbar",!o(F)&&"tui-chat-h5-message-input-toolbar",o(ie)&&"tui-chat-uni-message-input-toolbar"]),displayType:o(r),onInsertEmoji:I,onChangeToolbarDisplayType:R,onScrollToLatestMessage:k},null,8,["class","displayType"])):H("",!0),K(rv,{ref_key:"messageInputRef",ref:d,class:P(["tui-chat-message-input",!o(F)&&"tui-chat-h5-message-input",o(ie)&&"tui-chat-uni-message-input",o(zn)&&"tui-chat-wx-message-input"]),enableAt:o(h).InputMention,isMuted:!1,muteText:o(A).t("TUIChat.您已被管理员禁言"),placeholder:o(A).t("TUIChat.请输入消息"),inputToolbarDisplayType:o(r),onChangeToolbarDisplayType:R},null,8,["class","enableAt","muteText","placeholder","inputToolbarDisplayType"])],64))],2)):H("",!0),!o(i)&&o(ie)&&o(a)&&o(f).length>0?(v(),b("div",{key:2,class:"group-profile",onClick:C},D(o(f)[0].text),1)):H("",!0)],2)]))}});const Er=ae(E1,[["__scopeId","data-v-14c1b9e9"]]);class M1{constructor(){Ue(this,"currentConversationID","");Ue(this,"currentMessageList",[]);ze.registerService(_e.TUIChat.SERVICE.NAME,this),j.watch(V.CONV,{currentConversationID:s=>{this.currentConversationID=s}}),j.watch(V.CHAT,{messageList:s=>{this.currentMessageList=s}})}onCall(s,t,n){let a;switch(s){case _e.TUIChat.SERVICE.METHOD.UPDATE_MESSAGE_LIST:if(a=t.message,(a==null?void 0:a.conversationID)===this.currentConversationID){const i=[...this.currentMessageList,a];j.update(V.CHAT,"messageList",i)}break;case _e.TUIChat.SERVICE.METHOD.SEND_CUSTOM_MESSAGE:it.sendCustomMessage(t).then(i=>{n&&n(i)});break;case _e.TUIChat.SERVICE.METHOD.SEND_TEXT_MESSAGE:it.sendTextMessage(t).then(i=>{n&&n(i)});break;case _e.TUIChat.SERVICE.METHOD.SET_CHAT_TYPE:Ft.setChatType(t==null?void 0:t.chatType);break;case _e.TUIChat.SERVICE.METHOD.CLOSE_MESSAGE_POP_MENU:j.update(V.CUSTOM,"isShowMessagePopMenu",!1);break}}}new M1;const x1={class:"delDialog-title"},U1=ne({__name:"index",props:{actionsMenuPosition:{},selectedConversation:{},selectedConversationDomRect:{}},emits:["closeConversationActionMenu"],setup(e,{emit:s}){var _,m;const t=s,n=e,a=((_=In())==null?void 0:_.proxy)||In(),i=w(),u=w(!0),c=w(!1),l=j.getConversationModel(((m=n.selectedConversation)==null?void 0:m.conversationID)||""),r=w(n.actionsMenuPosition);Ne(()=>{p()});const d=re(()=>{var y,I;return((y=n.selectedConversation)==null?void 0:y.type)===Z.TYPES.CONV_C2C?"TUIConversation.删除后，将清空该聊天的消息记录":((I=n.selectedConversation)==null?void 0:I.type)===Z.TYPES.CONV_GROUP?"TUIConversation.删除后，将清空该群聊的消息记录":""});function p(){wt(()=>{var y,I;if(ie)((y=fe)==null?void 0:y.createSelectorQuery().in(a)).select("#conversation-actions-menu").boundingClientRect(C=>{var R,k;C&&(C.bottom>((k=(R=fe)==null?void 0:R.getWindowInfo)==null?void 0:k.call(R).windowHeight)&&(r.value={...n.actionsMenuPosition,top:n.actionsMenuPosition.top-(n.actionsMenuPosition.conversationHeight||0)-C.height}),r.value.left+C.width+5>fe.getWindowInfo().windowWidth&&(r.value.left=fe.getWindowInfo().windowWidth-C.width-5)),u.value=!1}).exec();else{const S=(I=i.value)==null?void 0:I.getBoundingClientRect();F&&typeof n.actionsMenuPosition.left<"u"&&(r.value.left=n.actionsMenuPosition.left),S&&S.bottom>window.innerHeight&&(r.value.top=n.actionsMenuPosition.top-(n.actionsMenuPosition.conversationHeight||0)-S.height),u.value=!1}})}const f=y=>{const{name:I}=y,S=l;if(!(!I||!S||!S.conversationID)){switch(I){case Kt.DELETE:S==null||S.deleteConversation();break;case Kt.ISPINNED:S==null||S.pinConversation();break;case Kt.DISPINNED:S==null||S.pinConversation();break;case Kt.MUTE:S==null||S.muteConversation();break;case Kt.NOTMUTE:S==null||S.muteConversation();break}t("closeConversationActionMenu")}},h=()=>{c.value=!0},g=y=>{y||t("closeConversationActionMenu"),c.value=y};return(y,I)=>(v(),oe(qn,{maskColor:"transparent",onOnOverlayClick:I[6]||(I[6]=()=>t("closeConversationActionMenu"))},{default:Pe(()=>[T("div",{id:"conversation-actions-menu",ref_key:"actionsMenuDomRef",ref:i,class:P([o(F)&&"actions-menu-pc","actions-menu",!o(u)&&"cancel-hidden"]),style:jt({top:`${o(r).top}px`,left:`${o(r).left}px`})},[T("div",{class:P(["actions-menu-item"]),onClick:I[0]||(I[0]=Oe(S=>h(),["stop"]))},D(o(A).t("TUIConversation.删除会话")),1),n.selectedConversation&&n.selectedConversation.isPinned?H("",!0):(v(),b("div",{key:0,class:P(["actions-menu-item"]),onClick:I[1]||(I[1]=Oe(S=>f({name:o(Kt).ISPINNED}),["stop"]))},D(o(A).t("TUIConversation.置顶会话")),1)),n.selectedConversation&&n.selectedConversation.isPinned?(v(),b("div",{key:1,class:P(["actions-menu-item"]),onClick:I[2]||(I[2]=Oe(S=>f({name:o(Kt).DISPINNED}),["stop"]))},D(o(A).t("TUIConversation.取消置顶")),1)):H("",!0),n.selectedConversation&&n.selectedConversation.isMuted?H("",!0):(v(),b("div",{key:2,class:P(["actions-menu-item"]),onClick:I[3]||(I[3]=Oe(S=>f({name:o(Kt).MUTE}),["stop"]))},D(o(A).t("TUIConversation.消息免打扰")),1)),n.selectedConversation&&n.selectedConversation.isMuted?(v(),b("div",{key:3,class:P(["actions-menu-item"]),onClick:I[4]||(I[4]=Oe(S=>f({name:o(Kt).NOTMUTE}),["stop"]))},D(o(A).t("TUIConversation.取消免打扰")),1)):H("",!0)],6),K(wn,{show:o(c),center:!0,isHeaderShow:o(F),onSubmit:I[5]||(I[5]=S=>f({name:o(Kt).DELETE})),"onUpdate:show":g},{default:Pe(()=>[T("p",x1,D(o(A).t(o(d))),1)]),_:1},8,["show","isHeaderShow"])]),_:1}))}});const A1=ae(U1,[["__scopeId","data-v-2fa8668b"]]),R1="/admin/assets/mute-94c8513a.svg",D1=["id"],P1=["onClick","onLongpress","onContextmenu"],O1={class:"left"},L1={key:1,class:"num"},$1={key:2,class:"num-notify"},N1={class:"content"},G1={class:"content-header"},B1={class:"content-header-label"},H1={class:"name"},F1={class:"middle-box"},j1={key:0,class:"middle-box-draft"},Y1={key:1,class:"middle-box-at"},z1={class:"middle-box-content"},V1={class:"content-footer"},W1={class:"time"},K1=ne({__name:"index",emits:["handleSwitchConversation","getPassingRef"],setup(e,{expose:s,emit:t}){const n=t,a=w(),i=w(),u=w(),c=w(!1),l=w([]),r=w(),d=w(),p=w({top:0,left:void 0,conversationHeight:void 0}),f=w(!1),h=w();let g=null;Ne(()=>{j.watch(V.CONV,{currentConversationID:x,conversationList:k,currentConversation:R}),j.watch(V.USER,{displayOnlineStatus:M,userStatusList:G}),!ie&&$c&&!F&&C()}),at(()=>{j.unwatch(V.CONV,{currentConversationID:x,conversationList:k,currentConversation:R}),j.unwatch(V.USER,{displayOnlineStatus:M,userStatusList:G})});const _=E=>f.value&&E.type===Z.TYPES.CONV_C2C,m=(E,O,U,N)=>{N&&(E.preventDefault(),ie)||(a.value=O,g=Date.now(),I(E,U))},y=()=>{g&&Date.now()-g>300&&(a.value=void 0,c.value=!1)},I=(E,O)=>{var U,N;if(ie)typeof r.value>"u"&&n("getPassingRef",r),((U=fe)==null?void 0:U.createSelectorQuery().in(r.value)).select(`#convlistitem-${O}`).boundingClientRect(J=>{J&&(p.value={top:J.bottom+($e?44:0),left:E.touches[0].pageX,conversationHeight:J.height},c.value=!0)}).exec();else{const W=((N=E.currentTarget||E.target)==null?void 0:N.getBoundingClientRect())||{};W&&(p.value={top:W.bottom,left:F?E.clientX:void 0,conversationHeight:W.height}),c.value=!0}},S=E=>{n("handleSwitchConversation",E),Yt.switchConversation(E)};function C(){d.value&&Nc({element:d.value,onLongPress:(E,O)=>{const U=Array.from(d.value.children).indexOf(O);m(E,l.value[U],U)},options:{eventDelegation:{subSelector:".tui-conversation-content"}}})}function R(E){a.value=E}function k(E){l.value=E}function x(E){i.value=E}function M(E){f.value=E}function G(E){E.size!==0&&(h.value=[...E.entries()].reduce((O,[U,N])=>(O[U]=N,O),{}))}return s({closeChildren:y}),(E,O)=>(v(),b("div",{ref_key:"conversationListInnerDomRef",ref:d,class:"tui-conversation-list"},[o(c)?(v(),oe(A1,{key:0,selectedConversation:o(a),actionsMenuPosition:o(p),selectedConversationDomRect:o(u),onCloseConversationActionMenu:y},null,8,["selectedConversation","actionsMenuPosition","selectedConversationDomRect"])):H("",!0),(v(!0),b(ve,null,Te(o(l),(U,N)=>(v(),b("div",{id:`convlistitem-${N}`,key:N,class:P(["tui-conversation-content",o(ft)&&"tui-conversation-content-h5 disable-select"])},[T("div",{class:P([o(F)&&"isPC","tui-conversation-item",o(i)===U.conversationID&&"tui-conversation-item-selected",U.isPinned&&"tui-conversation-item-pinned"]),onClick:W=>S(U.conversationID),onLongpress:W=>m(W,U,N),onContextmenu:W=>m(W,U,N,!0)},[T("aside",O1,[K(gs,{useSkeletonAnimation:"",url:U.getAvatar(),size:"30px"},null,8,["url"]),o(h)&&_(U)?(v(),b("div",{key:0,class:P(["online-status",Object.keys(o(h)).length>0&&Object.keys(o(h)).includes(U.userProfile.userID)&&o(h)[U.userProfile.userID].statusType===1?"online-status-online":"online-status-offline"])},null,2)):H("",!0),U.unreadCount>0&&!U.isMuted?(v(),b("span",L1,D(U.unreadCount>99?"99+":U.unreadCount),1)):H("",!0),U.unreadCount>0&&U.isMuted?(v(),b("span",$1)):H("",!0)]),T("div",N1,[T("div",G1,[T("label",B1,[T("p",H1,D(U.getShowName()),1)]),T("div",F1,[U.draftText&&U.conversationID!==o(i)?(v(),b("span",j1,D(o(A).t("TUIChat.[草稿]")),1)):U.type==="GROUP"&&U.groupAtInfoList&&U.groupAtInfoList.length>0?(v(),b("span",Y1,D(U.getGroupAtInfo()),1)):H("",!0),T("div",z1,D(U.getLastMessage("text")),1)])]),T("div",V1,[T("span",W1,D(U.getLastMessage("time")),1),U.isMuted?(v(),oe(pe,{key:0,file:o(R1)},null,8,["file"])):H("",!0)])])],42,P1)],10,D1))),128))],512))}});const Z1=ae(K1,[["__scopeId","data-v-17f6053c"]]),oc="/admin/assets/start-group-6d6b5fbb.svg",ic="/admin/assets/icon-c2c-d80299ab.svg",Fs=class Fs{static getInstance(){return Fs.instance||(Fs.instance=new Fs),Fs.instance}getMenu(){const s=this.generateMenuList();return!F&&s.length>0?[{text:A.t("TUIConversation.发起会话"),data:{name:"all",children:s}}]:s}generateMenuList(){return[{icon:ic,text:A.t("TUIConversation.发起单聊"),data:{name:fn.TYPEC2C},listener:{onClicked:this.createConversation.bind(this)}},{icon:oc,text:A.t("TUIConversation.发起群聊"),data:{name:fn.TYPEGROUP},listener:{onClicked:this.createConversation.bind(this)}}]}createConversation(s){ze.callService({serviceName:_e.TUIConversation.SERVICE.NAME,method:_e.TUIConversation.SERVICE.METHOD.CREATE_CONVERSATION,params:s})}};Ue(Fs,"instance");let $o=Fs;const q1={key:0,class:"list"},J1=["onClick"],X1={key:1,class:"plus"},Q1={class:"tui-conversation-header-item-title"},em={key:1,class:"tui-conversation-header-children list"},tm=["onClick"],sm={class:"tui-conversation-header-item-title"},nm=ne({__name:"index",setup(e,{expose:s}){const t=w([]),n=w(),a=re(()=>$o.getInstance().getMenu());Ne(()=>{t.value=[]});const i=c=>{const{data:{children:l},listener:r={onClicked:()=>{}}}=c;l?t.value=t.value.length>0?[]:l:(r.onClicked(c),u())},u=()=>{t.value=[]};return s({closeChildren:u}),(c,l)=>(v(),b("div",{ref:o(n),class:"tui-conversation-header"},[o(a).length>0?(v(),b("ul",q1,[(v(!0),b(ve,null,Te(o(a),(r,d)=>(v(),b("li",{key:d,class:"list-item"},[T("main",{class:"tui-conversation-header-item",onClick:Oe(p=>i(r),["stop"])},[r.icon&&!r.data.children?(v(),oe(pe,{key:0,class:"tui-conversation-header-item-icon",file:r.icon},null,8,["file"])):(v(),b("i",X1)),T("h1",Q1,D(r.text),1)],8,J1)]))),128))])):H("",!0),o(t).length>0?(v(),b("ul",em,[(v(!0),b(ve,null,Te(o(t),(r,d)=>(v(),b("li",{key:d,class:"list-item"},[T("main",{class:"tui-conversation-header-item",onClick:p=>i(r)},[r.icon?(v(),oe(pe,{key:0,class:"tui-conversation-header-item-icon",file:r.icon},null,8,["file"])):H("",!0),T("h1",sm,D(r.text),1)],8,tm)]))),128))])):H("",!0)],512))}});const am=ae(nm,[["__scopeId","data-v-d2664a8e"]]),om=e=>(nn("data-v-e9495285"),e=e(),an(),e),im={key:0,class:"network"},rm=om(()=>T("i",{class:"icon icon-error"},"!",-1)),lm={class:"network-content"},cm=ne({__name:"index",setup(e){const s=w(!1);return j.watch(V.USER,{netStateChange:t=>{s.value=t===Z.TYPES.NET_STATE_DISCONNECTED}}),(t,n)=>o(s)?(v(),b("div",im,[rm,T("p",lm,D(o(A).t("TUIConversation.网络异常，请您检查网络设置")),1)])):H("",!0)}});const um=ae(cm,[["__scopeId","data-v-e9495285"]]),dm=ne({__name:"index",emits:["handleSwitchConversation"],setup(e,{emit:s}){const t=s,n=w(0),a=w(),i=w(!0);j.watch(V.CONV,{totalUnreadCount:l=>{n.value=l}}),j.watch(V.CUSTOM,{isShowConversationHeader:l=>{i.value=l!==!1}});const u=l=>{t("handleSwitchConversation",l)},c=()=>{var l;(l=a==null?void 0:a.value)==null||l.closeChildren()};return(l,r)=>(v(),b("div",{class:"tui-conversation",onClick:c},[o(i)?(v(),oe(am,{key:0,ref_key:"headerRef",ref:a},null,512)):H("",!0),K(um),K(Z1,{onHandleSwitchConversation:u})]))}});const Mr=ae(dm,[["__scopeId","data-v-cc6ac570"]]),js=class js{constructor(){Ue(this,"onCallParamsMap");Ue(this,"onCallCallbackMap");Ue(this,"constants");Ue(this,"hideConversationHeader",()=>{j.update(V.CUSTOM,"isShowConversationHeader",!1)});ze.registerService(_e.TUIConversation.SERVICE.NAME,this),ze.registerExtension(_e.TUISearch.EXTENSION.SEARCH_MORE.EXT_ID,this),this.onCallParamsMap=new Map,this.onCallCallbackMap=new Map,this.constants=_e}static getInstance(){return js.instance||(js.instance=new js),js.instance}getOnCallParams(s){return this.onCallParamsMap.get(s)}getOnCallCallback(s){return this.onCallCallbackMap.get(s)}onCall(s,t,n){switch(this.onCallParamsMap.set(s,t),this.onCallCallbackMap.set(s,n),s){case _e.TUIConversation.SERVICE.METHOD.CREATE_CONVERSATION:this.createConversation(t);break;case _e.TUIConversation.SERVICE.METHOD.HIDE_CONVERSATION_HEADER:this.hideConversationHeader();break}}onGetExtension(s){if(s===_e.TUISearch.EXTENSION.SEARCH_MORE.EXT_ID)return[{weight:100,icon:ic,text:A.t("TUIConversation.发起单聊"),data:{name:fn.TYPEC2C},listener:{onClicked:this.createConversation.bind(this)}},{weight:100,icon:oc,text:A.t("TUIConversation.发起群聊"),data:{name:fn.TYPEGROUP},listener:{onClicked:this.createConversation.bind(this)}}]}createConversation(s){ze.callService({serviceName:_e.TUIContact.SERVICE.NAME,method:_e.TUIContact.SERVICE.METHOD.SELECT_FRIEND,params:{title:s.text,isRadio:s.data.name!==fn.TYPEGROUP,isNeedSearch:!j.getData(V.APP,"isOfficial")},callback:async t=>{if(!t||t.length===0)return this.routerForward(null);if(s.data.name===fn.TYPEGROUP)this.createGroup(t);else{const{userID:n}=t[0];await this.generateConversation(`C2C${n}`),this.routerForward(`C2C${n}`)}}})}createGroup(s){ze.callService({serviceName:_e.TUIGroup.SERVICE.NAME,method:_e.TUIGroup.SERVICE.METHOD.CREATE_GROUP,params:{title:A.t("TUIConversation.发起群聊"),memberList:s},callback:async t=>{let n=null;if(t){const{groupID:a}=t;await this.generateConversation(`GROUP${a}`),n=`GROUP${a}`}this.routerForward(n)}})}async routerForward(s){var t,n;ie&&(await((t=fe)==null?void 0:t.reLaunch({url:"/TUIKit/components/TUIConversation/index"})),s&&((n=fe)==null||n.navigateTo({url:"/TUIKit/components/TUIChat/index"})))}generateConversation(s){Yt.switchConversation(s).then(()=>{s.startsWith("GROUP")&&As("groupChat"),console.warn("打开会话成功")}).catch(t=>{console.warn("打开会话失败",t.code,t.msg)})}};Ue(js,"instance");let No=js;new No;const Go="/admin/assets/search-dabca596.svg",rc="/admin/assets/input-close-3bf506b7.svg",lc={[Z.TYPES.MSG_TEXT]:"[文本]",[Z.TYPES.MSG_IMAGE]:"[图片]",[Z.TYPES.MSG_AUDIO]:"[语音]",[Z.TYPES.MSG_VIDEO]:"[视频]",[Z.TYPES.MSG_FILE]:"[文件]",[Z.TYPES.MSG_CUSTOM]:"[自定义消息]",[Z.TYPES.MSG_SYSTEM]:"[系统消息]",[Z.TYPES.MSG_MERGER]:"[合并消息]",[Z.TYPES.MSG_LOCATION]:"[位置消息]"},hm={class:"tui-search-input-left"},pm=["placeholder"],fm=ne({__name:"index",props:{placeholder:{type:String,default:()=>A.t("TUISearch.搜索")},searchType:{type:String,default:"global",validator(e){return["global","conversation"].includes(e)}}},setup(e){const s=e,t=w(""),n=w(""),a=w(!1);function i(p){(p==null?void 0:p.searchType)===(s==null?void 0:s.searchType)&&(n.value=p==null?void 0:p.value,t.value=p==null?void 0:p.value)}function u(p){(p==null?void 0:p.searchType)===(s==null?void 0:s.searchType)&&(a.value=p==null?void 0:p.isSearching)}Ne(()=>{j.watch(V.SEARCH,{currentSearchInputValue:i,currentSearchingStatus:u})}),at(()=>{j.unwatch(V.SEARCH,{currentSearchInputValue:i,currentSearchingStatus:u})});const c=()=>{t.value!==n.value&&j.update(V.SEARCH,"currentSearchInputValue",{value:t.value,searchType:s.searchType})},l=()=>{a.value=!1,j.update(V.SEARCH,"currentSearchingStatus",{isSearching:!1,searchType:s.searchType}),j.update(V.SEARCH,"currentSearchInputValue",{value:"",searchType:s.searchType})},r=()=>{j.update(V.SEARCH,"currentSearchingStatus",{isSearching:!0,searchType:s.searchType})},d=()=>{var p,f;(f=(p=fe)==null?void 0:p.hideKeyboard)==null||f.call(p)};return(p,f)=>(v(),b("div",{class:P(["tui-search-input-container",!o(F)&&"tui-search-input-container-h5",s.searchType==="global"?"tui-search-input-container-global":"tui-search-input-container-conversation"])},[T("div",{class:P(["tui-search-input",!o(F)&&"tui-search-input-h5"])},[T("div",hm,[K(pe,{class:"icon",file:o(Go),width:"14px",height:"14px"},null,8,["file"])]),ut(T("input",{"onUpdate:modelValue":f[0]||(f[0]=h=>Bt(t)?t.value=h:null),class:"tui-search-input-main",type:"text",placeholder:s.placeholder,focus:!1,enterkeyhint:"search",onBlur:d,onKeyup:sn(c,["enter"]),onConfirm:c,onClick:Oe(r,["stop","prevent"])},null,40,pm),[[Ot,o(t)]]),o(a)?(v(),b("div",{key:0,class:"tui-search-input-right",onClick:l},[K(pe,{class:"icon",file:o(rc),width:"14px",height:"14px"},null,8,["file"])])):H("",!0)],2),!o(F)&&o(a)&&s.searchType==="global"?(v(),b("div",{key:0,class:P(["tui-search-input-cancel",!o(F)&&"tui-search-input-h5-cancel"]),onClick:l},D(o(A).t("TUISearch.取消")),3)):H("",!0)],2))}});const xr=ae(fm,[["__scopeId","data-v-d6cac102"]]),gm=[Z.TYPES.MSG_TEXT,Z.TYPES.MSG_FILE,Z.TYPES.MSG_IMAGE,Z.TYPES.MSG_VIDEO,Z.TYPES.MSG_AUDIO,Z.TYPES.MSG_LOCATION,Z.TYPES.MSG_CUSTOM,Z.TYPES.MSG_MERGER],Dt={allMessage:{key:"allMessage",label:"全部",value:gm},textMessage:{key:"textMessage",label:"文本",value:[Z.TYPES.MSG_TEXT]},fileMessage:{key:"fileMessage",label:"文件",value:[Z.TYPES.MSG_FILE]},imageMessage:{key:"imageMessage",label:"图片/视频",value:[Z.TYPES.MSG_IMAGE,Z.TYPES.MSG_VIDEO]},otherMessage:{key:"otherMessage",label:"其他",value:[Z.TYPES.MSG_AUDIO,Z.TYPES.MSG_LOCATION,Z.TYPES.MSG_CUSTOM,Z.TYPES.MSG_MERGER]}};Object.keys(Dt).filter(e=>e!=="all");const _m=Dt.allMessage,vm=Dt.textMessage,qs={global:_m,conversation:vm},io=["allMessage","textMessage","fileMessage","otherMessage"],mm=Object.keys(Dt).filter(e=>io==null?void 0:io.includes(e)).reduce((e,s)=>(e[s]=Dt[s],e),{}),ro=["textMessage","fileMessage","imageMessage","otherMessage"],ym=Object.keys(Dt).filter(e=>ro==null?void 0:ro.includes(e)).reduce((e,s)=>(e[s]=Dt[s],e),{}),lo=24*60*60,cc={all:{key:"all",label:"全部",value:{timePosition:0,timePeriod:0}},oneDay:{key:"today",label:"今天",value:{timePosition:0,timePeriod:lo}},threeDay:{key:"threeDays",label:"近三天",value:{timePosition:0,timePeriod:3*lo}},sevenDay:{key:"sevenDays",label:"近七天",value:{timePosition:0,timePeriod:7*lo}}},Rn=cc.all,Im={class:"tui-date-table-body"},bm={class:"tui-date-table-body-weeks"},Tm=["aria-label"],Cm=["onClick"],Sm={class:"tui-date-table-body-days-item-cell-text"},wm=ne({__name:"date-table",props:{type:{type:String,default:"range"},currentPanelDate:{type:ds.Dayjs,default:()=>st()},date:{type:ds.Dayjs,default:null},startDate:{type:ds.Dayjs,default:null},endDate:{type:ds.Dayjs,default:null}},emits:["pick"],setup(e,{emit:s}){const t=e,n=s,a=In(),i=w([[],[],[],[],[],[]]),u=w(st(t.currentPanelDate||null)),c=w(st(t.date||null)),l=w(st(t.startDate||null)),r=w(st(t.endDate||null)),d=re(()=>st.weekdaysShort()),p=re(()=>d.value.map(_=>_.substring(1))),f=re(()=>{var m;const _=(m=u.value)==null?void 0:m.startOf("month");return _==null?void 0:_.subtract((_==null?void 0:_.day())||7,"day")}),h=re(()=>{var R,k,x,M,G;const _=i.value,m=p.value.length,y=(R=u.value)==null?void 0:R.startOf("month"),I=(y==null?void 0:y.day())||7,S=y==null?void 0:y.daysInMonth();let C=1;for(let E=0;E<i.value.length;E++)for(let O=0;O<m;O++){const U=(k=f.value)==null?void 0:k.add(C,"day"),N=U==null?void 0:U.date(),W=t.type==="single"&&(U==null?void 0:U.format("YYYY-MM-DD"))===((x=c.value)==null?void 0:x.format("YYYY-MM-DD")),J=t.type==="range"&&(U==null?void 0:U.format("YYYY-MM-DD"))===((M=l.value)==null?void 0:M.format("YYYY-MM-DD")),le=t.type==="range"&&(U==null?void 0:U.format("YYYY-MM-DD"))===((G=r.value)==null?void 0:G.format("YYYY-MM-DD")),ce=(U==null?void 0:U.isSameOrBefore(r.value,"day"))&&(U==null?void 0:U.isSameOrAfter(l.value,"day"));let ue="normal";C<I?ue="prev-month":C-I>=S&&(ue="next-month"),_[E][O]={type:ue,date:U,text:N,isSelected:W||J||le,isSelectedStart:J,isSelectedEnd:le,isInRange:ce},C++}return _}),g=_=>{(_==null?void 0:_.type)==="normal"&&n("pick",_)};return Ze(()=>[t.currentPanelDate,t.date,t.startDate,t.endDate],()=>{u.value=st(t.currentPanelDate||null),c.value=st(t.date||null),l.value=st(t.startDate||null),r.value=st(t.endDate||null),wt(()=>{var _;(_=a==null?void 0:a.proxy)==null||_.$forceUpdate()})},{deep:!0,immediate:!0}),(_,m)=>(v(),b("table",{class:P(["tui-date-table",!o(F)&&"tui-date-table-h5"]),cellspacing:"0",cellpadding:"0",role:"grid"},[T("tbody",Im,[T("tr",bm,[(v(!0),b(ve,null,Te(o(p),y=>(v(),b("th",{key:y,class:"tui-date-table-body-weeks-item","aria-label":y+"",scope:"col"},D(o(A).t(`time.${y}`)),9,Tm))),128))]),(v(!0),b(ve,null,Te(o(h),(y,I)=>(v(),b("tr",{key:I,class:"tui-date-table-body-days"},[(v(!0),b(ve,null,Te(y,(S,C)=>(v(),b("td",{key:C,class:P(["tui-date-table-body-days-item",S.type])},[T("div",{class:P(["tui-date-table-body-days-item-cell",S.isSelected&&"selected",S.isSelectedStart&&"selected-start",S.isSelectedEnd&&"selected-end",S.isInRange&&"range"]),onClick:R=>g(S)},[T("span",Sm,D(S.text),1)],10,Cm)],2))),128))]))),128))])],2))}});const km=ae(wm,[["__scopeId","data-v-8338dd58"]]),Em="/admin/assets/left-arrow-dce2f352.svg",Mm="/admin/assets/right-arrow-0091db6c.svg",xm="/admin/assets/d-left-arrow-d3dcfc22.svg",Um="/admin/assets/d-right-arrow-2202133f.svg",Am=ne({__name:"date-picker-panel",props:{type:{type:String,default:"range"},date:{type:ds.Dayjs,default:()=>st()},startDate:{type:ds.Dayjs,default:null},endDate:{type:ds.Dayjs,default:null},rangeType:{type:String,default:""},currentOtherPanelValue:{type:ds.Dayjs,default:null}},emits:["pick","change"],setup(e,{emit:s}){const t=e,n=s,a=m=>m?["tui-date-picker-panel-"+m,!F&&"tui-date-picker-panel-h5-"+m]:["tui-date-picker-panel",!F&&"tui-date-picker-panel-h5"],i=w(),u=re(()=>{var m;return(m=i.value)==null?void 0:m.get("year")}),c=re(()=>{var m;return(m=i.value)==null?void 0:m.format("MMMM")}),l=re(()=>{var I,S,C;const m=((I=t.currentOtherPanelValue)==null?void 0:I.year())-1,y=(S=t.currentOtherPanelValue)==null?void 0:S.year(m);return t.rangeType==="right"||((C=i.value)==null?void 0:C.isBefore(y,"year"))}),r=re(()=>{var I,S,C;const m=((I=t.currentOtherPanelValue)==null?void 0:I.month())-1,y=(S=t.currentOtherPanelValue)==null?void 0:S.month(m);return t.rangeType==="right"||((C=i.value)==null?void 0:C.isBefore(y,"month"))}),d=re(()=>{var I,S,C;const m=((I=t.currentOtherPanelValue)==null?void 0:I.year())+1,y=(S=t.currentOtherPanelValue)==null?void 0:S.year(m);return t.rangeType==="left"||((C=i.value)==null?void 0:C.isAfter(y,"year"))}),p=re(()=>{var I,S,C;const m=((I=t.currentOtherPanelValue)==null?void 0:I.month())+1,y=(S=t.currentOtherPanelValue)==null?void 0:S.month(m);return t.rangeType==="left"||((C=i.value)==null?void 0:C.isAfter(y,"month"))}),f=()=>{var m;return t.date&&((m=st(t.date))!=null&&m.isValid())?{date:t==null?void 0:t.date}:{date:st()}},h=()=>{var m;switch(t.rangeType){case"left":return t.startDate&&st.isDayjs(t.startDate)?{date:t==null?void 0:t.startDate}:{date:st()};case"right":if(t.endDate&&st.isDayjs(t.endDate)&&((m=t==null?void 0:t.endDate)!=null&&m.isAfter(t.startDate,"month")))return{date:t==null?void 0:t.endDate};{const y=(t.startDate||st()).month();return{date:(t.startDate||st()).month(y+1)}}default:return{date:st()}}};function g(m){n("pick",m)}function _(m,y){i.value=st(i.value.toDate()).add(y,m),n("change",i.value)}return Ec(()=>{switch(t.type){case"single":i.value=f().date,n("change",i.value);break;case"range":i.value=h().date,n("change",i.value);break}}),(m,y)=>(v(),b("div",{class:P([a("")]),onMouseup:y[4]||(y[4]=Oe(()=>{},["stop"]))},[T("div",{class:P([a("body")])},[T("div",{class:P([a("body-header")])},[T("div",{class:P([a("body-header-prev")])},[o(d)?(v(),b("div",{key:0,class:P([a("icon")]),onClick:y[0]||(y[0]=I=>_("year",-1))},[K(pe,{file:o(xm),width:"12px",height:"12px"},null,8,["file"])],2)):H("",!0),o(p)?(v(),b("div",{key:1,class:P([a("icon")]),onClick:y[1]||(y[1]=I=>_("month",-1))},[K(pe,{file:o(Em),width:"10px",height:"10px"},null,8,["file"])],2)):H("",!0)],2),T("div",{class:P([a("body-header-label")])},[T("div",{class:P([a("body-header-label-item")])},D(o(u)),3),T("div",{class:P([a("body-header-label-item")])},D(o(A).t(`time.${o(c)}`)),3)],2),T("div",{class:P([a("body-header-next")])},[o(r)?(v(),b("div",{key:0,class:P([a("icon")]),onClick:y[2]||(y[2]=I=>_("month",1))},[K(pe,{file:o(Mm),width:"10px",height:"10px"},null,8,["file"])],2)):H("",!0),o(l)?(v(),b("div",{key:1,class:P([a("icon")]),onClick:y[3]||(y[3]=I=>_("year",1))},[K(pe,{file:o(Um),width:"12px",height:"12px"},null,8,["file"])],2)):H("",!0)],2)],2),T("div",{class:P([a("body-content")])},[K(km,{type:t.type,date:t.date,startDate:t.startDate,endDate:t.endDate,currentPanelDate:o(i),onPick:g},null,8,["type","date","startDate","endDate","currentPanelDate"])],2)],2)],34))}});const Ur=ae(Am,[["__scopeId","data-v-cf4d1290"]]),Rm=["placeholder","disabled"],Dm={key:0},Pm=["placeholder","disabled"],Om=ne({__name:"index",props:{type:{type:String,default:"range"},rangeTableType:{type:String,default:"one"},startPlaceholder:{type:String,default:()=>A.t("开始时间")},endPlaceholder:{type:String,default:()=>A.t("开始时间")},popupPosition:{type:String,default:"bottom"},defaultSingleDate:{type:ds.Dayjs,default:null,required:!1}},emits:["pick","change"],setup(e,{emit:s}){st.extend(Vc),st.extend(Wc),st.extend(Kc),st.locale("zh-cn");const t=s,n=e,a=w(!1),i=w(n.type==="single"?n==null?void 0:n.defaultSingleDate:null),u=w(n.type==="single"?n==null?void 0:n.defaultSingleDate:null),c=w(n.type==="single"?n==null?void 0:n.defaultSingleDate:null),l=re(()=>{var S;return(S=u==null?void 0:u.value)==null?void 0:S.format("YYYY/MM/DD")}),r=re(()=>{var S;return(S=c==null?void 0:c.value)==null?void 0:S.format("YYYY/MM/DD")}),d=n.startPlaceholder,p=n.endPlaceholder,f=w(),h=w(),g=S=>{a.value=S},_=S=>{const C=[];return S.forEach(R=>{R?(C.push("tui-date-picker-"+R),!F&&C.push("tui-date-picker-h5-"+R)):(C.push("tui-date-picker"),!F&&C.push("tui-date-picker-h5"))}),C},m=S=>{var C,R,k;switch(n.type){case"single":u.value=S.date,c.value=S.date,i.value=S.date,t("change",S),t("pick",i.value),setTimeout(()=>{g(!1)},300);break;case"range":u!=null&&u.value?c!=null&&c.value?(u.value=S.date,c.value=null):((C=u==null?void 0:u.value)!=null&&C.isSameOrBefore(S.date,"day")?c.value=S.date:(c.value=u.value,u.value=S.date),t("pick",{startDate:(R=u==null?void 0:u.value)==null?void 0:R.startOf("date"),endDate:(k=c==null?void 0:c.value)==null?void 0:k.endOf("date")}),setTimeout(()=>{g(!1)},200)):u.value=S.date,t("change",{startDate:u.value,endDate:c.value,leftCurrentPanel:f.value,rightCurrentPanel:f.value});break}},y=S=>{f.value=S,t("change",{startDate:u.value,endDate:c.value,leftCurrentPanel:f.value,rightCurrentPanel:f.value})},I=S=>{h.value=S,t("change",{startDate:u.value,endDate:c.value,leftCurrentPanel:f.value,rightCurrentPanel:f.value})};return(S,C)=>(v(),b("div",{class:P([_([""])])},[T("div",{class:P([_(["input"]),o(a)&&_(["input-active"])]),onClick:C[2]||(C[2]=R=>g(!o(a)))},[nt(S.$slots,"start-icon",{},void 0,!0),ut(T("input",{"onUpdate:modelValue":C[0]||(C[0]=R=>Bt(l)?l.value=R:null),placeholder:o(d),class:P([_(["input-start"])]),style:{"pointer-events":"none"},type:"text",readonly:!0,disabled:o(ie),autocomplete:"false"},null,10,Rm),[[Ot,o(l)]]),e.type!=="single"?(v(),b("span",Dm,"-")):H("",!0),e.type!=="single"?ut((v(),b("input",{key:1,"onUpdate:modelValue":C[1]||(C[1]=R=>Bt(r)?r.value=R:null),placeholder:o(p),class:P([_(["input-end"])]),style:{"pointer-events":"none"},type:"text",readonly:!0,disabled:o(ie),autocomplete:"false"},null,10,Pm)),[[Ot,o(r)]]):H("",!0),nt(S.$slots,"end-icon",{},void 0,!0)],2),o(a)?(v(),b("div",{key:0,class:P([_(["dialog"])])},[T("div",{class:P([_(["dialog-container","dialog-container-"+e.rangeTableType,"dialog-container-"+e.popupPosition])])},[K(Ur,{type:n.type,rangeType:"left",date:o(i),startDate:o(u),endDate:o(c),currentOtherPanelValue:o(h),onPick:m,onChange:y},null,8,["type","date","startDate","endDate","currentOtherPanelValue"]),n.type==="range"&&o(F)&&e.rangeTableType==="two"?(v(),oe(Ur,{key:0,type:n.type,rangeType:"right",date:o(i),startDate:o(u),endDate:o(c),currentOtherPanelValue:o(f),onPick:m,onChange:I},null,8,["type","date","startDate","endDate","currentOtherPanelValue"])):H("",!0)],2)],2)):H("",!0)],2))}});const Lm=ae(Om,[["__scopeId","data-v-c42974d8"]]),uc="/admin/assets/down-icon-fbb4047c.svg",$m={key:0,class:"tui-search-header"},Nm={class:"tui-search-header-title"},Gm={class:"tui-search-tabs"},Bm=["onClick"],Hm={key:1,class:"tui-search-time"},Fm=["onClick"],jm={key:0,class:"tui-search-time-item-picker"},Ym={key:1},zm=ne({__name:"index",props:{popupPosition:{type:String,default:"bottom"},searchType:{type:String,default:"global",validator(e){return["global","conversation"].includes(e)}}},emits:["searchConfigChange","closeInConversationSearch"],setup(e,{emit:s}){const t=e,n=s,a=re(()=>(t==null?void 0:t.searchType)==="conversation"?ym:mm),i=w(qs[t==null?void 0:t.searchType]),u=w(Rn),c=re(()=>i.value.key!=="contact"&&i.value.key!=="group"),l=re(()=>F&&t.searchType==="global"&&!ie?"two":"one"),r=w(!1);function d(I){(I==null?void 0:I.searchType)===(t==null?void 0:t.searchType)&&(i.value=(I==null?void 0:I.value)||qs[t==null?void 0:t.searchType])}function p(I){(I==null?void 0:I.searchType)===(t==null?void 0:t.searchType)&&(u.value=(I==null?void 0:I.value)||Rn)}Ne(()=>{j.watch(V.SEARCH,{currentSearchMessageType:d,currentSearchMessageTime:p})}),at(()=>{j.unwatch(V.SEARCH,{currentSearchMessageType:d,currentSearchMessageTime:p})});const f=I=>{j.update(V.SEARCH,"currentSearchMessageType",{value:I,searchType:t.searchType})},h=I=>{r.value&&I.key==="all"?r.value=!1:(r.value=!1,j.update(V.SEARCH,"currentSearchMessageTime",{value:I,searchType:t.searchType}))},g=()=>{var I;((I=u.value)==null?void 0:I.key)!=="all"?j.update(V.SEARCH,"currentSearchMessageTime",{value:Rn,searchType:t.searchType}):r.value=!0},_=I=>{var S,C,R;if(((S=u.value)==null?void 0:S.key)==="all"){const{startDate:k,endDate:x}=I,M=Number((((C=x==null?void 0:x.toDate())==null?void 0:C.getTime())/1e3).toFixed(0)),G=M-Number((((R=k==null?void 0:k.toDate())==null?void 0:R.getTime())/1e3).toFixed(0)),E={key:u.value.key,label:u.value.label,value:{timePosition:M,timePeriod:G}};j.update(V.SEARCH,"currentSearchMessageTime",{value:E,searchType:t.searchType})}},m=()=>{var I;r.value=!1,((I=u.value)==null?void 0:I.key)==="all"&&j.update(V.SEARCH,"currentSearchMessageTime",{value:Rn,searchType:t.searchType})},y=()=>{n("closeInConversationSearch")};return(I,S)=>(v(),b("div",{class:P(["tui-search-container",!o(F)&&"tui-search-container-h5",o(F)&&`container-${t.popupPosition}`,`container-${t.searchType}`])},[T("div",{class:P([o(F)&&`tui-search-container-${t.popupPosition}`,!o(F)&&"tui-search-container-h5-main"])},[t.searchType==="conversation"&&!o(ie)?(v(),b("div",$m,[T("div",Nm,D(o(A).t("TUISearch.搜索会话内容")),1),T("div",{class:"tui-search-header-close",onClick:y},[K(pe,{file:o(zl),width:"14px",height:"14px"},null,8,["file"])])])):H("",!0),T("div",Gm,[(v(!0),b(ve,null,Te(o(a),(C,R)=>(v(),b("div",{key:R,class:P(["tui-search-tabs-item",o(i).key===C.key&&"tui-search-tabs-item-selected"]),onClick:k=>f(C)},D(o(A).t(`TUISearch.${C.label}`)),11,Bm))),128))]),nt(I.$slots,"input",{},void 0,!0),o(c)?(v(),b("div",Hm,[(v(!0),b(ve,null,Te(o(cc),(C,R)=>(v(),b("div",{key:R,class:P(["tui-search-time-item",o(u).key===C.key&&"tui-search-time-item-selected"]),onClick:k=>h(C)},[C.key==="all"?(v(),b("div",jm,[o(r)?H("",!0):(v(),b("div",{key:0,class:"tui-search-time-item-all",onClick:Oe(g,["stop"])},[Gn(D(o(A).t("TUISearch.选择时间")+":  "+o(A).t("TUISearch.全部"))+" ",1),K(pe,{file:o(uc),width:"14px",height:"14px"},null,8,["file"])])),T("div",{onClick:S[0]||(S[0]=Oe(()=>{},["stop"]))},[o(r)?(v(),oe(Lm,{key:0,type:"range",rangeTableType:o(l),onPick:_},null,8,["rangeTableType"])):H("",!0)]),o(r)?(v(),b("div",{key:1,class:"tui-search-time-item-close",onClick:m},[K(pe,{class:"icon",file:o(rc),width:"14px",height:"14px"},null,8,["file"])])):H("",!0)])):(v(),b("div",Ym,D(o(A).t(`TUISearch.${C.label}`)),1))],10,Fm))),128))])):H("",!0),nt(I.$slots,"result",{},void 0,!0)],2)],2))}});const Ar=ae(zm,[["__scopeId","data-v-df27b6bb"]]),Vm=ne({__name:"message-abstract-text",props:{content:{default:()=>[]},highlightType:{default:"font"},displayType:{default:"info"}},setup(e){const t=w(e.content);return(n,a)=>(v(),b("div",{class:P(["message-abstract-text",`message-abstract-text-${n.highlightType}`,`message-abstract-text-${n.displayType}`])},[(v(!0),b(ve,null,Te(o(t),(i,u)=>(v(),b("span",{key:u,class:P([i&&i.isHighlight?"highlight":"normal"])},D(o(ln)(i.text)),3))),128))],2))}});const Wm=ae(Vm,[["__scopeId","data-v-274990bd"]]),Km={class:P(["message-abstract-file-left"])},Zm=["src"],qm={class:P(["message-abstract-file-main"])},Jm={class:P(["message-abstract-file-main-name"])},Xm={class:P(["message-abstract-file-main-size"])},Qm=ne({__name:"message-abstract-file",props:{contentText:{default:()=>[]},messageContent:{default:()=>({})},displayType:{default:"bubble"}},setup(e){const s=e,t=w(s.contentText),n=re(()=>{var r;const u=(r=s==null?void 0:s.messageContent)==null?void 0:r.url,c=u==null?void 0:u.lastIndexOf("."),l=u==null?void 0:u.substring(c+1);return i(l)}),a=re(()=>{var u;return(u=s==null?void 0:s.messageContent)==null?void 0:u.size}),i=u=>{const c="https://web.sdk.qcloud.com/component/TUIKit/assets/file-",l=["image","pdf","text","ppt","presentation","sheet","zip","word","video","unknown"];let r="",d="";return l==null||l.forEach(p=>{u!=null&&u.includes(p)&&(r=c+p+".svg",d=p)}),{iconSrc:r||c+"unknown.svg",iconType:d||"unknown"}};return(u,c)=>(v(),b("div",{class:P(["message-abstract-file",`message-abstract-file-${u.displayType}`])},[T("div",Km,[T("img",{class:P(["message-abstract-file-left-icon"]),src:o(n).iconSrc},null,8,Zm)]),T("div",qm,[T("div",Jm,[(v(!0),b(ve,null,Te(o(t),(l,r)=>(v(),b("span",{key:r,class:P([l&&l.isHighlight?"highlight":"normal"])},D(l.text),3))),128))]),T("div",Xm,D(o(a)),1)])],2))}});const Rr=ae(Qm,[["__scopeId","data-v-ec8ab332"]]),e0={key:0,class:P(["service"])},t0={class:P(["service-header"])},s0={class:P(["service-header-title"])},n0=["href"],a0={key:0,class:P(["service-list"])},o0=["href"],i0={key:1,class:P(["service-list-item-key"])},r0={class:P(["service-description","description"])},l0={key:1,class:"evaluate"},c0={class:P(["evaluate-description","description"])},u0={key:0,class:"evaluate-list"},d0={key:2,class:"order"},h0=["src"],p0={class:"order-main"},f0={class:"order-main-title"},g0={class:P(["order-main-description","description"])},_0={class:"order-main-price"},v0={key:3,class:"text-link"},m0={class:P(["text-link-description","description"])},y0=["href"],I0={key:4},b0=ne({__name:"message-abstract-custom",props:{contentText:{default:()=>[]},message:{default:()=>({})},messageContent:{default:()=>({})}},setup(e){var c,l;const s=e,t=w((c=s==null?void 0:s.message)==null?void 0:c.payload),n=re(()=>{var r,d;return(r=t==null?void 0:t.value)!=null&&r.data?os(t.value.data):(d=t==null?void 0:t.value)==null?void 0:d.data}),a=re(()=>{var r;return(r=n==null?void 0:n.value)==null?void 0:r.businessID}),i=w(s==null?void 0:s.contentText),u=w(((l=s==null?void 0:s.messageContent)==null?void 0:l.custom)||"[自定义消息]");return(r,d)=>(v(),b("div",{class:P(["message-abstract-custom"]),onClickCapture:d[0]||(d[0]=Oe(()=>{},["stop"]))},[o(a)===o(ss).SERVICE?(v(),b("div",e0,[T("h1",t0,[T("label",s0,D(o(n).title),1),o(n).hyperlinks_text?(v(),b("a",{key:0,class:P(["service-header-link","link"]),href:o(n).hyperlinks_text.value,target:"view_window"},D(o(n).hyperlinks_text.key),9,n0)):H("",!0)]),o(n).item&&o(n).item.length>0?(v(),b("ul",a0,[(v(!0),b(ve,null,Te(o(n).item,(p,f)=>(v(),b("li",{key:f,class:P(["service-list-item"])},[o(Fl)(p.value)?(v(),b("a",{key:0,class:P(["service-list-item-link","link"]),href:p.value,target:"view_window"},D(p.key),9,o0)):(v(),b("p",i0,D(p.key),1))]))),128))])):H("",!0),T("div",r0,[(v(!0),b(ve,null,Te(o(i),(p,f)=>(v(),b("span",{key:f,class:P([p&&p.isHighlight?"highlight":"normal"])},D(p.text),3))),128))])])):o(a)===o(ss).EVALUATE?(v(),b("div",l0,[T("div",c0,[(v(!0),b(ve,null,Te(o(i),(p,f)=>(v(),b("span",{key:f,class:P([p&&p.isHighlight?"highlight":"normal"])},D(p.text),3))),128))]),o(n).score?(v(),b("ul",u0,[(v(!0),b(ve,null,Te(Math.max(o(n).score,0),(p,f)=>(v(),b("li",{key:f,class:"evaluate-list-item"},[K(pe,{file:o(Xo),class:"file-icon"},null,8,["file"])]))),128))])):H("",!0),T("article",null,D(o(n).comment),1)])):o(a)===o(ss).ORDER?(v(),b("div",d0,[T("img",{class:"order-image",src:o(n).imageUrl,alt:""},null,8,h0),T("main",p0,[T("h1",f0,D(o(n).title),1),T("div",g0,[(v(!0),b(ve,null,Te(o(i),(p,f)=>(v(),b("span",{key:f,class:P([p&&p.isHighlight?"highlight":"normal"])},D(p.text),3))),128))]),T("span",_0,D(o(n).price),1)])])):o(a)===o(ss).LINK?(v(),b("div",v0,[T("div",m0,[T("p",null,D(o(n).text),1)]),T("a",{class:P(["link"]),href:o(n).link,target:"view_window"},D(o(A).t("message.custom.查看详情>>")),9,y0)])):(v(),b("span",I0,D(o(u)),1))],32))}});const T0=ae(b0,[["__scopeId","data-v-65681342"]]),C0={class:P(["message-abstract-image-container"])},S0=["src"],w0=ne({__name:"message-abstract-image",props:{messageContent:{default:()=>({})}},setup(e){const s=e,t=re(()=>s.messageContent.url||"");return(n,a)=>(v(),b("div",C0,[T("img",{class:P(["message-abstract-image"]),src:o(t)},null,8,S0)]))}});const k0=ae(w0,[["__scopeId","data-v-39cdf574"]]),E0={class:P(["message-abstract-video"])},M0={class:"message-abstract-video-box"},x0=["src"],U0=ne({__name:"message-abstract-video",props:{messageContent:{default:()=>({})}},setup(e){const s=e,t=re(()=>s.messageContent.snapshotUrl||s.messageContent.url);return(n,a)=>(v(),b("div",E0,[T("div",M0,[T("img",{src:o(t),class:P(["video-snapshot"])},null,8,x0),K(pe,{file:o(ql),class:"video-play"},null,8,["file"])])]))}});const A0=ae(U0,[["__scopeId","data-v-c3634fb3"]]),R0=e=>it.searchCloudMessages(e).then(s=>s).catch(s=>(Se({message:A.t("TUISearch.消息云端搜索失败：")+(s==null?void 0:s.message),type:we.ERROR,duration:3e3}),null)),dc=e=>{const s=(e==null?void 0:e.conversationID)||(e!=null&&e.groupID?`GROUP${e==null?void 0:e.groupID}`:`C2C${e==null?void 0:e.userID}`);Yt.switchConversation(s).then(()=>{var t;j.update(V.SEARCH,"currentSearchingStatus",{isSearching:!1,searchType:"global"}),j.update(V.SEARCH,"currentSearchInputValue",{value:"",searchType:"global"}),ie&&((t=fe)==null||t.navigateTo({url:"/TUIKit/components/TUIChat/index"}))}).catch(t=>{console.warn("switch conversation failed:",t==null?void 0:t.message),Se({message:A.t("TUISearch.进入会话失败"),type:we.ERROR,duration:1e3})})},D0=(e,s)=>{var t,n,a;return e?e.ID?s==null?void 0:s.showName:e.groupID?e.name||e.groupID:e.userID?e.remark||e.nick||e.userID||"":(t=e.conversation)!=null&&t.conversationID?typeof e.conversation.getShowName=="function"?e.conversation.getShowName():((a=(n=j.getConversationModel(e.conversation.conversationID))==null?void 0:n.getShowName)==null?void 0:a.call(n))||e.conversation.conversationID:"":""},P0=e=>{var s,t,n,a;return e?e.ID?e.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png":e.groupID?e.avatar||`https://web.sdk.qcloud.com/im/assets/images/${e==null?void 0:e.type}.svg`:e.userID?e.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png":(s=e==null?void 0:e.conversation)!=null&&s.conversationID?typeof e.conversation.getAvatar=="function"?(t=e.conversation)==null?void 0:t.getAvatar():(a=(n=j.getConversationModel(e.conversation.conversationID))==null?void 0:n.getAvatar)==null?void 0:a.call(n):"":""},O0=(e,s,t,n=!0)=>{var a,i,u,c;if(e!=null&&e.groupID)return[{text:"groupID: ",isHighlight:!1},{text:e.groupID,isHighlight:!0}];if(e!=null&&e.userID)return[{text:"userID: ",isHighlight:!1},{text:e.userID,isHighlight:!0}];if(e!=null&&e.conversation||e!=null&&e.flow)if((e==null?void 0:e.messageCount)===1||e!=null&&e.flow){const l=e!=null&&e.flow?e:e==null?void 0:e.messageList[0],r=((a=l==null?void 0:l.payload)==null?void 0:a.text)||((i=l==null?void 0:l.payload)==null?void 0:i.fileName)||((u=l==null?void 0:l.payload)==null?void 0:u.description),d=[];return l!=null&&l.type&&n&&l.type!==Z.TYPES.MSG_TEXT&&d.push({text:A.t(`TUISearch.${lc[l.type]}`),isHighlight:!1}),d.push(...L0(r,t)),d}else return[{text:`${e==null?void 0:e.messageCount}${A.t("TUISearch.条相关")}${A.t(`TUISearch.${s==="allMessage"?"结果":(c=Dt[s])==null?void 0:c.label}`)}`,isHighlight:!1}];return[]},L0=(e,s)=>{var c;if(!e||!s||!s.length)return[{text:e||"",isHighlight:!1}];const t=[];for(let l=0;l<s.length;l++){const r=(c=s[l])==null?void 0:c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),d=new RegExp(r,"gi");let p;for(;(p=d.exec(e))!==null;){const f=p.index,h=p.index+p[0].length-1;t.push([f,h])}}const n=[t[0]];if(t.length>1){t.sort((l,r)=>l[0]-r[0]);for(let l=1;l<t.length;l++){const r=t[l],d=n[n.length-1];r[0]-1<=d[1]?d[1]=Math.max(d[1],r[1]):n.push(r)}}if(!n[0])return[{text:e,isHighlight:!1}];const a=[];let i=0;for(let l=0;l<n.length;l++){const r=e.substring(i,n[l][0]);r&&a.push({text:r,isHighlight:!1});const d=e.substring(n[l][0],n[l][1]+1);d&&a.push({text:d,isHighlight:!0}),i=n[l][1]+1}const u=e.substring(i);return u&&a.push({text:u,isHighlight:!1}),a},$0=e=>{const s=new Date().setHours(0,0,0,0),t=new Date(new Date().getFullYear(),0,1,0,0,0,0).getTime(),n=new Date(e),a=24*60*60*1e3,i=7*a,u=s-n.getTime();function c(l){return l<10?"0"+l:l.toString()}if(u<=0)return`${c(n.getHours())}:${c(n.getMinutes())}`;if(u<=a)return`${A.t("time.昨天")} ${c(n.getHours())}:${c(n.getMinutes())}`;if(u<=i-a){const r=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][n.getDay()];return`${A.t("time."+r)} ${c(n.getHours())}:${c(n.getMinutes())}`}else return n.getTime()>=t?`${n.getMonth()+1}/${n.getDate()} ${c(n.getHours())}:${c(n.getMinutes())}`:`${n.getFullYear()}/${n.getMonth()+1}/${n.getDate()} ${c(n.getHours())}:${c(n.getMinutes())}`},Dr=e=>{const s=new Date(e*1e3),t=s.getFullYear(),n=("0"+(s.getMonth()+1)).slice(-2),a=("0"+s.getDate()).slice(-2);return`${t}-${n}-${a}`},N0=(e,s)=>{let t=null;return(...a)=>{t!==null&&(clearTimeout(t),t=null),t=setTimeout(()=>e(...a),s)}},G0=["src"],B0={key:2},H0={key:3},F0={key:5},j0=["src"],Y0={key:2,class:"image-container-hover"},z0={class:"image-container-hover-text"},V0=ne({__name:"index",props:{listItem:{default:()=>({})},listItemContent:{default:()=>({})},type:{default:"allMessage"},displayType:{default:"info"},keywordList:{default:()=>[]}},emits:["showResultDetail","navigateToChatPosition"],setup(e,{emit:s}){const t=e,n=s,a=w(Z.TYPES),i=w(""),u=w(""),c=w([]),l=w(""),r=w(!1);et(()=>{var g,_;i.value=P0(t.listItem),u.value=D0(t.listItem,t==null?void 0:t.listItemContent),c.value=O0(t.listItem,t.type,t.keywordList,(t==null?void 0:t.displayType)==="info"),l.value=(g=t.listItem)!=null&&g.time?$0(((_=t.listItem)==null?void 0:_.time)*1e3):""});const d=()=>{var g;t.type==="contact"||t.type==="group"?dc(t.listItem):t.displayType==="info"&&!((g=t.listItem)!=null&&g.ID)?n("showResultDetail",!0,t.type,t.listItem):f()},p=g=>{r.value=g},f=()=>{n("navigateToChatPosition",t.listItem)},h=g=>g!=null&&g.type?A.t(`TUISearch.${lc[g.type]}`):A.t("TUISearch.[合并消息]");return(g,_)=>(v(),b("div",{class:P(["search-result-list-item",!o(F)&&"search-result-list-item-h5","search-result-list-item-"+g.displayType,o(r)&&"hover-"+g.displayType]),onClick:d,onMouseenter:_[0]||(_[0]=m=>p(!0)),onMouseleave:_[1]||(_[1]=m=>p(!1))},[g.displayType==="info"||g.displayType==="bubble"?(v(),b("div",{key:0,class:P([g.displayType])},[T("div",{class:P(g.displayType+"-left")},[T("img",{class:P(g.displayType+"-left-avatar"),src:o(i)||"",onerror:"this.onerror=null;this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,10,G0)],2),T("div",{class:P([g.displayType+"-main"])},[T("div",{class:P([g.displayType+"-main-name"])},D(o(u)),3),T("div",{class:P([g.displayType+"-main-content"])},[g.displayType==="info"||g.listItem.type===o(a).MSG_TEXT?(v(),oe(Wm,{key:0,content:o(c),highlightType:g.displayType==="info"?"font":"background",displayType:g.displayType},null,8,["content","highlightType","displayType"])):g.listItem.type===o(a).MSG_FILE?(v(),oe(Rr,{key:1,contentText:o(c),messageContent:g.listItemContent,displayType:g.displayType},null,8,["contentText","messageContent","displayType"])):g.listItem.type===o(a).MSG_IMAGE?(v(),b("div",B0)):g.listItem.type===o(a).MSG_VIDEO?(v(),b("div",H0)):g.listItem.type===o(a).MSG_CUSTOM?(v(),oe(T0,{key:4,contentText:o(c),message:g.listItem,messageContent:g.listItemContent},null,8,["contentText","message","messageContent"])):(v(),b("div",F0,D(h(g.listItem)),1))],2)],2),T("div",{class:P(g.displayType+"-right")},[T("div",{class:P(g.displayType+"-right-time")},D(o(l)),3),g.displayType==="bubble"&&o(r)?(v(),b("div",{key:0,class:P(g.displayType+"-right-to"),onClick:Oe(f,["stop"])},D(o(A).t("TUISearch.定位到聊天位置")),3)):H("",!0)],2)],2)):g.displayType==="file"?(v(),b("div",{key:1,class:P([g.displayType])},[T("div",{class:P([g.displayType+"-header"])},[T("img",{class:P(g.displayType+"-header-avatar"),src:o(i),onerror:"this.onerror=null;this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,10,j0),T("div",{class:P([g.displayType+"-header-name"])},D(o(u)),3),o(r)?(v(),b("div",{key:0,class:P(g.displayType+"-header-to"),onClick:Oe(f,["stop"])},D(o(A).t("TUISearch.定位到聊天位置")),3)):H("",!0),T("div",{class:P(g.displayType+"-header-time")},D(o(l)),3)],2),T("div",{class:P([g.displayType+"-main-content"])},[K(Rr,{contentText:o(c),messageContent:g.listItemContent,displayType:"bubble"},null,8,["contentText","messageContent"])],2)],2)):g.displayType==="image"?(v(),b("div",{key:2,class:P([g.displayType])},[T("div",{class:"image-container",onClick:Oe(f,["stop"])},[g.listItem.type===o(a).MSG_IMAGE?(v(),oe(k0,{key:0,messageContent:g.listItemContent},null,8,["messageContent"])):g.listItem.type===o(a).MSG_VIDEO?(v(),oe(A0,{key:1,messageContent:g.listItemContent},null,8,["messageContent"])):H("",!0),o(r)?(v(),b("div",Y0,[T("div",z0,D(o(A).t("TUISearch.定位到聊天位置")),1)])):H("",!0)])],2)):H("",!0)],34))}});const co=ae(V0,[["__scopeId","data-v-369777ba"]]),W0="/admin/assets/search-default-0969a8df.svg",K0={class:"search-result-default-main"},Z0={class:"default-text"},q0=ne({__name:"index",setup(e){return(s,t)=>(v(),b("div",{class:P(["search-result-default",!o(F)&&"search-result-default-h5"])},[T("div",K0,[K(pe,{file:o(W0),width:"88px",height:"75px"},null,8,["file"]),T("div",Z0,D(o(A).t("TUISearch.暂无搜索结果")),1)])],2))}});const J0=ae(q0,[["__scopeId","data-v-bedcd79a"]]),X0=ne({__name:"index",props:{width:{type:String,default:"30px"},height:{type:String,default:"30px"},color:{type:String,default:"#D9D9D9"}},setup(e){const s=e;return(t,n)=>(v(),b("div",{class:"tui-loading",style:jt({width:s.width,height:s.height,border:`2px solid ${s.color}`,borderTopColor:"transparent"})},null,4))}});const Q0=ae(X0,[["__scopeId","data-v-2009946b"]]),ey=ne({__name:"index",setup(e){return(s,t)=>(v(),b("div",{class:P(["search-result-loading",!o(F)&&"search-result-loading-h5"])},[K(Q0,{width:"40px",height:"40px"})],2))}});const Pr=ae(ey,[["__scopeId","data-v-3dbb0f84"]]),hc=e=>(nn("data-v-1998e839"),e=e(),an(),e),ty={key:0,class:"tui-search-result-main"},sy={class:"tui-search-result-list"},ny={key:0,class:"header"},ay={class:"list"},oy=["onClick"],iy={class:"more-text"},ry={key:1,class:"tui-search-message-header"},ly={class:"header-content"},cy={class:"header-content-count normal"},uy={class:"header-content-keyword"},dy=hc(()=>T("span",{class:"normal"},'"',-1)),hy={class:"highlight"},py=hc(()=>T("span",{class:"normal"},'"',-1)),fy={class:"header-content-type normal"},gy={key:2,class:"tui-search-message-list"},_y={class:P(["list-group-date"])},vy={class:"more-text"},my=ne({__name:"index",props:{searchType:{type:String,default:"global",validator(e){return["global","conversation"].includes(e)}}},setup(e){var me,ke;const s=e,t=w([]),n=w((me=qs[s.searchType])==null?void 0:me.value),a=w(0),i=w(0),u=w("and"),c=w((ke=qs[s.searchType])==null?void 0:ke.key),l=w({}),r=w([]),d=w(0),p=w(""),f=w(),h=w([]),g=w(),_=w([]),m=w(!1),y=w(!1),I=w(!1),S=re(()=>{var B,$,L;return y.value?!1:s.searchType==="global"?!(!((B=t==null?void 0:t.value)!=null&&B.length)||($=Object==null?void 0:Object.keys(l.value))!=null&&$.length):!((L=h==null?void 0:h.value)!=null&&L.length)});function C(B){s.searchType==="conversation"&&(p.value=B)}function R(B){(B==null?void 0:B.searchType)===(s==null?void 0:s.searchType)&&(t.value=B!=null&&B.value?B.value.trim().split(/\s+/):[])}function k(B){var $,L,Y,Ce;(B==null?void 0:B.searchType)===(s==null?void 0:s.searchType)&&(c.value=(($=B==null?void 0:B.value)==null?void 0:$.key)||((L=qs[s.searchType])==null?void 0:L.key),n.value=((Y=B==null?void 0:B.value)==null?void 0:Y.value)||((Ce=qs[s.searchType])==null?void 0:Ce.value))}function x(B){var $,L,Y,Ce;(B==null?void 0:B.searchType)===(s==null?void 0:s.searchType)&&(a.value=(L=($=B==null?void 0:B.value)==null?void 0:$.value)==null?void 0:L.timePosition,i.value=(Ce=(Y=B==null?void 0:B.value)==null?void 0:Y.value)==null?void 0:Ce.timePeriod)}Ne(()=>{j.watch(V.CONV,{currentConversationID:C}),j.watch(V.SEARCH,{currentSearchInputValue:R,currentSearchMessageType:k,currentSearchMessageTime:x})}),at(()=>{j.unwatch(V.CONV,{currentConversationID:C}),j.unwatch(V.SEARCH,{currentSearchInputValue:R,currentSearchMessageType:k,currentSearchMessageTime:x})});const M=B=>{var $;R0({keywordList:($=t==null?void 0:t.value)!=null&&$.length?t.value:void 0,messageTypeList:typeof n.value=="string"?[n.value]:n.value,timePosition:a.value,timePeriod:i.value,conversationID:(B==null?void 0:B.conversationID)||void 0,cursor:(B==null?void 0:B.cursor)||void 0,keywordListMatchType:u.value}).then(L=>{var Y,Ce,Ae,Le,We,qe,It,z,q,he;if(As("searchCloudMessage"),B!=null&&B.conversationID)f.value=L==null?void 0:L.data,B!=null&&B.cursor?h.value=[...h.value,...(It=(qe=L==null?void 0:L.data)==null?void 0:qe.searchResultList[0])==null?void 0:It.messageList]:h.value=(q=(z=L==null?void 0:L.data)==null?void 0:z.searchResultList[0])==null?void 0:q.messageList,g.value=(he=L==null?void 0:L.data)==null?void 0:he.totalCount,(s==null?void 0:s.searchType)==="conversation"&&(c.value==="fileMessage"||c.value==="imageMessage")?_.value=le(h.value):_.value=[];else{B!=null&&B.cursor?r.value=[...r.value,...L.data.searchResultList]:r.value=(Y=L==null?void 0:L.data)==null?void 0:Y.searchResultList,d.value=(Ce=L==null?void 0:L.data)==null?void 0:Ce.totalCount;const ye=c.value==="all"?"allMessage":c.value;(Ae=r==null?void 0:r.value)!=null&&Ae.length&&c.value!=="contact"&&c.value!=="group"?l.value=Object.assign({},l.value,{[ye]:{key:ye,label:Dt[ye].label,list:c.value==="all"?(Le=r==null?void 0:r.value)==null?void 0:Le.slice(0,3):r==null?void 0:r.value,cursor:((We=L==null?void 0:L.data)==null?void 0:We.cursor)||null}}):l==null||delete l.value[ye]}y.value=!1,I.value=!1})},G=N0(M,500),E=()=>{l.value={},f.value={},h.value=[],_.value=[]};Ze(()=>[t.value,c.value,a.value,i.value],(B,$)=>{var L,Y,Ce;if(B!==$){if(!((L=t==null?void 0:t.value)!=null&&L.length)&&(s==null?void 0:s.searchType)==="global"){E();return}if(y.value=!0,s.searchType==="conversation")E(),M({conversationID:p.value});else{if($&&$[1]==="all"&&B&&B[1]==="allMessage"){(Y=l==null?void 0:l.value.allMessage)!=null&&Y.list&&(l.value.allMessage.list=r==null?void 0:r.value),(Ce=Object==null?void 0:Object.keys(l==null?void 0:l.value))==null||Ce.forEach(Ae=>{Ae!=="allMessage"&&(l==null||delete l.value[Ae])}),y.value=!1;return}else m.value=!1,E();G()}}},{immediate:!0});const O=B=>{c.value==="all"?j.update(V.SEARCH,"currentSearchMessageType",{value:Dt[B.key],searchType:s.searchType}):M({cursor:(B==null?void 0:B.cursor)||void 0})},U=()=>{var B;M({cursor:(B=f==null?void 0:f.value)==null?void 0:B.cursor,conversationID:p==null?void 0:p.value})},N=(B,$,L)=>{var Y;m.value=B,$&&j.update(V.SEARCH,"currentSearchMessageType",{value:Dt[$],searchType:s.searchType}),p.value=((Y=L==null?void 0:L.conversation)==null?void 0:Y.conversationID)||"",g.value=L==null?void 0:L.messageCount,L&&(I.value=!0,G({conversationID:p.value}))},W=B=>{var $;return p.value===(($=B==null?void 0:B.conversation)==null?void 0:$.conversationID)?["list-item","list-item-selected"]:["list-item"]},J=()=>s.searchType==="conversation"&&c.value==="fileMessage"?"file":s.searchType==="conversation"&&c.value==="imageMessage"?"image":F?"bubble":"info",le=B=>{var Ce,Ae,Le,We;const $=[];if(B!=null&&B.length){if((B==null?void 0:B.length)===1)return $.push({date:Dr((Ce=B[0])==null?void 0:Ce.time),list:B}),$}else return $;let L="",Y="";for(let qe=0;qe<(B==null?void 0:B.length);qe++)Y=Dr((Ae=B[qe])==null?void 0:Ae.time),L!==Y?$.push({date:Y,list:[B[qe]]}):(We=(Le=$[($==null?void 0:$.length)-1])==null?void 0:Le.list)==null||We.push(B[qe]),L=Y;return $},ce=B=>{var $;s.searchType==="global"?(j.update(V.SEARCH,"currentSearchingStatus",{isSearching:!1,searchType:s.searchType}),Yt.switchConversation(B==null?void 0:B.conversationID).then(()=>{var L;j.update(V.CHAT,"messageSource",B),ie&&((L=fe)==null||L.navigateTo({url:"/TUIKit/components/TUIChat/index"}))})):s.searchType==="conversation"&&(j.update(V.SEARCH,"isShowInConversationSearch",!1),j.update(V.CHAT,"messageSource",B),ie&&(($=fe)==null||$.navigateBack()))},ue=B=>`${c}-${B}`;return(B,$)=>o(y)?(v(),oe(Pr,{key:0,class:P(["search-result-loading",!o(F)&&"search-result-loading-h5"])},null,8,["class"])):o(S)?(v(),oe(J0,{key:1,class:P(["search-result-default",!o(F)&&"search-result-default-h5"])},null,8,["class"])):(v(),b("div",{key:2,class:P(["tui-search-result",!o(F)&&"tui-search-result-h5",o(F)&&o(m)&&"tui-search-result-with-border"])},[s.searchType!=="conversation"&&(o(F)||!o(m))?(v(),b("div",ty,[T("div",sy,[(v(!0),b(ve,null,Te(o(l),L=>(v(),b("div",{key:L.key,class:"tui-search-result-list-item"},[s.searchType==="global"?(v(),b("div",ny,D(o(A).t(`TUISearch.${L.label}`)),1)):H("",!0),T("div",ay,[(v(!0),b(ve,null,Te(L.list,Y=>(v(),b("div",{key:Y.conversation.conversationID,class:P([W(Y)])},[L.key==="contact"||L.key==="group"||Y.conversation?(v(),oe(co,{key:0,listItem:Y,type:L.key,displayType:"info",keywordList:o(t),onShowResultDetail:N,onNavigateToChatPosition:ce},null,8,["listItem","type","keywordList"])):H("",!0)],2))),128))]),o(c)==="all"||L.cursor?(v(),b("div",{key:1,class:"more",onClick:Y=>O(L)},[K(pe,{class:"more-icon",file:o(Go),width:"12px",height:"12px"},null,8,["file"]),T("div",iy,[T("span",null,D(o(A).t("TUISearch.查看更多")),1),T("span",null,D(o(A).t(`TUISearch.${L.label}`)),1)])],8,oy)):H("",!0)]))),128))])])):H("",!0),o(m)||s.searchType==="conversation"?(v(),b("div",{key:1,class:P(["tui-search-result-detail",s.searchType==="conversation"&&"tui-search-result-in-conversation"])},[o(I)?(v(),oe(Pr,{key:0,class:P(["search-result-loading",!o(F)&&"search-result-loading-h5"])},null,8,["class"])):H("",!0),!o(I)&&o(m)&&s.searchType!=="conversation"?(v(),b("div",ry,[T("div",ly,[T("div",cy,[T("span",null,D(o(g)),1),T("span",null,D(o(A).t("TUISearch.条与")),1)]),T("div",uy,[(v(!0),b(ve,null,Te(o(t),(L,Y)=>(v(),b("span",{key:Y},[dy,T("span",hy,D(L),1),py]))),128))]),T("div",fy,[T("span",null,D(o(A).t("TUISearch.相关的")),1),T("span",null,D(o(A).t(`TUISearch.${o(c)==="allMessage"?"结果":o(Dt)[o(c)].label}`)),1)])]),T("div",{class:"header-enter",onClick:$[0]||($[0]=L=>o(dc)({conversationID:o(p)}))},[T("span",null,D(o(A).t("TUISearch.进入聊天")),1),K(pe,{class:"enter-icon",file:o(Js),width:"14px",height:"14px"},null,8,["file"])])])):H("",!0),!o(I)&&o(h)&&o(h)[0]?(v(),b("div",gy,[s.searchType==="global"||o(c)!=="imageMessage"&&o(c)!=="fileMessage"?(v(!0),b(ve,{key:0},Te(o(h),L=>(v(),b("div",{key:ue(L.ID),class:P(["list-item"])},[K(co,{listItem:L,listItemContent:L.getMessageContent(),type:o(c),displayType:J(),keywordList:o(t),onShowResultDetail:N,onNavigateToChatPosition:ce},null,8,["listItem","listItemContent","type","displayType","keywordList"])]))),128)):(v(!0),b(ve,{key:1},Te(o(_),L=>(v(),b("div",{key:ue(L.date),class:P(["list-group",o(c)==="fileMessage"?"list-group-file":"list-group-image"])},[T("div",_y,D(L.date),1),(v(!0),b(ve,null,Te(L.list,Y=>(v(),b("div",{key:ue(Y.ID),class:P(["list-group-item"])},[K(co,{listItem:Y,listItemContent:Y.getMessageContent(),type:o(c),displayType:J(),keywordList:o(t),onShowResultDetail:N,onNavigateToChatPosition:ce},null,8,["listItem","listItemContent","type","displayType","keywordList"])]))),128))],2))),128)),o(f)&&o(f).cursor?(v(),b("div",{key:2,class:"more",onClick:U},[K(pe,{class:"more-icon",file:o(Go),width:"12px",height:"12px"},null,8,["file"]),T("div",vy,D(o(A).t("TUISearch.查看更多历史记录")),1)])):H("",!0)])):H("",!0)],2)):H("",!0)],2))}});const Or=ae(my,[["__scopeId","data-v-1998e839"]]),yy="/admin/assets/search-more-7ecab7ad.svg",Iy={key:0,class:"tui-search-more-list"},by=["onClick"],Ty={class:"list-item-title"},Cy=ne({__name:"index",props:{searchType:{type:String,default:"global",validator(e){return["global","conversation"].includes(e)}}},setup(e){const s=e,t=w(),n=w(!1),a=()=>{n.value=!n.value,!ie&&n.value&&Vn.listen({domRefs:t.value,handler:c})},i=w([]),u=l=>{var d;const{listener:r={onClicked:()=>{}}}=l;(d=r==null?void 0:r.onClicked)==null||d.call(r,l),a()},c=()=>{n.value=!1};return Ne(()=>{i.value=[...ze.getExtensionList(_e.TUISearch.EXTENSION.SEARCH_MORE.EXT_ID)],ze.callService({serviceName:_e.TUIConversation.SERVICE.NAME,method:_e.TUIConversation.SERVICE.METHOD.HIDE_CONVERSATION_HEADER,params:{}})}),Ze(()=>n.value,()=>{n.value&&j.update(V.SEARCH,"currentSearchingStatus",{isSearching:!1,searchType:s.searchType})}),(l,r)=>(v(),b("div",{ref_key:"searchMoreRef",ref:t,class:P(["tui-search-more",!o(F)&&"tui-search-more-h5"])},[T("div",{class:"more",onClick:r[0]||(r[0]=d=>a())},[K(pe,{class:"more-icon",file:o(yy),width:o(F)?"28px":"34px",height:o(F)?"28px":"34px"},null,8,["file","width","height"])]),o(n)?(v(),b("ul",Iy,[(v(!0),b(ve,null,Te(o(i),(d,p)=>(v(),b("li",{key:p,class:"list-item",onClick:f=>u(d)},[d.icon?(v(),oe(pe,{key:0,class:"list-item-icon",file:d.icon},null,8,["file"])):H("",!0),T("div",Ty,D(d.text),1)],8,by))),128))])):H("",!0)],2))}});const Sy=ae(Cy,[["__scopeId","data-v-52d047f7"]]),wy=ne({__name:"index",props:{searchType:{default:()=>ie?"conversation":"global"}},setup(e){const s=e,t=w(),n=w(""),a=w(!1),i=w(ie),u=re(()=>!F&&(s.searchType==="global"&&a.value||s.searchType==="conversation"&&i.value)),c=h=>{j.update(V.SEARCH,"currentSearchInputValue",{value:"",searchType:h}),j.update(V.SEARCH,"currentSearchMessageType",{value:qs[h],searchType:h}),j.update(V.SEARCH,"currentSearchMessageTime",{value:Rn,searchType:h})};function l(h){!ie&&n.value!==h&&f(),n.value=h}function r(h){var g,_,m,y;(h==null?void 0:h.searchType)===s.searchType&&(a.value=h==null?void 0:h.isSearching,(h==null?void 0:h.searchType)==="global"&&t.value&&F&&h.isSearching&&Vn.listen({domRefs:t.value,handler:p}),(h==null?void 0:h.searchType)==="global"&&ie&&(h.isSearching?(_=(g=fe)==null?void 0:g.hideTabBar())==null||_.catch(()=>{}):(y=(m=fe)==null?void 0:m.showTabBar())==null||y.catch(()=>{})))}function d(h){i.value=!!h,i.value&&c(s.searchType)}Ne(()=>{["global","conversation"].forEach(h=>{c(h)}),j.watch(V.CONV,{currentConversationID:l}),j.watch(V.SEARCH,{currentSearchingStatus:r,isShowInConversationSearch:d})}),at(()=>{j.unwatch(V.CONV,{currentConversationID:l}),j.unwatch(V.SEARCH,{currentSearchingStatus:r,isShowInConversationSearch:d})});function p(){j.update(V.SEARCH,"currentSearchingStatus",{isSearching:!1,searchType:s.searchType})}function f(){j.update(V.SEARCH,"isShowInConversationSearch",!1)}return(h,g)=>h.searchType==="global"||(h.searchType==="conversation"||!h.searchType&&o(ie))&&o(i)?(v(),b("div",{key:0,class:P(["tui-search",!o(F)&&"tui-search-h5",`tui-search-main-${h.searchType?h.searchType:"conversation"}`,o(u)&&"tui-search-h5-full-screen"])},[h.searchType==="global"?(v(),b("div",{key:0,ref_key:"globalSearchRef",ref:t,class:P(["tui-search-global",!o(F)&&"tui-search-h5-global"])},[T("div",{class:P(["tui-search-global-header",!o(F)&&"tui-search-h5-global-header"])},[K(xr,{class:"search-input",searchType:h.searchType},null,8,["searchType"]),o(F)||!o(a)?(v(),oe(Sy,{key:0,class:"search-more",searchType:h.searchType},null,8,["searchType"])):H("",!0)],2),o(a)?(v(),oe(Ar,{key:0,class:"search-container",popupPosition:"bottom",searchType:h.searchType},{result:Pe(()=>[K(Or,{class:"search-result",searchType:h.searchType},null,8,["searchType"])]),_:1},8,["searchType"])):H("",!0)],2)):h.searchType==="conversation"&&o(i)||o(ie)?(v(),b("div",{key:1,class:P(["tui-search-conversation",!o(F)&&"tui-search-h5-conversation"])},[K(Ar,{class:"search-container",popupPosition:"aside",searchType:h.searchType?h.searchType:"conversation",onCloseInConversationSearch:f},{input:Pe(()=>[K(xr,{searchType:h.searchType?h.searchType:"conversation"},null,8,["searchType"])]),result:Pe(()=>[K(Or,{class:"search-result",searchType:h.searchType?h.searchType:"conversation"},null,8,["searchType"])]),_:1},8,["searchType"])],2)):H("",!0)],2)):H("",!0)}});const ca=ae(wy,[["__scopeId","data-v-ec4b40a3"]]);class ky{constructor(){ze.registerService(_e.TUISearch.SERVICE.NAME,this),ze.registerExtension(_e.TUIChat.EXTENSION.INPUT_MORE.EXT_ID,this)}onCall(s,t){switch(s){case _e.TUISearch.SERVICE.METHOD.SEARCH_GROUP:return this.searchGroup(t==null?void 0:t.groupID);case _e.TUISearch.SERVICE.METHOD.SEARCH_USER:return this.searchUser(t==null?void 0:t.userID);case _e.TUISearch.SERVICE.METHOD.SEARCH_FRIEND:return this.searchFriend(t==null?void 0:t.userID);case _e.TUISearch.SERVICE.METHOD.SEARCH_GROUP_MEMBER:return this.searchGroupMember(t==null?void 0:t.groupID,t==null?void 0:t.userID)}}onGetExtension(s){if(s===_e.TUIChat.EXTENSION.INPUT_MORE.EXT_ID){const t=[],n={weight:3e3,text:"搜索",icon:"https://web.sdk.qcloud.com/component/TUIKit/assets/message-search.svg",data:{name:"search"},listener:{onClicked:()=>{var a;j.update(V.SEARCH,"isShowInConversationSearch",!0),ie&&((a=fe)==null||a.navigateTo({url:"/TUIKit/components/TUISearch/index"}))}}};return t.push(n),t}}async searchFriend(s){return zt.getFriendProfile({userIDList:[s]})}async searchUser(s){return on.getUserProfile({userIDList:[s]})}async searchGroup(s){return Je.searchGroupByID(s)}async searchGroupMember(s,t){return Je.getGroupMemberProfile({groupID:s,userIDList:[t]})}}new ky;const pc=ne({__name:"index",props:{isRadio:{type:Boolean,default:!1},isNeedSearch:{type:Boolean,default:!1},title:{type:String,default:""},userList:{type:Array,default:()=>[]},total:{type:Number,default:0}},emits:["complete","search","getMore"],setup(e,{emit:s}){const t=s,n=e,a=()=>{t("complete",[])},i=l=>{t("complete",l)},u=l=>{t("search",l)},c=()=>{t("getMore")};return(l,r)=>(v(),oe(wn,{show:!0,isH5:!o(F),isHeaderShow:!1,isFooterShow:!1,background:!1,"onUpdate:show":a},{default:Pe(()=>[K(Aa,{isSearch:n.isNeedSearch,title:n.title,list:n.userList,isH5:!o(F),isRadio:n.isRadio,total:n.total,onGetMore:c,onSearch:u,onSubmit:i,onCancel:a},null,8,["isSearch","title","list","isH5","isRadio","total"])]),_:1},8,["isH5"]))}}),Ys=class Ys{constructor(){Ue(this,"onCallParamsMap");Ue(this,"onCallCallbackMap");Ue(this,"constants");ze.registerService(_e.TUIContact.SERVICE.NAME,this),this.onCallParamsMap=new Map,this.onCallCallbackMap=new Map,this.constants=_e}static getInstance(){return Ys.instance||(Ys.instance=new Ys),Ys.instance}getOnCallParams(s){return this.onCallParamsMap.get(s)}getOnCallCallback(s){return this.onCallCallbackMap.get(s)}async onCall(s,t,n){var a;this.onCallParamsMap.set(s,t),this.onCallCallbackMap.set(s,n),s===_e.TUIContact.SERVICE.METHOD.SELECT_FRIEND&&(j.update(V.CUSTOM,"isShowSelectFriendComponent",!0),ie&&((a=fe)==null||a.reLaunch({url:"/TUIKit/components/TUIContact/index"})))}};Ue(Ys,"instance");let wa=Ys;const Ey=ne({__name:"index",setup(e){const s=wa.getInstance(),t=s.constants,n=w(!1),a=w([]),i=w([]),u=w(null),c=w({isRadio:!1,isNeedSearch:!1,title:""}),l=f=>{u.value=ze.getService(t.TUISearch.SERVICE.NAME),u.value?n.value=f:console.warn("请添加 TUISearch 组件")};et(()=>{const f=s.getOnCallParams(t.TUIContact.SERVICE.METHOD.SELECT_FRIEND);c.value.title=f.title,c.value.isRadio=f.isRadio,c.value.isNeedSearch=f.isNeedSearch,f.isNeedSearch&&l(f.isNeedSearch),zt.getFriendList().then(h=>{a.value=h.data.map(g=>g.profile),i.value=a.value}).catch(h=>{console.warn("getFriendList error:",h)})});const r=f=>{j.update(V.CUSTOM,"isShowSelectFriendComponent",!1);const h=s.getOnCallCallback(t.TUIContact.SERVICE.METHOD.SELECT_FRIEND);h&&h(f)},d=()=>{Se({message:A.t("TUIGroup.该用户不存在"),type:we.ERROR}),i.value=[...a.value]},p=async f=>{if(!f)return i.value=a.value;try{const h=await u.value.searchUser(f);if(!h.data[0])return d();i.value=h.data;const g=a.value.filter(_=>_.userID===h.data[0].userID);a.value=g.length?a.value:[...a.value,...i.value]}catch{return d()}};return(f,h)=>(v(),oe(pc,{isRadio:o(c).isRadio,isNeedSearch:o(c).isNeedSearch,title:o(c).title,userList:o(i),onSearch:p,onComplete:r},null,8,["isRadio","isNeedSearch","title","userList"]))}}),My="/admin/assets/add-ea3b9dc9.svg",xy=["placeholder"],Uy=ne({__name:"index",setup(e){const s=A.t("TUIContact.输入ID"),t=w(!1),n=w(""),a=w({user:{label:"联系人",list:[]},group:{label:"群聊",list:[]}}),i=tl.debounce(function(c){t.value=c},200),u=async()=>{n.value&&(ze.callService({serviceName:_e.TUISearch.SERVICE.NAME,method:_e.TUISearch.SERVICE.METHOD.SEARCH_USER,params:{userID:n.value}}).then(c=>{a.value.user.list=c.data}).catch(c=>{a.value.user.list=[],console.warn("search user error",c)}),ze.callService({serviceName:_e.TUISearch.SERVICE.NAME,method:_e.TUISearch.SERVICE.METHOD.SEARCH_GROUP,params:{groupID:n.value}}).then(c=>{a.value.group.list=[c.data.group]}).catch(c=>{a.value.group.list=[],console.warn("search group error",c)}))};return Ze(()=>a.value,()=>{j.update(V.CUSTOM,"currentContactSearchResult",a.value)},{deep:!0,immediate:!0}),Ze(()=>t.value,()=>{j.update(V.CUSTOM,"currentContactSearchingStatus",t.value),t.value&&(n.value="",a.value.user.list=[],a.value.group.list=[])},{deep:!0,immediate:!0}),fe.updateContactSearch=u,fe.closeSearching=()=>{t.value=!1},(c,l)=>(v(),b("div",{class:P(["tui-contact-search",!o(F)&&"tui-contact-search-h5"])},[!o(t)||!o(F)?(v(),b("div",{key:0,class:P(["tui-contact-search-header",!o(F)&&"tui-contact-search-h5-header",o(t)&&"tui-contact-searching-h5-header"]),onClick:l[1]||(l[1]=r=>o(i)(!0))},[T("div",{class:P(["tui-contact-search-header-icon",!o(F)&&"tui-contact-search-h5-header-icon"]),onClick:l[0]||(l[0]=Oe(r=>o(i)(!o(t)),["stop"]))},[K(pe,{file:o(t)?o(rn):o(My),width:o(t)?"20px":"14px",height:o(t)?"20px":"14px"},null,8,["file","width","height"])],2),T("div",{class:P(["tui-contact-search-header-title",!o(F)&&"tui-contact-search-h5-header-title"])},D(o(A).t("TUIContact.添加好友/群聊")),3)],2)):H("",!0),o(t)?(v(),b("div",{key:1,class:P(["tui-contact-search-main",!o(F)&&"tui-contact-search-h5-main"])},[ut(T("input",{"onUpdate:modelValue":l[2]||(l[2]=r=>Bt(n)?n.value=r:null),class:"tui-contact-search-main-input",type:"text",placeholder:o(s),enterkeyhint:"search",onKeyup:sn(u,["enter"]),onBlur:u,onConfirm:u},null,40,xy),[[Ot,o(n)]]),T("div",{class:"tui-contact-search-main-cancel",onClick:l[3]||(l[3]=r=>t.value=!1)},D(o(A).t("取消")),1)],2)):H("",!0)],2))}});const Ay=ae(Uy,[["__scopeId","data-v-a11dce3e"]]),fc=e=>{var s;return(e==null?void 0:e.avatar)||((s=e==null?void 0:e.profile)==null?void 0:s.avatar)||(e==null?void 0:e.groupID)&&"https://web.sdk.qcloud.com/im/assets/images/Public.svg"||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png"},Ry=e=>{var s;return(e==null?void 0:e.remark)||(e==null?void 0:e.name)||((s=e==null?void 0:e.profile)==null?void 0:s.nick)||(e==null?void 0:e.nick)||(e==null?void 0:e.groupID)||(e==null?void 0:e.userID)||""},Dy=e=>{var s;return(e==null?void 0:e.name)||((s=e==null?void 0:e.profile)==null?void 0:s.nick)||(e==null?void 0:e.nick)||(e==null?void 0:e.groupID)||(e==null?void 0:e.userID)||""},Py=e=>{var t;const s=[{label:e!=null&&e.groupID?"群ID":"ID",data:(e==null?void 0:e.groupID)||(e==null?void 0:e.userID)||""}];return gc(e)||s.push({label:e!=null&&e.groupID?"群类型":"个性签名",data:(e==null?void 0:e.type)||((t=e==null?void 0:e.profile)==null?void 0:t.selfSignature)||""}),s},gc=e=>{var s,t,n,a;return(e==null?void 0:e.type)===((t=(s=Z)==null?void 0:s.TYPES)==null?void 0:t.SNS_APPLICATION_SENT_TO_ME)||(e==null?void 0:e.type)===((a=(n=Z)==null?void 0:n.TYPES)==null?void 0:a.SNS_APPLICATION_SENT_BY_ME)},Oy=e=>new Promise((s,t)=>{if(e!=null&&e.groupID||!(e!=null&&e.userID)){s(!1);return}if(e!=null&&e.addTime){s(!0);return}zt.checkFriend({userIDList:[e==null?void 0:e.userID],type:Z.TYPES.SNS_CHECK_TYPE_BOTH}).then(n=>{var a,i;switch((i=(a=n==null?void 0:n.data)==null?void 0:a.successUserIDList[0])==null?void 0:i.relation){case Z.TYPES.SNS_TYPE_NO_RELATION:s(!1);break;case Z.TYPES.SNS_TYPE_A_WITH_B:s(!1);break;case Z.TYPES.SNS_TYPE_B_WITH_A:s(!1);break;case Z.TYPES.SNS_TYPE_BOTH_WAY:s(!0);break;default:s(!1);break}}).catch(n=>{console.warn("checkFriend error",n),t(n)})}),Ly=(e,s)=>{var t;if(((t=s==null?void 0:s.replace(/[^\u0000-\u00ff]/g,"aa"))==null?void 0:t.length)>96){Se({message:A.t("TUIContact.修改备注失败: 备注长度不得超过 96 字节"),type:we.ERROR});return}zt.updateFriend({userID:e,remark:s}).then(()=>{Se({message:A.t("TUIContact.修改备注成功"),type:we.SUCCESS})}).catch(n=>{console.warn("update friend remark failed:",n),Se({message:A.t("TUIContact.修改备注失败"),type:we.ERROR})})},$y=e=>{zt.deleteFriend({userIDList:[e],type:Z.TYPES.SNS_DELETE_TYPE_BOTH}).then(s=>{const{successUserIDList:t}=s.data;t[0].userID===e?Se({message:A.t("TUIContact.删除好友成功"),type:we.SUCCESS}):Se({message:A.t("TUIContact.删除好友失败"),type:we.ERROR})}).catch(s=>{console.warn("delete friend failed:",s),Se({message:A.t("TUIContact.删除好友失败"),type:we.ERROR})})},Ny=e=>{zt.addFriend(e).then(()=>{Se({message:A.t("TUIContact.申请已发送"),type:we.SUCCESS})}).catch(s=>{console.warn("delete friend failed:",s),Se({message:A.t("TUIContact.申请发送失败"),type:we.ERROR})})},Lr=e=>{const s=e!=null&&e.groupID?`GROUP${e==null?void 0:e.groupID}`:`C2C${e==null?void 0:e.userID}`;Yt.switchConversation(s).catch(t=>{console.warn("switch conversation failed:",t),Se({message:A.t("TUIContact.进入会话失败"),type:we.ERROR})})},_c=e=>{zt.acceptFriendApplication({userID:e,type:Z.TYPES.SNS_APPLICATION_AGREE_AND_ADD}).then(()=>{Se({message:A.t("TUIContact.添加好友成功"),type:we.SUCCESS})}).catch(s=>{console.warn("accept friend application failed:",s),Se({message:A.t("TUIContact.同意好友申请失败"),type:we.ERROR})})},Gy=e=>{zt.refuseFriendApplication(e).then(()=>{Se({message:A.t("TUIContact.拒绝成功"),type:we.SUCCESS})}).catch(s=>{console.warn("accept friend application failed:",s),Se({message:A.t("TUIContact.拒绝好友申请失败"),type:we.ERROR})})},By=e=>{Je.dismissGroup(e).then(()=>{var s,t;Se({message:A.t("TUIContact.解散群聊成功"),type:we.SUCCESS}),(s=fe)!=null&&s.updateContactSearch&&((t=fe)==null||t.updateContactSearch())}).catch(s=>{console.warn("dismiss group failed:",s),Se({message:A.t("TUIContact.解散群聊失败"),type:we.ERROR})})},Hy=e=>{Je.quitGroup(e).then(()=>{Se({message:A.t("TUIContact.退出群组成功"),type:we.SUCCESS})}).catch(s=>{console.warn("quit group failed:",s),Se({message:A.t("TUIContact.退出群组失败"),type:we.ERROR})})},$r=(e,s)=>{Je.joinGroup({groupID:e,applyMessage:s}).then(t=>{var n;switch((n=t==null?void 0:t.data)==null?void 0:n.status){case Z.TYPES.JOIN_STATUS_WAIT_APPROVAL:Se({message:A.t("TUIContact.等待管理员同意"),type:we.SUCCESS});break;case Z.TYPES.JOIN_STATUS_SUCCESS:Se({message:A.t("TUIContact.加群成功"),type:we.SUCCESS});break;case Z.TYPES.JOIN_STATUS_ALREADY_IN_GROUP:Se({message:A.t("TUIContact.您已是群成员"),type:we.SUCCESS});break}}).catch(t=>{console.warn("join group failed:",t),Se({message:"申请入群失败",type:we.ERROR})})},Fy=(e,s)=>{on.addToBlacklist({userIDList:[e]}).then(()=>{s&&s()}).catch(t=>{console.warn("add to blacklist failed:",t),Se({message:A.t("TUIContact.加入黑名单失败"),type:we.ERROR})})},jy=(e,s)=>{on.removeFromBlacklist({userIDList:[e]}).then(()=>{s&&s()}).catch(t=>{console.warn("remove from blacklist failed:",t),Se({message:A.t("TUIContact.移除黑名单失败"),type:we.ERROR})})},Yy={class:"tui-contact-list-card-left"},zy={class:"tui-contact-list-card-main"},Vy={class:"tui-contact-list-card-main-name"},Wy={key:0,class:"tui-contact-list-card-main-other"},Ky={class:"tui-contact-list-card-right"},Zy={key:0,class:"tui-contact-list-card-right-group-type"},qy={key:1,class:"tui-contact-list-card-right-application"},Jy={key:0,class:"tui-contact-list-card-right-application-text"},Xy=ne({__name:"index",props:{item:{default:()=>({})},displayOnlineStatus:{type:Boolean,default:!1}},setup(e){const s=e,t=Mc("userOnlineStatusMap"),n=w(!1),a={[Z.TYPES.GRP_WORK]:"Work",[Z.TYPES.GRP_AVCHATROOM]:"AVChatRoom",[Z.TYPES.GRP_PUBLIC]:"Public",[Z.TYPES.GRP_MEETING]:"Meeting",[Z.TYPES.GRP_COMMUNITY]:"Community"},i=re(()=>{var d,p,f,h,g,_,m,y,I;let r="";return((d=s.item)==null?void 0:d.type)===((f=(p=Z)==null?void 0:p.TYPES)==null?void 0:f.SNS_APPLICATION_SENT_TO_ME)||((h=s.item)==null?void 0:h.type)===((_=(g=Z)==null?void 0:g.TYPES)==null?void 0:_.SNS_APPLICATION_SENT_BY_ME)?r=((m=s.item)==null?void 0:m.wording)||"":(y=s.item)!=null&&y.groupID&&(r=`ID:${(I=s.item)==null?void 0:I.groupID}`),r}),u=re(()=>{var d,p;let r="";return(d=s.item)!=null&&d.groupID&&(r=a[(p=s.item)==null?void 0:p.type]),r}),c=re(()=>{var r,d,p,f,h,g;return((r=s.item)==null?void 0:r.type)===((p=(d=Z)==null?void 0:d.TYPES)==null?void 0:p.SNS_APPLICATION_SENT_BY_ME)?{style:"text",label:"等待验证"}:((f=s.item)==null?void 0:f.type)===((g=(h=Z)==null?void 0:h.TYPES)==null?void 0:g.SNS_APPLICATION_SENT_TO_ME)?{style:"button",label:"同意",onClick:()=>{var _;_c((_=s.item)==null?void 0:_.userID)}}:!1});Ze(()=>t==null?void 0:t.value,()=>{n.value=l()},{immediate:!0,deep:!0});function l(){var r,d,p;return!!(s.displayOnlineStatus&&(t!=null&&t.value)&&((r=s.item)!=null&&r.userID)&&((p=(d=t.value)==null?void 0:d[s.item.userID])==null?void 0:p.statusType)===Z.TYPES.USER_STATUS_ONLINE)}return(r,d)=>(v(),b("div",{class:P(["tui-contact-list-card",!o(F)&&"tui-contact-list-card-h5"])},[T("div",Yy,[K(gs,{class:"tui-contact-list-card-left-avatar",useSkeletonAnimation:"",url:o(fc)(s.item)},null,8,["url"]),s.displayOnlineStatus&&s.item?(v(),b("div",{key:0,class:P({"online-status":!0,"online-status-online":o(n),"online-status-offline":!o(n)})},null,2)):H("",!0)]),T("div",zy,[T("div",Vy,D(o(Ry)(s.item)),1),o(i)?(v(),b("div",Wy,D(o(i)),1)):H("",!0)]),T("div",Ky,[o(u)?(v(),b("div",Zy,D(o(u)),1)):H("",!0),o(c)?(v(),b("div",qy,[o(c).style==="text"?(v(),b("div",Jy,D(o(A).t(`TUIContact.${o(c).label}`)),1)):o(c).style==="button"?(v(),b("button",{key:1,class:"tui-contact-list-card-right-application-button",onClick:d[0]||(d[0]=Oe((...p)=>o(c).onClick&&o(c).onClick(...p),["stop"]))},D(o(A).t(`TUIContact.${o(c).label}`)),1)):H("",!0)])):H("",!0)])],2))}});const Nr=ae(Xy,[["__scopeId","data-v-8e7f4ad8"]]),Qy=["onClick"],e2={class:"tui-contact-list-item-header-left"},t2={class:"tui-contact-list-item-header-right"},s2={key:0,class:"tui-contact-list-item-header-right-unread"},n2=["onClick"],a2={key:1,class:"tui-contact-list"},o2={key:0,class:"tui-contact-search-list"},i2={class:"tui-contact-search-list-title"},r2=["onClick"],l2={key:0,class:"tui-contact-search-list-default"},c2=ne({__name:"index",setup(e){const s=w(""),t=w({}),n=w({friendApplicationList:{key:"friendApplicationList",title:"新的联系人",list:[],unreadCount:0},blackList:{key:"blackList",title:"黑名单",list:[]},groupList:{key:"groupList",title:"我的群聊",list:[]},friendList:{key:"friendList",title:"我的好友",list:[]}}),a=w(!1),i=w(),u=w(!1),c=w(),l=re(()=>{var E,O,U,N;return!((O=(E=i==null?void 0:i.value)==null?void 0:E.user)!=null&&O.list[0])&&!((N=(U=i==null?void 0:i.value)==null?void 0:U.group)!=null&&N.list[0])});Ne(()=>{j.watch(V.APP,{enabledCustomerServicePlugin:h}),j.watch(V.GRP,{groupList:g}),j.watch(V.USER,{userBlacklist:_,displayOnlineStatus:p,userStatusList:f}),j.watch(V.FRIEND,{friendList:y,friendApplicationList:I,friendApplicationUnreadCount:m}),j.watch(V.CUSTOM,{currentContactSearchingStatus:x,currentContactSearchResult:k,currentContactListKey:G,currentContactInfo:M})}),at(()=>{j.unwatch(V.APP,{enabledCustomerServicePlugin:h}),j.unwatch(V.GRP,{groupList:g}),j.unwatch(V.USER,{userBlacklist:_,displayOnlineStatus:p,userStatusList:f}),j.unwatch(V.FRIEND,{friendList:y,friendApplicationList:I,friendApplicationUnreadCount:m}),j.unwatch(V.CUSTOM,{currentContactSearchingStatus:x,currentContactSearchResult:k,currentContactListKey:G,currentContactInfo:M})});function r(E){s.value===E?(s.value="",t.value={},j.update(V.CUSTOM,"currentContactListKey",""),j.update(V.CUSTOM,"currentContactInfo",{})):(s.value=E,j.update(V.CUSTOM,"currentContactListKey",E),E==="friendApplicationList"&&zt.setFriendApplicationRead())}function d(E){var O,U,N,W,J,le,ce,ue;if(t.value=E,a.value){let me;(O=t.value)!=null&&O.userID?me=(W=(N=(U=n.value)==null?void 0:U.friendList)==null?void 0:N.list)==null?void 0:W.find(ke=>{var B;return(ke==null?void 0:ke.userID)===((B=t.value)==null?void 0:B.userID)}):(J=t.value)!=null&&J.groupID&&(me=(ue=(ce=(le=n.value)==null?void 0:le.groupList)==null?void 0:ce.list)==null?void 0:ue.find(ke=>{var B;return(ke==null?void 0:ke.groupID)===((B=t.value)==null?void 0:B.groupID)})),me&&(t.value=me)}j.update(V.CUSTOM,"currentContactInfo",t.value)}function p(E){u.value=E}function f(E){(E==null?void 0:E.size)>0&&(c.value=Object.fromEntries(E==null?void 0:E.entries()))}function h(E){if(!E)return;const O=_e.TUIContact.EXTENSION.CONTACT_LIST.EXT_ID,N=ze.getExtensionList(O).find(W=>{const{name:J,accountList:le=[]}=W.data||{};return J==="customer"&&le.length>0});if(N){const{data:W,text:J}=N,{accountList:le}=W||{};on.getUserProfile({userIDList:le}).then(ce=>{if(ce.data.length>0){const ue={title:J,list:ce.data.map((me,ke)=>({...me,renderKey:R("customerList",me,ke),infoKeyList:[],btnKeyList:["enterC2CConversation"]})),key:"customerList"};n.value={...n.value,customerList:ue}}}).catch(()=>{})}}function g(E){S("groupList",E)}function _(E){S("blackList",E)}function m(E){n.value.friendApplicationList.unreadCount=E}function y(E){S("friendList",E)}function I(E){S("friendApplicationList",E)}function S(E,O){n.value[E].list=O,n.value[E].list.map((U,N)=>U.renderKey=R(E,U,N)),C(n.value[E].list,E)}function C(E,O){var U,N;!((U=t.value)!=null&&U.userID)&&!((N=t.value)!=null&&N.groupID)||(O===s.value||a.value)&&(t.value=(E==null?void 0:E.find(W=>{var J,le;return(W==null?void 0:W.groupID)&&(W==null?void 0:W.groupID)===((J=t.value)==null?void 0:J.groupID)||(W==null?void 0:W.userID)&&(W==null?void 0:W.userID)===((le=t.value)==null?void 0:le.userID)}))||{},j.update(V.CUSTOM,"currentContactInfo",t.value))}function R(E,O,U){return`${E}-${O.userID||O.groupID||"index"+U}`}function k(E){i.value=E}function x(E){a.value=E,j.update(V.CUSTOM,"currentContactInfo",{}),j.update(V.CUSTOM,"currentContactListKey","")}function M(E){t.value=E}function G(E){s.value=E}return xc("userOnlineStatusMap",c),(E,O)=>o(a)?(v(),b("ul",a2,[(v(!0),b(ve,null,Te(o(i),(U,N)=>(v(),b("li",{key:N,class:"tui-contact-list-item"},[U.list[0]?(v(),b("div",o2,[T("div",i2,D(o(A).t(`TUIContact.${U.label}`)),1),(v(!0),b(ve,null,Te(U.list,(W,J)=>(v(),b("div",{key:J,class:P(["tui-contact-search-list-item",["selected"]]),onClick:le=>d(W)},[K(Nr,{item:W,displayOnlineStatus:!1},null,8,["item"])],8,r2))),128))])):H("",!0)]))),128)),o(l)?(v(),b("div",l2,D(o(A).t("TUIContact.无搜索结果")),1)):H("",!0)])):(v(),b("ul",{key:0,class:P(["tui-contact-list",!o(F)&&"tui-contact-list-h5"])},[(v(!0),b(ve,null,Te(o(n),(U,N)=>(v(),b("li",{key:N,class:"tui-contact-list-item"},[T("header",{class:"tui-contact-list-item-header",onClick:W=>r(N)},[T("div",e2,[K(pe,{file:o(s)===N?o(uc):o(Js),width:"16px",height:"16px"},null,8,["file"]),T("div",null,D(o(A).t(`TUIContact.${U.title}`)),1)]),T("div",t2,[U.unreadCount?(v(),b("span",s2,D(U.unreadCount),1)):H("",!0)])],8,Qy),T("ul",{class:P(["tui-contact-list-item-main",o(s)===N?"":"hidden"])},[(v(!0),b(ve,null,Te(U.list,W=>(v(),b("li",{key:W.renderKey,class:P(["tui-contact-list-item-main-item",["selected"]]),onClick:J=>d(W)},[K(Nr,{item:W,displayOnlineStatus:o(u)&&N==="friendList"},null,8,["item","displayOnlineStatus"])],8,n2))),128))],2)]))),128))],2))}});const u2=ae(c2,[["__scopeId","data-v-a0889332"]]),Zt={setRemark:{key:"setRemark",label:"备注名",data:"",labelPosition:An.LEFT,editable:!0,editType:yn.INPUT,editing:!1,editSubmitHandler:e=>{var s,t,n,a,i,u;if(e!=null&&e.isBothFriend){const c=(s=e==null?void 0:e.item)==null?void 0:s.data;Ly((t=e==null?void 0:e.contactInfoData)==null?void 0:t.userID,c),(n=e==null?void 0:e.item)!=null&&n.editing&&(e.item.editing=!1),(a=e==null?void 0:e.item)!=null&&a.data&&(e.item.data=(i=e==null?void 0:e.contactInfoData)==null?void 0:i.remark)}else(u=e==null?void 0:e.item)!=null&&u.editing&&(e.item.editing=!1)}},blackList:{key:"blackList",label:"加入黑名单",data:!1,labelPosition:An.LEFT,editable:!0,editType:yn.SWITCH,editing:!0,editSubmitHandler:e=>{var s,t;e!=null&&e.isInBlackList?jy((s=e==null?void 0:e.contactInfoData)==null?void 0:s.userID):(Fy((t=e==null?void 0:e.contactInfoData)==null?void 0:t.userID),j.update(V.CUSTOM,"currentContactListKey","blackList"))}},setWords:{key:"setWords",label:"请填写验证信息",data:"",labelPosition:An.TOP,editable:!0,editType:yn.TEXTAREA,editing:!0},displayWords:{key:"displayWords",label:"验证信息",data:"",labelPosition:An.LEFT,editable:!1}},Nt={dismissGroup:{key:"dismissGroup",label:"解散群聊",type:Gt.CANCEL,onClick:e=>{var s;By((s=e==null?void 0:e.contactInfoData)==null?void 0:s.groupID)}},quitGroup:{key:"quitGroup",label:"退出群聊",type:Gt.CANCEL,onClick:e=>{var s;Hy((s=e==null?void 0:e.contactInfoData)==null?void 0:s.groupID)}},joinGroup:{key:"joinGroup",label:"发送申请",type:Gt.SUBMIT,onClick:e=>{var s,t;$r((s=e==null?void 0:e.contactInfoData)==null?void 0:s.groupID,(t=e==null?void 0:e.contactInfoMoreList[0])==null?void 0:t.data)}},joinAVChatGroup:{key:"joinAVChatGroup",label:"加入直播群",type:Gt.SUBMIT,onClick:e=>{var s;$r((s=e==null?void 0:e.contactInfoData)==null?void 0:s.groupID)}},enterGroupConversation:{key:"enterGroupConversation",label:"进入群聊",type:Gt.SUBMIT,onClick:e=>{Lr(e==null?void 0:e.contactInfoData)}},addFriend:{key:"addFriend",label:"发送申请",type:Gt.SUBMIT,onClick:e=>{var s,t,n;Ny({to:(s=e==null?void 0:e.contactInfoData)==null?void 0:s.userID,source:"AddSource_Type_Web",remark:(t=e==null?void 0:e.contactInfoMoreList[1])==null?void 0:t.data,wording:(n=e==null?void 0:e.contactInfoMoreList[0])==null?void 0:n.data})}},deleteFriend:{key:"deleteFriend",label:"删除好友",type:Gt.CANCEL,onClick:e=>{var s;$y((s=e==null?void 0:e.contactInfoData)==null?void 0:s.userID)}},enterC2CConversation:{key:"enterC2CConversation",label:"发送消息",type:Gt.SUBMIT,onClick:e=>{Lr(e==null?void 0:e.contactInfoData)}},acceptFriendApplication:{key:"acceptFriendApplication",label:"同意",type:Gt.SUBMIT,onClick:e=>{var s;_c((s=e==null?void 0:e.contactInfoData)==null?void 0:s.userID),j.update(V.CUSTOM,"currentContactListKey","friendList")}},refuseFriendApplication:{key:"refuseFriendApplication",label:"拒绝",type:Gt.CANCEL,onClick:e=>{var s;Gy((s=e==null?void 0:e.contactInfoData)==null?void 0:s.userID)}}},vc="/admin/assets/edit-4601124c.svg",d2=ne({__name:"index",props:{value:{type:Boolean,default:!1}},setup(e){return(s,t)=>(v(),b("div",{class:P(["tui-switch",e.value?"tui-switch-checked":"tui-switch-no-checked"])},null,2))}});const h2=ae(d2,[["__scopeId","data-v-9b2fa26b"]]),p2=["src"],f2=["onClick"],g2=["onUpdate:modelValue","onConfirm","onKeyup"],_2=["onUpdate:modelValue"],v2=["onClick"],m2=["onClick"],y2=ne({__name:"index",emits:["switchConversation"],setup(e,{emit:s}){const t=s,n=w({}),a=w([]),i=w([]),u=w([]),c=k=>{k.editing=!0},l=re(()=>{var k;return!!((k=n.value)!=null&&k.groupID)}),r=re(()=>gc(n==null?void 0:n.value)),d=w(!1),p=re(()=>{var k,x;return!!((x=(k=n.value)==null?void 0:k.selfInfo)!=null&&x.userID)}),f=re(()=>{var k;return!l.value&&((k=h.value)==null?void 0:k.findIndex(x=>{var M;return(x==null?void 0:x.userID)===((M=n.value)==null?void 0:M.userID)}))>=0}),h=w([]);Ne(()=>{j.watch(V.CUSTOM,{currentContactInfo:R}),j.watch(V.USER,{userBlacklist:C})}),at(()=>{j.unwatch(V.CUSTOM,{currentContactInfo:R}),j.unwatch(V.USER,{userBlacklist:C})});const g=()=>{n.value={},a.value=[],i.value=[],u.value=[]},_=()=>{var k,x;j.update(V.CUSTOM,"currentContactInfo",{}),j.update(V.CUSTOM,"currentContactSearchingStatus",!1),(k=fe)!=null&&k.closeSearching&&((x=fe)==null||x.closeSearching())},m=k=>{k.editSubmitHandler&&k.editSubmitHandler({item:k,contactInfoData:n.value,isBothFriend:d.value,isInBlackList:f.value})},y=k=>{k.onClick&&k.onClick({contactInfoData:n.value,contactInfoMoreList:i.value}),(k.key==="enterGroupConversation"||k.key==="enterC2CConversation")&&(t("switchConversation",n.value),_())},I=async()=>{var k,x,M,G,E;r.value?(Zt.displayWords.data=((E=n.value)==null?void 0:E.wording)||"",i.value.push(Zt.displayWords)):((!l.value&&!d.value&&!f.value||l.value&&!p.value&&((k=n.value)==null?void 0:k.type)!==((M=(x=Z)==null?void 0:x.TYPES)==null?void 0:M.GRP_AVCHATROOM))&&(Zt.setWords.data="",i.value.push(Zt.setWords)),!l.value&&!f.value&&(Zt.setRemark.data=((G=n.value)==null?void 0:G.remark)||"",Zt.setRemark.editing=!1,i.value.push(Zt.setRemark)),!l.value&&(d.value||f.value)&&(Zt.blackList.data=f.value||!1,i.value.push(Zt.blackList)))},S=()=>{var k,x,M,G,E,O,U,N,W,J,le,ce,ue,me,ke,B,$;if(!f.value)if(r.value)((k=n.value)==null?void 0:k.type)===((M=(x=Z)==null?void 0:x.TYPES)==null?void 0:M.SNS_APPLICATION_SENT_TO_ME)&&((G=u==null?void 0:u.value)==null||G.push(Nt.refuseFriendApplication),(E=u==null?void 0:u.value)==null||E.push(Nt.acceptFriendApplication));else if(l.value&&p.value){switch((U=(O=n.value)==null?void 0:O.selfInfo)==null?void 0:U.role){case"Owner":(N=u==null?void 0:u.value)==null||N.push(Nt.dismissGroup);break;default:(W=u==null?void 0:u.value)==null||W.push(Nt.quitGroup);break}(J=u==null?void 0:u.value)==null||J.push(Nt.enterGroupConversation)}else!l.value&&d.value?((le=u==null?void 0:u.value)==null||le.push(Nt.deleteFriend),(ce=u==null?void 0:u.value)==null||ce.push(Nt.enterC2CConversation)):l.value?(B=u==null?void 0:u.value)==null||B.push(((ue=n.value)==null?void 0:ue.type)===((ke=(me=Z)==null?void 0:me.TYPES)==null?void 0:ke.GRP_AVCHATROOM)?Nt.joinAVChatGroup:Nt.joinGroup):($=u==null?void 0:u.value)==null||$.push(Nt.addFriend)};function C(k){h.value=k}async function R(k){var x;n.value&&k&&JSON.stringify(n.value)===JSON.stringify(k)||(g(),n.value=qr(k)||{},!(!n.value||((x=Object.keys(n.value))==null?void 0:x.length)===0)&&(a.value=Py(n.value),d.value=await Oy(n.value),I(),S(),k.infoKeyList&&(i.value=k.infoKeyList.map(M=>Zt[M])),k.btnKeyList&&(u.value=k.btnKeyList.map(M=>Nt[M]))))}return(k,x)=>typeof o(n)=="object"&&Object.keys(o(n)).length?(v(),b("div",{key:0,class:P(["tui-contact-info",!o(F)&&"tui-contact-info-h5"])},[o(F)?H("",!0):(v(),b("div",{key:0,class:P(["tui-contact-info-header",!o(F)&&"tui-contact-info-h5-header"])},[T("div",{class:P(["tui-contact-info-header-icon",!o(F)&&"tui-contact-info-h5-header-icon"]),onClick:_},[K(pe,{file:o(rn)},null,8,["file"])],2),T("div",{class:P(["tui-contact-info-header-title",!o(F)&&"tui-contact-info-h5-header-title"])},D(o(A).t("TUIContact.添加好友/群聊")),3)],2)),T("div",{class:P(["tui-contact-info-basic",!o(F)&&"tui-contact-info-h5-basic"])},[T("div",{class:P(["tui-contact-info-basic-text",!o(F)&&"tui-contact-info-h5-basic-text"])},[T("div",{class:P(["tui-contact-info-basic-text-name",!o(F)&&"tui-contact-info-h5-basic-text-name"])},D(o(Dy)(o(n))),3),(v(!0),b(ve,null,Te(o(a),M=>(v(),b("div",{key:M.label,class:P(["tui-contact-info-basic-text-other",!o(F)&&"tui-contact-info-h5-basic-text-other"])},D(`${o(A).t(`TUIContact.${M.label}`)}:
          ${M.data}`),3))),128))],2),T("img",{class:P(["tui-contact-info-basic-avatar",!o(F)&&"tui-contact-info-h5-basic-avatar"]),src:o(fc)(o(n))},null,10,p2)],2),o(i)[0]?(v(),b("div",{key:1,class:P(["tui-contact-info-more",!o(F)&&"tui-contact-info-h5-more"])},[(v(!0),b(ve,null,Te(o(i),M=>(v(),b("div",{key:M.key,class:P(["tui-contact-info-more-item",!o(F)&&"tui-contact-info-h5-more-item",M.labelPosition===o(An).TOP?"tui-contact-info-more-item-top":"tui-contact-info-more-item-left"])},[T("div",{class:P(["tui-contact-info-more-item-label",!o(F)&&"tui-contact-info-h5-more-item-label"])},D(`${o(A).t(`TUIContact.${M.label}`)}`),3),T("div",{class:P(["tui-contact-info-more-item-content",!o(F)&&"tui-contact-info-h5-more-item-content"])},[M.editing?M.editType===o(yn).INPUT?ut((v(),b("input",{key:1,"onUpdate:modelValue":G=>M.data=G,class:P(["tui-contact-info-more-item-content-input",!o(F)&&"tui-contact-info-h5-more-item-content-input"]),type:"text",onConfirm:G=>m(M),onKeyup:sn(G=>m(M),["enter"])},null,42,g2)),[[Ot,M.data]]):M.editType===o(yn).TEXTAREA?ut((v(),b("textarea",{key:2,"onUpdate:modelValue":G=>M.data=G,class:P(["tui-contact-info-more-item-content-textarea",!o(F)&&"tui-contact-info-h5-more-item-content-textarea"]),"confirm-type":"done"},null,10,_2)),[[Ot,M.data]]):M.editType===o(yn).SWITCH?(v(),b("div",{key:3,onClick:G=>m(M)},[K(h2,{value:M.data},null,8,["value"])],8,v2)):H("",!0):(v(),b("div",{key:0,class:P(["tui-contact-info-more-item-content-text",!o(F)&&"tui-contact-info-h5-more-item-content-text"])},[T("div",{class:P(["tui-contact-info-more-item-content-text-data",!o(F)&&"tui-contact-info-h5-more-item-content-text-data"])},D(M.data),3),M.editable?(v(),b("div",{key:0,class:P(["tui-contact-info-more-item-content-text-icon",!o(F)&&"tui-contact-info-h5-more-item-content-text-icon"]),onClick:G=>c(M)},[K(pe,{file:o(vc),width:"14px",height:"14px"},null,8,["file"])],10,f2)):H("",!0)],2))],2)],2))),128))],2)):H("",!0),T("div",{class:P(["tui-contact-info-button",!o(F)&&"tui-contact-info-h5-button"])},[(v(!0),b(ve,null,Te(o(u),M=>(v(),b("button",{key:M.key,class:P(["tui-contact-info-button-item",!o(F)&&"tui-contact-info-h5-button-item",M.type===o(Gt).CANCEL?"tui-contact-info-button-item-cancel":"tui-contact-info-button-item-submit"]),onClick:G=>y(M)},D(o(A).t(`TUIContact.${M.label}`)),11,m2))),128))],2)],2)):H("",!0)}});const I2=ae(y2,[["__scopeId","data-v-e080a159"]]),b2=ne({__name:"index",props:{displayType:{type:String,default:"contactList",require:!1}},emits:["switchConversation"],setup(e,{emit:s}){const t=s,n=e,a=w(n.displayType||"contactList"),i=w(!1),u=w(!0),c=w(!0);et(()=>{u.value=(n==null?void 0:n.displayType)!=="selectFriend"}),j.watch(V.CUSTOM,{isShowSelectFriendComponent:r=>{var d,p,f;if(!ie&&(n==null?void 0:n.displayType)==="selectFriend"){i.value=r,u.value=!1;return}r?(i.value=!0,ie&&(a.value="selectFriend",(d=fe)==null||d.hideTabBar())):(i.value=!1,ie&&(a.value=n.displayType,(f=(p=fe)==null?void 0:p.showTabBar())==null||f.catch(()=>{})))},currentContactInfo:r=>{var d;c.value=F||r&&typeof r=="object"&&((d=Object.keys(r))==null?void 0:d.length)>0}});const l=r=>{var d;ie&&((d=fe)==null||d.navigateTo({url:"/TUIKit/components/TUIChat/index"})),t("switchConversation",r)};return(r,d)=>o(i)?(v(),oe(Ey,{key:0})):o(u)?(v(),b("div",{key:1,class:P(["tui-contact",!o(F)&&"tui-contact-h5"])},[T("div",{class:P(["tui-contact-left",!o(F)&&"tui-contact-h5-left"])},[K(Ay),K(u2,{class:P(["tui-contact-left-list",!o(F)&&"tui-contact-h5-left-list"])},null,8,["class"])],2),o(c)?(v(),b("div",{key:0,class:P(["tui-contact-right",!o(F)&&"tui-contact-h5-right"])},[K(I2,{onSwitchConversation:l})],2)):H("",!0)],2)):H("",!0)}});const ua=ae(b2,[["__scopeId","data-v-934ca5de"]]);wa.getInstance();const ka=[{icon:"https://web.sdk.qcloud.com/im/assets/images/Public.svg",label:"陌生人社交群（Public）",type:Z.TYPES.GRP_PUBLIC,detail:"类似 QQ 群，创建后群主可以指定群管理员，用户搜索群 ID 发起加群申请后，需要群主或管理员审批通过才能入群。详见",src:"产品文档"},{icon:"https://web.sdk.qcloud.com/im/assets/images/Meeting.svg",label:"临时会议群（Meeting）",type:Z.TYPES.GRP_MEETING,detail:"创建后可以随意进出，且支持查看入群前消息；适合用于音视频会议场景、在线教育场景等与实时音视频产品结合的场景。详见",src:"产品文档"},{icon:"https://web.sdk.qcloud.com/im/assets/images/Work.svg",label:"好友工作群（Work）",type:Z.TYPES.GRP_WORK,detail:"类似普通微信群，创建后仅支持已在群内的好友邀请加群，且无需被邀请方同意或群主神奇。详见",src:"产品文档"},{icon:"https://web.sdk.qcloud.com/im/assets/images/AVChatroom.svg",label:"直播群（AVChatroom）",type:Z.TYPES.GRP_AVCHATROOM,detail:"创建后可以随意进出，没有群成员数量上限，但不支持历史消息存储；适合与直播产品结合，用于弹幕聊天场景。详见",src:"产品文档"},{icon:"https://web.sdk.qcloud.com/im/assets/images/Community.png",label:"社群（Community）",type:Z.TYPES.GRP_COMMUNITY,detail:"创建后可以随意进出，最多支持100000人，支持历史消息存储，用户搜索群 ID 发起加群申请后，无需管理员审批即可进群。详见",src:"产品文档"}],Gr=e=>ka.filter(s=>s.type===e)[0],T2={class:"group-introduction-list select"},C2=["onClick"],S2={class:"select-item-type"},w2={class:"select-item-header"},k2={class:"left"},E2={class:"select-item-label"},M2={class:"select-item-detail"},x2=["href"],U2=ne({__name:"index",props:{groupType:{type:String,default:""}},emits:["selectType"],setup(e,{emit:s}){const t=e,n=ka,a=w(),i=s;et(()=>{a.value=t.groupType});const u=l=>{a.value=l.type,i("selectType",l.type)},c=l=>{var r;ie||(r=fe)==null||r.open(l)};return(l,r)=>(v(),b("ul",T2,[(v(!0),b(ve,null,Te(o(n),(d,p)=>(v(),b("li",{key:p,class:P(["select-item",[o(a)===d.type&&"selected"]]),onClick:f=>u(d)},[T("main",S2,[T("div",w2,[T("aside",k2,[K(pe,{class:"icon",file:d.icon},null,8,["file"]),T("span",E2,D(o(A).t(`TUIGroup.${d.label}`)),1)]),o(a)===d.type?(v(),oe(pe,{key:0,file:o(ho)},null,8,["file"])):H("",!0)]),T("span",M2,D(o(A).t(`TUIGroup.${d.detail}`)),1),T("a",{class:"link",href:o(Ss).product.url,target:"_blank",onClick:r[0]||(r[0]=f=>c(o(Ss).product.url))},D(o(A).t(`TUIGroup.${d.src}`)),9,x2)])],10,C2))),128))]))}});const Br=ae(U2,[["__scopeId","data-v-ade6dc43"]]),A2="/admin/assets/setting-a15e5daf.svg",zs=class zs{constructor(){Ue(this,"onCallParamsMap");Ue(this,"onCallCallbackMap");Ue(this,"constants");ze.registerService(_e.TUIGroup.SERVICE.NAME,this),ze.registerExtension(_e.TUIChat.EXTENSION.CHAT_HEADER.EXT_ID,this),this.onCallParamsMap=new Map,this.onCallCallbackMap=new Map,this.constants=_e}static getInstance(){return zs.instance||(zs.instance=new zs),zs.instance}getOnCallParams(s){return this.onCallParamsMap.get(s)}getOnCallCallback(s){return this.onCallCallbackMap.get(s)}async onCall(s,t,n){var a,i,u;switch(this.onCallParamsMap.set(s,t),this.onCallCallbackMap.set(s,n),s){case _e.TUIGroup.SERVICE.METHOD.CREATE_GROUP:j.update(V.GRP,"isShowCreateComponent",!0),ie&&((a=fe)==null||a.reLaunch({url:"/TUIKit/components/TUIGroup/index"}));break;case _e.TUIGroup.SERVICE.METHOD.OPEN_GROUP_MANAGEMENT:Je.switchGroup(t.groupID),j.update(V.GRP,"isShowManageComponent",!0),ie&&((i=fe)==null||i.navigateTo({url:"/TUIKit/components/TUIGroup/index"}));break;case _e.TUIGroup.SERVICE.METHOD.SELECT_GROUP_MEMBER:Je.switchGroup(t.groupID),j.update(V.GRP,"isShowSelectComponent",!0),ie&&((u=fe)==null||u.navigateTo({url:"/TUIKit/components/TUIGroup/index"}));break}}onGetExtension(s){const t=[];switch(s){case _e.TUIChat.EXTENSION.CHAT_HEADER.EXT_ID:t.push({weight:100,icon:A2,text:"更多",data:{},listener:{onClicked:this.groupManage.bind(this)}});break}return t}groupManage(s){ze.callService({serviceName:_e.TUIGroup.SERVICE.NAME,method:_e.TUIGroup.SERVICE.METHOD.OPEN_GROUP_MANAGEMENT,params:s,callback:()=>{var t;ie&&((t=fe)==null||t.navigateBack())}})}};Ue(zs,"instance");let Cn=zs;const R2={class:"group-box"},D2={class:"group-box-header"},P2={class:"group-box-header-title"},O2={key:0,class:"group-list"},L2={class:"group-list-item"},$2={class:"group-list-item-label"},N2={class:"group-list-item-label"},G2=["onUpdate:modelValue","placeholder"],B2=["onClick"],H2={class:"content"},F2={class:"group-list-introduction"},j2={class:"group-list-item"},Y2={class:"group-list-item-label"},z2={class:"content"},V2={key:0,class:"group-h5-list-item-introduction"},W2={class:"introduction-name"},K2={class:"introduction-detail"},Z2=["href"],q2={key:1,class:"group-list group-list-edit"},J2=["placeholder"],X2={class:"group-profile-footer"},Q2=["disabled"],eI=ne({__name:"index",setup(e){const s=Cn.getInstance(),t=s.constants,n=Wr({profile:{groupID:"",name:"",type:ka[0].type,avatar:ka[0].icon,introduction:"",notification:"",memberList:[],isSupportTopic:!1},groupConfig:{title:"",value:"",key:"",type:"",placeholder:""},isEdit:!1});et(()=>{const g=s.getOnCallParams(t.TUIGroup.SERVICE.METHOD.CREATE_GROUP);n.profile.memberList=g.memberList,n.groupConfig.title=g.title});const a=re(()=>Gr(n.profile.type)),i=re(()=>{let g="添加群聊";return n.isEdit&&(g=n.groupConfig.title),A.t(`TUIGroup.${g}`)}),u=re(()=>{const g={name:A.t("TUIGroup.群名称"),key:"name",placeholder:A.t("TUIGroup.请输入群名称")},_={name:`${A.t("TUIGroup.群ID")}(${A.t("TUIGroup.选填")})`,key:"groupID",placeholder:A.t("TUIGroup.请输入群ID")};return n.profile.type===Z.TYPES.GRP_COMMUNITY?[g]:[g,_]}),c=re(()=>n.profile.name===""&&!n.isEdit),l=g=>{n.profile.type!==g&&(n.profile.type=g,n.profile.avatar=Gr(g).icon,n.isEdit&&(n.groupConfig.value=g))},r=async g=>{try{g.memberList=g.memberList.map(y=>({userID:y.userID})),g.type===Z.TYPES.GRP_COMMUNITY&&delete g.groupID;const _=await Je.createGroup(g),{type:m}=_.data.group;m===Z.TYPES.GRP_AVCHATROOM&&await Je.joinGroup({groupID:_.data.group.groupID,applyMessage:""}),h(_.data.group),Se({message:A.t("TUIGroup.群组创建成功"),type:we.SUCCESS})}catch(_){Se({message:_.message,type:we.ERROR})}},d=()=>{const{profile:g}=n;if(n.isEdit)return n.profile[n.groupConfig.key]=n.groupConfig.value,n.isEdit=!n.isEdit;r(g)},p=()=>{if(n.isEdit)return n.isEdit=!n.isEdit;h(null)},f=g=>{switch(n.isEdit=!n.isEdit,n.groupConfig.key=g,n.groupConfig.value=n.profile[g],g){case"name":n.groupConfig.title="设置群名称",n.groupConfig.placeholder="请输入群名称",n.groupConfig.type="input";break;case"groupID":n.groupConfig.title="设置群ID",n.groupConfig.placeholder="请输入群ID",n.groupConfig.type="input";break;case"type":n.groupConfig.title="选择群类型",n.groupConfig.type="select";break}},h=g=>{j.update(V.GRP,"isShowCreateComponent",!1);const _=s.getOnCallCallback(t.TUIGroup.SERVICE.METHOD.CREATE_GROUP);_&&_(g)};return(g,_)=>(v(),oe(wn,{show:!0,isH5:!o(F),isHeaderShow:!1,isFooterShow:!1,background:!1,"onUpdate:show":p},{default:Pe(()=>[T("div",{class:P(["group",[o(F)?"":"group-h5"]])},[T("div",R2,[T("header",D2,[K(pe,{file:o(F)?o(Jn):o(rn),class:"icon-close",size:"16px",onOnClick:p},null,8,["file"]),T("h1",P2,D(o(i)),1)]),o(n).isEdit?(v(),b("div",q2,[o(n).groupConfig.type==="input"?ut((v(),b("input",{key:0,"onUpdate:modelValue":_[1]||(_[1]=m=>o(n).groupConfig.value=m),class:"group-name-input",type:"text",placeholder:o(A).t(`TUIGroup.${o(n).groupConfig.placeholder}`)},null,8,J2)),[[Ot,o(n).groupConfig.value]]):(v(),oe(Br,{key:1,class:"group-introduction-list",groupType:o(n).groupConfig.value,onSelectType:l},null,8,["groupType"]))])):(v(),b("ul",O2,[T("li",L2,[T("label",$2,D(o(A).t("TUIGroup.群头像")),1),K(gs,{url:o(n).profile.avatar},null,8,["url"])]),T("ul",null,[(v(!0),b(ve,null,Te(o(u),(m,y)=>(v(),b("li",{key:y,class:"group-list-item"},[T("label",N2,D(m.name),1),o(F)?ut((v(),b("input",{key:0,"onUpdate:modelValue":I=>o(n).profile[m.key]=I,type:"text",placeholder:m.placeholder},null,8,G2)),[[Ot,o(n).profile[m.key]]]):(v(),b("span",{key:1,class:"group-h5-list-item-content",onClick:I=>f(m.key)},[T("p",H2,D(o(n).profile[m.key]),1),K(pe,{file:o(Js)},null,8,["file"])],8,B2))]))),128)),T("li",F2,[T("div",j2,[T("label",Y2,D(o(A).t("TUIGroup.群类型")),1),o(F)?(v(),oe(Br,{key:0,groupType:o(n).profile.type,onSelectType:l},null,8,["groupType"])):(v(),b("span",{key:1,class:"group-h5-list-item-content",onClick:_[0]||(_[0]=m=>f("type"))},[T("p",z2,D(o(a).label),1),K(pe,{file:o(Js)},null,8,["file"])]))]),o(F)?H("",!0):(v(),b("article",V2,[T("label",W2,D(o(a).label)+"：",1),T("span",K2,D(o(a).detail),1),T("a",{href:o(Ss).product.url,target:"view_window"},D(o(A).t(`TUIGroup.${o(a).src}`)),9,Z2)]))])])])),T("footer",X2,[o(F)&&!o(n).isEdit?(v(),b("button",{key:0,class:"btn-default",onClick:p},D(o(A).t("TUIGroup.取消")),1)):H("",!0),T("button",{class:"btn-submit",disabled:o(c),onClick:d},D(o(A).t("TUIGroup.确认")),9,Q2)])])],2)]),_:1},8,["isH5"]))}});const tI=ae(eI,[["__scopeId","data-v-9db73b24"]]),sI=ne({__name:"index",props:{show:{type:Boolean,default:()=>!1}},emits:["update:show"],setup(e,{emit:s}){const t=e,n=w(!1);et(()=>{n.value=t.show});const a=s,i=()=>{n.value=!n.value,a("update:show",n.value)};return(u,c)=>o(n)?(v(),b("div",{key:0,class:"mask",onClick:c[0]||(c[0]=Oe(l=>!o(zn)&&i,["self"]))},[nt(u.$slots,"default",{},void 0,!0)])):H("",!0)}});const nI=ae(sI,[["__scopeId","data-v-88e2dfe4"]]),aI={class:"group-name"},oI={class:"edit-h5-main"},iI={key:0,class:"edit-h5-header"},rI={class:"left"},lI={class:"input-box"},cI={key:1,class:"tip"},uI={key:1,class:"edit-h5-footer"},dI=ne({__name:"manage-name",props:{data:{type:Object,default:()=>({})},isAuthor:{type:Boolean,default:!1}},emits:["update"],setup(e,{emit:s}){const t=e,n=w({}),a=w(""),i=w(!1),u=w(null);et(()=>{n.value=t.data});const c=s,l=()=>{a.value?(a.value!==n.value.name&&(c("update",{key:"name",value:a.value}),n.value.name=a.value,a.value="",Se({message:A.t("TUIGroup.群名称修改成功"),type:we.SUCCESS})),r()):Se({message:A.t("TUIGroup.群名称不能为空"),type:we.ERROR})},r=()=>{t.isAuthor&&(i.value=!i.value),i.value&&(a.value=n.value.name)};return Ze(()=>i.value,d=>{d&&wt(()=>{var p;(p=u.value)==null||p.focus()})}),(d,p)=>(v(),b("div",aI,[T("label",null,D(o(A).t("TUIGroup.群名称")),1),o(i)?(v(),b("div",{key:0,class:P({"edit-h5":o(ft)})},[T("main",oI,[o(F)?H("",!0):(v(),b("header",iI,[T("aside",rI,[T("h1",null,D(o(A).t("TUIGroup.修改群聊名称")),1),T("span",null,D(o(A).t("TUIGroup.修改群聊名称后，将在群内通知其他成员")),1)]),T("span",{class:"close",onClick:r},D(o(A).t("关闭")),1)])),T("div",lI,[o(i)?ut((v(),b("input",{key:0,ref_key:"nameInputRef",ref:u,"onUpdate:modelValue":p[0]||(p[0]=f=>Bt(a)?a.value=f:null),class:"input",type:"text",onBlur:l},null,544)),[[Ot,o(a)]]):H("",!0),o(F)?H("",!0):(v(),b("span",cI,D(o(A).t("TUIGroup.仅限中文、字母、数字和下划线，2-20个字")),1))]),o(F)?H("",!0):(v(),b("footer",uI,[T("button",{class:"btn",onClick:l},D(o(A).t("确认")),1)]))])],2)):H("",!0),!o(i)||!o(F)?(v(),b("p",{key:1,class:"name",onClick:r},[T("span",null,D(o(n).name),1),e.isAuthor?(v(),oe(pe,{key:0,class:"icon",file:o(vc),width:"14px",height:"14px"},null,8,["file"])):H("",!0)])):H("",!0)]))}});const hI=ae(dI,[["__scopeId","data-v-6019ae09"]]),pI={key:0,class:"notification"},fI={key:1},gI={key:0},_I={key:1},vI={key:2},mI={key:1,class:"edit-h5"},yI={class:"edit-h5-main"},II={class:"edit-h5-header"},bI={class:"left"},TI={class:"notification"},CI={key:1,class:"row"},SI={key:0,class:"row-p"},wI={key:1},kI={key:2,class:"footer"},EI=ne({__name:"manage-notification",props:{data:{type:Object,default:()=>({})},isAuthor:{type:Boolean,default:!1}},emits:["update","close"],setup(e,{emit:s}){const t=e,n=w({}),a=w(""),i=w(!1),u=w(!1);et(()=>{n.value=t.data,a.value=n.value.notification,i.value=t.isAuthor});const c=s,l=()=>{if(a.value.length>150){Se({message:A.t("TUIGroup.群公告字数超出限制，最大长度为150"),type:we.ERROR});return}a.value&&a.value!==n.value.notification&&(c("update",{key:"notification",value:a.value}),wt(()=>{a.value=""})),u.value=!u.value},r=d=>{c("close",d)};return(d,p)=>o(ie)?(v(),b("div",mI,[T("main",yI,[T("header",II,[T("aside",bI,[T("h1",null,D(o(A).t("TUIGroup.群公告")),1)]),T("span",{class:"close",onClick:p[2]||(p[2]=f=>r("notification"))},D(o(A).t("关闭")),1)]),T("div",TI,[o(u)?ut((v(),b("textarea",{key:0,"onUpdate:modelValue":p[3]||(p[3]=f=>Bt(a)?a.value=f:null),class:P([o(ie)?"uni-height":"","textarea"]),onKeyup:sn(l,["enter"])},null,34)),[[Ot,o(a)]]):(v(),b("section",CI,[o(n).notification?(v(),b("article",wI,D(o(n).notification),1)):(v(),b("p",SI,D(o(A).t("TUIGroup.暂无公告")),1))])),o(i)?(v(),b("footer",kI,[o(u)?(v(),b("button",{key:0,class:"btn",onClick:l},D(o(A).t("TUIGroup.发布")),1)):(v(),b("button",{key:1,class:"btn",onClick:p[4]||(p[4]=f=>u.value=!o(u))},D(o(A).t("TUIGroup.编辑")),1))])):H("",!0)])])])):(v(),b("main",pI,[o(u)?ut((v(),b("textarea",{key:0,"onUpdate:modelValue":p[0]||(p[0]=f=>Bt(a)?a.value=f:null),class:"textarea",onKeyup:sn(l,["enter"])},null,544)),[[Ot,o(a)]]):(v(),b("section",fI,[o(n).notification?(v(),b("article",_I,D(o(n).notification),1)):(v(),b("p",gI,D(o(A).t("TUIGroup.暂无公告")),1))])),o(i)?(v(),b("footer",vI,[o(u)?(v(),b("button",{key:0,class:"btn",onClick:l},D(o(A).t("TUIGroup.发布")),1)):(v(),b("button",{key:1,class:"btn",onClick:p[1]||(p[1]=f=>u.value=!o(u))},D(o(A).t("TUIGroup.编辑")),1))])):H("",!0)]))}});const MI=ae(EI,[["__scopeId","data-v-add31611"]]),Hr="/admin/assets/del-icon-e0d1d417.svg",xI={key:0,class:"member"},UI={class:"list"},AI=["onClick"],RI=["src"],DI={class:"name"},PI=["onClick"],OI={key:1,class:"edit-h5"},LI={class:"main"},$I={class:"edit-h5-header"},NI={class:"left"},GI={class:"member"},BI={class:"list list-uniapp"},HI=["onClick"],FI=["src"],jI={class:"name"},YI=["onClick"],zI=ne({__name:"manage-member",props:{list:{type:Array,default:()=>[]},total:{type:Number,default:()=>0},isShowDel:{type:Boolean,default:()=>!1},self:{type:Object,default:()=>({})}},emits:["more","del","handleMemberProfileShow","close"],setup(e,{emit:s}){const t=e,n=w(0),a=w([]),i=w(!1),u=w({});et(()=>{n.value=t.total,i.value=t.isShowDel,a.value=t.list,u.value=t.self});const c=s,l=h=>{let g="";switch(h==null?void 0:h.role){case Z.TYPES.GRP_MBR_ROLE_ADMIN:g=A.t("TUIGroup.管理员");break;case Z.TYPES.GRP_MBR_ROLE_OWNER:g=A.t("TUIGroup.群主");break}return g&&(g=`(${g})`),h.userID===u.value.userID&&(g+=` (${A.t("TUIGroup.我")})`),g},r=()=>{c("more")},d=h=>{c("del",[h])},p=h=>{c("handleMemberProfileShow",h)},f=h=>{c("close",h)};return(h,g)=>o(ie)?(v(),b("div",OI,[T("main",LI,[T("header",$I,[T("aside",NI,[T("h1",null,D(o(A).t("TUIGroup.群成员")),1)]),T("span",{class:"close",onClick:g[0]||(g[0]=_=>f("member"))},D(o(A).t("关闭")),1)]),T("div",GI,[T("ul",BI,[(v(!0),b(ve,null,Te(o(a),(_,m)=>(v(),b("li",{key:m,class:"list-item"},[T("aside",{class:"aside",onClick:y=>p(_)},[T("img",{class:"avatar",src:_.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.onerror=null;this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,FI),T("span",jI,D(_.nick||_.userID),1),T("span",null,D(l(_)),1)],8,HI),T("div",{onClick:y=>d(_)},[_.role!=="Owner"&&o(i)?(v(),oe(pe,{key:0,file:o(Hr),width:"16px",height:"16px"},null,8,["file"])):H("",!0)],8,YI)]))),128)),o(a).length<o(n)?(v(),b("li",{key:0,class:"list-item",onClick:r},D(o(A).t("TUIGroup.查看更多")),1)):H("",!0)])])])])):(v(),b("main",xI,[T("ul",UI,[(v(!0),b(ve,null,Te(o(a),(_,m)=>(v(),b("li",{key:m,class:"list-item"},[T("aside",{class:"aside",onClick:y=>p(_)},[T("img",{class:"avatar",src:_.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.onerror=null;this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,RI),T("span",DI,D(_.nick||_.userID),1),T("span",null,D(l(_)),1)],8,AI),T("div",{onClick:y=>d(_)},[_.role!=="Owner"&&o(i)?(v(),oe(pe,{key:0,file:o(Hr),width:"16px",height:"16px"},null,8,["file"])):H("",!0)],8,PI)]))),128)),o(a).length<o(n)?(v(),b("li",{key:0,class:"list-item",onClick:r},D(o(A).t("TUIGroup.查看更多")),1)):H("",!0)])]))}});const VI=ae(zI,[["__scopeId","data-v-63b3eefe"]]),mc=e=>(nn("data-v-b645d276"),e=e(),an(),e),WI={key:0,class:"memeber-profile"},KI={class:"memeber-profile-main"},ZI=["src"],qI={class:"list"},JI=mc(()=>T("label",null,"ID：",-1)),XI={class:"memeber-profile-footer"},QI={key:1,class:"edit-h5"},eb={class:"main"},tb={class:"edit-h5-header"},sb={class:"left"},nb={class:"edit-h5-profile"},ab={class:"memeber-profile-main"},ob={class:"list"},ib=mc(()=>T("label",null,"ID：",-1)),rb={class:"memeber-profile-footer"},lb=ne({__name:"manage-profile",props:{userInfo:{type:Object,default:()=>({})}},emits:["handleSwitchConversation","close","openConversation"],setup(e,{emit:s}){const t=e,n=w(!1),a=w({});et(()=>{a.value=t.userInfo});const i=s;Ze(()=>t.userInfo,async(d,p)=>{if(d===p)return;const f=await on.getUserProfile({userIDList:[t.userInfo.userID]});a.value=f==null?void 0:f.data[0],c()},{deep:!0,immediate:!0});const u=async(d,p)=>{const f=`${p}${d}`;Yt.getConversationProfile(f).then(h=>{Yt.switchConversation(h.data.conversation.conversationID).then(()=>{var g;j.update(V.GRP,"isShowManageComponent",!1),ie&&((g=fe)==null||g.navigateBack())})}).catch(h=>{console.warn("获取会话资料失败",h.code,h.msg)})},c=async()=>{a.value.userID&&zt.checkFriend({userIDList:[a.value.userID],type:Z.TYPES.SNS_CHECK_TYPE_BOTH}).then(d=>{var f,h,g;const p=(g=(h=(f=d==null?void 0:d.data)==null?void 0:f.successUserIDList)==null?void 0:h[0])==null?void 0:g.relation;n.value=p===Z.TYPES.SNS_TYPE_BOTH_WAY})},l=()=>n.value||!j.getData(V.APP,"isOfficial"),r=d=>{i("close",d)};return(d,p)=>o(ie)?(v(),b("div",QI,[T("main",eb,[T("header",tb,[T("aside",sb,[T("h1",null,D(o(A).t("TUIGroup.群成员")),1)]),T("span",{class:"close",onClick:p[1]||(p[1]=f=>r("profile"))},D(o(A).t("关闭")),1)]),T("div",nb,[T("div",ab,[K(gs,{class:"avatar",url:o(a).avatar,size:"60px"},null,8,["url"]),T("ul",ob,[T("h1",null,D(o(a).nick||o(a).userID),1),T("li",null,[ib,T("span",null,D(o(a).userID),1)]),T("li",null,[T("label",null,D(o(A).t("TUIContact.个性签名"))+"：",1),T("span",null,D(o(a).selfSignature),1)])])]),T("div",rb,[l()?(v(),b("div",{key:0,class:"button",onClick:p[2]||(p[2]=f=>u(o(a).userID,"C2C"))},D(o(A).t("TUIContact.发送消息")),1)):H("",!0)])])])])):(v(),b("div",WI,[T("div",KI,[T("img",{class:"avatar",src:o(a).avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.onerror=null;this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,ZI),T("ul",qI,[T("h2",null,D(o(a).nick||o(a).userID),1),T("li",null,[JI,T("span",null,D(o(a).userID),1)]),T("li",null,[T("label",null,D(o(A).t("TUIContact.个性签名"))+"：",1),T("span",null,D(o(a).selfSignature),1)])])]),T("div",XI,[l()?(v(),b("div",{key:0,class:"button",onClick:p[0]||(p[0]=f=>u(o(a).userID,"C2C"))},D(o(A).t("TUIContact.发送消息")),1)):H("",!0)])]))}});const cb=ae(lb,[["__scopeId","data-v-b645d276"]]),ub=e=>(nn("data-v-d8c9afbe"),e=e(),an(),e),db=ub(()=>T("span",{class:"slider-block"},null,-1)),hb=[db],pb=ne({__name:"index",props:{open:{type:Boolean,default:!1}},emits:["change"],setup(e,{emit:s}){const t=e,n=w(!1),a=s;et(()=>{n.value=t.open});const i=()=>{n.value=!n.value,a("change",n.value)};return(u,c)=>(v(),b("div",{class:P(["slider-box",[o(n)&&"slider-open"]]),onClick:i},hb,2))}});const fb=ae(pb,[["__scopeId","data-v-d8c9afbe"]]),Fr="/admin/assets/plus-dfad243b.svg",jr="/admin/assets/minus-28312fe8.svg",gb={class:"admin-main"},_b={class:"admin-manage"},vb={class:"admin-manage-header"},mb={class:"admin-manage-list"},yb={class:"item-main"},Ib=["src"],bb={class:"item-name"},Tb={class:"admin-manage-list-item"},Cb={class:"admin-manage-list-item"},Sb={key:0,class:"admin-mute-all"},wb={class:"admin-mute-all-title"},kb={class:"admin-mute-all-content"},Eb={key:1,class:"admin-mute"},Mb={class:"admin-mute-header"},xb={class:"admin-mute-list"},Ub={class:"item-main"},Ab=["src"],Rb={class:"item-name"},Db={class:"admin-mute-list-item"},Pb={class:"admin-mute-list-item"},Ob=ne({__name:"manage-admin",props:{member:{type:Object,default:()=>{}},isSetMuteTime:{type:Boolean,default:()=>!1},currentGroup:{type:Object,default:()=>{}}},emits:["addAdmin","removeAdmin","setAllMuteTime","addMute","removeMute","close"],setup(e,{emit:s}){const t=e,n=w(!1),a=w({admin:[],member:[],muteMember:[]}),i=w();et(()=>{a.value=t.member,n.value=t.isSetMuteTime,i.value=t.currentGroup});const u=s,c=()=>{u("addAdmin")},l=()=>{u("removeAdmin")},r=f=>{u("setAllMuteTime",f)},d=()=>{u("addMute")},p=()=>{u("removeMute")};return(f,h)=>(v(),b("div",gb,[T("div",_b,[T("div",vb,D(o(A).t("TUIGroup.群管理员")),1),T("ul",mb,[(v(!0),b(ve,null,Te(o(a).admin,(g,_)=>(v(),b("li",{key:_,class:"admin-manage-list-item"},[T("div",yb,[T("img",{class:"item-main-avatar",src:g.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.onerror=null;this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,Ib)]),T("div",bb,D(g.nick||g.userID),1)]))),128)),T("li",Tb,[T("div",{class:"item-main",onClick:c},[K(pe,{file:o(Fr),width:"16px",height:"16px"},null,8,["file"])])]),T("li",Cb,[o(a).admin.length>0?(v(),b("div",{key:0,class:"item-main",onClick:l},[K(pe,{file:o(jr),width:"16px",height:"16px"},null,8,["file"])])):H("",!0)])])]),o(n)?(v(),b("div",Sb,[T("div",null,[T("div",wb,D(o(A).t("TUIGroup.全员禁言")),1),T("div",kb,D(o(A).t("TUIGroup.全员禁言开启后，只允许群主和管理员发言。")),1)]),K(fb,{open:o(i).muteAllMembers,onChange:r},null,8,["open"])])):H("",!0),o(n)?(v(),b("div",Eb,[T("div",Mb,D(o(A).t("TUIGroup.单独禁言人员")),1),T("ul",xb,[(v(!0),b(ve,null,Te(o(a).muteMember,(g,_)=>(v(),b("li",{key:_,class:"admin-mute-list-item"},[T("div",Ub,[T("img",{class:"item-main-avatar",src:g.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.onerror=null;this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,Ab)]),T("div",Rb,D(g.nick||g.userID),1)]))),128)),T("li",Db,[T("div",{class:"item-main",onClick:d},[K(pe,{file:o(Fr),width:"16px",height:"16px"},null,8,["file"])])]),T("li",Pb,[o(a).muteMember.length>0?(v(),b("div",{key:0,class:"item-main",onClick:p},[K(pe,{file:o(jr),width:"16px",height:"16px"},null,8,["file"])])):H("",!0)])])])):H("",!0)]))}});const Lb=ae(Ob,[["__scopeId","data-v-158ad806"]]),$b=e=>(nn("data-v-dc58cdc8"),e=e(),an(),e),Nb={key:0,class:"manage-header"},Gb={class:"manage-header-content"},Bb=$b(()=>T("div",null,null,-1)),Hb={key:1,class:"main"},Fb={class:"user-info space-top"},jb={class:"user-info-header-left"},Yb={class:"user-info-header-right"},zb={class:"span"},Vb={class:"user-info-list"},Wb=["onClick"],Kb=["src"],Zb={class:"user-info-list-item-info"},qb={key:0,class:"user-info-list-item"},Jb={key:1,class:"user-info-list-item"},Xb={class:"aside"},Qb={class:"label"},eT={class:"article"},tT={class:"label"},sT={class:"list-item"},nT={class:"label"},aT={class:"groupID"},oT={class:"span"},iT={class:"list-item"},rT={class:"label"},lT=["src"],cT={class:"list-item"},uT={class:"label"},dT={class:"span"},hT={class:"list-item"},pT={class:"label"},fT={class:"span"},gT={class:"footer list space-top"},_T={key:0,class:"del-dialog-title"},vT={key:1,class:"del-dialog-title"},mT=ne({__name:"index",props:{groupID:{type:String,default:""},groupCurrentTab:{type:String,default:""}},setup(e){const s=Cn.getInstance(),t=s.constants,n=e,a=w(void 0),i=w(""),u=w(""),c=w(""),l=w(!1),r=w(""),d=w({list:[]}),p=w({}),f=w({[Z.TYPES.GRP_WORK]:"好友工作群",[Z.TYPES.GRP_PUBLIC]:"陌生人社交群",[Z.TYPES.GRP_MEETING]:"临时会议群",[Z.TYPES.GRP_AVCHATROOM]:"直播群",[Z.TYPES.GRP_COMMUNITY]:"社群",[Z.TYPES.JOIN_OPTIONS_FREE_ACCESS]:"自由加入",[Z.TYPES.JOIN_OPTIONS_NEED_PERMISSION]:"需要验证",[Z.TYPES.JOIN_OPTIONS_DISABLE_APPLY]:"禁止加群"}),h=w({admin:[],member:[],muteMember:[]}),g=w([]),_=w(""),m=w(!1),y=w(!1),I=w([]),S=w(!1),C=w([]),R=w([]),k=w(),x=w(""),M=w("");Ne(()=>{wt(()=>{a.value&&Vn.listen({domRefs:a.value,handler:Ie})})}),j.watch(V.GRP,{currentGroup:te=>{var Q,ee;te&&(k.value=te,x.value=(ee=(Q=k.value)==null?void 0:Q.selfInfo)==null?void 0:ee.role)},currentGroupMemberList:te=>{C.value=te,h.value={admin:[],member:[],muteMember:[]},Array.from(te).map(ee=>{switch(ee==null?void 0:ee.role){case Z.TYPES.GRP_MBR_ROLE_ADMIN:h.value.admin.push(ee);break;case Z.TYPES.GRP_MBR_ROLE_MEMBER:h.value.member.push(ee);break}return ee});const Q=new Date().getTime();h.value.muteMember=Array.from(te).filter(ee=>(ee==null?void 0:ee.muteUntil)*1e3-Q>0)}}),j.watch(V.CONV,{currentConversation:te=>{var Q;M.value=(Q=te==null?void 0:te.groupProfile)==null?void 0:Q.groupID}}),et(()=>{const te=s.getOnCallParams(t.TUIGroup.SERVICE.METHOD.OPEN_GROUP_MANAGEMENT);r.value=te.groupID||M.value,i.value=n.groupCurrentTab});const G=re(()=>{let te="";switch(i.value){case"notification":te="群公告";break;case"member":te="群成员";break;case"profile":te="群成员";break;default:te="群管理";break}return te}),E=re(()=>{var Me,Re;const te=(Re=(Me=k==null?void 0:k.value)==null?void 0:Me.selfInfo)==null?void 0:Re.role,Q=te===Z.TYPES.GRP_MBR_ROLE_OWNER,ee=te===Z.TYPES.GRP_MBR_ROLE_ADMIN;return Q||ee}),O=re(()=>{var Qe,rt,Ke;const te=(Qe=k==null?void 0:k.value)==null?void 0:Qe.type,ee=((Ke=(rt=k==null?void 0:k.value)==null?void 0:rt.selfInfo)==null?void 0:Ke.role)===Z.TYPES.GRP_MBR_ROLE_OWNER,Me=te===Z.TYPES.GRP_WORK,Re=te===Z.TYPES.GRP_AVCHATROOM;return!!(!Me&&!Re&&ee)}),U=re(()=>{var ee;return!(((ee=k==null?void 0:k.value)==null?void 0:ee.type)===Z.TYPES.GRP_WORK||!E.value)}),N=re(()=>{var ee;return((ee=k==null?void 0:k.value)==null?void 0:ee.type)!==Z.TYPES.GRP_AVCHATROOM}),W=async te=>{const{key:Q,value:ee}=te,Me={groupID:k.value.groupID,[Q]:ee};Je.updateGroupProfile(Me).then(Re=>{k.value=Re.data.group,u.value=""}).catch(Re=>{Se({message:Re==null?void 0:Re.message,type:we.ERROR})})},J=te=>{i.value=te,u.value="",i.value==="member"&&(c.value="remove"),i.value||(c.value="")},le=()=>{ce()},ce=async te=>{var ee;I.value=[];let Q=[];switch(te){case"add":y.value=!1,Q=[...h.value.admin,...h.value.member].map(Me=>Me.userID),g.value=(await ue()).filter(Me=>Me.userID&&Q.indexOf(Me.userID)<0),_.value="添加成员";break;case"remove":y.value=!1,g.value=C.value.filter(Me=>{var Re,Qe;return Me.userID!==((Qe=(Re=k==null?void 0:k.value)==null?void 0:Re.selfInfo)==null?void 0:Qe.userID)}),_.value="删除成员";break;case"addAdmin":y.value=!0,g.value=h.value.member,_.value="新增管理员";break;case"removeAdmin":y.value=!0,g.value=h.value.admin,_.value="移除管理员";break;case"changeOwner":y.value=!0,g.value=[...h.value.admin,...h.value.member],_.value="转让群组";break;case"addMute":y.value=!0,g.value=h.value.member,k.value.selfInfo.role==="Owner"&&(g.value=[...h.value.admin,...h.value.member]),g.value=(ee=g==null?void 0:g.value)==null?void 0:ee.filter(Me=>{var Re,Qe;return((Qe=(Re=h==null?void 0:h.value)==null?void 0:Re.muteMember)==null?void 0:Qe.indexOf(Me))<0}),_.value="新增禁言用户";break;case"removeMute":y.value=!0,g.value=h.value.muteMember,_.value="移除禁言用户";break}te&&(c.value=te),l.value=!l.value},ue=async()=>(await zt.getFriendList()).data.map(ee=>ee==null?void 0:ee.profile).filter(ee=>!d.value.list.some(Me=>Me.userID===ee.userID)),me=re(()=>{var ee,Me,Re;const te=(Me=(ee=k==null?void 0:k.value)==null?void 0:ee.selfInfo)==null?void 0:Me.role,Q=(Re=k==null?void 0:k.value)==null?void 0:Re.type;return te===Z.TYPES.GRP_MBR_ROLE_OWNER&&Q!==Z.TYPES.GRP_WORK}),ke=re(()=>{var Q;return((Q=k==null?void 0:k.value)==null?void 0:Q.type)===Z.TYPES.GRP_WORK}),B=re(()=>{var Q,ee;let te=3;return ke.value||(te+=1),((ee=(Q=k==null?void 0:k.value)==null?void 0:Q.selfInfo)==null?void 0:ee.role)!=="Owner"&&(te+=1),te}),$=async te=>{const ee={groupID:r.value,count:100,offset:te&&te==="more"?d.value.list.length:0};await Je.getGroupMemberList(ee).then(Me=>{te&&te==="more"?d.value.list=[...d.value.list,...Me.data.memberList]:d.value.list=Me.data.memberList})},L=te=>{p.value=te,J("profile")},Y=te=>{c.value==="remove"?(R.value=te,S.value=!S.value):qe(te,c.value),l.value=!1},Ce=async te=>{await Je.dismissGroup(te.groupID),As("dismissGroup"),Se({message:A.t("TUIGroup.群组解散成功"),type:we.SUCCESS}),Ae()},Ae=()=>{var te;ie?(te=fe)==null||te.switchTab({url:"/TUIKit/components/TUIConversation/index"}):(Ie(),Yt.switchConversation())},Le=te=>{W({key:"muteAllMembers",value:te}),te?(As("muteGroup"),Se({message:A.t("TUIGroup.禁言设置成功"),type:we.SUCCESS})):Se({message:A.t("TUIGroup.取消禁言成功"),type:we.SUCCESS})},We=async te=>{var Re,Qe;let Q={},ee={};const Me={groupID:r.value,userIDList:[te]};switch(c.value){case"add":try{ee=await Je.getGroupMemberProfile(Me),g.value=g.value.filter(rt=>{var Ke;return rt.userID!==((Ke=Q.data[0])==null?void 0:Ke.userID)}),g.value=[...g.value,...Q.data],((Re=ee==null?void 0:ee.data)==null?void 0:Re.memberList.length)>0&&(g.value=g.value.map(rt=>{var Ke;return rt.userID===((Ke=ee==null?void 0:ee.data)==null?void 0:Ke.memberList[0].userID)&&(rt.isDisabled=!0),rt}))}catch{const Ke=A.t("TUIGroup.该用户不存在");Se({message:Ke,type:we.ERROR})}break;case"remove":try{if(Q=await Je.getGroupMemberProfile(Me),Q.data.memberList.length===0){const rt=A.t("TUIGroup.该用户不在群组内");Se({message:rt,type:we.ERROR})}g.value=g.value.filter(rt=>{var Ke,bt;return rt.userID!==((bt=(Ke=Q==null?void 0:Q.data)==null?void 0:Ke.memberList[0])==null?void 0:bt.userID)}),(Qe=Q==null?void 0:Q.data)!=null&&Qe.memberList.length&&(g.value=[...g.value,...Q.data.memberList])}catch{const Ke=A.t("TUIGroup.该用户不存在");Se({message:Ke,type:we.ERROR})}break}},qe=(te,Q)=>{const ee=[];switch(te.map(Me=>(ee.push(Me.userID),Me)),Q){case"add":It(ee);break;case"remove":ye(ee);break;case"addAdmin":he(te[0]);break;case"removeAdmin":he(te[0]);break;case"changeOwner":z(ee[0]);break;case"addMute":q(ee[0],"add");break;case"removeMute":q(ee[0],"remove");break}},It=async te=>{const Q={groupID:r.value,userIDList:te};await Je.addGroupMember(Q)},z=async te=>{const Q={groupID:r.value,newOwnerID:te},ee=await Je.changeGroupOwner(Q);k.value={},k.value=ee.data.group},q=async(te,Q)=>{const ee={groupID:r.value,userID:te,muteTime:Q==="add"?2592e3:0};await Je.setGroupMemberMuteTime(ee)},he=async te=>{let Q="";switch(te.role){case Z.TYPES.GRP_MBR_ROLE_ADMIN:Q=Z.TYPES.GRP_MBR_ROLE_MEMBER;break;case Z.TYPES.GRP_MBR_ROLE_MEMBER:Q=Z.TYPES.GRP_MBR_ROLE_ADMIN;break}const ee={groupID:r.value,userID:te.userID,role:Q};await Je.setGroupMemberRole(ee)},ye=async te=>{const Q={groupID:r.value,userIDList:te,reason:""};await Je.deleteGroupMember(Q)},Ee=async te=>{await Je.quitGroup(te.groupID),Ae()},xe=()=>{i.value?J(""):Ie()},Ie=()=>{j.update(V.GRP,"isShowManageComponent",!1);const te=s.getOnCallCallback(t.TUIGroup.SERVICE.METHOD.OPEN_GROUP_MANAGEMENT);te&&te()};return(te,Q)=>(v(),b("div",{ref_key:"manageRef",ref:a,class:"manage"},[!o(ie)||o(i)==="admin"?(v(),b("header",Nb,[K(pe,{file:o(rn),onOnClick:xe},null,8,["file"]),T("div",Gb,D(o(A).t(`TUIGroup.${o(G)}`)),1),Bb])):H("",!0),!o(i)||o(ie)&&o(i)!="admin"?(v(),b("main",Hb,[K(hI,{class:"space-top",isAuthor:o(E),data:o(k),onUpdate:W},null,8,["isAuthor","data"]),T("div",Fb,[T("header",{class:"user-info-header",onClick:Q[0]||(Q[0]=ee=>J("member"))},[T("label",jb,D(o(A).t("TUIGroup.群成员")),1),T("div",Yb,[T("span",zb,D(o(k).memberCount||o(C).length)+" "+D(o(A).t("TUIGroup.人")),1),K(pe,{file:o(Js)},null,8,["file"])])]),T("ol",Vb,[(v(!0),b(ve,null,Te(o(C).slice(0,o(B)),(ee,Me)=>(v(),b("dl",{key:Me,class:"user-info-list-item"},[T("dt",{class:"user-info-list-item-main",onClick:Re=>L(ee)},[T("img",{class:"avatar",src:ee.avatar||"https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png",onerror:"this.onerror=null;this.src='https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png'"},null,8,Kb)],8,Wb),T("dd",Zb,D(ee.nick||ee.userID),1)]))),128)),o(ke)?(v(),b("dl",qb,[T("dt",{class:"avatar",onClick:Q[1]||(Q[1]=ee=>ce("add"))}," + ")])):H("",!0),o(x)==="Owner"?(v(),b("dl",Jb,[T("dt",{class:"avatar",onClick:Q[2]||(Q[2]=ee=>ce("remove"))}," - ")])):H("",!0)])]),T("ul",{class:"content list space-top",onClick:Q[5]||(Q[5]=ee=>u.value="")},[T("li",{class:"list-item",onClick:Q[3]||(Q[3]=ee=>J("notification"))},[T("aside",Xb,[T("label",Qb,D(o(A).t("TUIGroup.群公告")),1),T("article",eT,D(o(k).notification),1)]),K(pe,{file:o(Js),class:"end"},null,8,["file"])]),o(O)&&o(U)?(v(),b("li",{key:0,class:"list-item",onClick:Q[4]||(Q[4]=ee=>J("admin"))},[T("label",tT,D(o(A).t("TUIGroup.群管理")),1),K(pe,{file:o(Js)},null,8,["file"])])):H("",!0),T("li",sT,[T("label",nT,D(o(A).t("TUIGroup.群ID")),1),T("div",aT,[T("span",oT,D(o(r)),1)])]),T("li",iT,[T("label",rT,D(o(A).t("TUIGroup.群头像")),1),T("img",{class:"avatar",src:o(k).avatar||"https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg",onerror:"this.onerror=null;this.src='https://web.sdk.qcloud.com/im/demo/TUIkit/web/img/constomer.svg'"},null,8,lT)]),T("li",cT,[T("label",uT,D(o(A).t("TUIGroup.群类型")),1),T("span",dT,D(o(A).t(`TUIGroup.${o(f)[o(k).type]}`)),1)]),T("li",hT,[T("label",pT,D(o(A).t("TUIGroup.加群方式")),1),T("span",fT,D(o(A).t(`TUIGroup.${o(f)[o(k).joinOption]}`)),1)])]),T("ul",gT,[o(x)==="Owner"&&o(C).length>1?(v(),b("li",{key:0,class:"list-item",onClick:Q[6]||(Q[6]=Oe(ee=>ce("changeOwner"),["stop"]))},D(o(A).t("TUIGroup.转让群组")),1)):H("",!0),o(me)?(v(),b("li",{key:1,class:"list-item",onClick:Q[7]||(Q[7]=Oe(ee=>Ce(o(k)),["stop"]))},D(o(A).t("TUIGroup.解散群聊")),1)):(v(),b("li",{key:2,class:"list-item",onClick:Q[8]||(Q[8]=Oe(ee=>Ee(o(k)),["stop"]))},D(o(A).t("TUIGroup.退出群组")),1))])])):H("",!0),o(i)==="member"?(v(),oe(VI,{key:2,self:o(k).selfInfo,list:o(C),total:~~o(k).memberCount,isShowDel:o(x)==="Owner"&&o(N),onMore:Q[9]||(Q[9]=ee=>$("more")),onDel:Y,onHandleMemberProfileShow:L,onClose:Q[10]||(Q[10]=ee=>J(""))},null,8,["self","list","total","isShowDel"])):H("",!0),o(i)==="profile"?(v(),oe(cb,{key:3,userInfo:o(p),onClose:Q[11]||(Q[11]=ee=>J(""))},null,8,["userInfo"])):H("",!0),o(i)==="notification"?(v(),oe(MI,{key:4,isAuthor:o(E),data:o(k),onUpdate:W,onClose:Q[12]||(Q[12]=ee=>J(""))},null,8,["isAuthor","data"])):H("",!0),o(i)==="admin"?ut((v(),oe(Lb,{key:5,isSetMuteTime:o(U),member:o(h),currentGroup:o(k),onAddAdmin:Q[13]||(Q[13]=ee=>ce("addAdmin")),onRemoveAdmin:Q[14]||(Q[14]=ee=>ce("removeAdmin")),onSetAllMuteTime:Le,onAddMute:Q[15]||(Q[15]=ee=>ce("addMute")),onRemoveMute:Q[16]||(Q[16]=ee=>ce("removeMute")),onClose:Q[17]||(Q[17]=ee=>J(""))},null,8,["isSetMuteTime","member","currentGroup"])),[[Jt,o(O)]]):H("",!0),K(nI,{show:o(l),"onUpdate:show":Q[18]||(Q[18]=ee=>l.value=ee)},{default:Pe(()=>[K(Aa,{title:o(A).t(`TUIGroup.${o(_)}`),list:o(g),isSearch:o(m),isRadio:o(y),selectedList:o(I),isH5:!o(F),onSubmit:Y,onCancel:le,onSearch:We},null,8,["title","list","isSearch","isRadio","selectedList","isH5"])]),_:1},8,["show"]),K(wn,{class:"deleted-dialog",title:o(A).t("TUIGroup.删除成员"),show:o(S),isH5:!o(F),center:!0,isHeaderShow:o(F),onSubmit:Q[19]||(Q[19]=ee=>qe(o(R),"remove")),"onUpdate:show":Q[20]||(Q[20]=ee=>S.value=ee)},{default:Pe(()=>[o(R).length===1?(v(),b("p",_T,D(o(A).t("TUIGroup.确定从群聊中删除该成员？")),1)):H("",!0),o(R).length>1?(v(),b("p",vT,D(o(A).t("TUIGroup.确定从群聊中删除所选成员？")),1)):H("",!0)]),_:1},8,["title","show","isH5","isHeaderShow"])],512))}});const yT=ae(mT,[["__scopeId","data-v-dc58cdc8"]]),IT=ne({__name:"index",setup(e){const s=Cn.getInstance(),t=s.constants,n=w(!1),a=w([]),i=w([]),u=w({}),c=w({groupID:"",isRadio:!1,isNeedSearch:!1,title:"",filterUserIDList:[]}),l=w(null),r=g=>{l.value=ze.getService(t.TUISearch.SERVICE.NAME),l.value?n.value=g:console.warn("请添加 TUISearch 组件")};et(()=>{const g=s.getOnCallParams(t.TUIContact.SERVICE.METHOD.SELECT_FRIEND);c.value.groupID=g.groupID,c.value.title=g.title,c.value.isRadio=g.isRadio,c.value.isNeedSearch=g.isNeedSearch,c.value.filterUserIDList=g.filterUserIDList,g.isNeedSearch&&r(g.isNeedSearch)}),j.watch(V.GRP,{currentGroup:g=>{u.value=g},currentGroupMemberList:g=>{a.value=g.map(_=>{c.value.filterUserIDList.indexOf(_.userID)>-1&&(_.isDisabled=!0)}),i.value=a.value}});const d=async()=>{const _={groupID:u.value.groupID,count:100,offset:a.value.length};await Je.getGroupMemberList(_)},p=g=>{j.update(V.GRP,"isShowSelectComponent",!1);const _=s.getOnCallCallback(t.TUIGroup.SERVICE.METHOD.SELECT_GROUP_MEMBER);_&&_(g)},f=()=>{Se({message:A.t("TUIGroup.该用户不存在"),type:we.ERROR}),i.value=[...a.value]},h=async g=>{if(!g)return i.value=a.value;try{const _=await l.value.searchGroupMember(g);if(!_.data[0])return f();i.value=_.data;const m=a.value.filter(y=>y.userID===_.data[0].userID);a.value=m.length?a.value:[...a.value,...i.value]}catch{return f()}};return(g,_)=>(v(),oe(pc,{isRadio:o(c).isRadio,isNeedSearch:o(c).isNeedSearch,title:o(c).title,userList:o(i),total:o(u).memberCount,onGetMore:d,onSearch:h,onComplete:p},null,8,["isRadio","isNeedSearch","title","userList","total"]))}}),bT=ne({__name:"index",setup(e){const s=w(!1),t=w(!1),n=w(!1);return j.watch(V.GRP,{isShowCreateComponent:a=>{a?s.value=!0:s.value=!1},isShowManageComponent:a=>{a?t.value=!0:t.value=!1},isShowSelectComponent:a=>{a?n.value=!0:n.value=!1}}),(a,i)=>(v(),b("div",{class:P([(o(s)||o(t)||o(n))&&"tui-group"])},[o(s)?(v(),oe(tI,{key:0})):H("",!0),o(t)?(v(),oe(yT,{key:1})):H("",!0),o(n)?(v(),oe(IT,{key:2})):H("",!0)],2))}});const Yr=ae(bT,[["__scopeId","data-v-d7656e83"]]);Cn.getInstance();const TT=new nh;TT.init();const CT=ne({__name:"index",props:{show:{type:Boolean,default:()=>!1},domClassName:{type:String,default:""}},setup(e,{expose:s}){const t=e,n=Wr({show:!1,domClassName:"",startPosition:{left:"",top:"",cssText:""}}),a=In();et(()=>{n.show=t.show,n.domClassName=t.domClassName}),Ne(()=>{let c=!1,l=document==null?void 0:document.getElementsByClassName(t.domClassName)[0];Ze(()=>n.show,(d,p)=>{n.show=d,d!==p&&n.show===!0&&wt(()=>{var f,h,g;l=document==null?void 0:document.getElementsByClassName(t.domClassName)[0],l&&(l.style.left=(f=n.startPosition)==null?void 0:f.left,l.style.top=(h=n.startPosition)==null?void 0:h.top,l.style.cssText=(g=n.startPosition)==null?void 0:g.cssText,l.addEventListener("mousedown",r))})});const r=d=>{c=!0;const p=d.clientX-l.offsetLeft,f=d.clientY-l.offsetTop,h=g=>{g.preventDefault(),c&&(l.style.left=`${g.clientX-p}px`,l.style.top=`${g.clientY-f}px`)};document.addEventListener("mousemove",i(h,20),!1),document.addEventListener("mouseup",()=>{c=!1,document.removeEventListener("mousemove",h)})}});function i(c,l){let r=0;return function(...d){const p=+new Date;p-r>l&&(r=p,c.apply(a,d))}}return s({positionReset:()=>{var l,r,d;const c=document==null?void 0:document.getElementsByClassName(t.domClassName)[0];n.startPosition={left:"",top:"",cssText:""},c&&(c.style.left=(l=n.startPosition)==null?void 0:l.left,c.style.top=(r=n.startPosition)==null?void 0:r.top,c.style.cssText=(d=n.startPosition)==null?void 0:d.cssText)}}),(c,l)=>(v(),b("div",null,[nt(c.$slots,"default",{},void 0,!0)]))}});const ST=ae(CT,[["__scopeId","data-v-6a8abba2"]]),wT=["id"],kT={class:"home-menu"},ET={class:"home-main"},MT={class:"home-TUIKit"},xT={key:0,class:"home-TUIKit-navbar"},UT={key:1,class:"home-TUIKit-main"},AT={class:"home-TUIKit-main"},RT={class:"home-conversation"},DT={class:"home-chat"},PT={class:"home-TUIKit-main"},OT={key:2,class:"home-TUIKit-main"},LT={key:0,class:"home-TUIKit-main"},$T={class:"home-TUIKit-main"},NT={class:"home-TUIKit-main"},GT={class:"home-TUIKit-main"},BT=ne({name:"userSetting"}),HT=ne({...BT,props:{language:{default:"zh"}},emits:["changeLanguage"],setup(e,{emit:s}){w(e.language);const n=w(!1),a=w("message"),i=w(""),u=w(!1),c=w(!1),l=w(),r=w(!1);j.watch(V.CONV,{currentConversationID:g=>{i.value=g}});function d(g){n.value=g}function p(){u.value=!0,c.value=!1,As("call")}function f(){u.value=!1,c.value=!1}function h(g,_){var m;c.value=_,(m=l==null?void 0:l.value)==null||m.positionReset()}return Ne(()=>{Xr.login({SDKAppID:1600047776,userID:"xiaoke2",userSig:"eJyrVgrxCdYrSy1SslIy0jNQ0gHzM1NS80oy0zLBwhWZifnZqUZQqeKU7MSCgswUJStDMwMDAxNzc3MziExqRUFmUSpQ3NTU1AgoBREtycwFiZkbGVkYm5sbWUBNyUwHmuxhFKPv5B2QahIVlmjmXBTh6Gpm4mNgbFgU6u5vUuHpk1uZH6mdHmJQlJOfbqtUCwCi3zF2",useUploadPlugin:!0,framework:Dc}).then(()=>{}).catch(g=>{})}),(g,_)=>{const m=Uc("Menu");return v(),b("div",{id:o(F)?"preloadedImages":"",class:P(["home",o($e)&&"home-h5"])},[ut(T("div",kT,[K(m,{onCloseMenu:_[0]||(_[0]=y=>d(!1))})],512),[[Jt,o(n)]]),T("div",{class:P(["home-container",o(n)&&"menu-expand"])},[T("div",ET,[T("div",MT,[o(F)||!o(i)?(v(),b("div",xT,[K(Zc,{currentNavBar:o(a),"onUpdate:currentNavBar":_[2]||(_[2]=y=>Bt(a)?a.value=y:null),isSettingShow:o(r),"onUpdate:isSettingShow":_[3]||(_[3]=y=>Bt(r)?r.value=y:null)},{profile:Pe(()=>[K(Ra,{"display-type":"profile"})]),setting:Pe(()=>[K(Ra,{showSetting:o(r),"onUpdate:showSetting":_[1]||(_[1]=y=>Bt(r)?r.value=y:null),"display-type":"setting"},null,8,["showSetting"])]),_:1},8,["currentNavBar","isSettingShow"])])):H("",!0),o(F)?(v(),b("div",UT,[ut(T("div",AT,[T("div",RT,[K(o(ca),{searchType:"global"}),K(o(Mr))]),T("div",DT,[K(o(Er),null,{default:Pe(()=>[K(qc)]),_:1}),K(o(Yr),{class:"chat-aside"}),K(o(ca),{class:"chat-aside",searchType:"conversation"})]),K(o(ua),{"display-type":"selectFriend"})],512),[[Jt,o(a)==="message"]]),ut(T("div",PT,[K(o(ua),{"display-type":"contactList",onSwitchConversation:_[4]||(_[4]=y=>a.value="message")})],512),[[Jt,o(a)==="relation"]])])):o($e)?(v(),b("div",OT,[o(i)?(v(),oe(o(Er),{key:1})):(v(),b("div",LT,[ut(T("div",$T,[K(o(ca),{searchType:"global"}),K(o(Mr)),K(o(ua),{"display-type":"selectFriend"})],512),[[Jt,o(a)==="message"]]),ut(T("div",NT,[K(o(ua),{"display-type":"contactList",onSwitchConversation:_[5]||(_[5]=y=>a.value="message")})],512),[[Jt,o(a)==="relation"]]),ut(T("div",GT,[K(Ra,{"display-type":"all"})],512),[[Jt,o(a)==="profile"]])])),K(o(Yr),{class:"chat-popup"}),K(o(ca),{class:"chat-popup",searchType:"conversation"})])):H("",!0),K(o(ST),{ref_key:"dragRef",ref:l,show:o(u),domClassName:"callkit-drag-container"},{default:Pe(()=>[K(o(Gc),{class:P(["callkit-drag-container",`callkit-drag-container-${o(c)?"mini":o($e)?"h5":"pc"}`]),allowedMinimized:!0,allowedFullScreen:!1,beforeCalling:p,afterCalling:f,onMinimized:h},null,8,["class"])]),_:1},8,["show"])])])],2)],10,wT)}}});const J4=ae(HT,[["__scopeId","data-v-6cbed7bb"]]);export{J4 as default};
