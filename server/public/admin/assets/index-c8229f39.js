import{S as W,H as z,F as J,a1 as K,C as O,G as Q,I as X}from"./element-plus-69d92160.js";import{_ as Y}from"./index.vue_vue_type_script_setup_true_lang-3ac3301c.js";import{d as B,b5 as $,r as g,b2 as Z,ar as tt,o as a,x as n,aR as o,aT as p,M as i,a_ as r,aP as h,a as E,L as l,c as D,y as b,b0 as et,b7 as ot}from"./@vue-a164be7a.js";import{u as at}from"./usePaging-6e60bb31.js";import{u as nt}from"./useDictOptions-8702f1a7.js";import{a as st,e as it}from"./project_tasks_audit-324d5b7d.js";import"./lodash-f986f62a.js";import{f as j}from"./index-90bac5cf.js";import{_ as rt}from"./edit.vue_vue_type_script_setup_true_name_projectTasksAuditEdit_lang-6f97b83f.js";import lt from"./contract-80a7ebc8.js";import{d as R,e as ct}from"./e_contract-7b3228bb.js";import{P as pt}from"./auth-a2fa6179.js";import{u as dt}from"./vue-router-b1515852.js";import"./lodash-es-fbce1780.js";import"./async-validator-dee29e8b.js";import"./@element-plus-21ebab28.js";import"./dayjs-0ab82212.js";import"./@tencentcloud-7fc831ec.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./normalize-wheel-es-ed76fb12.js";import"./@vueuse-ebd2cc93.js";import"./axios-9669b5e1.js";import"./css-color-function-7acc3e97.js";import"./color-9254db0b.js";import"./clone-db6b0f3b.js";import"./color-convert-946e453a.js";import"./color-name-b7949e8c.js";import"./color-string-6fa48439.js";import"./balanced-match-51764fed.js";import"./ms-f6814399.js";import"./nprogress-e3c843bc.js";import"./vue-clipboard3-b827321c.js";import"./clipboard-e27f968b.js";import"./echarts-d6620a89.js";import"./zrender-9797a04d.js";import"./tslib-54e39b60.js";import"./highlight.js-7476ba27.js";import"./@highlightjs-10fbb12e.js";import"./path-to-regexp-767716ea.js";import"./index-943d816c.js";const mt={class:"mt-4"},ut={key:0},ft={key:1},_t={class:"flex mt-4 justify-end"},kt=B({name:"projectTasksAuditLists"}),ve=B({...kt,setup(yt){const S=$(),C=$(),w=g(!1),x=g(!1),k=dt(),V=Z({project_id:k.query.project_id,user_id:"",type:k.query.type,status:"",remarks:""}),q=g([]),L=s=>{q.value=s.map(({id:e})=>e)},{dictData:P}=nt(""),{pager:m,getLists:u,resetParams:vt,resetPage:ht}=at({fetchFun:it,params:V}),N=async s=>{let e=await j.prompt("请输入拒绝内容","提示",{confirmButtonText:"拒绝",cancelButtonText:"取消",inputErrorMessage:"邮箱格式不正确"});await st({id:s,remarks:e.value,status:3}),u()},U=async s=>{var e,y;x.value=!0,await ot(),(e=C.value)==null||e.open(s.type),(y=C.value)==null||y.setFormData(s),u()},A=async s=>{await j.confirm("去签署合同？");const e=await R({id:s});window.open(e.data.url,"_blank")},F=async s=>{await j.confirm("支付宝扫码后查阅合同");const e=await R({id:s});window.open(e.data.url,"_blank")},G=async s=>{const e=await ct({id:s});window.open(e.data.files[0].downloadUrl,"_blank")};return u(),(s,e)=>{const y=W,T=z,c=J,d=K,f=O,H=Q,M=Y,_=tt("perms"),I=X;return a(),n(pt,null,{default:o(()=>[p(i(T,{class:"!border-none",shadow:"never"},{default:o(()=>[i(y,{content:"招聘审核 - "+r(k).query.project_name,onBack:e[0]||(e[0]=t=>s.$router.back())},null,8,["content"])]),_:1},512),[[h,r(k).query.project_id]]),p((a(),n(T,{class:"!border-none mt-140",shadow:"never"},{default:o(()=>[E("div",mt,[i(H,{data:r(m).lists,onSelectionChange:L},{default:o(()=>[i(c,{label:"项目名称",prop:"projectinfo.project_name","show-overflow-tooltip":""}),i(c,{label:"经理姓名",prop:"userinfo.psn_name","show-overflow-tooltip":""}),i(c,{label:"经理电话",prop:"userinfo.psn_mobile","show-overflow-tooltip":""}),i(c,{label:"审核类型",prop:"status",width:"105","show-overflow-tooltip":""},{default:o(({row:t})=>[t.type==1?(a(),n(d,{key:0},{default:o(()=>[l("职员")]),_:1})):t.type==2?(a(),n(d,{key:1,type:"success"},{default:o(()=>[l("招聘专员")]),_:1})):(a(),n(d,{key:2,type:"danger"},{default:o(()=>[l("驻场经理")]),_:1}))]),_:1}),i(c,{label:"审核状态",prop:"status",width:"105","show-overflow-tooltip":""},{default:o(({row:t})=>[t.status==1?(a(),n(d,{key:0},{default:o(()=>[l("待签署")]),_:1})):t.status==2?(a(),n(d,{key:1,type:"success"},{default:o(()=>[l("完成")]),_:1})):(a(),n(d,{key:2,type:"danger"},{default:o(()=>[l("拒绝")]),_:1}))]),_:1}),i(c,{label:"拒绝内容",prop:"remarks","show-overflow-tooltip":""}),i(c,{label:"申请时间",prop:"create_time",width:"200px","show-overflow-tooltip":""}),i(c,{label:"审核时间",prop:"update_time",width:"200px","show-overflow-tooltip":""}),i(c,{label:"操作",width:"220",fixed:"right"},{default:o(({row:t})=>[t.contractinfo==null?(a(),D("div",ut,[p((a(),n(f,{disabled:t.status>1,type:"primary",link:"",onClick:v=>U(t)},{default:o(()=>[l(" 发起合同 ")]),_:2},1032,["disabled","onClick"])),[[_,["project_tasks_audit/audited"]]]),p((a(),n(f,{disabled:t.status>1,type:"danger",link:"",onClick:v=>N(t.id)},{default:o(()=>[l(" 拒绝 ")]),_:2},1032,["disabled","onClick"])),[[_,["project_tasks_audit/audited"]]])])):b("",!0),(t==null?void 0:t.contractinfo)!=null?(a(),D("div",ft,[p((a(),n(f,{type:"danger",link:"",onClick:v=>A(t.contractinfo.id)},{default:o(()=>[l(" 去签署 ")]),_:2},1032,["onClick"])),[[_,["e_contract/delete"]],[h,t.contractinfo.status==0||t.contractinfo.status==1]]),p((a(),n(f,{type:"success",link:"",onClick:v=>F(t.contractinfo.id)},{default:o(()=>[l(" 查看合同 ")]),_:2},1032,["onClick"])),[[_,["e_contract/delete"]],[h,t.contractinfo.status==2]]),p((a(),n(f,{type:"success",link:"",onClick:v=>G(t.contractinfo.id)},{default:o(()=>[l(" 下载合同 ")]),_:2},1032,["onClick"])),[[_,["e_contract/delete"]],[h,t.contractinfo.status==2]])])):b("",!0)]),_:1})]),_:1},8,["data"])]),E("div",_t,[i(M,{modelValue:r(m),"onUpdate:modelValue":e[1]||(e[1]=t=>et(m)?m.value=t:null),onChange:r(u)},null,8,["modelValue","onChange"])])]),_:1})),[[I,r(m).loading]]),r(w)?(a(),n(rt,{key:0,ref_key:"editRef",ref:S,"dict-data":r(P),onSuccess:r(u),onClose:e[2]||(e[2]=t=>w.value=!1)},null,8,["dict-data","onSuccess"])):b("",!0),r(x)?(a(),n(lt,{key:1,ref_key:"contractRef",ref:C,"dict-data":r(P),onClose:e[3]||(e[3]=t=>w.value=!1)},null,8,["dict-data"])):b("",!0)]),_:1})}}});export{ve as default};
