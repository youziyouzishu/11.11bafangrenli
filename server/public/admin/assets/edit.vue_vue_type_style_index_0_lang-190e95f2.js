import{x as se,y as ie,K as me,L as ue,N as de,O as _e,H as pe,a3 as ce,a4 as fe,M as ye,a5 as be,a6 as ge,A as ve}from"./element-plus-69d92160.js";import{_ as Ve}from"./index.vue_vue_type_style_index_0_lang-b9a3a5be.js";import{d as Y,b5 as B,r as V,b as F,b2 as H,o as b,c as w,M as a,aR as o,a_ as e,a as d,F as L,ao as M,x as N,L as g,aT as m,aP as u,aB as c}from"./@vue-a164be7a.js";import{u as xe}from"./useDictOptions-8702f1a7.js";import{D as ke}from"./index-46e95ab2.js";import{r as v}from"./index-90bac5cf.js";import"./lodash-f986f62a.js";import{s as we}from"./element-china-area-data-0d190cbe.js";function Ye(_){return v.get({url:"/project_tasks/lists",params:_})}function he(_){return v.post({url:"/project_tasks/add",params:_})}function je(_){return v.post({url:"/project_tasks/edit",params:_})}function $e(_){return v.post({url:"/project_tasks/close",params:_})}function De(_){return v.get({url:"/project_tasks/detail",params:_})}const Ee={class:"edit-popup"},Ue=d("div",null,"~",-1),Te=d("div",null," 人 ",-1),Re=["disabled"],qe={label:"1"},Ce=Y({name:"projectTasksEdit"}),Oe=Y({...Ce,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(_,{expose:$,emit:O}){const h=O,j=B(),x=B(),p=V("add"),A=V(3),f=V([500,800]),D=V([2,10]),I=F(()=>p.value=="edit"?"编辑项目 ( "+t.project_name+" )":"发布项目"),{dictData:E}=xe("education,experience,welfare,work_type,work_time"),K={key:"value",label:"label"},G=F(()=>{const n=[];return we.forEach(l=>{l.children.forEach(s=>{n.push({...s,label:`${l.label}/${s.label}`})})}),n}),t=H({id:"",project_name:"",task_description:'<blockquote>自定义模版</blockquote><ul><li>公司: {{公司名称}}</li><li>职位: {{职位}}</li><li>职责: {{职责}}</li><li><span style="color: rgb(206, 145, 120);">招聘提成: {{提成}}</span></li><li><span style="color: rgb(206, 145, 120);">招聘提成: {{提成}}</span></li><li>薪资范围:{{薪资}}</li></ul><p><br></p>',creator:"",nickname:"",site_managers:"",recruitment_specialists:"",recruitment_start_time:"",recruitment_score_direction:"",regional_orientation:"",recruitment_settlement_type:1,recruitment_settlement_value:0,site_settlement_type:"1",site_settlement_value:3,is_salary:1,attr_welfare:"",salary_range:"",salary_range_end:"",interest_tags:"",project_score:5,work_time:"",work_type:"",min_people:1,max_people:10,citys:[]}),z=H({project_name:[{required:!0,message:"请输入项目名称",trigger:["blur"]}],task_description:[{required:!0,message:"请输入任务描诉",trigger:["blur"]}],recruitment_start_time:[{required:!0,message:"请选择发布时间",trigger:["blur"]}],recruitment_settlement_type:[{required:!0,message:"请输入招聘结算类型",trigger:["blur"]}],site_settlement_type:[{required:!0,message:"请输入驻场结算类型",trigger:["blur"]}],attr_welfare:[{required:!0,message:"请选择福利类型",trigger:["blur"]}]}),J=n=>{let l=new Date;return l.setHours(0,0,0,0),n.getTime()<l.getTime()},U=async n=>{for(const l in t)n[l]!=null&&n[l]!=null&&(t[l]=n[l])},Q=async n=>{const l=await De({id:n.id});U(l)},W=n=>{console.log(n),n=="1"?f.value=[500,800]:n=="2"?f.value=[10,15]:n=="3"&&(f.value=[2,10]),t.recruitment_settlement_value=f.value[0]},X=async()=>{var l,s;await((l=j.value)==null?void 0:l.validate());const n={...t};p.value=="edit"?await je(n):await he(n),(s=x.value)==null||s.close(),h("success")},Z=(n="add")=>{var l;p.value=n,(l=x.value)==null||l.open()},ee=()=>{h("close")},T=n=>`${n} 元`;return $({open:Z,setFormData:U,getDetail:Q}),(n,l)=>{const s=se,i=ie,R=me,q=ue,y=de,C=_e,te=Ve,le=pe,P=ce,S=fe,ae=ye,re=be,oe=ge,ne=ve;return b(),w("div",Ee,[a(ke,{ref_key:"popupRef",ref:x,title:e(I),async:!0,width:"95%",onConfirm:X,onClose:ee},{default:o(()=>[a(ne,{ref_key:"formRef",ref:j,model:e(t),"label-width":"90px",rules:e(z)},{default:o(()=>[d("div",null,[a(oe,{direction:"vertical",active:e(A)},{default:o(()=>[a(P,{title:"招聘需求"},{description:o(()=>[a(i,{label:"名称",prop:"project_name"},{default:o(()=>[a(s,{disabled:e(p)=="edit",modelValue:e(t).project_name,"onUpdate:modelValue":l[0]||(l[0]=r=>e(t).project_name=r),style:{width:"380px"},maxlength:"20","show-word-limit":"",clearable:"",placeholder:"请输入项目名称"},null,8,["disabled","modelValue"])]),_:1}),a(i,{label:"岗位",prop:"work_type"},{default:o(()=>[a(q,{multiple:"","multiple-limit":4,style:{width:"300px"},modelValue:e(t).work_type,"onUpdate:modelValue":l[1]||(l[1]=r=>e(t).work_type=r),clearable:"",placeholder:"请选择类型"},{default:o(()=>[(b(!0),w(L,null,M(e(E).work_type,(r,k)=>(b(),N(R,{key:k,label:r.name,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"工期",prop:"work_time"},{default:o(()=>[a(q,{multiple:"",style:{width:"300px"},modelValue:e(t).work_time,"onUpdate:modelValue":l[2]||(l[2]=r=>e(t).work_time=r),clearable:"",placeholder:"请选择类型"},{default:o(()=>[(b(!0),w(L,null,M(e(E).work_time,(r,k)=>(b(),N(R,{key:k,label:r.name,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"人数",prop:"salary_range"},{default:o(()=>[a(s,{modelValue:e(t).min_people,"onUpdate:modelValue":l[3]||(l[3]=r=>e(t).min_people=r),clearable:"",placeholder:"最小人数",style:{width:"100px","margin-left":"10px","margin-right":"10px"},type:"number"},null,8,["modelValue"]),Ue,a(s,{modelValue:e(t).max_people,"onUpdate:modelValue":l[4]||(l[4]=r=>e(t).max_people=r),clearable:"",placeholder:"最大人数",style:{width:"100px","margin-left":"10px","margin-right":"10px"},type:"number"},null,8,["modelValue"]),Te]),_:1}),a(i,{label:"薪资",prop:"salary_range"},{default:o(()=>[a(C,{modelValue:e(t).is_salary,"onUpdate:modelValue":l[5]||(l[5]=r=>e(t).is_salary=r)},{default:o(()=>[a(y,{label:1},{default:o(()=>[g("面议")]),_:1}),a(y,{label:2},{default:o(()=>[g("指定")]),_:1})]),_:1},8,["modelValue"]),m(a(s,{modelValue:e(t).salary_range,"onUpdate:modelValue":l[6]||(l[6]=r=>e(t).salary_range=r),clearable:"",placeholder:"起始薪资",style:{width:"100px","margin-left":"10px","margin-right":"10px"},type:"number"},null,8,["modelValue"]),[[u,e(t).is_salary==2]]),m(d("div",null,"~",512),[[u,e(t).is_salary==2]]),m(a(s,{modelValue:e(t).salary_range_end,"onUpdate:modelValue":l[7]||(l[7]=r=>e(t).salary_range_end=r),clearable:"",placeholder:"结束薪资",style:{width:"100px","margin-left":"10px","margin-right":"10px"},type:"number"},null,8,["modelValue"]),[[u,e(t).is_salary==2]]),m(d("div",null," K / 月 ",512),[[u,e(t).is_salary==2]])]),_:1}),a(i,{label:"描述",prop:"project_name"},{default:o(()=>[a(le,{header:"",shadow:"none",class:"!border-none"},{default:o(()=>[a(te,{modelValue:e(t).task_description,"onUpdate:modelValue":l[8]||(l[8]=r=>e(t).task_description=r),style:{"margin-left":"-20px"},height:"400px",mode:"simple",readonly:"true"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(P,{title:"项目设置"},{description:o(()=>[a(i,{label:"单位",prop:"recruitment_settlement_type"},{default:o(()=>[m(d("div",null,[m(d("div",{label:1},c(e(t).recruitment_settlement_type==1?e(t).recruitment_settlement_value:0)+" 元/人",513),[[u,e(t).recruitment_settlement_type==1]]),m(d("div",{label:2},c(e(t).recruitment_settlement_type===2?e(t).recruitment_settlement_value:0)+" 元/班次",513),[[u,e(t).recruitment_settlement_type==2]]),m(d("div",{label:3},c(e(t).recruitment_settlement_type===3?e(t).recruitment_settlement_value:0)+" 元/工时",513),[[u,e(t).recruitment_settlement_type==3]])],512),[[u,e(p)=="edit"]]),m(a(C,{modelValue:e(t).recruitment_settlement_type,"onUpdate:modelValue":l[9]||(l[9]=r=>e(t).recruitment_settlement_type=r),onChange:W},{default:o(()=>[a(y,{label:1},{default:o(()=>[g(c(e(t).recruitment_settlement_type==1?e(t).recruitment_settlement_value:"")+" 元/人",1)]),_:1}),a(y,{label:2},{default:o(()=>[g(c(e(t).recruitment_settlement_type==2?e(t).recruitment_settlement_value:"")+" 元/班次",1)]),_:1}),a(y,{label:3},{default:o(()=>[g(c(e(t).recruitment_settlement_type==3?e(t).recruitment_settlement_value:"")+" 元/工时",1)]),_:1})]),_:1},8,["modelValue"]),[[u,e(p)!="edit"]])]),_:1}),a(i,{label:"",prop:" recruitment_settlement_type"},{default:o(()=>[m(a(S,{modelValue:e(t).recruitment_settlement_value,"onUpdate:modelValue":l[10]||(l[10]=r=>e(t).recruitment_settlement_value=r),min:e(f)[0],max:e(f)[1],"format-tooltip":T,style:{"margin-left":"20px",width:"400px"}},null,8,["modelValue","min","max"]),[[u,e(p)!="edit"]])]),_:1}),a(i,{label:"提成",prop:"site_settlement_type"},{default:o(()=>[d("div",{disabled:e(p)=="edit"},[d("div",qe,c(e(t).site_settlement_value)+" 元/人",1)],8,Re),m(a(S,{modelValue:e(t).site_settlement_value,"onUpdate:modelValue":l[11]||(l[11]=r=>e(t).site_settlement_value=r),min:e(D)[0],max:e(D)[1],"format-tooltip":T,style:{"margin-left":"20px",width:"400px"}},null,8,["modelValue","min","max"]),[[u,e(p)!="edit"]])]),_:1}),a(i,{label:"定时发布",prop:"recruitment_start_time",style:{width:"400px"}},{default:o(()=>[a(ae,{"disabled-date":J,disabled:e(p)=="edit",class:"flex-1 !flex",modelValue:e(t).recruitment_start_time,"onUpdate:modelValue":l[12]||(l[12]=r=>e(t).recruitment_start_time=r),clearable:"",type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"发布时间",wdith:"400px;"},null,8,["disabled","modelValue"])]),_:1}),a(i,{label:"招聘城市",prop:"project_name"},{default:o(()=>[a(re,{modelValue:e(t).citys,"onUpdate:modelValue":l[13]||(l[13]=r=>e(t).citys=r),data:e(G),filterable:"",titles:["可选城市","已选城市"],props:K},null,8,["modelValue","data"])]),_:1})]),_:1})]),_:1},8,["active"])])]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{Oe as _,$e as a,Ye as b};
