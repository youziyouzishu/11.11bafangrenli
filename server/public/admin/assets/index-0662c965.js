import{x as H,y as J,C as O,A as Q,H as W,F as X,q as Y,r as Z,s as ee,G as te,I as oe}from"./element-plus-69d92160.js";import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang-3ac3301c.js";import{j as ne,f as V,b as le}from"./index-90bac5cf.js";import{d as B,b2 as $,r as re,aq as se,ar as ie,o as r,c as y,M as e,aR as t,a_ as a,aU as S,L as i,aT as m,x as p,a as w,b0 as me,y as de}from"./@vue-a164be7a.js";import{b as pe,c as ce,d as _e,e as ue,s as fe}from"./code-5683a015.js";import{u as ge}from"./usePaging-6e60bb31.js";import{_ as be}from"./data-table.vue_vue_type_script_setup_true_lang-5892d375.js";import{_ as ye}from"./code-preview.vue_vue_type_script_setup_true_lang-01f0a7f7.js";import"./lodash-es-fbce1780.js";import"./async-validator-dee29e8b.js";import"./@element-plus-21ebab28.js";import"./dayjs-0ab82212.js";import"./@tencentcloud-7fc831ec.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./normalize-wheel-es-ed76fb12.js";import"./@vueuse-ebd2cc93.js";import"./lodash-f986f62a.js";import"./axios-9669b5e1.js";import"./vue-router-b1515852.js";import"./css-color-function-7acc3e97.js";import"./color-9254db0b.js";import"./clone-db6b0f3b.js";import"./color-convert-946e453a.js";import"./color-name-b7949e8c.js";import"./color-string-6fa48439.js";import"./balanced-match-51764fed.js";import"./ms-f6814399.js";import"./nprogress-e3c843bc.js";import"./vue-clipboard3-b827321c.js";import"./clipboard-e27f968b.js";import"./echarts-d6620a89.js";import"./zrender-9797a04d.js";import"./tslib-54e39b60.js";import"./highlight.js-7476ba27.js";import"./@highlightjs-10fbb12e.js";import"./path-to-regexp-767716ea.js";import"./index-943d816c.js";const we={class:"code-generation"},he={class:"flex"},ve={class:"mt-4"},Ce={class:"flex items-center"},ke={class:"flex justify-end mt-4"},Ve=B({name:"codeGenerate"}),vt=B({...Ve,setup(xe){const c=$({table_name:"",table_comment:""}),_=$({show:!1,loading:!1,code:[]}),{pager:f,getLists:b,resetParams:I,resetPage:h}=ge({fetchFun:ue,params:c}),g=re([]),K=n=>{g.value=n.map(({id:o})=>o)},U=async n=>{await V.confirm("确定要同步表结构？"),await fe({id:n})},x=async n=>{await V.confirm("确定要删除？"),await pe({id:n}),b()},F=async n=>{const o=await ce({id:n});_.code=o,_.show=!0},G=n=>n.some(o=>o.generate_type==1),E=async n=>{if(G(n))return V.msgError("生成方式为生成到模块，请在前端开发模式下使用，详细参考文档");const o=await _e({id:n});o.file&&window.open(o.file,"_blank")},N=(n,o)=>{switch(n){case"generate":E([o.id]);break;case"sync":U(o.id);break;case"delete":x(o.id)}};return b(),(n,o)=>{const D=H,v=J,s=O,q=Q,P=W,C=le,u=X,L=se("router-link"),k=Y,M=Z,R=ee,j=te,z=ae,d=ie("perms"),A=oe;return r(),y("div",we,[e(P,{class:"!border-none",shadow:"never"},{default:t(()=>[e(q,{class:"mb-[-16px]",model:a(c),inline:""},{default:t(()=>[e(v,{label:"表名称"},{default:t(()=>[e(D,{class:"w-[280px]",modelValue:a(c).table_name,"onUpdate:modelValue":o[0]||(o[0]=l=>a(c).table_name=l),clearable:"",onKeyup:S(a(h),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(v,{label:"表描述"},{default:t(()=>[e(D,{class:"w-[280px]",modelValue:a(c).table_comment,"onUpdate:modelValue":o[1]||(o[1]=l=>a(c).table_comment=l),clearable:"",onKeyup:S(a(h),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(v,null,{default:t(()=>[e(s,{type:"primary",onClick:a(h)},{default:t(()=>[i("查询")]),_:1},8,["onClick"]),e(s,{onClick:a(I)},{default:t(()=>[i("重置")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),m((r(),p(P,{class:"!border-none mt-4",shadow:"never"},{default:t(()=>[w("div",he,[m((r(),p(be,{class:"inline-block mr-[10px]",onSuccess:a(b)},{default:t(()=>[e(s,{type:"primary"},{icon:t(()=>[e(C,{name:"el-icon-Plus"})]),default:t(()=>[i(" 导入数据表 ")]),_:1})]),_:1},8,["onSuccess"])),[[d,["tools.generator/selectTable"]]]),m((r(),p(s,{disabled:!a(g).length,onClick:o[2]||(o[2]=l=>x(a(g))),type:"danger"},{icon:t(()=>[e(C,{name:"el-icon-Delete"})]),default:t(()=>[i(" 删除 ")]),_:1},8,["disabled"])),[[d,["tools.generator/delete"]]]),m((r(),p(s,{disabled:!a(g).length,onClick:o[3]||(o[3]=l=>E(a(g)))},{default:t(()=>[i(" 生成代码 ")]),_:1},8,["disabled"])),[[d,["tools.generator/generate"]]])]),w("div",ve,[e(j,{data:a(f).lists,size:"large",onSelectionChange:K},{default:t(()=>[e(u,{type:"selection",width:"55"}),e(u,{label:"表名称",prop:"table_name","min-width":"180"}),e(u,{label:"表描述",prop:"table_comment","min-width":"180"}),e(u,{label:"创建时间",prop:"create_time","min-width":"180"}),e(u,{label:"更新时间",prop:"update_time","min-width":"180"}),e(u,{label:"操作",width:"160",fixed:"right"},{default:t(({row:l})=>[w("div",Ce,[m((r(),p(s,{type:"primary",link:"",onClick:T=>F(l.id)},{default:t(()=>[i(" 预览 ")]),_:2},1032,["onClick"])),[[d,["tools.generator/preview"]]]),e(s,{type:"primary",link:""},{default:t(()=>[m((r(),p(L,{to:{path:a(ne)("tools.generator/edit"),query:{id:l.id}}},{default:t(()=>[i(" 编辑 ")]),_:2},1032,["to"])),[[d,["tools.generator/edit"]]])]),_:2},1024),m((r(),p(R,{class:"ml-2",onCommand:T=>N(T,l)},{dropdown:t(()=>[e(M,null,{default:t(()=>[m((r(),y("div",null,[e(k,{command:"generate"},{default:t(()=>[e(s,{type:"primary",link:""},{default:t(()=>[i(" 生成代码 ")]),_:1})]),_:1})])),[[d,["tools.generator/generate"]]]),m((r(),y("div",null,[e(k,{command:"sync"},{default:t(()=>[e(s,{type:"primary",link:""},{default:t(()=>[i(" 同步 ")]),_:1})]),_:1})])),[[d,["tools.generator/syncColumn"]]]),m((r(),y("div",null,[e(k,{command:"delete"},{default:t(()=>[e(s,{type:"danger",link:""},{default:t(()=>[i(" 删除 ")]),_:1})]),_:1})])),[[d,["tools.generator/delete"]]])]),_:1})]),default:t(()=>[e(s,{type:"primary",link:""},{default:t(()=>[i(" 更多 "),e(C,{name:"el-icon-ArrowDown",size:14})]),_:1})]),_:2},1032,["onCommand"])),[[d,["tools.generator/generate","tools.generator/syncColumn","tools.generator/delete"]]])])]),_:1})]),_:1},8,["data"])]),w("div",ke,[e(z,{modelValue:a(f),"onUpdate:modelValue":o[4]||(o[4]=l=>me(f)?f.value=l:null),onChange:a(b)},null,8,["modelValue","onChange"])])]),_:1})),[[A,a(f).loading]]),a(_).show?(r(),p(ye,{key:0,modelValue:a(_).show,"onUpdate:modelValue":o[5]||(o[5]=l=>a(_).show=l),code:a(_).code},null,8,["modelValue","code"])):de("",!0)])}}});export{vt as default};
