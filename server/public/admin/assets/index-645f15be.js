import{x as H,y as Q,K as Z,L as q,C as J,A as W,H as X,F as Y,o as ee,Q as te,G as oe,I as ae}from"./element-plus-69d92160.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang-3ac3301c.js";import{f as ne,b as ie}from"./index-90bac5cf.js";import{_ as se}from"./index.vue_vue_type_script_setup_true_lang-a347abcf.js";import{d as U,b5 as me,b2 as re,r as pe,aZ as de,ar as ce,o as s,c as E,M as e,aR as a,a_ as o,aU as x,F as ue,ao as _e,x as r,L as c,aT as b,a as D,y as k,b0 as fe,b7 as $}from"./@vue-a164be7a.js";import{a as F,_ as be,b as ve,c as he}from"./edit.vue_vue_type_script_setup_true_lang-db7091c5.js";import{r as we}from"./role-e3d4b914.js";import{a as ge}from"./useDictOptions-8702f1a7.js";import{u as ye}from"./usePaging-6e60bb31.js";import"./lodash-es-fbce1780.js";import"./async-validator-dee29e8b.js";import"./@element-plus-21ebab28.js";import"./dayjs-0ab82212.js";import"./@tencentcloud-7fc831ec.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./normalize-wheel-es-ed76fb12.js";import"./@vueuse-ebd2cc93.js";import"./lodash-f986f62a.js";import"./axios-9669b5e1.js";import"./vue-router-b1515852.js";import"./css-color-function-7acc3e97.js";import"./color-9254db0b.js";import"./clone-db6b0f3b.js";import"./color-convert-946e453a.js";import"./color-name-b7949e8c.js";import"./color-string-6fa48439.js";import"./balanced-match-51764fed.js";import"./ms-f6814399.js";import"./nprogress-e3c843bc.js";import"./vue-clipboard3-b827321c.js";import"./clipboard-e27f968b.js";import"./echarts-d6620a89.js";import"./zrender-9797a04d.js";import"./tslib-54e39b60.js";import"./highlight.js-7476ba27.js";import"./@highlightjs-10fbb12e.js";import"./path-to-regexp-767716ea.js";import"./index-943d816c.js";import"./post-a49d878c.js";import"./department-2d25a8b5.js";const ke={class:"admin"},Ce={class:"mt-4"},Ve={class:"flex mt-4 justify-end"},Ee=U({name:"admin"}),Et=U({...Ee,setup(xe){const v=me(),m=re({account:"",name:"",role_id:""}),h=pe(!1),{pager:p,getLists:u,resetParams:K,resetPage:y}=ye({fetchFun:F,params:m}),L=l=>{ve({id:l.id,account:l.account,name:l.name,role_id:l.role_id,disable:l.disable,multipoint_login:l.multipoint_login}).finally(()=>{u()})},z=async()=>{var l;h.value=!0,await $(),(l=v.value)==null||l.open("add")},B=async l=>{var n,_;h.value=!0,await $(),(n=v.value)==null||n.open("edit"),(_=v.value)==null||_.setFormData(l)},I=async l=>{await ne.confirm("确定要删除？"),await he({id:l}),u()},{optionsData:P}=ge({role:{api:we}});return de(()=>{u()}),(l,n)=>{const _=H,w=Q,C=Z,R=q,f=J,S=se,T=W,V=X,A=ie,i=Y,N=ee,M=te,O=oe,j=le,g=ce("perms"),G=ae;return s(),E("div",ke,[e(V,{class:"!border-none",shadow:"never"},{default:a(()=>[e(T,{class:"mb-[-16px]",model:o(m),inline:""},{default:a(()=>[e(w,{label:"管理员账号"},{default:a(()=>[e(_,{modelValue:o(m).account,"onUpdate:modelValue":n[0]||(n[0]=t=>o(m).account=t),class:"w-[280px]",clearable:"",onKeyup:x(o(y),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(w,{label:"管理员名称"},{default:a(()=>[e(_,{modelValue:o(m).name,"onUpdate:modelValue":n[1]||(n[1]=t=>o(m).name=t),class:"w-[280px]",clearable:"",onKeyup:x(o(y),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(w,{label:"管理员角色"},{default:a(()=>[e(R,{class:"w-[280px]",modelValue:o(m).role_id,"onUpdate:modelValue":n[2]||(n[2]=t=>o(m).role_id=t)},{default:a(()=>[e(C,{label:"全部",value:""}),(s(!0),E(ue,null,_e(o(P).role,(t,d)=>(s(),r(C,{key:d,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(w,null,{default:a(()=>[e(f,{type:"primary",onClick:o(y)},{default:a(()=>[c("查询")]),_:1},8,["onClick"]),e(f,{onClick:o(K)},{default:a(()=>[c("重置")]),_:1},8,["onClick"]),e(S,{class:"ml-2.5","fetch-fun":o(F),params:o(m),"page-size":o(p).size},null,8,["fetch-fun","params","page-size"])]),_:1})]),_:1},8,["model"])]),_:1}),b((s(),r(V,{class:"mt-4 !border-none",shadow:"never"},{default:a(()=>[b((s(),r(f,{type:"primary",onClick:z},{icon:a(()=>[e(A,{name:"el-icon-Plus"})]),default:a(()=>[c(" 新增 ")]),_:1})),[[g,["auth.admin/add"]]]),D("div",Ce,[e(O,{data:o(p).lists,size:"large"},{default:a(()=>[e(i,{label:"ID",prop:"id","min-width":"60"}),c("> "),e(i,{label:"头像","min-width":"100"},{default:a(({row:t})=>[e(N,{size:50,src:t.avatar},null,8,["src"])]),_:1}),e(i,{label:"账号",prop:"account","min-width":"100"}),e(i,{label:"名称",prop:"name","min-width":"100"}),e(i,{label:"角色",prop:"role_name","min-width":"100","show-tooltip-when-overflow":""}),e(i,{label:"部门",prop:"dept_name","min-width":"100","show-tooltip-when-overflow":""}),e(i,{label:"创建时间",prop:"create_time","min-width":"180"}),e(i,{label:"最近登录时间",prop:"login_time","min-width":"180"}),e(i,{label:"最近登录IP",prop:"login_ip","min-width":"120"}),b((s(),r(i,{label:"状态","min-width":"100"},{default:a(({row:t})=>[t.root!=1?(s(),r(M,{key:0,modelValue:t.disable,"onUpdate:modelValue":d=>t.disable=d,"active-value":0,"inactive-value":1,onChange:d=>L(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])):k("",!0)]),_:1})),[[g,["auth.admin/edit"]]]),e(i,{label:"操作",width:"120",fixed:"right"},{default:a(({row:t})=>[b((s(),r(f,{type:"primary",link:"",onClick:d=>B(t)},{default:a(()=>[c(" 编辑 ")]),_:2},1032,["onClick"])),[[g,["auth.admin/edit"]]]),t.root!=1?b((s(),r(f,{key:0,type:"danger",link:"",onClick:d=>I(t.id)},{default:a(()=>[c(" 删除 ")]),_:2},1032,["onClick"])),[[g,["auth.admin/delete"]]]):k("",!0)]),_:1})]),_:1},8,["data"])]),D("div",Ve,[e(j,{modelValue:o(p),"onUpdate:modelValue":n[3]||(n[3]=t=>fe(p)?p.value=t:null),onChange:o(u)},null,8,["modelValue","onChange"])])]),_:1})),[[G,o(p).loading]]),o(h)?(s(),r(be,{key:0,ref_key:"editRef",ref:v,onSuccess:o(u),onClose:n[4]||(n[4]=t=>h.value=!1)},null,8,["onSuccess"])):k("",!0)])}}});export{Et as default};
