import{x as O,y as P,C as j,K as q,L as K,A as M}from"./element-plus-69d92160.js";import{U as z}from"./index-e65fd93b.js";import{P as G}from"./index-943d816c.js";import{r as c}from"./index-90bac5cf.js";import"./lodash-f986f62a.js";import{d as v,b5 as b,r as H,b as J,b2 as h,o as d,c as w,M as l,aR as n,a_ as s,L as Q,F as W,ao as X,x as Y}from"./@vue-a164be7a.js";function pe(a){return c.get({url:"/e_contract_template/lists",params:a})}function Z(a){return c.post({url:"/e_contract_template/add",params:a})}function $(a){return c.post({url:"/e_contract_template/edit",params:a})}function ee(a){return c.get({url:"/e_contract_template/detail",params:a})}function ue(a){return c.get({url:"/e_contract_template/templateEditUrl",params:a})}const te={class:"edit-popup"},ae=v({name:"eContractTemplateEdit"}),ie=v({...ae,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(a,{expose:y,emit:C}){const _=C,f=b(),u=b(),i=H("add"),g=J(()=>i.value=="edit"?"编辑合同模版":"新增合同模版"),o=h({id:"",file_name:"",file_path:"",doc_template_id:"",show_status:1}),x=h({}),E=async e=>{for(const t in o)e[t]!=null&&e[t]!=null&&(o[t]=e[t])},T=async e=>{const t=await ee({id:e.id});E(t)},V=async()=>{var t,p;await((t=f.value)==null?void 0:t.validate());const e={...o};i.value=="edit"?await $(e):await Z(e),(p=u.value)==null||p.close(),_("success")},k=(e="add")=>{var t;i.value=e,(t=u.value)==null||t.open()},R=()=>{_("close")},D=e=>{console.log("上传文件的状态发生改变",e)},U=e=>{o.file_name=e.data.name,o.file_path=e.data.url,console.log("上传文件成功",e)},F=e=>{console.log("上传文件失败",e)};return y({open:k,setFormData:E,getDetail:T}),(e,t)=>{const p=O,m=P,B=j,L=z,I=q,S=K,A=M;return d(),w("div",te,[l(G,{ref_key:"popupRef",ref:u,title:s(g),async:!0,width:"550px",onConfirm:V,onClose:R},{default:n(()=>[l(A,{ref_key:"formRef",ref:f,model:s(o),"label-width":"90px",rules:s(x)},{default:n(()=>[l(m,{label:"合同名称",prop:"file_name"},{default:n(()=>[l(p,{modelValue:s(o).file_name,"onUpdate:modelValue":t[0]||(t[0]=r=>s(o).file_name=r),clearable:"",placeholder:"请输入合同名称"},null,8,["modelValue"])]),_:1}),l(m,{label:"原合同文件",prop:"file_name"},{default:n(()=>[l(L,{type:"doc","show-progress":!0,onChange:D,onSuccess:U,onError:F},{default:n(()=>[l(B,{type:"primary"},{default:n(()=>[Q("上传合同")]),_:1})]),_:1})]),_:1}),l(m,{label:"显示状态",prop:"show_status"},{default:n(()=>[l(S,{class:"flex-1",modelValue:s(o).show_status,"onUpdate:modelValue":t[1]||(t[1]=r=>s(o).show_status=r),clearable:"",placeholder:"请选择显示状态"},{default:n(()=>[(d(!0),w(W,null,X(a.dictData.show_status,(r,N)=>(d(),Y(I,{key:N,label:r.name,value:parseInt(r.value)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{ie as _,ue as a,$ as b,pe as c};
