import{d as Q,r as E,o as a,c as r,a as e,a_ as t,M as d,y as u,aB as c,aR as g,F as L,ao as R,ae as w,aT as V,aO as Y,L as X,aW as A}from"./@vue-a164be7a.js";import"./adapter-vue-24f22062.js";import{B as T,q as Z,o as tt,z as l,W as et,_ as it}from"./@tencentcloud-7fc831ec.js";import{d as ot}from"./dayjs-0ab82212.js";import{T as U}from"./index-cfdb213d.js";import{_ as S}from"./EditProfilePopup.vue_vue_type_script_setup_true_lang-e0802343.js";import st from"./index-7552e016.js";import G from"./index-6b0c1d9b.js";import h from"./Icon-2c0593f3.js";import{b as lt}from"./back-16f17fde.js";import{e as C}from"./right-icon-89a49395.js";import{i as p,a as v}from"./env-a593fd1d.js";import{e as nt}from"./enableSampleTaskStatus-a12ec87d.js";import{T as I}from"./index-e4ac2ab7.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";import"./index-b5b8c0ea.js";import"./date-picker-panel-c0a79893.js";import"./date-table-8e59b520.js";const at="/admin/assets/calendar-084515e7.svg",rt={class:"title"},dt={class:"title-name"},ct={class:"edit-form"},ft={key:0,class:"edit-form-space"},mt={class:"edit-form-item"},ut={class:"form-label"},pt={class:"avatar-list"},vt=["onClick"],_t={key:1,class:"edit-form-space"},ht={class:"edit-form-item"},kt={class:"form-label"},gt={class:"form-info-content"},bt={class:"edit-form-item"},Pt={class:"form-label"},yt={class:"form-info"},St={key:2,class:"edit-form-space"},Ct={class:"edit-form-item"},Et={class:"form-label"},wt={class:"form-info-content"},xt={class:"edit-form-item"},Ot={class:"form-label"},Bt={class:"gender-list"},Tt=["onClick"],Nt=["onClick"],zt=["value","checked"],Dt={class:"edit-form-item"},$t={class:"form-label"},jt={class:"form-info-content"},Mt={class:"birthday-container"},Lt={key:0,class:"edit-footer"},Rt="https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_",Vt=Q({__name:"EditProfile",emits:["closeEditProfileBox"],setup(Yt,{emit:F}){var z,D,$,j,M;const W=F,q=["1.png","2.png","3.png","4.png","5.png","6.png"].map(s=>Rt+s),N={[T.TYPES.GENDER_MALE]:"男",[T.TYPES.GENDER_FEMALE]:"女",[T.TYPES.GENDER_UNKNOWN]:"不显示"},f=E({}),m=E({avatar:(z=f.value)==null?void 0:z.avatar,nick:(D=f.value)==null?void 0:D.nick,selfSignature:($=f.value)==null?void 0:$.selfSignature,gender:(j=f.value)==null?void 0:j.gender,birthday:(M=f.value)==null?void 0:M.birthday}),x=E({}),_=E("");Z.watch(tt.USER,{userProfile:s=>{f.value=s;const{avatar:i,nick:o,selfSignature:n,gender:B,birthday:J}=s;m.value={avatar:i,nick:o,selfSignature:n,gender:B,birthday:J},x.value=H(s.birthday)}});function H(s){var n;let i=null,o="";return s&&typeof s=="number"&&(i=ot(s.toString(),"YYYYMMDD"),o=i.format("YYYY/MM/DD")),{obj:i,format:o,value:((n=f.value)==null?void 0:n.birthday)||0}}function b(s){_.value=s}function P(){_.value=""}function K(s){m.value.birthday=parseInt(s.format("YYYYMMDD"),10)}function O(s,i){Object.prototype.hasOwnProperty.call(m.value,s)&&(m.value[s]=i)}function y(){W("closeEditProfileBox")}function k(){let s=m.value.nick!==f.value.nick;const i=Object.fromEntries(Object.entries(m.value).filter(([o,n])=>n!=null&&n!==""));et.updateMyProfile(i).then(()=>{s&&nt("modifyNickName"),U({message:l.t("Profile.修改个人资料成功"),type:I.SUCCESS}),v&&y()}).catch(o=>{U({message:l.t("Profile.修改个人资料失败")+(o==null?void 0:o.message),type:I.ERROR}),v&&y()})}return(s,i)=>(a(),r("div",{class:w(["edit-profile-container container dialog",[t(p)?"edit-profile-container-h5":"edit-profile-container-pc"]]),onClick:y,onMousedown:i[8]||(i[8]=A(()=>{},["stop"]))},[e("div",{class:w(["edit-profile-box"]),onClick:i[7]||(i[7]=A(()=>{},["stop"]))},[e("header",rt,[t(p)?(a(),r("div",{key:0,class:"title-back",onClick:y},[d(h,{file:t(lt)},null,8,["file"])])):u("",!0),e("div",dt,c(t(l).t("Profile.编辑资料")),1)]),e("div",ct,[t(p)?(a(),r("div",ft)):u("",!0),e("div",mt,[e("div",ut,c(t(l).t("Profile.头像")),1),t(p)?(a(),r("div",{key:0,class:"form-info",onClick:i[0]||(i[0]=o=>b("avatar"))},[d(G,{useSkeletonAnimation:"",url:t(f).avatar,size:"60px"},null,8,["url"]),d(h,{class:"form-info-arrow",file:t(C),size:"14px"},null,8,["file"])])):u("",!0),d(S,{class:"form-item",show:t(v)||t(_)==="avatar",title:t(l).t("Profile.选择头像"),onOnClose:P,onOnSubmit:k},{default:g(()=>[e("ul",pt,[(a(!0),r(L,null,R(t(q),o=>(a(),r("li",{class:w(["avatar-list-item",t(m).avatar===o&&"avatar-list-item-selected"]),key:o,onClick:n=>O("avatar",o)},[d(G,{useSkeletonAnimation:"",url:o,size:t(v)?"36px":"50px"},null,8,["url","size"])],10,vt))),128))])]),_:1},8,["show","title"])]),t(p)?(a(),r("div",_t)):u("",!0),e("div",ht,[e("div",kt,c(t(l).t("Profile.昵称")),1),t(p)?(a(),r("div",{key:0,class:"form-info",onClick:i[1]||(i[1]=o=>b("nick"))},[e("div",gt,c(t(f).nick),1),d(h,{class:"form-info-arrow",file:t(C),size:"14px"},null,8,["file"])])):u("",!0),d(S,{class:"form-item",show:t(v)||t(_)==="nick",title:t(l).t("Profile.设置昵称"),onOnClose:P,onOnSubmit:k},{default:g(()=>[V(e("input",{class:"form-item-input",type:"text","onUpdate:modelValue":i[2]||(i[2]=o=>t(m).nick=o)},null,512),[[Y,t(m).nick]])]),_:1},8,["show","title"])]),e("div",bt,[e("div",Pt,c(t(l).t("Profile.账号")),1),e("div",yt,c(t(f).userID),1)]),t(p)?(a(),r("div",St)):u("",!0),e("div",Ct,[e("div",Et,c(t(l).t("Profile.个性签名")),1),t(p)?(a(),r("div",{key:0,class:"form-info",onClick:i[3]||(i[3]=o=>b("selfSignature"))},[e("div",wt,c(t(f).selfSignature),1),d(h,{class:"form-info-arrow",file:t(C),size:"14px"},null,8,["file"])])):u("",!0),d(S,{class:"form-item",show:t(v)||t(_)==="selfSignature",title:t(l).t("Profile.个性签名"),onOnClose:P,onOnSubmit:k},{default:g(()=>[V(e("input",{class:"form-item-input",type:"text","onUpdate:modelValue":i[4]||(i[4]=o=>t(m).selfSignature=o)},null,512),[[Y,t(m).selfSignature]])]),_:1},8,["show","title"])]),e("div",xt,[e("div",Ot,c(t(l).t("Profile.性别")),1),t(p)?(a(),r("div",{key:0,class:"form-info",onClick:i[5]||(i[5]=o=>b("gender"))},[e("div",null,c(t(f).gender&&t(l).t(`Profile.${N[t(f).gender]}`)||""),1),d(h,{class:"form-info-arrow",file:t(C),size:"14px"},null,8,["file"])])):u("",!0),d(S,{class:"form-item",show:t(v)||t(_)==="gender",title:t(l).t("Profile.性别选择"),onOnClose:P,onOnSubmit:k},{default:g(()=>[e("ul",Bt,[(a(),r(L,null,R(N,(o,n)=>e("li",{class:"gender-list-li",key:n,onClick:B=>O("gender",n)},[e("div",{class:w(["gender-list-item",t(m).gender===n&&"gender-list-item-selected"]),onClick:B=>O("gender",n)},[t(v)?(a(),r("input",{key:0,class:"gender-list-radio",type:"radio",name:"gender",value:n,checked:t(m).gender===n},null,8,zt)):u("",!0),X(" "+c(t(l).t(`Profile.${o}`)),1)],10,Nt)],8,Tt)),64))])]),_:1},8,["show","title"])]),e("div",Dt,[e("div",$t,c(t(l).t("Profile.出生年月")),1),t(p)?(a(),r("div",{key:0,class:"form-info",onClick:i[6]||(i[6]=o=>b("birthday"))},[e("div",jt,c(t(x).format),1),d(h,{class:"form-info-arrow",file:t(C),size:"14px"},null,8,["file"])])):u("",!0),d(S,{class:"form-item",show:t(v)||t(_)==="birthday",title:t(l).t("Profile.请选择出生日期"),onOnClose:P,onOnSubmit:k},{default:g(()=>[e("div",Mt,[d(t(st),{class:"birthday-date-picker",type:"single",rangeTableType:"one",startPlaceholder:t(l).t("Profile.请选择出生日期"),popupPosition:"top",defaultSingleDate:t(x).obj,onPick:K},{"end-icon":g(()=>[d(h,{file:t(at),size:"16px"},null,8,["file"])]),_:1},8,["startPlaceholder","defaultSingleDate"])])]),_:1},8,["show","title"])])]),t(p)?u("",!0):(a(),r("footer",Lt,[e("button",{class:"btn-close",onClick:y},c(t(l).t("Profile.取消")),1),e("button",{class:"btn-save",onClick:k},c(t(l).t("Profile.保存")),1)]))])],34))}});const ve=it(Vt,[["__scopeId","data-v-2a0f0965"]]);export{ve as default};
