import{d as T,r as p,w as f,o as d,c as m,a_ as e,ae as i,a as u,M as U,aW as y,aB as C,y as g,aT as V,aO as k,b0 as w,aU as M}from"./@vue-a164be7a.js";import{z as v,i as _,R as E,r as h,q as I,o as x,_ as b}from"./@tencentcloud-7fc831ec.js";import{l as D}from"./lodash-f986f62a.js";import{a as o}from"./env-a593fd1d.js";import N from"./Icon-2c0593f3.js";import{b as O}from"./back-16f17fde.js";import"./adapter-vue-24f22062.js";import"./tim-upload-plugin-4412696f.js";import"./tim-profanity-filter-plugin-a7e08ee8.js";import"./vue-84471dcb.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-6995d964.js";import"./trtc-sdk-v5-5ba82a9e.js";import"./pinia-ec219911.js";import"./mitt-f7ef348c.js";import"./interactjs-0d94d9f4.js";import"./rtc-detect-b2f0fa0a.js";import"./tuicall-engine-webrtc-9ec0a575.js";const B="/admin/assets/add-ea3b9dc9.svg",A=["placeholder"],H=T({__name:"index",setup(z){const R=v.t("TUIContact.输入ID"),a=p(!1),c=p(""),r=p({user:{label:"联系人",list:[]},group:{label:"群聊",list:[]}}),S=D.debounce(function(t){a.value=t},200),n=async()=>{c.value&&(E.callService({serviceName:h.TUISearch.SERVICE.NAME,method:h.TUISearch.SERVICE.METHOD.SEARCH_USER,params:{userID:c.value}}).then(t=>{r.value.user.list=t.data}).catch(t=>{r.value.user.list=[],console.warn("search user error",t)}),E.callService({serviceName:h.TUISearch.SERVICE.NAME,method:h.TUISearch.SERVICE.METHOD.SEARCH_GROUP,params:{groupID:c.value}}).then(t=>{r.value.group.list=[t.data.group]}).catch(t=>{r.value.group.list=[],console.warn("search group error",t)}))};return f(()=>r.value,()=>{I.update(x.CUSTOM,"currentContactSearchResult",r.value)},{deep:!0,immediate:!0}),f(()=>a.value,()=>{I.update(x.CUSTOM,"currentContactSearchingStatus",a.value),a.value&&(c.value="",r.value.user.list=[],r.value.group.list=[])},{deep:!0,immediate:!0}),_.updateContactSearch=n,_.closeSearching=()=>{a.value=!1},(t,s)=>(d(),m("div",{class:i(["tui-contact-search",!e(o)&&"tui-contact-search-h5"])},[!e(a)||!e(o)?(d(),m("div",{key:0,class:i(["tui-contact-search-header",!e(o)&&"tui-contact-search-h5-header",e(a)&&"tui-contact-searching-h5-header"]),onClick:s[1]||(s[1]=l=>e(S)(!0))},[u("div",{class:i(["tui-contact-search-header-icon",!e(o)&&"tui-contact-search-h5-header-icon"]),onClick:s[0]||(s[0]=y(l=>e(S)(!e(a)),["stop"]))},[U(N,{file:e(a)?e(O):e(B),width:e(a)?"20px":"14px",height:e(a)?"20px":"14px"},null,8,["file","width","height"])],2),u("div",{class:i(["tui-contact-search-header-title",!e(o)&&"tui-contact-search-h5-header-title"])},C(e(v).t("TUIContact.添加好友/群聊")),3)],2)):g("",!0),e(a)?(d(),m("div",{key:1,class:i(["tui-contact-search-main",!e(o)&&"tui-contact-search-h5-main"])},[V(u("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>w(c)?c.value=l:null),class:"tui-contact-search-main-input",type:"text",placeholder:e(R),enterkeyhint:"search",onKeyup:M(n,["enter"]),onBlur:n,onConfirm:n},null,40,A),[[k,e(c)]]),u("div",{class:"tui-contact-search-main-cancel",onClick:s[3]||(s[3]=l=>a.value=!1)},C(e(v).t("取消")),1)],2)):g("",!0)],2))}});const se=b(H,[["__scopeId","data-v-41e7a7e4"]]);export{se as default};
