import{k as e,m as l,aG as a,s as t,z as u,ah as s,o as r,p as o,f as n,w as d,h as i,t as c,F as v,aH as m,an as f,ao as p,aI as _,aJ as b,A as x,d as y,e as h,i as w,ae as k,af as g,ag as V}from"./index-40b5c4cd.js";import{_ as j}from"./avatar-upload.4a287532.js";import{_ as C}from"./u-icon.4067ae16.js";import{_ as U}from"./u-button.d0ae8aa1.js";import{_ as A,a as E}from"./u-form-item.8f125d67.js";import{_ as $}from"./u-popup.2526b79a.js";import{_ as z}from"./u-picker.0e3c7c6c.js";import{_ as B}from"./u-verification-code.c21d5ee3.js";import{_ as N}from"./_plugin-vue_export-helper.1b428a4d.js";import"./util.b50fc651.js";import"./_commonjsHelpers.02d3be64.js";import"./emitter.1571a5d9.js";const I=N(e({__name:"user_data",setup(e){const N=e=>{var l;return null==(l=I.value.find((l=>l.value===e)))?void 0:l.label},I=l([{label:"招聘顾问",value:2},{label:"驻场经理",value:3},{label:"求职者",value:4}]),M=l({}),F=l(a.NONE),G=l(["男","女"]),H=l(!1),O=l(!1),R=l(!1),S=l(!1),L=l(""),D=l(""),J=l(""),K=l(""),P=l(""),Q=t(),T=async()=>{M.value=await m()},W=e=>{P.value=e},X=async()=>{var e,l;if(!J.value)return uni.$u.toast("请输入新的手机号码");(null==(e=Q.value)?void 0:e.canGetCode)&&(await f({scene:M.value.mobile?p.CHANGE_MOBILE:p.BIND_MOBILE,mobile:J.value}),uni.$u.toast("发送成功"),null==(l=Q.value)||l.start())},q=e=>{F.value=a.AVATAR,Z(e)},Y=async()=>{await _({type:M.value.mobile?"change":"bind",mobile:J.value,code:K.value}),uni.$u.toast("操作成功"),S.value=!1,T()},Z=async e=>{await b({field:F.value,value:e}),uni.$u.toast("操作成功"),T()},ee=()=>{R.value=!0,F.value=a.SEX},le=e=>{Z(e[0]+1),R.value=!1},ae=()=>""==D.value?uni.$u.toast("账号不能为空"):D.value.length>10?uni.$u.toast("账号长度不得超过十位数"):(F.value=a.USERNAME,Z(D.value),void(O.value=!1)),te=async e=>(L.value=e.detail.value.nickname,""==L.value?uni.$u.toast("昵称不能为空"):L.value.length>10?uni.$u.toast("昵称长度不得超过十位数"):(F.value=a.NICKNAME,await Z(L.value),void(H.value=!1))),ue=e=>{x({url:e})};return u((async()=>{T()})),s((()=>{})),(e,l)=>{const a=y(h("avatar-upload"),j),t=w,u=y(h("u-icon"),C),s=y(h("u-button"),U),m=k,f=y(h("u-form-item"),A),p=g,_=V,b=y(h("u-popup"),$),x=y(h("u-input"),E),I=y(h("u-picker"),z),F=y(h("u-verification-code"),B);return r(),o(v,null,[n(t,{class:"header bg-white pt-[30rpx]"},{default:d((()=>[n(t,{class:"flex justify-center pb-5"},{default:d((()=>{var e;return[n(a,{modelValue:null==(e=M.value)?void 0:e.avatar,"file-key":"url",round:!0,"onUpdate:modelValue":q},null,8,["modelValue"])]})),_:1})])),_:1}),n(t,{class:"item text-nr flex justify-between",onClick:l[0]||(l[0]=e=>{var l;O.value=!0,D.value=null==(l=M.value)?void 0:l.username})},{default:d((()=>[n(t,{class:"label"},{default:d((()=>[i("账号")])),_:1}),n(t,{class:"content"},{default:d((()=>{var e;return[i(c(null==(e=M.value)?void 0:e.account),1)]})),_:1}),n(u,{name:"arrow-right",size:"22",color:"#666"})])),_:1}),n(t,{class:"item text-nr flex justify-between",onClick:l[1]||(l[1]=e=>{var l;H.value=!0,L.value=null==(l=M.value)?void 0:l.nickname})},{default:d((()=>[n(t,{class:"label"},{default:d((()=>[i("昵称")])),_:1}),n(t,{class:"content"},{default:d((()=>{var e;return[i(c(null==(e=M.value)?void 0:e.nickname),1)]})),_:1}),n(u,{name:"arrow-right",size:"22",color:"#666"})])),_:1}),n(t,{class:"item text-nr flex justify-between",onClick:ee},{default:d((()=>[n(t,{class:"label"},{default:d((()=>[i("性别")])),_:1}),n(t,{class:"content"},{default:d((()=>{var e;return[i(c(null==(e=M.value)?void 0:e.sex),1)]})),_:1}),n(u,{name:"arrow-right",size:"22",color:"#666"})])),_:1}),n(t,{class:"item text-nr flex justify-between"},{default:d((()=>[n(t,{class:"label"},{default:d((()=>[i("手机号")])),_:1}),n(t,{class:"content"},{default:d((()=>{var e,l;return[i(c(""==(null==(e=M.value)?void 0:e.mobile)?"未绑定手机号":null==(l=M.value)?void 0:l.mobile),1)]})),_:1}),n(s,{onClick:l[2]||(l[2]=e=>S.value=!0),size:"mini",type:"primary",shape:"circle",plain:!0},{default:d((()=>{var e;return[i(c(""==(null==(e=M.value)?void 0:e.mobile)?"绑定手机号":"更换手机号"),1)]})),_:1})])),_:1}),n(t,{class:"item text-nr flex justify-between",onClick:l[3]||(l[3]=e=>ue("/pages/user_data/user_intro"))},{default:d((()=>[n(t,{class:"label"},{default:d((()=>[i("个人简介")])),_:1}),n(t,{class:"content"},{default:d((()=>{var e;return[i(c(null==(e=M.value)?void 0:e.profile),1)]})),_:1}),n(u,{name:"arrow-right",size:"22",color:"#666"})])),_:1}),n(t,{class:"item text-nr flex justify-between",onClick:l[4]||(l[4]=e=>ue("/pages/user_data/user_role"))},{default:d((()=>[n(t,{class:"label"},{default:d((()=>[i("身份")])),_:1}),n(t,{class:"content"},{default:d((()=>{var e;return[i(c(N(null==(e=M.value)?void 0:e.role)),1)]})),_:1})])),_:1}),n(t,{class:"item text-nr flex justify-between",onClick:l[5]||(l[5]=e=>ue("/pages/user_data/user_bank"))},{default:d((()=>[n(t,{class:"label"},{default:d((()=>[i("开户行")])),_:1}),n(t,{class:"content"},{default:d((()=>{var e;return[i(c(null==(e=M.value)?void 0:e.bank_name),1)]})),_:1})])),_:1}),n(t,{class:"item text-nr flex justify-between",onClick:l[6]||(l[6]=e=>ue("/pages/user_data/user_bank"))},{default:d((()=>[n(t,{class:"label"},{default:d((()=>[i("银行卡号")])),_:1}),n(t,{class:"content"},{default:d((()=>{var e;return[i(c(null==(e=M.value)?void 0:e.bank_account),1)]})),_:1})])),_:1}),n(t,{class:"item text-nr flex justify-between"},{default:d((()=>[n(t,{class:"label"},{default:d((()=>[i("登陆时间")])),_:1}),n(t,{class:"content"},{default:d((()=>{var e;return[i(c(null==(e=M.value)?void 0:e.update_time),1)]})),_:1})])),_:1}),n(b,{modelValue:H.value,"onUpdate:modelValue":l[7]||(l[7]=e=>H.value=e),closeable:!0,mode:"center",maskCloseAble:!1,"border-radius":"20"},{default:d((()=>[n(t,{class:"px-[50rpx] py-[40rpx] bg-white",style:{width:"85vw"}},{default:d((()=>[n(_,{onSubmit:te},{default:d((()=>[n(t,{class:"mb-[70rpx] text-xl text-center"},{default:d((()=>[i("修改昵称")])),_:1}),n(f,{borderBottom:""},{default:d((()=>[n(m,{class:"nr h-[60rpx] w-full",value:M.value.nickname,name:"nickname",type:"nickname",placeholder:"请输入昵称"},null,8,["value"])])),_:1}),n(t,{class:"mt-[80rpx]"},{default:d((()=>[n(p,{class:"bg-primary text-white w-full h-[80rpx] !text-lg !leading-[80rpx] rounded-full","form-type":"submit",size:"mini","hover-class":"none"},{default:d((()=>[i(" 确定 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),n(b,{modelValue:O.value,"onUpdate:modelValue":l[9]||(l[9]=e=>O.value=e),closeable:!0,mode:"center","border-radius":"20"},{default:d((()=>[n(t,{class:"px-[50rpx] py-[40rpx] bg-white",style:{width:"85vw"}},{default:d((()=>[n(t,{class:"mb-[70rpx] text-xl text-center"},{default:d((()=>[i("修改账号")])),_:1}),n(f,{borderBottom:""},{default:d((()=>[n(x,{class:"flex-1",modelValue:D.value,"onUpdate:modelValue":l[8]||(l[8]=e=>D.value=e),placeholder:"请输入账号",border:!1},null,8,["modelValue"])])),_:1}),n(t,{class:"mt-[80rpx]"},{default:d((()=>[n(s,{onClick:ae,type:"primary",shape:"circle"},{default:d((()=>[i(" 确定 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),n(I,{mode:"selector",modelValue:R.value,"onUpdate:modelValue":l[10]||(l[10]=e=>R.value=e),"confirm-color":"#4173FF","default-selector":[0],range:G.value,onConfirm:le},null,8,["modelValue","range"]),n(b,{modelValue:S.value,"onUpdate:modelValue":l[13]||(l[13]=e=>S.value=e),closeable:!0,mode:"center","border-radius":"20"},{default:d((()=>[n(t,{class:"px-[50rpx] py-[40rpx] bg-white",style:{width:"85vw"}},{default:d((()=>[n(t,{class:"mb-[70rpx] text-xl text-center"},{default:d((()=>[i("修改手机号码")])),_:1}),n(f,{borderBottom:""},{default:d((()=>[n(x,{class:"flex-1",modelValue:J.value,"onUpdate:modelValue":l[11]||(l[11]=e=>J.value=e),placeholder:"请输入新的手机号码",border:!1},null,8,["modelValue"])])),_:1}),n(f,{borderBottom:""},{default:d((()=>[n(x,{class:"flex-1",modelValue:K.value,"onUpdate:modelValue":l[12]||(l[12]=e=>K.value=e),placeholder:"请输入验证码",border:!1},null,8,["modelValue"]),n(t,{class:"border-l border-solid border-0 border-light pl-3 text-muted leading-4 ml-3 w-[180rpx]",onClick:X},{default:d((()=>[n(F,{ref_key:"uCodeRef",ref:Q,seconds:60,onChange:W,"change-text":"x秒"},null,512),i(" "+c(P.value),1)])),_:1})])),_:1}),n(t,{class:"mt-[80rpx]"},{default:d((()=>[n(s,{onClick:Y,type:"primary",shape:"circle"},{default:d((()=>[i(" 确定 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}}),[["__scopeId","data-v-efc81243"]]);export{I as default};
