import{O as N,B as U,A as Y,P as D,C as I}from"./element-plus-64da2267.js";import{q as g}from"./index-7638d9aa.js";import{P as G}from"./index-e34f0d65.js";import{d as T,b0 as y,aZ as F,b as P,o as _,c as k,G as o,aM as r,aV as l,a as u,E as f,aw as E,t as L,u as V}from"./@vue-25170201.js";function oe(){return g.get({url:"/setting.storage/lists"})}function M(d){return g.post({url:"/setting.storage/setup",params:d})}function Z(d){return g.get({url:"/setting.storage/detail",params:d})}const j={class:"edit-popup"},z={class:"form-tips"},H={key:0},J={class:"flex-1"},Q={class:"flex-1"},W=u("div",{class:"form-tips"}," 请补全http://或https://，例如https://static.cloud.com ",-1),le=T({__name:"edit",emits:["success"],setup(d,{expose:C,emit:v}){const R=v,p=y(),c=y(),t=F({engine:"",bucket:"",access_key:"",secret_key:"",domain:"",region:"",status:0}),q=[{name:"本地存储",type:"local",tips:"本地存储方式不需要配置其他参数"},{name:"七牛云存储",type:"qiniu",tips:"切换七牛云存储后，素材库需要重新上传至七牛云"},{name:"阿里云OSS",type:"aliyun",tips:"切换阿里云OSS后，素材库需要重新上传至阿里云OSS"},{name:"腾讯云OSS",type:"qcloud",tips:"切换腾讯云OSS后，素材库需要重新上传至腾讯云OSS"}],h={bucket:[{required:!0,message:"请输入存储空间名称",trigger:"blur"}],access_key:[{required:!0,message:"请输入ACCESS_KEY",trigger:"blur"}],secret_key:[{required:!0,message:"请输入SECRET_KEY",trigger:"blur"}],domain:[{required:!0,message:"请输入空间域名",trigger:"blur"}],region:[{required:!0,message:"请输入REGION",trigger:"blur"}]},b=P(()=>q.find(s=>s.type==t.engine)),x=async()=>{var s,e;await((s=p.value)==null?void 0:s.validate()),await M(t),(e=c.value)==null||e.close(),R("success")},O=async()=>{const s=await Z({engine:t.engine});for(const e in s)t[e]=s[e]},w=s=>{var e;t.engine=s,(e=c.value)==null||e.open(),O()},K=()=>{var s;(s=p.value)==null||s.resetFields()};return C({open:w}),(s,e)=>{const m=N,n=U,i=Y,A=D,B=I;return _(),k("div",j,[o(G,{ref_key:"popupRef",ref:c,title:"设置存储",async:!0,width:"550px",onConfirm:x,onClose:K},{default:r(()=>[o(B,{ref_key:"formRef",ref:p,model:l(t),"label-width":"120px",rules:h},{default:r(()=>[o(n,{label:"存储方式",prop:"engine"},{default:r(()=>{var a;return[u("div",null,[o(m,{"model-value":""},{default:r(()=>{var S;return[f(E((S=l(b))==null?void 0:S.name),1)]}),_:1}),u("div",z,E((a=l(b))==null?void 0:a.tips),1)])]}),_:1}),l(t).engine!=="local"?(_(),k("div",H,[o(n,{label:" 存储空间名称",prop:"bucket"},{default:r(()=>[u("div",J,[o(i,{modelValue:l(t).bucket,"onUpdate:modelValue":e[0]||(e[0]=a=>l(t).bucket=a),placeholder:"请输入存储空间名称(Bucket)",clearable:""},null,8,["modelValue"])])]),_:1}),o(n,{label:"ACCESS_KEY",prop:"access_key"},{default:r(()=>[o(i,{modelValue:l(t).access_key,"onUpdate:modelValue":e[1]||(e[1]=a=>l(t).access_key=a),placeholder:"请输入ACCESS_KEY(AK)",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"SECRET_KEY",prop:"secret_key"},{default:r(()=>[o(i,{modelValue:l(t).secret_key,"onUpdate:modelValue":e[2]||(e[2]=a=>l(t).secret_key=a),placeholder:"请输入SECRET_KEY(SK)",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"空间域名",prop:"domain"},{default:r(()=>[u("div",Q,[u("div",null,[o(i,{modelValue:l(t).domain,"onUpdate:modelValue":e[3]||(e[3]=a=>l(t).domain=a),placeholder:"请输入空间域名(Domain)",clearable:""},null,8,["modelValue"])]),W])]),_:1}),l(t).engine=="qcloud"?(_(),L(n,{key:0,label:"REGION",prop:"region"},{default:r(()=>[o(i,{modelValue:l(t).region,"onUpdate:modelValue":e[4]||(e[4]=a=>l(t).region=a),placeholder:"请输入region",clearable:""},null,8,["modelValue"])]),_:1})):V("",!0)])):V("",!0),o(n,{label:"状态",prop:"status"},{default:r(()=>[o(A,{modelValue:l(t).status,"onUpdate:modelValue":e[5]||(e[5]=a=>l(t).status=a)},{default:r(()=>[o(m,{label:0},{default:r(()=>[f("关闭")]),_:1}),o(m,{label:1},{default:r(()=>[f("开启")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},512)])}}});export{le as _,oe as s};
