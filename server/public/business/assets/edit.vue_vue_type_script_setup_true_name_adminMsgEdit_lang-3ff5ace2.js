import{C as x}from"./element-plus-64da2267.js";import{P as C}from"./index-e34f0d65.js";import{a as R,b as k,c as D}from"./admin_msg-4d837429.js";import{p as l}from"./index-7638d9aa.js";import{d as f,b0 as d,r as A,b as E,aZ as p,o as q,c as F,G as u,aM as B,aV as i}from"./@vue-25170201.js";const P={class:"edit-popup"},V=f({name:"adminMsgEdit"}),Z=f({...V,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(j,{expose:_,emit:y}){const m=y,n=d(),o=d(),r=A("add"),g=E(()=>r.value=="edit"?"编辑消息中心":"新增消息中心"),s=p({id:""}),h=p({msg_type:[{required:!0,message:"请选择类型",trigger:["blur"]}],title:[{required:!0,message:"请输入标题",trigger:["blur"]}],message:[{required:!0,message:"请输入内容",trigger:["blur"]}]}),c=async t=>{for(const e in s)t[e]!=null&&t[e]!=null&&(s[e]=t[e]);s.review_time=l(s.review_time,"yyyy-mm-dd hh:MM:ss"),s.create_time=l(s.create_time,"yyyy-mm-dd hh:MM:ss")},v=async t=>{const e=await R({id:t.id});c(e)},w=async()=>{var e,a;await((e=n.value)==null?void 0:e.validate());const t={...s};r.value=="edit"?await k(t):await D(t),(a=o.value)==null||a.close(),m("success")},b=(t="add")=>{var e;r.value=t,(e=o.value)==null||e.open()},M=()=>{m("close")};return _({open:b,setFormData:c,getDetail:v}),(t,e)=>{const a=x;return q(),F("div",P,[u(C,{ref_key:"popupRef",ref:o,title:i(g),async:!0,width:"550px",onConfirm:w,onClose:M},{default:B(()=>[u(a,{ref_key:"formRef",ref:n,model:i(s),"label-width":"90px",rules:i(h)},null,8,["model","rules"])]),_:1},8,["title"])])}}});export{Z as _};
