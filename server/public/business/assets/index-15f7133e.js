import{d as V,r as p,w as f,o as d,c as m,aV as e,a9 as i,a as u,G as T,aR as U,aw as C,u as g,aO as w,aJ as y,aX as k,aP as M}from"./@vue-25170201.js";import{z as v,q as _,o as E,i as I,R as x,r as h,_ as b}from"./@tencentcloud-25a17c42.js";import{l as D}from"./lodash-2cc29f39.js";import{a as o}from"./env-6b0ecdb8.js";import N from"./Icon-fec85db6.js";import{b as O}from"./back-51a4f00d.js";import"./adapter-vue-20243c9c.js";import"./tim-upload-plugin-5e9dfffb.js";import"./tim-profanity-filter-plugin-23d0f338.js";import"./vue-04189d9a.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-ca6139e0.js";import"./trtc-sdk-v5-8c3e4b7a.js";import"./pinia-1182f1fa.js";import"./mitt-f7ef348c.js";import"./interactjs-c534f49a.js";import"./rtc-detect-1f468b1b.js";const A="/business/assets/add-ea3b9dc9.svg",B=["placeholder"],G=V({__name:"index",setup(H){const R=v.t("TUIContact.输入ID"),a=p(!1),c=p(""),r=p({user:{label:"联系人",list:[]},group:{label:"群聊",list:[]}}),S=D.debounce(function(t){a.value=t},200),n=async()=>{c.value&&(x.callService({serviceName:h.TUISearch.SERVICE.NAME,method:h.TUISearch.SERVICE.METHOD.SEARCH_USER,params:{userID:c.value}}).then(t=>{r.value.user.list=t.data}).catch(t=>{r.value.user.list=[],console.warn("search user error",t)}),x.callService({serviceName:h.TUISearch.SERVICE.NAME,method:h.TUISearch.SERVICE.METHOD.SEARCH_GROUP,params:{groupID:c.value}}).then(t=>{r.value.group.list=[t.data.group]}).catch(t=>{r.value.group.list=[],console.warn("search group error",t)}))};return f(()=>r.value,()=>{_.update(E.CUSTOM,"currentContactSearchResult",r.value)},{deep:!0,immediate:!0}),f(()=>a.value,()=>{_.update(E.CUSTOM,"currentContactSearchingStatus",a.value),a.value&&(c.value="",r.value.user.list=[],r.value.group.list=[])},{deep:!0,immediate:!0}),I.updateContactSearch=n,I.closeSearching=()=>{a.value=!1},(t,s)=>(d(),m("div",{class:i(["tui-contact-search",!e(o)&&"tui-contact-search-h5"])},[!e(a)||!e(o)?(d(),m("div",{key:0,class:i(["tui-contact-search-header",!e(o)&&"tui-contact-search-h5-header",e(a)&&"tui-contact-searching-h5-header"]),onClick:s[1]||(s[1]=l=>e(S)(!0))},[u("div",{class:i(["tui-contact-search-header-icon",!e(o)&&"tui-contact-search-h5-header-icon"]),onClick:s[0]||(s[0]=U(l=>e(S)(!e(a)),["stop"]))},[T(N,{file:e(a)?e(O):e(A),width:e(a)?"20px":"14px",height:e(a)?"20px":"14px"},null,8,["file","width","height"])],2),u("div",{class:i(["tui-contact-search-header-title",!e(o)&&"tui-contact-search-h5-header-title"])},C(e(v).t("TUIContact.添加好友/群聊")),3)],2)):g("",!0),e(a)?(d(),m("div",{key:1,class:i(["tui-contact-search-main",!e(o)&&"tui-contact-search-h5-main"])},[w(u("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>k(c)?c.value=l:null),class:"tui-contact-search-main-input",type:"text",placeholder:e(R),enterkeyhint:"search",onKeyup:M(n,["enter"]),onBlur:n,onConfirm:n},null,40,B),[[y,e(c)]]),u("div",{class:"tui-contact-search-main-cancel",onClick:s[3]||(s[3]=l=>a.value=!1)},C(e(v).t("取消")),1)],2)):g("",!0)],2))}});const re=b(G,[["__scopeId","data-v-41e7a7e4"]]);export{re as default};
