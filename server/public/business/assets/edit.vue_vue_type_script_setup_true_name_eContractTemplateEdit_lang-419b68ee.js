import{A,B as M,x as N,L as O,M as P,C as G}from"./element-plus-64da2267.js";import{U as Z}from"./index-95703132.js";import{P as z}from"./index-e34f0d65.js";import{q as c}from"./index-7638d9aa.js";import"./lodash-2cc29f39.js";import{d as v,b0 as h,r as H,b as J,aZ as b,o as d,c as w,G as l,aM as n,aV as s,E as K,F as Q,aj as W,t as X}from"./@vue-25170201.js";function pe(a){return c.get({url:"/e_contract_template/lists",params:a})}function Y(a){return c.post({url:"/e_contract_template/add",params:a})}function $(a){return c.post({url:"/e_contract_template/edit",params:a})}function ee(a){return c.get({url:"/e_contract_template/detail",params:a})}function ue(a){return c.get({url:"/e_contract_template/templateEditUrl",params:a})}const te={class:"edit-popup"},ae=v({name:"eContractTemplateEdit"}),ie=v({...ae,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(a,{expose:C,emit:y}){const _=y,f=h(),u=h(),i=H("add"),g=J(()=>i.value=="edit"?"编辑合同模版":"新增合同模版"),o=b({id:"",file_name:"",file_path:"",doc_template_id:"",show_status:1}),x=b({}),E=async e=>{for(const t in o)e[t]!=null&&e[t]!=null&&(o[t]=e[t])},V=async e=>{const t=await ee({id:e.id});E(t)},T=async()=>{var t,p;await((t=f.value)==null?void 0:t.validate());const e={...o};i.value=="edit"?await $(e):await Y(e),(p=u.value)==null||p.close(),_("success")},k=(e="add")=>{var t;i.value=e,(t=u.value)==null||t.open()},D=()=>{_("close")},R=e=>{console.log("上传文件的状态发生改变",e)},U=e=>{o.file_name=e.data.name,o.file_path=e.data.url,console.log("上传文件成功",e)},B=e=>{console.log("上传文件失败",e)};return C({open:k,setFormData:E,getDetail:V}),(e,t)=>{const p=A,m=M,F=N,I=Z,L=O,S=P,j=G;return d(),w("div",te,[l(z,{ref_key:"popupRef",ref:u,title:s(g),async:!0,width:"550px",onConfirm:T,onClose:D},{default:n(()=>[l(j,{ref_key:"formRef",ref:f,model:s(o),"label-width":"90px",rules:s(x)},{default:n(()=>[l(m,{label:"合同名称",prop:"file_name"},{default:n(()=>[l(p,{modelValue:s(o).file_name,"onUpdate:modelValue":t[0]||(t[0]=r=>s(o).file_name=r),clearable:"",placeholder:"请输入合同名称"},null,8,["modelValue"])]),_:1}),l(m,{label:"原合同文件",prop:"file_name"},{default:n(()=>[l(I,{type:"doc","show-progress":!0,onChange:R,onSuccess:U,onError:B},{default:n(()=>[l(F,{type:"primary"},{default:n(()=>[K("上传合同")]),_:1})]),_:1})]),_:1}),l(m,{label:"显示状态",prop:"show_status"},{default:n(()=>[l(S,{class:"flex-1",modelValue:s(o).show_status,"onUpdate:modelValue":t[1]||(t[1]=r=>s(o).show_status=r),clearable:"",placeholder:"请选择显示状态"},{default:n(()=>[(d(!0),w(Q,null,W(a.dictData.show_status,(r,q)=>(d(),X(L,{key:q,label:r.name,value:parseInt(r.value)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{ie as _,ue as a,$ as b,pe as c};
