import{W as x,Z as H}from"./@tencentcloud-25a17c42.js";import"./adapter-vue-20243c9c.js";import b from"./index-11528969.js";import G from"./index-fda4f051.js";import{a as D}from"./env-6b0ecdb8.js";import{d as k,r as u,b as B,w as P,o as U,t as W,aM as Z,G as j,aV as r}from"./@vue-25170201.js";const T=k({__name:"index",props:{type:{type:String,default:""},currentConversation:{type:Object,default:()=>({})},isGroup:{type:Boolean,default:!1}},emits:["submit","cancel"],setup(g,{expose:I,emit:C}){const o=g,f=C,c=u(!1),n=u(""),l=u([]),s=u([]),h=u(""),m={voiceCall:"发起群语音",videoCall:"发起群视频"},y=B(()=>m[o.type]?m[o.type]:"");x.getUserProfile().then(t=>{var a;(a=t==null?void 0:t.data)!=null&&a.userID&&(h.value=t.data.userID)}),P(()=>{var t;return[(t=o==null?void 0:o.currentConversation)==null?void 0:t.conversationID,c.value]},(t,a)=>{t&&t!==a&&(o.isGroup&&c.value?(n.value=o.currentConversation.groupProfile.groupID,H.getGroupMemberList({groupID:n.value}).then(e=>{var i,d;l.value=(d=(i=e==null?void 0:e.data)==null?void 0:i.memberList)==null?void 0:d.filter(v=>(v==null?void 0:v.userID)!==h.value),s.value=l.value})):(n.value="",l.value=[],s.value=l.value))},{immediate:!0});const w=t=>{var e;const a=(e=l.value)==null?void 0:e.filter(i=>(i==null?void 0:i.userID)===t);s.value=a!=null&&a.length?a:l.value},_=t=>{const a=[];t==null||t.forEach(e=>{e!=null&&e.userID&&a.push(e.userID)}),o.type==="voiceCall"?f("submit",{userIDList:a,groupID:n.value,type:1}):o.type==="videoCall"&&f("submit",{userIDList:a,groupID:n.value,type:2}),s.value=l.value,p(!1)},S=()=>{s.value=l.value,f("cancel"),p(!1)},p=t=>{c.value=t};return I({toggleShow:p}),(t,a)=>(U(),W(b,{show:r(c),isH5:!r(D),isHeaderShow:!1,isFooterShow:!1,background:!1,"onUpdate:show":p},{default:Z(()=>[j(G,{isSearch:!0,title:r(y),list:r(s),isH5:!r(D),isRadio:!1,onSearch:w,onSubmit:_,onCancel:S},null,8,["title","list","isH5"])]),_:1},8,["show","isH5"]))}});export{T as _};
