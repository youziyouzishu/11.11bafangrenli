import"./adapter-vue-20243c9c.js";import{q as o,o as a,I as N,i as E,_ as U}from"./@tencentcloud-25a17c42.js";import V from"./index-517c8d25.js";import{S as _,s as P}from"./index-abae49e6.js";import A from"./index-fc18f8da.js";import q from"./index-007289e5.js";import{s as F}from"./search-type-list-06b12619.js";import{c as s,a as t}from"./env-6b0ecdb8.js";import"./type-96adc8a0.js";import{d as G,r as m,b as O,aU as W,aW as z,aV as e,o as c,c as T,a9 as l,a as $,G as n,t as H,u,aM as f}from"./@vue-25170201.js";import"./tim-upload-plugin-5e9dfffb.js";import"./tim-profanity-filter-plugin-23d0f338.js";import"./vue-04189d9a.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-ca6139e0.js";import"./trtc-sdk-v5-8c3e4b7a.js";import"./pinia-1182f1fa.js";import"./mitt-f7ef348c.js";import"./interactjs-c534f49a.js";import"./rtc-detect-1f468b1b.js";import"./Icon-fec85db6.js";import"./search-8a2a0342.js";import"./input-close-4e859ba7.js";import"./dayjs-346d7cd4.js";import"./index-c86991f7.js";import"./date-picker-panel-245cd44c.js";import"./date-table-21a73c34.js";import"./down-icon-9d19ec5a.js";import"./close-dark-2378607d.js";import"./index-fed2cc2c.js";import"./message-abstract-text-e294c4bd.js";import"./index-8f711959.js";import"./index-7638d9aa.js";import"./element-plus-64da2267.js";import"./lodash-es-fbce1780.js";import"./async-validator-dee29e8b.js";import"./@element-plus-9559a6ac.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./normalize-wheel-es-ed76fb12.js";import"./@vueuse-944ef3f4.js";import"./lodash-2cc29f39.js";import"./axios-67477f72.js";import"./vue-router-f7517f62.js";import"./css-color-function-7acc3e97.js";import"./color-9254db0b.js";import"./clone-db6b0f3b.js";import"./color-convert-946e453a.js";import"./color-name-b7949e8c.js";import"./color-string-6fa48439.js";import"./balanced-match-51764fed.js";import"./ms-f6814399.js";import"./nprogress-ccaead9e.js";import"./@tiptap-008a465d.js";import"./prosemirror-state-c544e594.js";import"./prosemirror-model-8b0495eb.js";import"./orderedmap-1b52af60.js";import"./prosemirror-transform-fc1f2a72.js";import"./prosemirror-view-ef3f9f96.js";import"./prosemirror-keymap-776f822d.js";import"./w3c-keyname-a25e4cc1.js";import"./prosemirror-commands-5c2a1a07.js";import"./prosemirror-schema-list-1c96ec4d.js";import"./vue-clipboard3-f5f9feb9.js";import"./clipboard-3d849c41.js";import"./echarts-d6620a89.js";import"./zrender-9797a04d.js";import"./tslib-54e39b60.js";import"./highlight.js-1b502259.js";import"./@highlightjs-7a15facb.js";import"./path-to-regexp-767716ea.js";import"./constant-bad60a54.js";import"./message-abstract-file-f391c9eb.js";import"./message-abstract-custom-1a52be48.js";import"./type-check-5e73d261.js";import"./star-light-46b224d3.js";import"./message-abstract-image-0e6a77c1.js";import"./message-abstract-video-36f588fb.js";import"./video-play-6934d780.js";import"./index-ebb29dde.js";import"./index-9521edcb.js";import"./index-62e29204.js";import"./index-e5a643d7.js";import"./index-4fed586a.js";import"./right-icon-312a665a.js";import"./enableSampleTaskStatus-86998722.js";const j=G({__name:"index",props:{searchType:{default:()=>s?"conversation":"global"}},setup(M){const i=M,y=m(),d=m(""),h=m(!1),p=m(s),B=O(()=>!t&&(i.searchType==="global"&&h.value||i.searchType==="conversation"&&p.value)),C=r=>{o.update(a.SEARCH,"currentSearchInputValue",{value:"",searchType:r}),o.update(a.SEARCH,"currentSearchMessageType",{value:F[r],searchType:r}),o.update(a.SEARCH,"currentSearchMessageTime",{value:P,searchType:r})};function g(r){!s&&d.value!==r&&I(),d.value=r}function b(r){var S,w,R,k;(r==null?void 0:r.searchType)===i.searchType&&(h.value=r==null?void 0:r.isSearching,(r==null?void 0:r.searchType)==="global"&&y.value&&t&&r.isSearching&&N.listen({domRefs:y.value,handler:D}),(r==null?void 0:r.searchType)==="global"&&s&&(r.isSearching?(w=(S=E)==null?void 0:S.hideTabBar())==null||w.catch(()=>{}):(k=(R=E)==null?void 0:R.showTabBar())==null||k.catch(()=>{})))}function v(r){p.value=!!r,p.value&&C(i.searchType)}W(()=>{["global","conversation"].forEach(r=>{C(r)}),o.watch(a.CONV,{currentConversationID:g}),o.watch(a.SEARCH,{currentSearchingStatus:b,isShowInConversationSearch:v})}),z(()=>{o.unwatch(a.CONV,{currentConversationID:g}),o.unwatch(a.SEARCH,{currentSearchingStatus:b,isShowInConversationSearch:v})});function D(){o.update(a.SEARCH,"currentSearchingStatus",{isSearching:!1,searchType:i.searchType})}function I(){o.update(a.SEARCH,"isShowInConversationSearch",!1)}return(r,S)=>r.searchType==="global"||(r.searchType==="conversation"||!r.searchType&&e(s))&&e(p)?(c(),T("div",{key:0,class:l(["tui-search",!e(t)&&"tui-search-h5",`tui-search-main-${r.searchType?r.searchType:"conversation"}`,e(B)&&"tui-search-h5-full-screen"])},[r.searchType==="global"?(c(),T("div",{key:0,ref_key:"globalSearchRef",ref:y,class:l(["tui-search-global",!e(t)&&"tui-search-h5-global"])},[$("div",{class:l(["tui-search-global-header",!e(t)&&"tui-search-h5-global-header"])},[n(V,{class:"search-input",searchType:r.searchType},null,8,["searchType"]),e(t)||!e(h)?(c(),H(q,{key:0,class:"search-more",searchType:r.searchType},null,8,["searchType"])):u("",!0)],2),e(h)?(c(),H(_,{key:0,class:"search-container",popupPosition:"bottom",searchType:r.searchType},{result:f(()=>[n(A,{class:"search-result",searchType:r.searchType},null,8,["searchType"])]),_:1},8,["searchType"])):u("",!0)],2)):r.searchType==="conversation"&&e(p)||e(s)?(c(),T("div",{key:1,class:l(["tui-search-conversation",!e(t)&&"tui-search-h5-conversation"])},[n(_,{class:"search-container",popupPosition:"aside",searchType:r.searchType?r.searchType:"conversation",onCloseInConversationSearch:I},{input:f(()=>[n(V,{searchType:r.searchType?r.searchType:"conversation"},null,8,["searchType"])]),result:f(()=>[n(A,{class:"search-result",searchType:r.searchType?r.searchType:"conversation"},null,8,["searchType"])]),_:1},8,["searchType"])],2)):u("",!0)],2)):u("",!0)}});const we=U(j,[["__scopeId","data-v-dc381e86"]]);export{we as default};
