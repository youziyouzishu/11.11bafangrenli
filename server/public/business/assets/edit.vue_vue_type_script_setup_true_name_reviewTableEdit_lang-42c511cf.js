import{A as U,B,a7 as F,C as A}from"./element-plus-64da2267.js";import{P as I}from"./index-e34f0d65.js";import{q as p,U as w}from"./index-7638d9aa.js";import"./lodash-2cc29f39.js";import{d as R,b0 as g,r as M,b as N,aZ as y,o as P,c as S,G as a,aM as i,aV as t,E as d,aw as c}from"./@vue-25170201.js";function X(o){return p.get({url:"/review_table/lists",params:o})}function G(o){return p.post({url:"/review_table/add",params:o})}function L(o){return p.post({url:"/review_table/edit",params:o})}function Y(o){return p.post({url:"/review_table/delete",params:o})}function O(o){return p.get({url:"/review_table/detail",params:o})}const Z={class:"edit-popup"},z=R({name:"reviewTableEdit"}),$=R({...z,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(o,{expose:V,emit:x}){const f=x,v=g(),_=g(),m=M("add"),q=N(()=>m.value=="edit"?"编辑评价":"新增评价"),r=y({id:"",project_id:"",project_name:"",reviewer_id:"",reviewer_name:"",reviewer_type:"",target_type:"",target_id:"",target_name:"",score:"",review_content:""}),E=y({project_name:[{required:!0,message:"请输入项目名称",trigger:["blur"]}],reviewer_id:[{required:!0,message:"请输入评价人",trigger:["blur"]}],reviewer_type:[{required:!0,message:"请输入评价类型",trigger:["blur"]}],target_type:[{required:!0,message:"请输入目标类型",trigger:["blur"]}],target_id:[{required:!0,message:"请输入被评价人",trigger:["blur"]}],score:[{required:!0,message:"请输入评分",trigger:["blur"]}]}),b=async l=>{for(const e in r)l[e]!=null&&l[e]!=null&&(r[e]=l[e])},T=async l=>{const e=await O({id:l.id});b(e)},j=async()=>{var e,n;await((e=v.value)==null?void 0:e.validate());const l={...r};m.value=="edit"?await L(l):await G(l),(n=_.value)==null||n.close(),f("success")},C=(l="add")=>{var e;m.value=l,(e=_.value)==null||e.open()},D=()=>{f("close")};return V({open:C,setFormData:b,getDetail:T}),(l,e)=>{const n=U,s=B,k=F,h=A;return P(),S("div",Z,[a(I,{ref_key:"popupRef",ref:_,title:t(q),async:!0,width:"550px",onConfirm:j,onClose:D},{default:i(()=>[a(h,{ref_key:"formRef",ref:v,model:t(r),"label-width":"90px",rules:t(E)},{default:i(()=>[a(s,{label:"项目名称",prop:"project_name"},{default:i(()=>[a(n,{modelValue:t(r).project_name,"onUpdate:modelValue":e[0]||(e[0]=u=>t(r).project_name=u),clearable:"",placeholder:"",disabled:!0},null,8,["modelValue"])]),_:1}),a(s,{label:"评价人",prop:"reviewer_name"},{default:i(()=>[d(c(t(r).reviewer_name),1)]),_:1}),a(s,{label:"评价类型",prop:"reviewer_type"},{default:i(()=>[d(c(t(w)[t(r).reviewer_type]),1)]),_:1}),a(s,{label:"被评价人",prop:"target_id"},{default:i(()=>[d(c(t(r).target_name),1)]),_:1}),a(s,{label:"目标类型",prop:"target_type"},{default:i(()=>[d(c(t(w)[t(r).target_type]),1)]),_:1}),a(s,{label:"评分",prop:"score"},{default:i(()=>[a(k,{modelValue:t(r).score,"onUpdate:modelValue":e[1]||(e[1]=u=>t(r).score=u),max:5},null,8,["modelValue"])]),_:1}),a(s,{label:"评价内容",prop:"review_content"},{default:i(()=>[a(n,{type:"textarea",modelValue:t(r).review_content,"onUpdate:modelValue":e[2]||(e[2]=u=>t(r).review_content=u),clearable:"",placeholder:"请输入评价内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{$ as _,Y as a,X as b};
