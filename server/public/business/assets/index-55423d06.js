import{k as me,A as ue,B as _e,L as fe,M as ve,x as be,C as ge,y as Ce,S as ye,H as ke,c as he,$ as Ve,a0 as we,a1 as Ee,Y as De,I as xe,t as $e,v as Se,J as Ie}from"./element-plus-64da2267.js";import{_ as Ue}from"./index.vue_vue_type_script_setup_true_lang-abbb91f8.js";import{_ as Te}from"./index.vue_vue_type_script_setup_true_lang-2b3723ec.js";import{d as Y,r as F,b0 as Fe,aZ as Re,w as Be,al as Le,am as Pe,o as c,c as J,G as t,aM as a,aV as l,F as Ne,aj as qe,t as m,E as i,aO as v,aX as R,a as E,aw as k,aR as B,aK as D,u as Me,b2 as je}from"./@vue-25170201.js";import{u as Ge}from"./usePaging-8178f38d.js";import{u as Ae}from"./useDictOptions-8a3829c8.js";import{u as Oe,w as K}from"./index-7638d9aa.js";import{d as X,e as He,f as Je}from"./e_contract-4d8b6690.js";import"./lodash-2cc29f39.js";import{_ as Ke}from"./edit.vue_vue_type_script_setup_true_name_eContractEdit_lang-1e3a5ea3.js";import{u as Xe,a as Ye}from"./vue-router-f7517f62.js";import"./lodash-es-fbce1780.js";import"./async-validator-dee29e8b.js";import"./@element-plus-9559a6ac.js";import"./dayjs-346d7cd4.js";import"./@tencentcloud-25a17c42.js";import"./tim-upload-plugin-5e9dfffb.js";import"./tim-profanity-filter-plugin-23d0f338.js";import"./vue-04189d9a.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-ca6139e0.js";import"./trtc-sdk-v5-8c3e4b7a.js";import"./pinia-1182f1fa.js";import"./mitt-f7ef348c.js";import"./interactjs-c534f49a.js";import"./rtc-detect-1f468b1b.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./normalize-wheel-es-ed76fb12.js";import"./@vueuse-944ef3f4.js";import"./axios-67477f72.js";import"./css-color-function-7acc3e97.js";import"./color-9254db0b.js";import"./clone-db6b0f3b.js";import"./color-convert-946e453a.js";import"./color-name-b7949e8c.js";import"./color-string-6fa48439.js";import"./balanced-match-51764fed.js";import"./ms-f6814399.js";import"./nprogress-ccaead9e.js";import"./@tiptap-008a465d.js";import"./prosemirror-state-c544e594.js";import"./prosemirror-model-8b0495eb.js";import"./orderedmap-1b52af60.js";import"./prosemirror-transform-fc1f2a72.js";import"./prosemirror-view-ef3f9f96.js";import"./prosemirror-keymap-776f822d.js";import"./w3c-keyname-a25e4cc1.js";import"./prosemirror-commands-5c2a1a07.js";import"./prosemirror-schema-list-1c96ec4d.js";import"./vue-clipboard3-f5f9feb9.js";import"./clipboard-3d849c41.js";import"./echarts-d6620a89.js";import"./zrender-9797a04d.js";import"./tslib-54e39b60.js";import"./highlight.js-1b502259.js";import"./@highlightjs-7a15facb.js";import"./path-to-regexp-767716ea.js";import"./index-e34f0d65.js";const Ze={class:"mt-4"},ze={class:"flex mt-4 justify-end"},Qe={class:"mt-4"},We={class:"flex mt-4 justify-end"},et=Y({name:"eContractLists"}),ia=Y({...et,setup(tt){const Z=Oe(),b=F("send_contract"),x=Fe(),$=F(!1),L=Xe(),z=Ye(),p=Re({template_id:"",user_id:"",to_user_id:"",type:"",send_psn_id:"",send_org_id:"",accept_psn_id:"",accept_org_id:"",name:"",is_send:"",status:"",signFlowId:"",contract_file:"",active_name:"send_contract"}),Q=F([]);b.value=L.query.type??"send_contract",p.active_name=b.value,Be(()=>b.value,(n,o)=>{p.active_name=n,z.push({query:{...L.query,type:p.active_name}})});const W=()=>{};Z.updateUserInfo();const P=n=>{Q.value=n.map(({id:o})=>o)},{dictData:g}=Ae("sign_status,sign_type"),{pager:d,getLists:h,resetParams:ee,resetPage:te}=Ge({fetchFun:Je,params:p}),N=async n=>{var o,y;$.value=!0,await je(),(o=x.value)==null||o.open("edit"),(y=x.value)==null||y.setFormData(n)},q=async n=>{await K.confirm("去签署合同？");const o=await X({id:n});window.open(o.data.url,"_blank")},ae=async n=>{await K.confirm("支付宝扫码后查阅合同");const o=await X({id:n});window.open(o.data.url,"_blank")},oe=async n=>{const o=await He({id:n});window.open(o.data.files[0].downloadUrl,"_blank")};h();const S=async n=>{const o=document.createElement("input");o.value=n,document.body.appendChild(o),o.select(),document.execCommand("Copy"),me({type:"success",message:"复制成功"}),o.remove()};return(n,o)=>{const y=ue,V=_e,M=fe,le=ve,u=be,ne=ge,j=Ce,se=ye,r=ke,I=Le("CopyDocument"),U=he,T=Ve,ie=we,re=Ee,pe=De,w=Te,G=xe,A=Ue,O=$e,ce=Se,C=Pe("perms"),de=Ie;return c(),J("div",null,[t(j,{class:"!border-none mb-4",shadow:"never"},{default:a(()=>[t(ne,{class:"mb-[-16px]",model:l(p),inline:""},{default:a(()=>[t(V,{label:"参与合同",prop:"to_user_id"},{default:a(()=>[t(y,{class:"w-[200px]",modelValue:l(p).to_user_id,"onUpdate:modelValue":o[0]||(o[0]=e=>l(p).to_user_id=e),clearable:"",placeholder:"请输入参与合同"},null,8,["modelValue"])]),_:1}),t(V,{label:"合同名称",prop:"name"},{default:a(()=>[t(y,{class:"w-[200px]",modelValue:l(p).name,"onUpdate:modelValue":o[1]||(o[1]=e=>l(p).name=e),clearable:"",placeholder:"请输入合同名称"},null,8,["modelValue"])]),_:1}),t(V,{label:"签署状态",prop:"type"},{default:a(()=>[t(le,{class:"w-[280px]",modelValue:l(p).status,"onUpdate:modelValue":o[2]||(o[2]=e=>l(p).status=e),clearable:"",placeholder:"请选签署状态"},{default:a(()=>[t(M,{label:"全部",value:""}),(c(!0),J(Ne,null,qe(l(g).sign_status,(e,s)=>(c(),m(M,{key:s,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(V,null,{default:a(()=>[t(u,{type:"primary",onClick:l(te)},{default:a(()=>[i("查询")]),_:1},8,["onClick"]),t(u,{onClick:l(ee)},{default:a(()=>[i("重置")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(se,{type:"error",class:"mb-3",title:"合同发起签署请在项目审核中发起",closable:!1,"show-icon":""}),v((c(),m(j,{class:"!border-none",shadow:"never"},{default:a(()=>[t(ce,{modelValue:l(b),"onUpdate:modelValue":o[5]||(o[5]=e=>R(b)?b.value=e:null),onTabClick:W},{default:a(()=>[t(O,{label:"我发起的合同",name:"send_contract"},{default:a(()=>[E("div",Ze,[t(G,{data:l(d).lists,onSelectionChange:P},{default:a(()=>[t(r,{width:"320",label:"合同 ID",prop:"signFlowId","show-overflow-tooltip":""}),t(r,{label:"合同名称",prop:"name","show-overflow-tooltip":""}),t(r,{label:"参与者名称",prop:"to_user_id"},{default:a(({row:e})=>[t(pe,{effect:"light",trigger:"hover",placement:"top",width:"auto"},{default:a(()=>{var s;return[t(ie,{title:(s=e.personalVerification)==null?void 0:s.name,column:2,border:""},{default:a(()=>[t(T,{label:"姓名","label-align":"right",align:"center","label-class-name":"my-label","class-name":"my-content"},{default:a(()=>{var _;return[i(k((_=e.personalVerification)==null?void 0:_.psn_name)+" ",1),t(U,{onClick:B(H=>{var f;return S((f=e.personalVerification)==null?void 0:f.psn_name)},["prevent"]),style:{cursor:"pointer"}},{default:a(()=>[t(I)]),_:2},1032,["onClick"])]}),_:2},1024),t(T,{label:"电话","label-align":"right",align:"center"},{default:a(()=>{var _;return[i(k((_=e.personalVerification)==null?void 0:_.psn_mobile),1),t(U,{onClick:B(H=>{var f;return S((f=e.personalVerification)==null?void 0:f.psn_mobile)},["prevent"]),style:{cursor:"pointer"}},{default:a(()=>[t(I)]),_:2},1032,["onClick"])]}),_:2},1024),t(T,{label:"身份证号","label-align":"right",align:"center"},{default:a(()=>{var _;return[i(k((_=e.personalVerification)==null?void 0:_.psn_id_card_num)+" ",1),t(U,{onClick:B(H=>{var f;return S((f=e.personalVerification)==null?void 0:f.psn_id_card_num)},["prevent"]),style:{cursor:"pointer"}},{default:a(()=>[t(I)]),_:2},1032,["onClick"])]}),_:2},1024)]),_:2},1032,["title"])]}),reference:a(()=>[t(re,null,{default:a(()=>{var s;return[i(k((s=e.personalVerification)==null?void 0:s.psn_name),1)]}),_:2},1024)]),_:2},1024)]),_:1}),t(r,{label:"参与者类型",prop:"type"},{default:a(({row:e})=>[t(w,{options:l(g).sign_type,value:e.type},null,8,["options","value"])]),_:1}),t(r,{label:"状态",prop:"status"},{default:a(({row:e})=>[t(w,{options:l(g).sign_status,value:e.status},null,8,["options","value"])]),_:1}),t(r,{label:"操作",width:"120",fixed:"right"},{default:a(({row:e})=>[v((c(),m(u,{type:"primary",link:"",onClick:s=>N(e)},{default:a(()=>[i(" 编辑 ")]),_:2},1032,["onClick"])),[[C,["e_contract/edit"]]]),v((c(),m(u,{type:"danger",link:"",onClick:s=>q(e.id)},{default:a(()=>[i(" 去签署 ")]),_:2},1032,["onClick"])),[[C,["e_contract/delete"]],[D,e.status==0||e.status==1]])]),_:1})]),_:1},8,["data"])]),E("div",ze,[t(A,{modelValue:l(d),"onUpdate:modelValue":o[3]||(o[3]=e=>R(d)?d.value=e:null),onChange:l(h)},null,8,["modelValue","onChange"])])]),_:1}),t(O,{label:"八方人力平台合作合同",name:"plant_contract"},{default:a(()=>[E("div",Qe,[t(G,{data:l(d).lists,onSelectionChange:P},{default:a(()=>[t(r,{width:"320",label:"合同 ID",prop:"signFlowId","show-overflow-tooltip":""}),t(r,{label:"合同名称",prop:"name","show-overflow-tooltip":""}),t(r,{label:"参与者名称",prop:"to_user_id"},{default:a(({row:e})=>[i(k(e.to_user_id==1?"八方平台":e.to_user_id),1)]),_:1}),t(r,{label:"参与者类型",prop:"type"},{default:a(({row:e})=>[t(w,{options:l(g).sign_type,value:e.type},null,8,["options","value"])]),_:1}),t(r,{label:"状态",prop:"status"},{default:a(({row:e})=>[t(w,{options:l(g).sign_status,value:e.status},null,8,["options","value"])]),_:1}),t(r,{label:"操作",width:"200",fixed:"right"},{default:a(({row:e})=>[v((c(),m(u,{type:"primary",link:"",onClick:s=>N(e)},{default:a(()=>[i(" 编辑 ")]),_:2},1032,["onClick"])),[[C,["e_contract/edit"]]]),v((c(),m(u,{type:"danger",link:"",onClick:s=>q(e.id)},{default:a(()=>[i(" 去签署 ")]),_:2},1032,["onClick"])),[[C,["e_contract/delete"]],[D,e.status==0||e.status==1]]),v((c(),m(u,{type:"success",link:"",onClick:s=>ae(e.id)},{default:a(()=>[i(" 查看合同 ")]),_:2},1032,["onClick"])),[[C,["e_contract/delete"]],[D,e.status==2]]),v((c(),m(u,{type:"success",link:"",onClick:s=>oe(e.id)},{default:a(()=>[i(" 下载合同 ")]),_:2},1032,["onClick"])),[[C,["e_contract/delete"]],[D,e.status==2]])]),_:1})]),_:1},8,["data"])]),E("div",We,[t(A,{modelValue:l(d),"onUpdate:modelValue":o[4]||(o[4]=e=>R(d)?d.value=e:null),onChange:l(h)},null,8,["modelValue","onChange"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[de,l(d).loading]]),l($)?(c(),m(Ke,{key:0,ref_key:"editRef",ref:x,"dict-data":l(g),onSuccess:l(h),onClose:o[6]||(o[6]=e=>$.value=!1)},null,8,["dict-data","onSuccess"])):Me("",!0)])}}});export{ia as default};
