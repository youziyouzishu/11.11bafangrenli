import{A as pe,B as _e,L as ce,M as fe,O as ye,P as ge,y as be,a3 as ve,a4 as Ve,N as xe,a5 as we,a6 as ke,C as he,x as De}from"./element-plus-64da2267.js";import{_ as Ee}from"./index.vue_vue_type_style_index_0_lang-7a3f8fca.js";import{d as K,r as g,b0 as H,b as z,aZ as G,aU as Ue,al as I,o as f,c as w,a as s,G as a,A as je,aV as e,aM as r,aw as _,E as d,aO as u,aK as m,F as k,aj as q,t as C,aX as qe}from"./@vue-25170201.js";import{u as Ce}from"./useDictOptions-8a3829c8.js";import{D as Te}from"./index-a5ff619c.js";import{c as Re,d as Be,e as Pe}from"./project_tasks-5f07ee3a.js";import"./lodash-2cc29f39.js";import{s as Se}from"./element-china-area-data-0d190cbe.js";import{P as Me}from"./pay-f969c809.js";import{M as Fe}from"./picker-cc564b9a.js";import{g as $e}from"./admin-d45d6653.js";const Ae={class:"edit-popup"},Ne=s("div",null,"~",-1),Oe=s("div",null," 人 ",-1),Ye=["disabled"],He={label:"1"},ze={class:"footer"},Ge={class:"left-section"},Ie=s("div",{class:"payment-method"},[s("span",{class:"icon"},"💳"),d(" 余额支付 ")],-1),Ke={class:"balance"},Le={class:"balance-amount"},Xe=s("div",{class:"payment-amount"},[d(" 实付金额 "),s("span",{class:"amount"},"60.00"),d(" 元 ")],-1),Ze={class:"right-section"},Je=K({name:"projectTasksEdit"}),mt=K({...Je,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close","confirm","cancel"],setup(Qe,{expose:L,emit:X}){const V=g(!1),x=g(null),T=X,R=H(),h=H(),p=g("add"),Z=g(3),y=g([500,800]),B=g([2,10]),P=z(()=>p.value=="edit"?"编辑项目 ( "+t.project_name+" )":"发布项目"),{dictData:S}=Ce("education,experience,welfare,work_type,work_time"),J={key:"value",label:"label"},M=z(()=>{const n=[];return Se.forEach(l=>{l.children.forEach(c=>{n.push({...c,label:`${l.label}/${c.label}`})})}),n}),t=G({id:"",project_name:"",task_description:"",creator:"",nickname:"",site_managers:"",recruitment_specialists:"",recruitment_start_time:"",recruitment_score_direction:"",regional_orientation:"",recruitment_settlement_type:1,recruitment_settlement_value:0,site_settlement_type:"1",site_settlement_value:3,is_salary:1,attr_welfare:"",salary_range:"",salary_range_end:"",interest_tags:"",project_score:5,work_time:"",work_type:"",min_people:1,max_people:10,citys:[],up_city:void 0,cooperative_contract:void 0}),Q=G({project_name:[{required:!0,message:"请输入项目名称",trigger:["blur"]}],task_description:[{required:!0,message:"请输入任务描诉",trigger:["blur"]}],recruitment_start_time:[{required:!0,message:"请选择发布时间",trigger:["blur"]}],recruitment_settlement_type:[{required:!0,message:"请输入招聘结算类型",trigger:["blur"]}],site_settlement_type:[{required:!0,message:"请输入驻场结算类型",trigger:["blur"]}],attr_welfare:[{required:!0,message:"请选择福利类型",trigger:["blur"]}],up_city:[{required:!0,message:"请选择上岗城市",trigger:["blur"]}],work_type:[{required:!0,message:"请选择岗位",trigger:["blur"]}],work_time:[{required:!0,message:"请选择岗位",trigger:["blur"]}],min_people:[{required:!0,message:"请选人数范围",trigger:["blur"]}],is_salary:[{required:!0,message:"请选择岗位",trigger:["blur"]}],cooperative_contract:[{required:!0,message:"与用工方的合作合同，必填。用于资质审核",trigger:["blur"]}]}),W=n=>{let l=new Date;return l.setHours(0,0,0,0),n.getTime()<l.getTime()},F=async n=>{for(const l in t)n[l]!=null&&n[l]!=null&&(t[l]=n[l])},ee=async n=>{const l=await Re({id:n.id});F(l)},te=async()=>{const n=await $e();x.value=n.user_money,console.log(n)};Ue(()=>{te()});const le=n=>{console.log(n),n=="1"?y.value=[500,800]:n=="2"?y.value=[10,15]:n=="3"&&(y.value=[2,10]),t.recruitment_settlement_value=y.value[0]},$=async()=>{var l,c;await((l=R.value)==null?void 0:l.validate());const n={...t};p.value=="edit"?await Be(n):await Pe(n),(c=h.value)==null||c.close(),T("success")},ae=(n="add")=>{var l;p.value=n,(l=h.value)==null||l.open()},A=()=>{T("close")},N=n=>`${n} 元`;return L({open:ae,setFormData:F,getDetail:ee}),(n,l)=>{const c=I("a-button"),b=pe,i=_e,D=ce,E=fe,v=ye,O=ge,oe=Ee,re=be,U=ve,Y=Ve,ne=xe,se=we,ie=ke,ue=he,me=De,de=I("elbutton");return f(),w(k,null,[s("div",Ae,[a(Te,{ref_key:"popupRef",ref:h,title:e(P),confirmButtonText:"保存",async:!0,width:"95%",onConfirm:$,onClose:A},je({title:r(()=>[s("div",null,[s("span",null,_(e(P)),1),a(c,{type:"text",icon:"close",onClick:A},{default:r(()=>[d("自定义关闭")]),_:1})])]),default:r(()=>[a(ue,{ref_key:"formRef",ref:R,model:e(t),"label-width":"90px",rules:e(Q)},{default:r(()=>[s("div",null,[a(ie,{direction:"vertical",active:e(Z)},{default:r(()=>[a(U,{title:"招聘需求"},{description:r(()=>[a(i,{label:"名称",prop:"project_name"},{default:r(()=>[a(b,{disabled:e(p)=="edit",modelValue:e(t).project_name,"onUpdate:modelValue":l[0]||(l[0]=o=>e(t).project_name=o),style:{width:"380px"},maxlength:"20","show-word-limit":"",clearable:"",placeholder:"请输入项目名称"},null,8,["disabled","modelValue"])]),_:1}),a(i,{label:"岗位",prop:"work_type"},{default:r(()=>[a(E,{multiple:"","multiple-limit":4,style:{width:"300px"},modelValue:e(t).work_type,"onUpdate:modelValue":l[1]||(l[1]=o=>e(t).work_type=o),clearable:"",placeholder:"请选择类型"},{default:r(()=>[(f(!0),w(k,null,q(e(S).work_type,(o,j)=>(f(),C(D,{key:j,label:o.name,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"工期",prop:"work_time"},{default:r(()=>[a(E,{multiple:"",style:{width:"300px"},modelValue:e(t).work_time,"onUpdate:modelValue":l[2]||(l[2]=o=>e(t).work_time=o),clearable:"",placeholder:"请选择类型"},{default:r(()=>[(f(!0),w(k,null,q(e(S).work_time,(o,j)=>(f(),C(D,{key:j,label:o.name,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"人数",prop:"min_people"},{default:r(()=>[a(b,{modelValue:e(t).min_people,"onUpdate:modelValue":l[3]||(l[3]=o=>e(t).min_people=o),clearable:"",placeholder:"最小人数",style:{width:"100px","margin-left":"10px","margin-right":"10px"},type:"number"},null,8,["modelValue"]),Ne,a(b,{modelValue:e(t).max_people,"onUpdate:modelValue":l[4]||(l[4]=o=>e(t).max_people=o),clearable:"",placeholder:"最大人数",style:{width:"100px","margin-left":"10px","margin-right":"10px"},type:"number"},null,8,["modelValue"]),Oe]),_:1}),a(i,{label:"薪资",prop:"is_salary"},{default:r(()=>[a(O,{modelValue:e(t).is_salary,"onUpdate:modelValue":l[5]||(l[5]=o=>e(t).is_salary=o)},{default:r(()=>[a(v,{label:1},{default:r(()=>[d("面议")]),_:1}),a(v,{label:2},{default:r(()=>[d("指定")]),_:1})]),_:1},8,["modelValue"]),u(a(b,{modelValue:e(t).salary_range,"onUpdate:modelValue":l[6]||(l[6]=o=>e(t).salary_range=o),clearable:"",placeholder:"起始薪资",style:{width:"100px","margin-left":"10px","margin-right":"10px"},type:"number"},null,8,["modelValue"]),[[m,e(t).is_salary==2]]),u(s("div",null,"~",512),[[m,e(t).is_salary==2]]),u(a(b,{modelValue:e(t).salary_range_end,"onUpdate:modelValue":l[7]||(l[7]=o=>e(t).salary_range_end=o),clearable:"",placeholder:"结束薪资",style:{width:"100px","margin-left":"10px","margin-right":"10px"},type:"number"},null,8,["modelValue"]),[[m,e(t).is_salary==2]]),u(s("div",null," K / 月 ",512),[[m,e(t).is_salary==2]])]),_:1}),a(i,{label:"上岗城市",prop:"up_city",style:{width:"400px"}},{default:r(()=>[a(E,{modelValue:e(t).up_city,"onUpdate:modelValue":l[8]||(l[8]=o=>e(t).up_city=o),filterable:"",placeholder:"请选择上岗城市",style:{width:"100%"}},{default:r(()=>[(f(!0),w(k,null,q(e(M),o=>(f(),C(D,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"描述",prop:"project_name"},{default:r(()=>[a(re,{header:"",shadow:"none",class:"!border-none"},{default:r(()=>[a(oe,{modelValue:e(t).task_description,"onUpdate:modelValue":l[9]||(l[9]=o=>e(t).task_description=o),style:{"margin-left":"-20px","margin-top":"-15px"},height:"400px",mode:"simple",readonly:"true"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(U,{title:"项目设置"},{description:r(()=>[a(i,{label:"单位",prop:"recruitment_settlement_type"},{default:r(()=>[u(s("div",null,[u(s("div",{label:1},_(e(t).recruitment_settlement_type==1?e(t).recruitment_settlement_value:0)+" 元/人",513),[[m,e(t).recruitment_settlement_type==1]]),u(s("div",{label:2},_(e(t).recruitment_settlement_type===2?e(t).recruitment_settlement_value:0)+" 元/班次",513),[[m,e(t).recruitment_settlement_type==2]]),u(s("div",{label:3},_(e(t).recruitment_settlement_type===3?e(t).recruitment_settlement_value:0)+" 元/工时",513),[[m,e(t).recruitment_settlement_type==3]])],512),[[m,e(p)=="edit"]]),u(a(O,{modelValue:e(t).recruitment_settlement_type,"onUpdate:modelValue":l[10]||(l[10]=o=>e(t).recruitment_settlement_type=o),onChange:le},{default:r(()=>[a(v,{label:1},{default:r(()=>[d(_(e(t).recruitment_settlement_type==1?e(t).recruitment_settlement_value:"")+" 元/人",1)]),_:1}),a(v,{label:2},{default:r(()=>[d(_(e(t).recruitment_settlement_type==2?e(t).recruitment_settlement_value:"")+" 元/班次",1)]),_:1}),a(v,{label:3},{default:r(()=>[d(_(e(t).recruitment_settlement_type==3?e(t).recruitment_settlement_value:"")+" 元/工时",1)]),_:1})]),_:1},8,["modelValue"]),[[m,e(p)!="edit"]])]),_:1}),a(i,{label:"",prop:" recruitment_settlement_type"},{default:r(()=>[u(a(Y,{modelValue:e(t).recruitment_settlement_value,"onUpdate:modelValue":l[11]||(l[11]=o=>e(t).recruitment_settlement_value=o),min:e(y)[0],max:e(y)[1],"format-tooltip":N,style:{"margin-left":"20px",width:"400px"}},null,8,["modelValue","min","max"]),[[m,e(p)!="edit"]])]),_:1}),a(i,{label:"提成",prop:"site_settlement_type"},{default:r(()=>[s("div",{disabled:e(p)=="edit"},[s("div",He,_(e(t).site_settlement_value)+" 元/人",1)],8,Ye),u(a(Y,{modelValue:e(t).site_settlement_value,"onUpdate:modelValue":l[12]||(l[12]=o=>e(t).site_settlement_value=o),min:e(B)[0],max:e(B)[1],"format-tooltip":N,style:{"margin-left":"20px",width:"400px"}},null,8,["modelValue","min","max"]),[[m,e(p)!="edit"]])]),_:1}),a(i,{label:"定时发布",prop:"recruitment_start_time",style:{width:"400px"}},{default:r(()=>[a(ne,{"disabled-date":W,disabled:e(p)=="edit",class:"flex-1 !flex",modelValue:e(t).recruitment_start_time,"onUpdate:modelValue":l[13]||(l[13]=o=>e(t).recruitment_start_time=o),clearable:"",type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"发布时间",wdith:"400px;"},null,8,["disabled","modelValue"])]),_:1}),a(i,{label:"招聘城市",prop:"project_name"},{default:r(()=>[a(se,{modelValue:e(t).citys,"onUpdate:modelValue":l[14]||(l[14]=o=>e(t).citys=o),data:e(M),filterable:"",titles:["可选城市","已选城市"],props:J},null,8,["modelValue","data"])]),_:1})]),_:1}),a(U,{title:"资质审核"},{description:r(()=>[a(i,{label:"用工合同",prop:"cooperative_contract"},{default:r(()=>[a(Fe,{modelValue:e(t).cooperative_contract,"onUpdate:modelValue":l[15]||(l[15]=o=>e(t).cooperative_contract=o),limit:1,type:"file"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["active"])])]),_:1},8,["model","rules"])]),_:2},[e(p)!="edit"?{name:"footer",fn:r(()=>[s("div",ze,[s("div",Ge,[Ie,s("div",Ke,[s("span",Le,_(e(x)),1),d(" 元 "),u(a(me,{size:"large",style:{"font-size":"15px",padding:"2px 5px"},onClick:l[16]||(l[16]=o=>V.value=!0),type:"success",link:""},{default:r(()=>[d(" 充值")]),_:1},512),[[m,e(x)=="0.00"&&e(x)!=null]])]),Xe]),s("div",Ze,[a(de,{class:"next-step-btn",onClick:$},{default:r(()=>[d("立即发布")]),_:1})])])]),key:"0"}:void 0]),1032,["title"])]),a(Me,{dialogVisible:e(V),"onUpdate:dialogVisible":l[17]||(l[17]=o=>qe(V)?V.value=o:null)},null,8,["dialogVisible"])],64)}}});export{mt as _};
