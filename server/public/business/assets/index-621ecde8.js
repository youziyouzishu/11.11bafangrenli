import{d as B,aZ as H,b1 as N,b as d,o as i,t as C,aM as Y,a as s,a9 as z,aV as o,G as g,aw as p,c as n,F,aj as Z,aO as G,aJ as U,u as v}from"./@vue-25170201.js";import{z as a,B as h,q as j,o as q,Z as D,_ as J}from"./@tencentcloud-25a17c42.js";import"./adapter-vue-20243c9c.js";import{d as K}from"./documentLink-a7b030c0.js";import{a as u}from"./env-6b0ecdb8.js";import y from"./Icon-fec85db6.js";import{b as Q}from"./back-51a4f00d.js";import{c as W}from"./icon-close-aa3d72bb.js";import{e as S}from"./right-icon-312a665a.js";import{g as w,f as x,G as O}from"./index-67d3de44.js";import X from"./index-11528969.js";import{T as R}from"./index-ebb29dde.js";import ee from"./index-15293322.js";import{T as oe}from"./server-4915c2f5.js";import{T as P}from"./index-9521edcb.js";import"./tim-upload-plugin-5e9dfffb.js";import"./tim-profanity-filter-plugin-23d0f338.js";import"./vue-04189d9a.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-ca6139e0.js";import"./trtc-sdk-v5-8c3e4b7a.js";import"./pinia-1182f1fa.js";import"./mitt-f7ef348c.js";import"./interactjs-c534f49a.js";import"./rtc-detect-1f468b1b.js";import"./selected-c03c92a6.js";const te={class:"group-box"},se={class:"group-box-header"},re={class:"group-box-header-title"},ie={key:0,class:"group-list"},ae={class:"group-list-item"},le={class:"group-list-item-label"},pe={class:"group-list-item-label"},ne=["onUpdate:modelValue","placeholder"],ue=["onClick"],ce={class:"content"},de={class:"group-list-introduction"},ge={class:"group-list-item"},fe={class:"group-list-item-label"},me={class:"content"},_e={key:0,class:"group-h5-list-item-introduction"},Ce={class:"introduction-name"},he={class:"introduction-detail"},ye=["href"],Ie={key:1,class:"group-list group-list-edit"},Te=["placeholder"],be={class:"group-profile-footer"},ke=["disabled"],Ee=B({__name:"index",setup(Ge){const f=oe.getInstance(),I=f.constants,e=H({profile:{groupID:"",name:"",type:w[0].type,avatar:w[0].icon,introduction:"",notification:"",memberList:[],isSupportTopic:!1},groupConfig:{title:"",value:"",key:"",type:"",placeholder:""},isEdit:!1});N(()=>{const t=f.getOnCallParams(I.TUIGroup.SERVICE.METHOD.CREATE_GROUP);e.profile.memberList=t.memberList,e.groupConfig.title=t.title});const c=d(()=>x(e.profile.type)),V=d(()=>{let t="添加群聊";return e.isEdit&&(t=e.groupConfig.title),a.t(`TUIGroup.${t}`)}),M=d(()=>{const t={name:a.t("TUIGroup.群名称"),key:"name",placeholder:a.t("TUIGroup.请输入群名称")},r={name:`${a.t("TUIGroup.群ID")}(${a.t("TUIGroup.选填")})`,key:"groupID",placeholder:a.t("TUIGroup.请输入群ID")};return e.profile.type===h.TYPES.GRP_COMMUNITY?[t]:[t,r]}),$=d(()=>e.profile.name===""&&!e.isEdit),T=t=>{e.profile.type!==t&&(e.profile.type=t,e.profile.avatar=x(t).icon,e.isEdit&&(e.groupConfig.value=t))},L=async t=>{try{t.memberList=t.memberList.map(_=>({userID:_.userID})),t.type===h.TYPES.GRP_COMMUNITY&&delete t.groupID;const r=await D.createGroup(t),{type:l}=r.data.group;l===h.TYPES.GRP_AVCHATROOM&&await D.joinGroup({groupID:r.data.group.groupID,applyMessage:""}),k(r.data.group),R({message:a.t("TUIGroup.群组创建成功"),type:P.SUCCESS})}catch(r){R({message:r.message,type:P.ERROR})}},A=()=>{const{profile:t}=e;if(e.isEdit)return e.profile[e.groupConfig.key]=e.groupConfig.value,e.isEdit=!e.isEdit;L(t)},m=()=>{if(e.isEdit)return e.isEdit=!e.isEdit;k(null)},b=t=>{switch(e.isEdit=!e.isEdit,e.groupConfig.key=t,e.groupConfig.value=e.profile[t],t){case"name":e.groupConfig.title="设置群名称",e.groupConfig.placeholder="请输入群名称",e.groupConfig.type="input";break;case"groupID":e.groupConfig.title="设置群ID",e.groupConfig.placeholder="请输入群ID",e.groupConfig.type="input";break;case"type":e.groupConfig.title="选择群类型",e.groupConfig.type="select";break}},k=t=>{j.update(q.GRP,"isShowCreateComponent",!1);const r=f.getOnCallCallback(I.TUIGroup.SERVICE.METHOD.CREATE_GROUP);r&&r(t)};return(t,r)=>(i(),C(X,{show:!0,isH5:!o(u),isHeaderShow:!1,isFooterShow:!1,background:!1,"onUpdate:show":m},{default:Y(()=>[s("div",{class:z(["group",[o(u)?"":"group-h5"]])},[s("div",te,[s("header",se,[g(y,{file:o(u)?o(W):o(Q),class:"icon-close",size:"16px",onOnClick:m},null,8,["file"]),s("h1",re,p(o(V)),1)]),o(e).isEdit?(i(),n("div",Ie,[o(e).groupConfig.type==="input"?G((i(),n("input",{key:0,"onUpdate:modelValue":r[1]||(r[1]=l=>o(e).groupConfig.value=l),class:"group-name-input",type:"text",placeholder:o(a).t(`TUIGroup.${o(e).groupConfig.placeholder}`)},null,8,Te)),[[U,o(e).groupConfig.value]]):(i(),C(O,{key:1,class:"group-introduction-list",groupType:o(e).groupConfig.value,onSelectType:T},null,8,["groupType"]))])):(i(),n("ul",ie,[s("li",ae,[s("label",le,p(o(a).t("TUIGroup.群头像")),1),g(ee,{url:o(e).profile.avatar},null,8,["url"])]),s("ul",null,[(i(!0),n(F,null,Z(o(M),(l,_)=>(i(),n("li",{key:_,class:"group-list-item"},[s("label",pe,p(l.name),1),o(u)?G((i(),n("input",{key:0,"onUpdate:modelValue":E=>o(e).profile[l.key]=E,type:"text",placeholder:l.placeholder},null,8,ne)),[[U,o(e).profile[l.key]]]):(i(),n("span",{key:1,class:"group-h5-list-item-content",onClick:E=>b(l.key)},[s("p",ce,p(o(e).profile[l.key]),1),g(y,{file:o(S)},null,8,["file"])],8,ue))]))),128)),s("li",de,[s("div",ge,[s("label",fe,p(o(a).t("TUIGroup.群类型")),1),o(u)?(i(),C(O,{key:0,groupType:o(e).profile.type,onSelectType:T},null,8,["groupType"])):(i(),n("span",{key:1,class:"group-h5-list-item-content",onClick:r[0]||(r[0]=l=>b("type"))},[s("p",me,p(o(c).label),1),g(y,{file:o(S)},null,8,["file"])]))]),o(u)?v("",!0):(i(),n("article",_e,[s("label",Ce,p(o(c).label)+"：",1),s("span",he,p(o(c).detail),1),s("a",{href:o(K).product.url,target:"view_window"},p(o(a).t(`TUIGroup.${o(c).src}`)),9,ye)]))])])])),s("footer",be,[o(u)&&!o(e).isEdit?(i(),n("button",{key:0,class:"btn-default",onClick:m},p(o(a).t("TUIGroup.取消")),1)):v("",!0),s("button",{class:"btn-submit",disabled:o($),onClick:A},p(o(a).t("TUIGroup.确认")),9,ke)])])],2)]),_:1},8,["isH5"]))}});const We=J(Ee,[["__scopeId","data-v-199d17bd"]]);export{We as default};
