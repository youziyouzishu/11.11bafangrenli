import"./adapter-vue-20243c9c.js";import{B as d,d as y,q as h,e as P,_ as L}from"./@tencentcloud-25a17c42.js";import{J as c}from"./type-check-5e73d261.js";import O from"./message-plugin-layout-f8148c2d.js";import k from"./message-call-group-73eac480.js";import w from"./message-call-c2c-9034a137.js";import N from"./message-customer-service-49a2fb79.js";import D from"./message-room-default-d4932a61.js";import{d as H,b as u,o as r,t as m,aM as M,G as R,aV as a,u as b}from"./@vue-25170201.js";function I(s){var t;const e=c((t=s==null?void 0:s.payload)==null?void 0:t.data);return!!((e==null?void 0:e.businessID)===1&&(e!=null&&e.data)&&c(e.data).businessID==="av_call")}function x(s){var t;const e=c((t=s==null?void 0:s.payload)==null?void 0:t.data);return(e==null?void 0:e.businessID)==="ROOM_INVITE_ACTION"||(e==null?void 0:e.businessID)==="tuikit_engine_room"}function C(s){var t;const e=c((t=s==null?void 0:s.payload)==null?void 0:t.data);return(e==null?void 0:e.businessID)==="group_room_message"}function F(s){return s.type===d.TYPES.MSG_CUSTOM&&(I(s)||y(s)||C(s)||x(s))}const B=H({__name:"message-plugin",props:{message:{default:()=>({})},blinkMessageIDList:{default:()=>[]}},emits:["resendMessage","handleToggleMessageItem","handleH5LongPress"],setup(s,{emit:e}){const t=s,g=e,o=u(()=>h.getMessageModel(t.message.ID)),f=u(()=>{var n;return(n=o==null?void 0:o.value)==null?void 0:n.getSignalingInfo()}),_=u(()=>{var n;return(n=o==null?void 0:o.value)==null?void 0:n.getMessageContent()}),i=u(()=>{var l;let n={pluginType:"",showStyle:""};return I(o.value)?n={pluginType:"call",showStyle:((l=o.value)==null?void 0:l.conversationType)===d.TYPES.CONV_GROUP?"tip":"bubble"}:C(o.value)?n={pluginType:"room",showStyle:"bubble"}:y(o.value)&&(n={pluginType:"customer",showStyle:P(o.value)?"":"bubble"}),n}),T=n=>{g("resendMessage",n)},S=(n,l,p=!1)=>{g("handleToggleMessageItem",n,l,p)},v=(n,l,p)=>{g("handleH5LongPress",n,l,p)};return(n,l)=>(r(),m(O,{message:t.message,showStyle:a(i).showStyle,bubbleClassNameList:[a(i).pluginType==="room"?"message-bubble-room":""],onResendMessage:T,onHandleToggleMessageItem:S,onHandleH5LongPress:v},{messageTip:M(()=>[R(k,{message:t.message,signalingInfo:a(f),customContent:a(_),blinkMessageIDList:t.blinkMessageIDList},null,8,["message","signalingInfo","customContent","blinkMessageIDList"])]),messageBubble:M(()=>[a(i).pluginType==="call"?(r(),m(w,{key:0,message:t.message,signalingInfo:a(f),customContent:a(_)},null,8,["message","signalingInfo","customContent"])):b("",!0),a(i).pluginType==="customer"?(r(),m(N,{key:1,message:t.message},null,8,["message"])):b("",!0),a(i).pluginType==="room"?(r(),m(D,{key:2,message:t.message},null,8,["message"])):b("",!0)]),_:1},8,["message","showStyle","bubbleClassNameList"]))}});const V=L(B,[["__scopeId","data-v-4c5b4c19"]]),K=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"}));export{V as M,F as i,K as m};
