import{d as g,r as n,aU as y,aW as h,b1 as E,o as A,c as b,a as u,a9 as m,aV as a,G as k,aw as w,ab as x,aR as I}from"./@vue-25170201.js";import"./adapter-vue-20243c9c.js";import C from"./Icon-fec85db6.js";import{d as R}from"./env-6b0ecdb8.js";import{_ as B}from"./@tencentcloud-25a17c42.js";import"./tim-upload-plugin-5e9dfffb.js";import"./tim-profanity-filter-plugin-23d0f338.js";import"./vue-04189d9a.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-ca6139e0.js";import"./trtc-sdk-v5-8c3e4b7a.js";import"./pinia-1182f1fa.js";import"./mitt-f7ef348c.js";import"./interactjs-c534f49a.js";import"./rtc-detect-1f468b1b.js";const L="/business/assets/msg-audio-ac2cd1c9.svg",M={class:"audio-icon-container"},P=["src"],N=g({__name:"message-audio",props:{content:{type:Object,default:()=>({})},messageItem:{type:Object,default:()=>({})}},emits:["setAudioPlayed"],setup(p,{emit:f}){const v=f,r=p,o=n(),s=n(),t=n(),e=n();y(()=>{e.value&&(e.value.addEventListener("ended",l),e.value.addEventListener("pause",d))}),h(()=>{e.value&&(e.value.removeEventListener("ended",l),e.value.removeEventListener("pause",d))}),E(()=>{s.value=r.messageItem,o.value=r.content});function _(){if(s.value.hasRiskContent||!e.value)return;if(!e.value.paused){e.value.pause(),e.value.currentTime=0,t.value=!1;return}const c=document.getElementsByTagName("audio");Array.from(c).forEach(i=>{i.paused||(i.pause(),i.currentTime=0)}),e.value.play(),t.value=!0,s.value.flow==="in"&&v("setAudioPlayed",s.value.ID)}function l(){t.value=!1}function d(){t.value=!1}return(c,i)=>(A(),b("div",{class:m(["message-audio",[a(R)&&"message-audio-h5",a(s).flow==="out"&&"reserve",a(s).hasRiskContent&&"disable"]]),onClick:I(_,["stop"])},[u("div",M,[u("div",{class:m({mask:!0,play:a(t)})},null,2),k(C,{class:"icon",width:"16px",height:"20px",file:a(L)},null,8,["file"])]),u("span",{class:"time",style:x({width:`${a(o).second*10+20}px`})},w(a(o).second||1)+' " ',5),u("audio",{ref_key:"audioRef",ref:e,src:a(o).url},null,8,P)],2))}});const K=B(N,[["__scopeId","data-v-0da62af2"]]);export{K as default};
