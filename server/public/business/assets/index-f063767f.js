import"./adapter-vue-20243c9c.js";import{q as G,o as w,z as l,J as K,B as _,R as S,r as n,_ as Q}from"./@tencentcloud-25a17c42.js";import Z from"./index-044e1c2c.js";import tt from"./index-01bedd90.js";import et from"./index-60abac5c.js";import ot from"./index-fa307e3d.js";import{_ as rt}from"./index.vue_vue_type_script_setup_true_lang-861a142e.js";import it from"./index-687de315.js";import{c as u,a as s,d as at,e as pt}from"./env-6b0ecdb8.js";import{T as U}from"./config-58aee8b5.js";import{d as st,r,aU as mt,aW as lt,b as P,o as i,c,a as nt,aV as e,a9 as a,ak as ut,u as E,G as y,aw as R,t as A,F as ct}from"./@vue-25170201.js";import"./tim-upload-plugin-5e9dfffb.js";import"./tim-profanity-filter-plugin-23d0f338.js";import"./vue-04189d9a.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-ca6139e0.js";import"./trtc-sdk-v5-8c3e4b7a.js";import"./pinia-1182f1fa.js";import"./mitt-f7ef348c.js";import"./interactjs-c534f49a.js";import"./rtc-detect-1f468b1b.js";import"./Icon-fec85db6.js";import"./back-51a4f00d.js";import"./lodash-2cc29f39.js";import"./index-4cff07d5.js";import"./index-15293322.js";import"./index-5255cd2a.js";import"./index-3a577aae.js";import"./close-dark-2378607d.js";import"./message-text-4132c1d0.js";import"./index-8f711959.js";import"./index-7638d9aa.js";import"./element-plus-64da2267.js";import"./lodash-es-fbce1780.js";import"./async-validator-dee29e8b.js";import"./@element-plus-9559a6ac.js";import"./dayjs-346d7cd4.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./normalize-wheel-es-ed76fb12.js";import"./@vueuse-944ef3f4.js";import"./axios-67477f72.js";import"./vue-router-f7517f62.js";import"./css-color-function-7acc3e97.js";import"./color-9254db0b.js";import"./clone-db6b0f3b.js";import"./color-convert-946e453a.js";import"./color-name-b7949e8c.js";import"./color-string-6fa48439.js";import"./balanced-match-51764fed.js";import"./ms-f6814399.js";import"./nprogress-ccaead9e.js";import"./@tiptap-008a465d.js";import"./prosemirror-state-c544e594.js";import"./prosemirror-model-8b0495eb.js";import"./orderedmap-1b52af60.js";import"./prosemirror-transform-fc1f2a72.js";import"./prosemirror-view-ef3f9f96.js";import"./prosemirror-keymap-776f822d.js";import"./w3c-keyname-a25e4cc1.js";import"./prosemirror-commands-5c2a1a07.js";import"./prosemirror-schema-list-1c96ec4d.js";import"./vue-clipboard3-f5f9feb9.js";import"./clipboard-3d849c41.js";import"./echarts-d6620a89.js";import"./zrender-9797a04d.js";import"./tslib-54e39b60.js";import"./highlight.js-1b502259.js";import"./@highlightjs-7a15facb.js";import"./path-to-regexp-767716ea.js";import"./constant-bad60a54.js";import"./message-image-131f5c5d.js";import"./utils-601596c6.js";import"./message-audio-f41eece1.js";import"./index-e1b60aa5.js";import"./video-play-6934d780.js";import"./message-container-aeb74b8c.js";import"./message-file-babfc691.js";import"./files-37ebf78f.js";import"./message-face-0ee0d869.js";import"./message-custom-4c554336.js";import"./type-check-5e73d261.js";import"./star-light-46b224d3.js";import"./message-tip-146bc814.js";import"./message-bubble-c0cc7deb.js";import"./index-ae164957.js";import"./index-e044d709.js";import"./index-ebb29dde.js";import"./index-9521edcb.js";import"./index-84a33251.js";import"./translation-content-b8bad7bc.js";import"./index-7208319e.js";import"./convert-content-4209ee90.js";import"./index-79e54707.js";import"./message-location-9788ed03.js";import"./message-timestamp-54812030.js";import"./message-video-1a9a22eb.js";import"./icon-close-aa3d72bb.js";import"./index-397470ed.js";import"./enableSampleTaskStatus-86998722.js";import"./message-revoked-1c7ffc30.js";import"./message-plugin-849aedd1.js";import"./message-plugin-layout-f8148c2d.js";import"./message-call-group-73eac480.js";import"./message-call-c2c-9034a137.js";import"./index-784fd949.js";import"./message-customer-service-49a2fb79.js";import"./message-room-default-d4932a61.js";import"./index-514ca0db.js";import"./index-e656c675.js";import"./index-05c3d16c.js";import"./index-11528969.js";import"./index-bc2bb4c0.js";import"./image-item.vue_vue_type_style_index_0_lang-8f2a780f.js";import"./index-60212fd7.js";import"./message-input-editor-45bc727d.js";import"./index-66323cb1.js";import"./index-28e12cb3.js";import"./message-input-button-5fd873ac.js";import"./index-d1c59c82.js";import"./index-fda4f051.js";import"./selected-c03c92a6.js";import"./index-584481a4.js";import"./emoji-picker-dialog-26347a6f.js";import"./index-e05e1787.js";import"./index-8a73edcd.js";import"./camera-uni-e149e9d8.js";import"./index-ccccbee1.js";import"./index-8ff81968.js";import"./index-c989cd73.js";import"./documentLink-a7b030c0.js";import"./index-b39069be.js";import"./index.vue_vue_type_script_setup_true_lang-f6def3a2.js";const dt={class:"chat"},ht=st({__name:"index",emits:["closeChat"],setup(Tt,{emit:B}){const F=B,f=r(void 0),C=r(!1),d=r(!1),I=r(),g=r(),h=r(!1),m=r("none"),T=r(),v=r(),p=r([]),L=U.getFeatureConfig();mt(()=>{G.watch(w.CONV,{currentConversationID:O,currentConversation:N})}),lt(()=>{G.unwatch(w.CONV,{currentConversationID:O,currentConversation:N}),k()});const H=P(()=>u?m.value!=="none":!0),Y=P(()=>{let t="";switch(I.value){case 4:t=l.t("TUIChat.您已被管理员移出群聊");break;case 5:t=l.t("TUIChat.该群聊已被解散");break;case 8:t=l.t("TUIChat.您已退出该群聊");break;default:t=l.t("TUIChat.您已退出该群聊");break}return t}),k=()=>{K.switchConversation("")},W=t=>{F("closeChat",t),k()},j=t=>{var o;(o=T.value)==null||o.insertEmoji(t)},z=(t,o)=>{var x,D,V;if(!(!t||!o))switch(o){case"reference":break;case"reply":break;case"reedit":(x=t==null?void 0:t.payload)!=null&&x.text&&((V=T==null?void 0:T.value)==null||V.reEdit((D=t==null?void 0:t.payload)==null?void 0:D.text));break}},$=()=>{p.value[0].listener.onClicked({groupID:f.value})};function M(t){m.value=m.value===t?"none":t,m.value!=="none"&&u&&uni.$emit("scroll-to-bottom")}function q(){var t;(t=v.value)==null||t.scrollToLatestMessage()}function b(t){h.value=t===void 0?!h.value:t}function J(){var t;(t=v.value)==null||t.mergeForwardMessage()}function X(){var t;(t=v.value)==null||t.oneByOneForwardMessage()}function N(t){(t==null?void 0:t.operationType)>0?(p.value=[],d.value=!0,I.value=t==null?void 0:t.operationType):(d.value=!1,I.value=void 0)}function O(t){if(g.value===t)return;C.value=!1;let o=_.TYPES.CONV_C2C;t.startsWith(_.TYPES.CONV_GROUP)&&(o=_.TYPES.CONV_GROUP,C.value=!0,f.value=t.replace(_.TYPES.CONV_GROUP,"")),p.value=[],g.value=t,h.value=!1,U.setChatType(o),S.notifyEvent(n.TUIChat.EVENT.CHAT_STATE_CHANGED,n.TUIChat.EVENT_SUB_KEY.CHAT_OPENED,{groupID:f.value}),S.callService({serviceName:n.TUICustomerServicePlugin.SERVICE.NAME,method:n.TUICustomerServicePlugin.SERVICE.METHOD.ACTIVE_CONVERSATION,params:{conversationID:t}}),U.getChatType()===n.TUIChat.TYPE.GROUP&&(p.value=S.getExtensionList(n.TUIChat.EXTENSION.CHAT_HEADER.EXT_ID))}return(t,o)=>(i(),c("div",dt,[nt("div",{class:a(["tui-chat",!e(s)&&"tui-chat-h5"])},[e(g)?E("",!0):(i(),c("div",{key:0,class:a(["tui-chat-default",!e(s)&&"tui-chat-h5-default"])},[ut(t.$slots,"default",{},void 0,!0)],2)),e(g)?(i(),c("div",{key:1,class:a(["tui-chat",!e(s)&&"tui-chat-h5"])},[y(Z,{class:a(["tui-chat-header",!e(s)&&"tui-chat-H5-header",e(u)&&"tui-chat-uniapp-header"]),headerExtensionList:e(p),onCloseChat:W},null,8,["class","headerExtensionList"]),y(rt,{onToggleMultipleSelectMode:b}),y(tt,{ref_key:"messageListRef",ref:v,class:a(["tui-chat-message-list",!e(s)&&"tui-chat-h5-message-list"]),isGroup:e(C),groupID:e(f),isNotInGroup:e(d),isMultipleSelectMode:e(h),onHandleEditor:z,onCloseInputToolBar:o[0]||(o[0]=()=>M("none")),onToggleMultipleSelectMode:b},null,8,["class","isGroup","groupID","isNotInGroup","isMultipleSelectMode"]),e(d)?(i(),c("div",{key:0,class:a({"tui-chat-leave-group":!0,"tui-chat-leave-group-mobile":e(at)})},R(e(Y)),3)):e(h)?(i(),A(ot,{key:1,onOneByOneForwardMessage:X,onMergeForwardMessage:J,onToggleMultipleSelectMode:b})):(i(),c(ct,{key:2},[e(H)?(i(),A(it,{key:0,class:a(["tui-chat-message-input-toolbar",!e(s)&&"tui-chat-h5-message-input-toolbar",e(u)&&"tui-chat-uni-message-input-toolbar"]),displayType:e(m),onInsertEmoji:j,onChangeToolbarDisplayType:M,onScrollToLatestMessage:q},null,8,["class","displayType"])):E("",!0),y(et,{ref_key:"messageInputRef",ref:T,class:a(["tui-chat-message-input",!e(s)&&"tui-chat-h5-message-input",e(u)&&"tui-chat-uni-message-input",e(pt)&&"tui-chat-wx-message-input"]),enableAt:e(L).InputMention,isMuted:!1,muteText:e(l).t("TUIChat.您已被管理员禁言"),placeholder:e(l).t("TUIChat.请输入消息"),inputToolbarDisplayType:e(m),onChangeToolbarDisplayType:M},null,8,["class","enableAt","muteText","placeholder","inputToolbarDisplayType"])],64))],2)):E("",!0),!e(d)&&e(u)&&e(C)&&e(p).length>0?(i(),c("div",{key:2,class:"group-profile",onClick:$},R(e(p)[0].text),1)):E("",!0)],2)]))}});const Ho=Q(ht,[["__scopeId","data-v-5abe79ff"]]);export{Ho as default};
