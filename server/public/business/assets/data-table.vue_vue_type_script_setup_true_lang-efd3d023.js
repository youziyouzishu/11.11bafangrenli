import{A as B,B as K,x as T,C as R,H as D,I as F,J as I}from"./element-plus-64da2267.js";import{d as N,b0 as S,aZ as U,r as z,w as L,o as b,c as h,G as e,aM as l,ak as M,aV as a,aP as g,E as w,aO as $,a as j,aX as A}from"./@vue-25170201.js";import{P as G}from"./index-e34f0d65.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang-abbb91f8.js";import{u as J}from"./usePaging-8178f38d.js";import{f as O,h as X}from"./code-cf8f43d7.js";import{w as Z}from"./index-7638d9aa.js";const q={class:"data-table"},Q={class:"m-4"},W={class:"flex justify-end mt-4"},me=N({__name:"data-table",emits:["success"],setup(Y,{emit:C}){const v=C,c=S(),n=U({name:"",comment:""}),{pager:s,getLists:_,resetParams:V,resetPage:d}=J({fetchFun:X,params:n,size:10}),u=z([]),y=t=>{u.value=t.map(({name:o,comment:i})=>({name:o,comment:i}))},k=async()=>{var t;if(!u.value.length)return Z.msgError("请选择数据表");await O({table:u.value}),(t=c.value)==null||t.close(),v("success")};return L(()=>{var t;return(t=c.value)==null?void 0:t.visible},t=>{t&&_()}),(t,o)=>{const i=B,p=K,f=T,E=R,r=D,x=F,P=I;return b(),h("div",q,[e(G,{ref_key:"popupRef",ref:c,clickModalClose:!1,title:"选择表",width:"900px",async:!0,onConfirm:k},{trigger:l(()=>[M(t.$slots,"default")]),default:l(()=>[e(E,{class:"ls-form",model:a(n),inline:""},{default:l(()=>[e(p,{label:"表名称"},{default:l(()=>[e(i,{class:"w-[280px]",modelValue:a(n).name,"onUpdate:modelValue":o[0]||(o[0]=m=>a(n).name=m),clearable:"",onKeyup:g(a(d),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(p,{label:"表描述"},{default:l(()=>[e(i,{class:"w-[280px]",modelValue:a(n).comment,"onUpdate:modelValue":o[1]||(o[1]=m=>a(n).comment=m),clearable:"",onKeyup:g(a(d),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(p,null,{default:l(()=>[e(f,{type:"primary",onClick:a(d)},{default:l(()=>[w("查询")]),_:1},8,["onClick"]),e(f,{onClick:a(V)},{default:l(()=>[w("重置")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),$((b(),h("div",Q,[e(x,{height:"400",size:"large",data:a(s).lists,onSelectionChange:y},{default:l(()=>[e(r,{type:"selection",width:"55"}),e(r,{label:"表名称",prop:"name","min-width":"150"}),e(r,{label:"表描述",prop:"comment","min-width":"160"}),e(r,{label:"创建时间",prop:"create_time","min-width":"180"})]),_:1},8,["data"])])),[[P,a(s).loading]]),j("div",W,[e(H,{modelValue:a(s),"onUpdate:modelValue":o[2]||(o[2]=m=>A(s)?s.value=m:null),onChange:a(_)},null,8,["modelValue","onChange"])])]),_:3},512)])}}});export{me as _};
