import{d as N,r as h,b as X,o as c,t as A,aM as q,a as l,a9 as s,aV as t,aw as m,c as f,aR as V,u as Z,F as Y,aj as _,aO as K,aX as L,aJ as J,E as x}from"./@vue-25170201.js";import{q as Q,o as j,z as u,B as $,X as tt,_ as et}from"./@tencentcloud-25a17c42.js";import"./adapter-vue-20243c9c.js";import at from"./index-e05e1787.js";import{d as k}from"./documentLink-a7b030c0.js";import B from"./Icon-fec85db6.js";import{s as ot}from"./star-light-46b224d3.js";import{C as st}from"./constant-bad60a54.js";import{a as e,c as b,i as it}from"./env-6b0ecdb8.js";import{i as lt}from"./utils-601596c6.js";import{O as rt}from"./index-784fd949.js";import"./tim-upload-plugin-5e9dfffb.js";import"./tim-profanity-filter-plugin-23d0f338.js";import"./vue-04189d9a.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-ca6139e0.js";import"./trtc-sdk-v5-8c3e4b7a.js";import"./pinia-1182f1fa.js";import"./mitt-f7ef348c.js";import"./interactjs-c534f49a.js";import"./rtc-detect-1f468b1b.js";import"./index-28e12cb3.js";import"./index-8f711959.js";import"./index-7638d9aa.js";import"./element-plus-64da2267.js";import"./lodash-es-fbce1780.js";import"./async-validator-dee29e8b.js";import"./@element-plus-9559a6ac.js";import"./dayjs-346d7cd4.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./normalize-wheel-es-ed76fb12.js";import"./@vueuse-944ef3f4.js";import"./lodash-2cc29f39.js";import"./axios-67477f72.js";import"./vue-router-f7517f62.js";import"./css-color-function-7acc3e97.js";import"./color-9254db0b.js";import"./clone-db6b0f3b.js";import"./color-convert-946e453a.js";import"./color-name-b7949e8c.js";import"./color-string-6fa48439.js";import"./balanced-match-51764fed.js";import"./ms-f6814399.js";import"./nprogress-ccaead9e.js";import"./@tiptap-008a465d.js";import"./prosemirror-state-c544e594.js";import"./prosemirror-model-8b0495eb.js";import"./orderedmap-1b52af60.js";import"./prosemirror-transform-fc1f2a72.js";import"./prosemirror-view-ef3f9f96.js";import"./prosemirror-keymap-776f822d.js";import"./w3c-keyname-a25e4cc1.js";import"./prosemirror-commands-5c2a1a07.js";import"./prosemirror-schema-list-1c96ec4d.js";import"./vue-clipboard3-f5f9feb9.js";import"./clipboard-3d849c41.js";import"./echarts-d6620a89.js";import"./zrender-9797a04d.js";import"./tslib-54e39b60.js";import"./highlight.js-1b502259.js";import"./@highlightjs-7a15facb.js";import"./path-to-regexp-767716ea.js";const nt="/business/assets/evaluate-43b9a230.svg",pt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABMCAYAAADHl1ErAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATvSURBVHgB7ZxhUttGFMffW8mJM8lMnS8FGTPIuUDdnoCcoL1B3V4gQw9QzAVa2gsUTtD0BM0RyAmsGaAq6Qf0hY5rW7vdR6zYGGykXUm7sv2b0QBm7JF+/ktP2qcVwIZqE4b/HF6GH65pod/BMhAs4iIMuwjst9nXUIiDZnP7GCzBKmGX4VVf/vDnXo6Gg3/bkggsgIElULrgviyiUXv6rAuWYI0wuSsuPF4h4huwBCuELUlXgh+GV9+CBVghbFm6EjhADyzAuLAU6Urwz8NwHwxjXFiadCU44Bg/LzMqLEO6bhEg9k2nzKgwFCxz9TOdMmPCzs9lUhA6kBHTKTMmzHHVk2IyZUaEUbooKaCIyZQZEcYcpn3mbiplpV98h2Hoc2B9yAEO/PWu572DEik9YTFnPcgJEykrNWF5piuh7JSVmrA805XAwCn1ory0hBWRrgQGvO15XgAlUFrCikhXAi/xWFZKwopMV4Icxn5ZxjB24QkjWQLdn6Fgnj57cXhx8SHzpVZWckkYSRmNeMd9UtuLx7ztuLgnxO11og8mEHAmh7WjOObvHZf141H83nUhyOM4l1pYv99v1GrPfXk06gjADnPgM/n2fbk05Bo2oCqQTAYByUQBgfxig/F4cJZ2d74j7I4UBJ8x3AOBHdmF8CslRQmMpIwzOeZ0m0wR8zPGasFodBPMykSSVK+/eCNPALtgaheyHiRhb4eDmwO8uLw6kRG1oiNjO4jwFmW3WcCGtERsErcN6YiYEOMj2JAK2Rs9Za1m81ge8DfSHkHKOtr1tnqfTivkkG+PZegRrhOJLPr9znnYRtp9ZmUR9870N9KmzMsiHrw02kh7WBax8FpynaUtkkUsvfheR2nLZBGPjlask7THZBGphnfWQVoaWUTq8bBVlpZWFpFpxHUVpWWRRWQeol4laVllEUpj+qsgTUUWodwEqbI0VVmEVteoitJ0ZBHabbYqSdOVReTSl7z86+/f5YD3N2AzQvyx09zWXsdcOt+IbMVbcFNyESa7KIW36LVB/AJyQFtYv39dlc63Tz1Y0ERbmOsO7E/XhNpz6urroS0MHayMMD6MtddVW5io0O0FCGhemIMsl4NpGTCm/+XmkbDK7JJUKYXQuzNCS1iFKmSCHwSB1vpqCatShUzQrZRawqpUIRN0K6WWsCpVyATdSqklrEoVMsFx9NZZN2GV2yUFiI5OpVQWVnCFDCZLETR0KqWysGIqJEby2z/Y8bbatAjg30EB4tx6XXndlYXlWyExopv6hoObdmvm0VctzzshcZMb/gLICRRYvrB8KuRU1K7n9RZNLqD/MeCvBeenkAOCq6+7sjD9CilOGMRfLhM1C017ae14XZrqpytOp1Iqj+nTI/dUDvqySr2Ty5HuLFqa3xRzOETGaI5B1u2Imtufv0TMvvlKwqhCPqkPr7O8Jy9R89DjGJhgP00eGpJ6e1SnCyrtkhkrZEDzslvediFzs+kzd5pbX8mK+r38k+ZkpjrJUq2USsLSVUikWRNdqnJlTGKfVNRXacWpVkolYfJcacmxa1r5PG8rl6qWhU/iRPwDfBT3IMu3YTGqN6Psy273n3MfJUXFv4wHg+MyphKngQrDWKZcruuPcHdbhay2r1QmnCpXyckzVw9pgimPx6fj0X89W0TNM62oztfSFV1N/Nqy6NmwK83/UkAsIDt3h2wAAAAASUVORK5CYII=",mt=["onClick"],ut=N({__name:"index",props:{starTotal:{type:Number,default:5}},emits:["onDialogPopupShowOrHide"],setup(O,{emit:R}){const I=O,y=R,n=h(),S=h(I.starTotal),r=h(-1),p=h(""),o=h();Q.watch(j.CONV,{currentConversation:a=>{o.value=a}});const D=X(()=>p.value.length||r.value>=0),T=()=>{y("onDialogPopupShowOrHide",!0)},W=()=>{z(),y("onDialogPopupShowOrHide",!1)},F=()=>{var a,i;(e||it)&&window.open((i=(a=k)==null?void 0:a.customMessage)==null?void 0:i.url)},P=()=>{var a;(a=n==null?void 0:n.value)==null||a.toggleDialogDisplay(!1)},z=()=>{r.value=-1,p.value=""},G=a=>{r.value===a?r.value=r.value-1:r.value=a},H=()=>{var g,U,C,M,E,w;if(r.value<0&&!p.value.length)return;const a={data:JSON.stringify({businessID:st.EVALUATE,version:1,score:r.value+1,comment:p.value}),description:"对本次的服务评价",extension:"对本次的服务评价"},i={to:((U=(g=o==null?void 0:o.value)==null?void 0:g.groupProfile)==null?void 0:U.groupID)||((M=(C=o==null?void 0:o.value)==null?void 0:C.userProfile)==null?void 0:M.userID),conversationType:(E=o==null?void 0:o.value)==null?void 0:E.type,payload:a,needReadReceipt:lt()},v={conversation:o.value,payload:i.payload,messageType:$.TYPES.MSG_CUSTOM},d={offlinePushInfo:rt.create(v)};tt.sendCustomMessage(i,d),(w=n==null?void 0:n.value)==null||w.toggleDialogDisplay(!1)};return(a,i)=>(c(),A(at,{ref_key:"container",ref:n,iconFile:t(nt),title:"评价",needBottomPopup:!0,iconWidth:t(b)?"26px":"20px",iconHeight:t(b)?"26px":"20px",onOnDialogShow:T,onOnDialogClose:W},{default:q(()=>[l("div",{class:s(["evaluate",!t(e)&&"evaluate-h5"])},[l("div",{class:s(["evaluate-header",!t(e)&&"evaluate-h5-header"])},[l("div",{class:s(["evaluate-header-content",!t(e)&&"evaluate-h5-header-content"])},m(t(u).t("Evaluate.请对本次服务进行评价")),3),t(e)?Z("",!0):(c(),f("div",{key:0,class:s(["evaluate-header-close",!t(e)&&"evaluate-h5-header-close"]),onClick:V(P,["stop"])},m(t(u).t("关闭")),3))],2),l("div",{class:s(["evaluate-content",!t(e)&&"evaluate-h5-content"])},[l("ul",{class:s(["evaluate-content-list",!t(e)&&"evaluate-h5-content-list"])},[(c(!0),f(Y,null,_(t(S),(v,d)=>(c(),f("li",{key:d,class:s(["evaluate-content-list-item",!t(e)&&"evaluate-h5-content-list-item"]),onClick:V(g=>G(d),["stop"])},[d<=t(r)?(c(),A(B,{key:0,file:t(ot),width:t(e)?"20px":"30px",height:t(e)?"20px":"30px"},null,8,["file","width","height"])):(c(),A(B,{key:1,file:t(pt),width:t(e)?"20px":"30px",height:t(e)?"20px":"30px"},null,8,["file","width","height"]))],10,mt))),128))],2),K(l("textarea",{"onUpdate:modelValue":i[0]||(i[0]=v=>L(p)?p.value=v:null),class:s(["evaluate-content-text",!t(e)&&"evaluate-h5-content-text"])},null,2),[[J,t(p)]]),l("div",{class:s(["evaluate-content-button",!t(e)&&"evaluate-h5-content-button"])},[l("button",{class:s(["btn",t(D)?"btn-valid":"btn-invalid"]),onClick:H},m(t(u).t("Evaluate.提交评价")),3)],2)],2),l("div",{class:s(["evaluate-adv",!t(e)&&"evaluate-h5-adv"])},[x(m(t(u).t("Evaluate.服务评价工具"))+" "+m("("+t(u).t("Evaluate.使用"))+" ",1),l("a",{onClick:i[1]||(i[1]=v=>F(t(k).customMessage))},m(t(u).t(`Evaluate.${t(k).customMessage.label}`)),1),x(" "+m(t(u).t("Evaluate.搭建")+")"),1)],2)],2)]),_:1},8,["iconFile","iconWidth","iconHeight"]))}});const Ue=et(ut,[["__scopeId","data-v-f4117d54"]]);export{Ue as default};
