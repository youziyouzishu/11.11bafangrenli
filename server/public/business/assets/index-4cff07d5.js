import"./adapter-vue-20243c9c.js";import{W as b,q as w,o as A,z as c,Z as D,_ as T}from"./@tencentcloud-25a17c42.js";import N from"./Icon-fec85db6.js";import P from"./index-15293322.js";import z from"./index-5255cd2a.js";import{c as F}from"./close-dark-2378607d.js";import{a as B,d as f}from"./env-6b0ecdb8.js";import{d as M,r as v,w as x,aU as V,aW as j,o as l,c as m,aV as e,a,aw as s,u as W,G as L,aM as q,t as E,F as H,aj as O,a9 as G}from"./@vue-25170201.js";import"./tim-upload-plugin-5e9dfffb.js";import"./tim-profanity-filter-plugin-23d0f338.js";import"./vue-04189d9a.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-ca6139e0.js";import"./trtc-sdk-v5-8c3e4b7a.js";import"./pinia-1182f1fa.js";import"./mitt-f7ef348c.js";import"./interactjs-c534f49a.js";import"./rtc-detect-1f468b1b.js";import"./index-3a577aae.js";const Z={key:0,class:"application-tips"},$={class:G({"application-contaienr":!0})},J={class:"application-header"},K={key:1},Q={class:"application-item-info"},X={class:"application-item-nick"},Y={class:"application-item-note"},tt={class:"application-item-operation"},et=["onClick"],ot=["onClick"],at=M({__name:"index",props:{groupID:{default:""}},setup(S){const R=S,U=v(),r=v(0),u=v(!1),p=v([]);x(u,t=>{t&&k().then(n=>{p.value=n,r.value=n.length})}),x(()=>p.value.length,(t,n)=>{n>0&&t===0&&(u.value=!1)});async function g(){return(await D.getGroupApplicationList()).data.applicationList.filter(o=>o.groupID===R.groupID)}function h(){u.value=!u.value}async function k(){const t=await g();if(t.length===0)return[];const n=t.map(i=>i.applicationType===0?i.applicant:i.userID),{data:o}=await b.getUserProfile({userIDList:n}),d={};return o.forEach(i=>{d[i.userID]=i}),t.map(i=>{const _=d[i.applicationType===0?i.applicant:i.userID];return{nick:_.nick||_.userID||"anonymous",avatar:_.avatar||"",isRemoved:!1,application:i}})}function C(t,n,o){D.handleGroupApplication({handleAction:n,application:t.application}).then(()=>{p.value[o].isRemoved=!0,setTimeout(()=>{p.value.splice(o,1),r.value-=1},150)}).catch(()=>{})}V(()=>{g().then(t=>{r.value=t.length}),w.watch(A.GRP,{groupSystemNoticeList:y})}),j(()=>{w.unwatch(A.GRP,{groupSystemNoticeList:y})});function y(){k().then(t=>{p.value=t,r.value=t.length})}return(t,n)=>(l(),m("div",null,[e(r)>0?(l(),m("div",Z,[a("div",null,s(e(r))+s(e(c).t("TUIChat.条入群申请")),1),a("div",{class:"application-tips-btn",onClick:h},s(e(c).t("TUIChat.点击处理")),1)])):W("",!0),L(z,{ref_key:"drawerDomInstanceRef",ref:U,visible:e(u),zIndex:998,popDirection:e(f)?"bottom":"right",isFullScreen:e(f),overlayColor:e(f)?void 0:"transparent",drawerStyle:{bottom:{minHeight:"60vh",maxHeight:"80vh",borderRadius:"12px 12px 0 0"},right:{width:"360px",borderRadius:"12px 0 0 12px",boxShadow:"0 0 10px 0 #d0d0d0"}},onOnOverlayClick:h},{default:q(()=>[a("div",$,[a("header",J,[a("div",{onClick:h},[e(B)?(l(),E(N,{key:0,file:e(F),size:"16px"},null,8,["file"])):(l(),m("div",K,s(e(c).t("关闭")),1))])]),a("main",null,[(l(!0),m(H,null,O(e(p),(o,d)=>(l(),m("div",{key:o.nick,class:G({"application-item":!0,removed:o.isRemoved})},[L(P,{style:{flex:"0 0 auto"},url:o.avatar,useSkeletonAnimation:!0},null,8,["url"]),a("div",Q,[a("div",X,s(o.nick),1),a("div",Y,s(e(c).t("TUIChat.申请加入")),1)]),a("div",tt,[a("div",{class:"agree",onClick:I=>C(o,"Agree",d)},s(e(c).t("TUIChat.同意")),9,et),a("div",{class:"reject",onClick:I=>C(o,"Reject",d)},s(e(c).t("TUIChat.拒绝")),9,ot)])],2))),128))])])]),_:1},8,["visible","popDirection","isFullScreen","overlayColor"])]))}});const wt=T(at,[["__scopeId","data-v-93af1320"]]);export{wt as default};
