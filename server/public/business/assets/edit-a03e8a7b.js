import{T as F,y as N,B as T,O,P as S,A as U,C as j,x as G,J as L}from"./element-plus-64da2267.js";import{_ as M}from"./index-89569703.js";import{x as P,w as $}from"./index-7638d9aa.js";import{n as z,s as A}from"./message-3b556b4f.js";import{l as H}from"./lodash-2cc29f39.js";import{u as J,a as Z}from"./vue-router-f7517f62.js";import{d as w,r as K,aZ as Q,b0 as W,o as p,c as u,G as t,aM as e,aO as X,aV as a,t as Y,E as m,aw as c,a as l,F as tt,aj as et}from"./@vue-25170201.js";import"./lodash-es-fbce1780.js";import"./async-validator-dee29e8b.js";import"./@element-plus-9559a6ac.js";import"./dayjs-346d7cd4.js";import"./@tencentcloud-25a17c42.js";import"./tim-upload-plugin-5e9dfffb.js";import"./tim-profanity-filter-plugin-23d0f338.js";import"./vue-04189d9a.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-ca6139e0.js";import"./trtc-sdk-v5-8c3e4b7a.js";import"./pinia-1182f1fa.js";import"./mitt-f7ef348c.js";import"./interactjs-c534f49a.js";import"./rtc-detect-1f468b1b.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./normalize-wheel-es-ed76fb12.js";import"./@vueuse-944ef3f4.js";import"./axios-67477f72.js";import"./css-color-function-7acc3e97.js";import"./color-9254db0b.js";import"./clone-db6b0f3b.js";import"./color-convert-946e453a.js";import"./color-name-b7949e8c.js";import"./color-string-6fa48439.js";import"./balanced-match-51764fed.js";import"./ms-f6814399.js";import"./nprogress-ccaead9e.js";import"./@tiptap-008a465d.js";import"./prosemirror-state-c544e594.js";import"./prosemirror-model-8b0495eb.js";import"./orderedmap-1b52af60.js";import"./prosemirror-transform-fc1f2a72.js";import"./prosemirror-view-ef3f9f96.js";import"./prosemirror-keymap-776f822d.js";import"./w3c-keyname-a25e4cc1.js";import"./prosemirror-commands-5c2a1a07.js";import"./prosemirror-schema-list-1c96ec4d.js";import"./vue-clipboard3-f5f9feb9.js";import"./clipboard-3d849c41.js";import"./echarts-d6620a89.js";import"./zrender-9797a04d.js";import"./tslib-54e39b60.js";import"./highlight.js-1b502259.js";import"./@highlightjs-7a15facb.js";import"./path-to-regexp-767716ea.js";const ot=l("div",{class:"font-medium mb-7"},"通知名称",-1),st=l("div",{class:"font-medium mb-7"},"短信通知",-1),at={class:"w-80"},it={class:"flex-1"},rt={class:"w-full max-w-[320px]"},nt={class:"form-tips"},mt=w({name:"noticeEdit"}),pe=w({...mt,setup(lt){const f=J(),y=Z(),d=K(!1),o=Q({id:"",scene_name:"",type:"",scene_desc:"",sms_notice:{status:0,template_id:"",content:"",tips:[]},oa_notice:{},mnp_notice:{},system_notice:{}}),E={"sms_notice.template_id":[{required:!0,message:"请输入模板ID",trigger:"blur"}],"sms_notice.content":[{required:!0,message:"请输入短信内容",trigger:"blur"}]},{removeTab:V}=P(),b=W(),x=async()=>{d.value=!0;const r=await z({id:f.query.id});Object.keys(r).forEach(s=>{o[s]=r[s]}),d.value=!1},h=async()=>{var s;await((s=b.value)==null?void 0:s.validate());const r={id:o.id,template:H.pick(o,["sms_notice","oa_notice","mnp_notice","system_notice"])};await A(r),$.msgSuccess("操作成功"),V(),y.back()};return f.query.id&&x(),(r,s)=>{const k=F,_=N,n=T,v=O,R=S,g=U,D=j,B=G,C=M,q=L;return p(),u("div",null,[t(_,{class:"!border-none",shadow:"never"},{default:e(()=>[t(k,{content:"编辑通知设置",onBack:s[0]||(s[0]=i=>r.$router.back())})]),_:1}),X((p(),Y(D,{ref_key:"formRef",ref:b,model:a(o),"label-width":"120px",rules:E},{default:e(()=>[t(_,{class:"!border-none mt-4",shadow:"never"},{default:e(()=>[ot,t(n,{label:"通知名称"},{default:e(()=>[m(c(a(o).scene_name),1)]),_:1}),t(n,{label:"通知类型"},{default:e(()=>[m(c(a(o).type),1)]),_:1}),t(n,{label:"通知业务"},{default:e(()=>[m(c(a(o).scene_desc),1)]),_:1})]),_:1}),t(_,{class:"!border-none mt-4",shadow:"never"},{default:e(()=>[st,t(n,{label:"开启状态",prop:"sms_notice.status",required:""},{default:e(()=>[t(R,{modelValue:a(o).sms_notice.status,"onUpdate:modelValue":s[1]||(s[1]=i=>a(o).sms_notice.status=i)},{default:e(()=>[t(v,{label:"0"},{default:e(()=>[m("关闭")]),_:1}),t(v,{label:"1"},{default:e(()=>[m("开启")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(n,{label:"模板ID",prop:"sms_notice.template_id"},{default:e(()=>[l("div",at,[t(g,{modelValue:a(o).sms_notice.template_id,"onUpdate:modelValue":s[2]||(s[2]=i=>a(o).sms_notice.template_id=i),placeholder:"请输入模板ID"},null,8,["modelValue"])])]),_:1}),t(n,{label:"短信内容",prop:"sms_notice.content"},{default:e(()=>[l("div",it,[l("div",rt,[t(g,{type:"textarea",autosize:{minRows:6,maxRows:6},modelValue:a(o).sms_notice.content,"onUpdate:modelValue":s[3]||(s[3]=i=>a(o).sms_notice.content=i)},null,8,["modelValue"])]),l("div",nt,[(p(!0),u(tt,null,et(a(o).sms_notice.tips,(i,I)=>(p(),u("div",{key:I},c(i),1))),128))])])]),_:1})]),_:1})]),_:1},8,["model"])),[[q,a(d)]]),t(C,null,{default:e(()=>[t(B,{type:"primary",onClick:h},{default:e(()=>[m("保存")]),_:1})]),_:1})])}}});export{pe as default};
