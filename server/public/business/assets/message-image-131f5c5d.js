import{d as _,r as f,aU as I,w,o as v,c as x,a as y,a9 as S,aV as k,aR as z}from"./@vue-25170201.js";import"./adapter-vue-20243c9c.js";import{_ as B}from"./@tencentcloud-25a17c42.js";import{a as g}from"./env-6b0ecdb8.js";import{h as C}from"./utils-601596c6.js";import"./tim-upload-plugin-5e9dfffb.js";import"./tim-profanity-filter-plugin-23d0f338.js";import"./vue-04189d9a.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-ca6139e0.js";import"./trtc-sdk-v5-8c3e4b7a.js";import"./pinia-1182f1fa.js";import"./mitt-f7ef348c.js";import"./interactjs-c534f49a.js";import"./rtc-detect-1f468b1b.js";const M=["src","width","height"],E=_({__name:"message-image",props:{content:{default:()=>({})},messageItem:{default:()=>({})}},emits:["previewImage"],setup(h,{emit:l}){const u=l,e=h,a=f();I(()=>{var t,s,i;(((t=e.messageItem)==null?void 0:t.status)==="success"||((s=e.messageItem)==null?void 0:s.status)==="fail"||((i=e.messageItem)==null?void 0:i.progress)===1)&&o()}),w(()=>e.content.height,(t,s)=>{t>s&&o()});function o(){var c,r,p;const{width:t=0,height:s=0}=e.content;if(t===0||s===0)return;const i=((c=document.getElementById("app"))==null?void 0:c.clientWidth)||0,m=g?300:Math.min(i-180,300),n=C(t,s,m,m);(r=a==null?void 0:a.value)!=null&&r.style&&(a.value.style.width=`${n.width}px`),(p=a==null?void 0:a.value)!=null&&p.style&&(a.value.style.height=`${n.height}px`)}function d(){var t,s;(((t=e.messageItem)==null?void 0:t.status)==="success"||((s=e.messageItem)==null?void 0:s.progress)===1)&&u("previewImage",e.messageItem)}return(t,s)=>(v(),x("div",{ref_key:"skeletonDomRef",ref:a,class:"image-container",onClick:z(d,["self"])},[y("img",{class:S(["message-image",!k(g)&&"message-image-h5"]),src:e.content.url,width:e.content.width,height:e.content.height},null,10,M)],512))}});const L=B(E,[["__scopeId","data-v-8ce4664c"]]);export{L as default};
