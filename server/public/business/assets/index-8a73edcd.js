import{q as v,o as I,i as g,B as x,X as S,_ as B}from"./@tencentcloud-25a17c42.js";import"./adapter-vue-20243c9c.js";import{c as m,a as T,e as J}from"./env-6b0ecdb8.js";import O from"./index-e05e1787.js";import{c as F}from"./camera-uni-e149e9d8.js";import{i as P}from"./utils-601596c6.js";import{O as z}from"./index-784fd949.js";import{d as G,r as R,b as M,o as y,t as q,aM as N,aV as r,c as Y,a9 as _,a as w,u as C}from"./@vue-25170201.js";import"./tim-upload-plugin-5e9dfffb.js";import"./tim-profanity-filter-plugin-23d0f338.js";import"./vue-04189d9a.js";import"./marked-7f3c3653.js";import"./trtc-cloud-js-sdk-ca6139e0.js";import"./trtc-sdk-v5-8c3e4b7a.js";import"./pinia-1182f1fa.js";import"./mitt-f7ef348c.js";import"./interactjs-c534f49a.js";import"./rtc-detect-1f468b1b.js";import"./Icon-fec85db6.js";import"./index-28e12cb3.js";import"./index-8f711959.js";import"./index-7638d9aa.js";import"./element-plus-64da2267.js";import"./lodash-es-fbce1780.js";import"./async-validator-dee29e8b.js";import"./@element-plus-9559a6ac.js";import"./dayjs-346d7cd4.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./normalize-wheel-es-ed76fb12.js";import"./@vueuse-944ef3f4.js";import"./lodash-2cc29f39.js";import"./axios-67477f72.js";import"./vue-router-f7517f62.js";import"./css-color-function-7acc3e97.js";import"./color-9254db0b.js";import"./clone-db6b0f3b.js";import"./color-convert-946e453a.js";import"./color-name-b7949e8c.js";import"./color-string-6fa48439.js";import"./balanced-match-51764fed.js";import"./ms-f6814399.js";import"./nprogress-ccaead9e.js";import"./@tiptap-008a465d.js";import"./prosemirror-state-c544e594.js";import"./prosemirror-model-8b0495eb.js";import"./orderedmap-1b52af60.js";import"./prosemirror-transform-fc1f2a72.js";import"./prosemirror-view-ef3f9f96.js";import"./prosemirror-keymap-776f822d.js";import"./w3c-keyname-a25e4cc1.js";import"./prosemirror-commands-5c2a1a07.js";import"./prosemirror-schema-list-1c96ec4d.js";import"./vue-clipboard3-f5f9feb9.js";import"./clipboard-3d849c41.js";import"./echarts-d6620a89.js";import"./zrender-9797a04d.js";import"./tslib-54e39b60.js";import"./highlight.js-1b502259.js";import"./@highlightjs-7a15facb.js";import"./path-to-regexp-767716ea.js";import"./constant-bad60a54.js";const H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAqCAYAAAD1T9h6AAAAAXNSR0IArs4c6QAABLlJREFUaEPlmVtsFFUYx893ZpfeaRNjK7ZJLexuu7NFSmeXNgG1Gn0ooQajpdjiBR9MJFxsvRSxbVb0xRiFUKOJLxrBW5aERIhGCbItUMDtFKTt2psiRiNYH7iVXnbn+8xsO9tl09JtdyuzcV5mds+Zc37/7zYz5wALOQoLS7JGyP8sQ1bKGGQRoTG0/XZdA3AfY3SJcXYqEQyfdHWdvqSxgHZRYHNU+JFeIsKU2wUaybwAfMjA4d2ebs9BtX9AgArvU5SmSAbQSx+jIOxURUAgbBTlK83ynEMvY8ZmY2Zit9ftvq4HYLGsLNX394iNMd8WRMoPWB74UKIgVIHJJtWTQk+of6rwC5OkjbL8kU8P4OEMkvS88eqw/HFQhAD7wWSVDhBRzriABZv7vadO6xFeYzKLpSWIY++PewH+AJPV3qZVm4S7Fj6ol7CZzohqOI1evHp0Iox8sKSg2KN1/qWnw6Fn62tsocz/TwGVlZXCT94LNYj+RwAgl4gucG44vEzM/czlcinz7cWoPKDCn+08/wEyLA4H5Yx3FC3N2zTfIqISYLGteFpR/Fums7IgGJr7un/8dD69EJUAk7V4LxErCFQBzj9MT1r05ZXhv9YT4gvjlYH1DPzc8ZRuBZhFqRWRklTAjJTsB2T54A1Jqki+PPRny8TDcLjfK9+vWwFx74G4z4H/ogoREeTb7CsBgHq6PG3qOTQko0pidaD5fA6o8BbR3oBEj6pzCRxq+7zy8ZgKmK8EHYd37EDCtdocBoG/2NvdfkL3AlR4s016jZA9psFygK/7vO1vxTyEYu2BcXh7PSE9ro0NjB/asH7Nm06nE8PnizoHYi0g9KNqIu6/qV5X8cZU8Gq7rgSYbfZXUcHKkLD5tqaqwjkdvK4ELBEdLzNUqibh+Xc1VWuabgWvGwEmcUUdof/JYMxz/v1yW15TJG+yMQshkyhVAmOrgbHf05JYsyzL/0SSHyabvZYUrNb6ChwOL7MtbowEPiYeUFcHrg3LDQrS6qAFAS4KxpStvedaz99KhNnq2IakbJgMG+FIdlZKg9vt9kciPmoBRUVlGddHh94hUorCJwQO1xYwXuf1es5OBWMWpa2IFHzV5sB/yM5KfX028FEJKCgqvcc/6t9NhNlBC3JwM8ZKtFdsAD7GjdDUd85zJFSERbRvVhCfmbyPH83OTN0xW/g5C7DYHA4kfJuQ0iYgCAzCnoEuzz7LUqkAFbabkO7Q2rjAd/V3t3+h/rZYHZsUUjZOJiy05GSmbZ8L/JwEWKzSWmRsOxEJ6gCcwwgJvGGg0xP4iFGP/OUr71ZGR/cQYm4QVOCfM6QRInouBL41JzOtfq7wsxYQnnQAbJAboK6vU+4Jj3NJejj9yo3L7xHhvVPlAAA7lp5sr4926TLiMmoRpVUK0q6QeO9NTUiuPXPm2OB0FaO8vDxh4LfBnUj40E19BDiRkSi9Ei38rDwQKgA4tNyZvrjx5EnX8Ezlzul08n2uQ9u0Wq9WG2NhXqPX5Rqb6d5I2iP2QCABRWmVeq5eV9E20yM+fHKr9b5FfgMl9Xce/zUSsEj73CQg7hd34395Pd43OOJ+i0lNnLje5NMyP663WTUR8bjR/S+/EAdi6i5GNAAAAABJRU5ErkJggg==",K="/business/assets/image-uni-3e951cbb.png",j=G({__name:"index",props:{imageSourceType:{type:String,default:"album"}},setup(h){const s=h,n=R(),o=R(),c={web_album:{icon:H,title:"图片"},uni_album:{icon:K,title:"图片"},uni_camera:{icon:F,title:"拍照"}};v.watch(I.CONV,{currentConversation:e=>{o.value=e}});const u=M(()=>m?s.imageSourceType==="camera"?c.uni_camera:c.uni_album:c.web_album),E=()=>{var e,i,t,p;m?J&&((e=g)!=null&&e.chooseMedia)?(i=g)==null||i.chooseMedia({count:1,mediaType:["image"],sizeType:["original","compressed"],sourceType:[s.imageSourceType],success:function(a){l(a)}}):(t=g)==null||t.chooseImage({count:1,sourceType:[s.imageSourceType],success:function(a){l(a)}}):(p=n.value)!=null&&p.click&&n.value.click()},U=e=>{var i,t;((t=(i=e==null?void 0:e.target)==null?void 0:i.files)==null?void 0:t.length)<=0||(l(e==null?void 0:e.target),e.target.value="")},l=e=>{var a,d,A,f,b;if(!e)return;const i={to:((d=(a=o==null?void 0:o.value)==null?void 0:a.groupProfile)==null?void 0:d.groupID)||((f=(A=o==null?void 0:o.value)==null?void 0:A.userProfile)==null?void 0:f.userID),conversationType:(b=o==null?void 0:o.value)==null?void 0:b.type,payload:{file:e},needReadReceipt:P()},t={conversation:o.value,payload:i.payload,messageType:x.TYPES.MSG_IMAGE},p={offlinePushInfo:z.create(t)};S.sendImageMessage(i,p)};return(e,i)=>(y(),q(O,{iconFile:r(u).icon,title:r(u).title,iconWidth:r(m)?"32px":"21px",iconHeight:r(m)?"25px":"18px",needDialog:!1,onOnIconClick:E},{default:N(()=>[r(m)?C("",!0):(y(),Y("div",{key:0,class:_(["image-upload",!r(T)&&"image-upload-h5"])},[w("input",{ref_key:"inputRef",ref:n,title:"图片",type:"file","data-type":"image",accept:"image/gif,image/jpeg,image/jpg,image/png,image/bmp,image/webp",onChange:U},null,544)],2))]),_:1},8,["iconFile","title","iconWidth","iconHeight"]))}});const $e=B(j,[["__scopeId","data-v-6a05d4d0"]]);export{$e as default};
